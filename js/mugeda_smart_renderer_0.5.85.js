(function(){"use strict";var win=typeof self>"u"?window:self,root=globalThis.Mugine=globalThis.Mugine||{},mod={};const namespace=mod.namespace=function(e,t){var r=root;t==null&&(t={}),e=e.split(".");var a=r,n=e.length;return e.forEach(function(o,s){a[o]==null&&(n-1===s?a[o]=t:a[o]={}),a=a[o]}),t},exportName=mod.exportName=function(e,t){var r=t.length,a,n,o;for(o=0;o<r;o+=2)a=t[o],n=t[o+1],e[a]=n};var hasProp={}.hasOwnProperty;const extend=mod.extend=function(e,t){for(var r in t)hasProp.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=e.__super__=t.prototype,e};var readOnlyFun=function(){throw new ReferenceError};mod.definePropertyReadOnly=function(e,t){var r=t.length,a={},n,o,s;for(s=0;s<r;s+=2)n=t[s],o=t[s+1],a[n]={get:o,set:readOnlyFun,configurable:!0};Object.defineProperties(e,a)};const definePropertyGetSet=mod.definePropertyGetSet=function(e,t){var r=t.length,a={},n,o,s,l;for(l=0;l<r;l+=3)n=t[l],o=t[l+1],s=t[l+2],a[n]={get:o,set:s,configurable:!0};Object.defineProperties(e,a)};mod.debounce=function(e,t,r){var a;return function(){var n=this,o=arguments,s=function(){a=null,r||e.apply(n,o)},l=r&&!a;clearTimeout(a),a=setTimeout(s,t),l&&e.apply(n,o)}},mod.getWndSize=function(){var e=document.documentElement,t=e&&e.clientHeight===0;function r(){var o=document,s=o.createElement("div");s.style.height="2500px",o.body.insertBefore(s,o.body.firstChild);var l=o.documentElement.clientHeight>2400;return o.body.removeChild(s),l}var a=window.top===window;if(typeof document.clientWidth=="number")return{width:document.clientWidth,height:document.clientHeight};if(a&&(t||r())){var n=document.body;return{width:n.clientWidth,height:n.clientHeight}}else return{width:e.clientWidth,height:e.clientHeight}};var jsonpQuene={};const _jsonp=mod._jsonp=function(e,t,r){if(jsonpQuene[e])return jsonpQuene[e].push(r);jsonpQuene[e]=[r];var a=function(s,l){jsonpQuene[e].forEach(function(_){_(s,l)})},n=document.createElement("script");n.src=e,window[t]=function(s){a(null,s),o()},n.onload=function(){n.parentNode&&(a(!0),o())},n.onerror=function(){a(!0),o()};var o=function(){n.parentNode.removeChild(n),delete jsonpQuene[e]};document.body.appendChild(n)};win.MugineRequire=mod.require=function(e){var t=root;return e.split("/").forEach(function(r){if(t=t[r],!t)return console.error("module not found: "+e)}),t},namespace("Utils.Module",mod),exportName(mod,["require",mod.require,"namespace",mod.namespace,"extend",mod.extend,"definePropertyReadOnly",mod.definePropertyReadOnly,"definePropertyGetSet",mod.definePropertyGetSet]);var ActionEvent=function(){};ActionEvent.APPEAR="appear",ActionEvent.CLICK="click",ActionEvent.MOUSEOVER="mouseover",ActionEvent.MOUSEOUT="mouseout",ActionEvent.CHANGE="change",ActionEvent.OTHER="other",ActionEvent.DRAG="drag",ActionEvent.DRAGEND="dragend",ActionEvent.DROP="drop",ActionEvent.DRAGOUT="dragout",ActionEvent.PRESETEND="preset_end",ActionEvent.LIKED="liked",ActionEvent.UNLIKED="unliked",ActionEvent.VIDEOSTART="video_start",ActionEvent.VIDEOPAUSE="video_pause",ActionEvent.VIDEOEND="video_end",ActionEvent.VIDEOAT="video_at",ActionEvent.WIPERFINISH="wiper_finish",ActionEvent.CANVASFINISH="canvas_save_finish",ActionEvent.CONNECTORCONNECTED="connector_connected",ActionEvent.CONNECTORDISCONNECTED="connector_disconnected",ActionEvent.TOUCHSTART="touch_start",ActionEvent.TOUCHEND="touch_end",ActionEvent.SLIDERIGHT="slide_right",ActionEvent.SLIDERIGHTUP="slide_right_up",ActionEvent.SLIDEUP="slide_up",ActionEvent.SLIDELEFTUP="slide_left_up",ActionEvent.SLIDELEFT="slide_left",ActionEvent.SLIDELEFTDOWN="slide_left_down",ActionEvent.SLIDEDOWN="slide_down",ActionEvent.SLIDERIGHTDOWN="slide_right_down",ActionEvent.AUDIOSTART="audio_start",ActionEvent.AUDIOPAUSE="audio_pause",ActionEvent.AUDIOSTOP="audio_stop",ActionEvent.AUDIOAT="audio_at",ActionEvent.ENTERFRAME="appear",ActionEvent.CUSTOMEVENT="custom_event",ActionEvent.BEHAVIOR_SUCCESS="behavior_success",ActionEvent.HAN_COMPLETE="han_complete",ActionEvent.SCRIPT="script",mod.namespace("Action.ActionEvent",ActionEvent);var userAgent=typeof navigator<"u"?navigator.userAgent:"",Browser$1={realUA:userAgent||"",simulateMobile:!1};if(Browser$1._globalObject=typeof self>"u"?window:self,URLSearchParams&&typeof location<"u"){var usp=new URLSearchParams(location.search);usp.get("force_mobile")&&(Object.defineProperty(navigator,"userAgent",{get:function(){return"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.146 Mobile Safari/537.36"}}),Browser$1.simulateMobile=!0,window.addEventListener("message",function(e){e.data&&e.data.type&&e.data.type==="devicerotation"&&(window.orientation=e.data.orientation)}))}function detect(e){var t=this.os={},r=this.browser={},a=e.match(/DailyNewspaper\/[\d.]+\s?\(\s?(.+)\s?;\s?(.+)\s?;\s?(.+)\s?\)/);if(a&&a.length>=3)if(a[1]==="Android")e="Mozilla/5.0 (Linux; Android "+a[2]+"; "+a[3]+" Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.84 Mobile Safari/537.36";else{var n=a[2].replace(/iOS\s+/,"").replace(/\./g,"_");e="Mozilla/5.0 ("+a[1]+"; CPU "+a[1]+" OS "+n+" like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/"+n.split("_")[0]+".0 Mobile/15A356 Safari/604.1"}var o=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),s=e.match(/(Android);?[\s\/]+([\d.]+)?/),l=!!e.match(/\(Macintosh\; Intel /),_=e.match(/(iPad).*OS\s([\d_]+)/),c=e.match(/(iPod)(.*OS\s([\d_]+))?/),d=!_&&e.match(/(iPhone\sOS)\s([\d_]+)/),u=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),f=e.match(/Windows Phone ([\d.]+)/),p=u&&e.match(/TouchPad/),v=e.match(/Kindle\/([\d.]+)/),h=e.match(/Silk\/([\d._]+)/),g=e.match(/(BlackBerry).*Version\/([\d.]+)/),w=e.match(/(BB10).*Version\/([\d.]+)/),y=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),x=e.match(/PlayBook/),m=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),A=e.match(/Firefox\/([\d.]+)/),T=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),b=!m&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),C=b||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);if((r.webkit=!!o)&&(r.version=o[1]),s&&(t.android=!0,t.version=s[2]),d&&!c&&(t.ios=t.iphone=!0,t.version=d[2].replace(/_/g,"."),t.iphoneX=screen.availHeight==812&&screen.availWidth==375),d||_){var M=!1;window.addEventListener("pageshow",function(){M&&window.location.reload()}),window.addEventListener("pagehide",function(){M=!0})}(d||_)&&Browser$1._globalObject._mrmcp.type=="article"&&document.addEventListener("visibilitychange",function(){document.hidden||setTimeout(function(){window.location.reload()},2e3)}),_&&(t.ios=t.ipad=!0,t.version=_[2].replace(/_/g,".")),c&&(t.ios=t.ipod=!0,t.version=c[3]?c[3].replace(/_/g,"."):null),f&&(t.wp=!0,t.version=f[1]),u&&(t.webos=!0,t.version=u[2]),p&&(t.touchpad=!0),l&&(t.osx=!0),g&&(t.blackberry=!0,t.version=g[2]),w&&(t.bb10=!0,t.version=w[2]),y&&(t.rimtabletos=!0,t.version=y[2]),x&&(r.playbook=!0),v&&(t.kindle=!0,t.version=v[1]),h&&(r.silk=!0,r.version=h[1]),!h&&t.android&&e.match(/Kindle Fire/)&&(r.silk=!0),m&&(r.chrome=!0,r.version=m[1]),A&&(r.firefox=!0,r.version=A[1]),T&&(r.ie=!0,r.version=T[1]),C&&(l||t.ios)&&(r.safari=!0,l&&(r.version=C[1])),b&&(r.webview=!0),t.tablet=!!(_||x||s&&!e.match(/Mobile/)||A&&e.match(/Tablet/)||T&&!e.match(/Phone/)&&e.match(/Touch/)),t.phone=!!(!t.tablet&&(s||d||u||g||w||m&&e.match(/Android/)||m&&e.match(/CriOS\/([\d.]+)/)||c||A&&e.match(/Mobile/)||T&&e.match(/Touch/)))}typeof navigator<"u"?detect.call(Browser$1,navigator.userAgent):(Browser$1.os={phone:!0},Browser$1.browser={});var mobile=Browser$1.os.phone||Browser$1.os.tablet;typeof window<"u"&&window.PointerEvent&&navigator.maxTouchPoints>0&&!mobile?(Browser$1.InputStart="pointerdown",Browser$1.InputMove="pointermove",Browser$1.InputEnd="pointerup"):mobile&&!Browser$1.simulateMobile?(Browser$1.InputStart="touchstart",Browser$1.InputMove="touchmove",Browser$1.InputEnd="touchend"):(Browser$1.InputStart="mousedown",Browser$1.InputMove="mousemove",Browser$1.InputEnd="mouseup"),Browser$1.Click="click",Browser$1.enable3DRendering=void 0,Browser$1.isTestEnvir=typeof navigator<"u"&&navigator.userAgent.indexOf("Casperjs")!==-1,Browser$1.prefix=(function(){var e=typeof document>"u"?["-webkit-"]:window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||["",""])[1],r="WebKit|Moz|MS".match(new RegExp("("+t+")","i"))[1],a={dom:r,lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)};return mod.exportName(a,["css",a.css]),a})();var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",MsTransition:"MSTransitionEnd",transition:"transitionend"};Browser$1.TransitionEnd=transEndEventNames[Browser$1.prefix.js+"Transition"];var testTransitionEnd=function(e){var t=document.createElement("div");document.body.appendChild(t),t.style.cssText+="position:absolute; left:0px; top: -100px;"+Browser$1.prefix.css+"transition:left 20ms;",setTimeout(function(){t.addEventListener(Browser$1.TransitionEnd,function(){e(!0),t.parentNode.removeChild(t)}),setTimeout(function(){t.style.left="10px"})})};Browser$1._isSupportWoff=function(){return null},Browser$1.makeTest=function(){testTransitionEnd(function(e){Browser$1.haveTransitionEnd=e})},Browser$1._isServer=typeof window>"u",Browser$1.devicePixelRatio=Math.min(3,Browser$1._globalObject.devicePixelRatio||1);const isWeChat=Browser$1._isWeChat=function(){return typeof navigator<"u"&&navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1};Browser$1._weChat=Browser$1._isWeChat(),Browser$1._getWechatJSBridge=function(e){if(!Browser$1._isServer){var t=Browser$1._globalObject;if(t.top===t)t.WeixinJSBridge&&t.WeixinJSBridge._hasInit!==!1?e(t.WeixinJSBridge):document.addEventListener("WeixinJSBridgeReady",function(){e(t.WeixinJSBridge)},!1);else try{t.top.WeixinJSBridge&&t.top.WeixinJSBridge._hasInit!==!1?e(t.top.WeixinJSBridge):document.addEventListener("WeixinJSBridgeReady",function(){e(t.top.WeixinJSBridge)},!1)}catch{t.location.href.indexOf("m_dbg=1")>0&&Mugeda.log("由于跨域，WeixinJSBridge加载失败！")}}};const isPreview=Browser$1._isPreview=function(){return location.pathname==="/client/preview_css3.html"||location.pathname==="/client/content_preview.html"};if(Browser$1._getRedirectUrl=function(e){return Browser$1._getWeixinServerHost()+"/server/redirect.php?url="+encodeURIComponent(e)},Browser$1._getWeixinServerHost=function(){var e="//weika.mugeda.com";return Browser$1._globalObject._mrmcp&&Browser$1._globalObject._mrmcp.data_server&&(e=Browser$1._globalObject._mrmcp.data_server),e.indexOf("//")===0&&(typeof location>"u"?e="https:"+e:e=location.protocol+e),e},Browser$1._supportWebP=!1,typeof Image<"u"){var webP="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",img=new Image;img.src=webP,img.onload=function(){Browser$1._supportWebP=img.width>0&&img.height>0}}Browser$1._webPImage=img,Browser$1._needFixScreenCTM=null,Browser$1._checkNeedFixScreenCTM=function(){if(Browser$1._needFixScreenCTM===null){var e=document.createElement("div");e.style.transform="scale(2)",e.innerHTML="<svg></svg>";var t=e.querySelector("svg");document.body.appendChild(e);var r;try{r=t.getScreenCTM()}catch{r=null}document.body.removeChild(e),r&&r.a!==2?Browser$1._needFixScreenCTM=!0:Browser$1._needFixScreenCTM=!1}return Browser$1._needFixScreenCTM};var maxTextureSize=0;Browser$1._getMaxTextureSize=function(){if(maxTextureSize)return maxTextureSize;const e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return t?(maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),console.log("maxTextureSize",maxTextureSize),maxTextureSize):(console.warn("WebGL not supported"),maxTextureSize=4096,4096)};var passiveSupported=!1;try{var options=Object.defineProperty({},"passive",{get:function(){passiveSupported=!0}});window.addEventListener("test",null,options)}catch(e){}Browser$1._passiveSupported=passiveSupported,mod.exportName(Browser$1,["prefix",Browser$1.prefix,"getWechatJSBridge",Browser$1._getWechatJSBridge,"getWeixinServerHost",Browser$1._getWeixinServerHost,"isPC",!Browser$1.os.phone&&!Browser$1.os.tablet,"isPhone",!!Browser$1.os.phone,"isTablet",!!Browser$1.os.tablet,"isIOS",!!Browser$1.os.ios,"isAndroid",!!Browser$1.os.android,"isIPhone",!!Browser$1.os.iphone,"isIPad",!!Browser$1.os.ipad,"isMac",!!Browser$1.os.osx,"isChrome",!!Browser$1.browser.chrome,"isFirefox",!!Browser$1.browser.firefox,"isSafari",!!Browser$1.browser.safari,"isWeChat",Browser$1._isWeChat,"globalObject",Browser$1._globalObject]),mod.namespace("Utils.Browser",Browser$1);var AniObjectTypeEnum=(e=>(e[e.SHAPE_LINE=2001]="SHAPE_LINE",e[e.SHAPE_CURVE=2002]="SHAPE_CURVE",e[e.SHAPE_RECTANGLE=2003]="SHAPE_RECTANGLE",e[e.SHAPE_ELLIPSE=2004]="SHAPE_ELLIPSE",e[e.SHAPE_PICTURE=2005]="SHAPE_PICTURE",e[e.SHAPE_POLYGON=2006]="SHAPE_POLYGON",e[e.SHAPE_SELECT=2007]="SHAPE_SELECT",e[e.SHAPE_SCALE=2008]="SHAPE_SCALE",e[e.SHAPE_ROUNDED=2009]="SHAPE_ROUNDED",e[e.SHAPE_TEXT=2010]="SHAPE_TEXT",e[e.SHAPE_BSHAPE=2011]="SHAPE_BSHAPE",e[e.SHAPE_PROPERTY=2012]="SHAPE_PROPERTY",e[e.SHAPE_NODE=2013]="SHAPE_NODE",e[e.SHAPE_GROUP=2014]="SHAPE_GROUP",e[e.SHAPE_SPLINE=2015]="SHAPE_SPLINE",e[e.SHAPE_ZOOM=2016]="SHAPE_ZOOM",e[e.SHAPE_CAMERA=2017]="SHAPE_CAMERA",e[e.SHAPE_PATH=2018]="SHAPE_PATH",e[e.SHAPE_PENCIL=2019]="SHAPE_PENCIL",e[e.SHAPE_AUDIO=2020]="SHAPE_AUDIO",e[e.SHAPE_CLIP=2021]="SHAPE_CLIP",e[e.SHAPE_VIDEO=2022]="SHAPE_VIDEO",e[e.SHAPE_SPRITE=2023]="SHAPE_SPRITE",e[e.SHAPE_FORM=2024]="SHAPE_FORM",e[e.SHAPE_IMVIDEO=2025]="SHAPE_IMVIDEO",e[e.SHAPE_TIMER=2026]="SHAPE_TIMER",e[e.SHAPE_RANDOM=2027]="SHAPE_RANDOM",e[e.SHAPE_VARIABLE=2028]="SHAPE_VARIABLE",e[e.SHAPE_GYRO=2029]="SHAPE_GYRO",e[e.SHAPE_SLIDE=2030]="SHAPE_SLIDE",e[e.SHAPE_INPUTTEXT=2031]="SHAPE_INPUTTEXT",e[e.SHAPE_COMPONENT=2032]="SHAPE_COMPONENT",e[e.SHAPE_IFRAME=2033]="SHAPE_IFRAME",e[e.SHAPE_CANVAS=2034]="SHAPE_CANVAS",e[e.SHAPE_WIPER=2035]="SHAPE_WIPER",e[e.SHAPE_LIKE=2036]="SHAPE_LIKE",e[e.SHAPE_CHART=2037]="SHAPE_CHART",e[e.SHAPE_CHECKBOX=2038]="SHAPE_CHECKBOX",e[e.SHAPE_FORMSELECT=2039]="SHAPE_FORMSELECT",e[e.SHAPE_RICHTEXT=2040]="SHAPE_RICHTEXT",e[e.SHAPE_RADIOBOX=2041]="SHAPE_RADIOBOX",e[e.SHAPE_AVATAR=2042]="SHAPE_AVATAR",e[e.SHAPE_NICKNAME=2043]="SHAPE_NICKNAME",e[e.SHAPE_CHOOSEIMAGE=2044]="SHAPE_CHOOSEIMAGE",e[e.SHAPE_RECORDAUDIO=2045]="SHAPE_RECORDAUDIO",e[e.SHAPE_VR=2046]="SHAPE_VR",e[e.SHAPE_VOTE=2047]="SHAPE_VOTE",e[e.SHAPE_CONNECTOR=2048]="SHAPE_CONNECTOR",e[e.SHAPE_LOTTERY=2049]="SHAPE_LOTTERY",e[e.SHAPE_DRAGGER=2050]="SHAPE_DRAGGER",e[e.SHAPE_LOCALDATA=2051]="SHAPE_LOCALDATA",e[e.SHAPE_COUNTER=2070]="SHAPE_COUNTER",e[e.SHAPE_RANKING=2071]="SHAPE_RANKING",e[e.SHAPE_REFERENCE=2052]="SHAPE_REFERENCE",e[e.SHAPE_CHECKOUT=2053]="SHAPE_CHECKOUT",e[e.SHAPE_DYNAMICQUESTION=2054]="SHAPE_DYNAMICQUESTION",e[e.SHAPE_DATABASE=2072]="SHAPE_DATABASE",e[e.SHAPE_METABASE=2073]="SHAPE_METABASE",e[e.SHAPE_ACTION=2074]="SHAPE_ACTION",e[e.SHAPE_LIVE=2075]="SHAPE_LIVE",e[e.SHAPE_WEAPP=2076]="SHAPE_WEAPP",e[e.SHAPE_MAP=2077]="SHAPE_MAP",e[e.SHAPE_TIKU_RADIO=2078]="SHAPE_TIKU_RADIO",e[e.SHAPE_TIKU_CHECKBOX=2079]="SHAPE_TIKU_CHECKBOX",e[e.SHAPE_TIKU_SCORE=2080]="SHAPE_TIKU_SCORE",e[e.SHAPE_TIKU_GAP=2081]="SHAPE_TIKU_GAP",e[e.SHAPE_TIKU_AUDIO=2055]="SHAPE_TIKU_AUDIO",e[e.SHAPE_TIKU_CUSTOM=2056]="SHAPE_TIKU_CUSTOM",e[e.SHAPE_TIKU_HAN=2057]="SHAPE_TIKU_HAN",e[e.SHAPE_DRAG=2082]="SHAPE_DRAG",e[e.SHAPE_VOTE_COMPONENT=2083]="SHAPE_VOTE_COMPONENT",e[e.SHAPE_TIKU_JUDGMENT=2084]="SHAPE_TIKU_JUDGMENT",e[e.SHAPE_DATABASE_TABLE=2086]="SHAPE_DATABASE_TABLE",e[e.SHAPE_COMPLEX_TIMER=2085]="SHAPE_COMPLEX_TIMER",e[e.SHAPE_CUSTOM_COMPONENT=2087]="SHAPE_CUSTOM_COMPONENT",e))(AniObjectTypeEnum||{});const shapeTypes=[2001,2002,2003,2004,2006,2009],textLikeTypes=[2010,2040],Lang=globalThis.Lang||{},getAllLayers=e=>{const t=e.pages||[];return(e.layers||[]).concat(t.flatMap(r=>r.layers||[]))},getAllSymbols=e=>e.symbols||[],flatGroup=e=>{let t=[];return(e.items||[]).forEach(r=>{r.type===AniObjectTypeEnum.SHAPE_GROUP?t=t.concat(flatGroup(r)):t.push(r)}),t.push(e),t};function getAllObjects(e){const t=getAllSymbols(e).flatMap(n=>n.layers||[]).flatMap(n=>(n.units||[]).flatMap(o=>o.objects||[])).flatMap(n=>n.type===2014?flatGroup(n):[n]),r=getAllLayers(e).flatMap(n=>(n.units||[]).flatMap(o=>o.objects||[])).flatMap(n=>n.type===2014?flatGroup(n):[n]);return t.concat(r)}const _safeParseBehaviorArray=e=>{try{return JSON.parse(e)}catch{return[]}},getAllBehaviors=e=>getAllObjects(e).filter(a=>a.param.action==="behavior").flatMap(a=>_safeParseBehaviorArray(a.param.behavior)),logicTypeEnum={CHECK_ELEMENT:1,EXPRESSION:2,EXPECTED:3,ENV:4,UNEXPECTED:5};Lang.TL_Line,Lang.TL_Curve,Lang.TL_Rectangle,Lang.TL_Ellipse,Lang.Image,Lang.TL_Polygon,Lang.TL_Select,Lang.TL_Scale,Lang.TL_Rounded,Lang.TL_Text,Lang.TL_Node,Lang.TL_Zoom,Lang.TL_Pencil,Lang.Audio,Lang.TL_Video,Lang[""],Lang.P_form,Lang.TL_Timer,Lang.TL_Complex_Timer,Lang.TL_Random,Lang.TL_Gyro,Lang.TL_Slide,Lang.IT_Input,Lang.IT_IFrame,Lang.TL_Draw,Lang.IT_Wiper,Lang.IT_Like,Lang.TL_Chart,Lang.TL_RichText,Lang.IT_Radio,Lang.IT_Checkbox,Lang.IT_List,Lang.Wechat_Avatar,Lang.Wechat_Nickname,Lang.Wechat_Chooseimage,Lang.Wechat_Recordaudio,Lang.TL_VR,Lang.IT_Vote,Lang.TL_Connector,Lang.bh_lottery,Lang.TL_Dragger,Lang.TL_LocalData,Lang.counter,Lang.ranking,Lang.TL_Aux,Lang.checkout,Lang.database,Lang.P_metabase,Lang.IT_Live,Lang.Wechat_Weapp,Lang.IT_Map,Lang.default_18,Lang.default_19,Lang.default_20,Lang.default_35,Lang.default_36,Lang.IT_Vote_Component,Lang.default_25;var util;(function(e){e.assertEqual=n=>{};function t(n){}e.assertIs=t;function r(n){throw new Error}e.assertNever=r,e.arrayToEnum=n=>{const o={};for(const s of n)o[s]=s;return o},e.getValidEnumValues=n=>{const o=e.objectKeys(n).filter(l=>typeof n[n[l]]!="number"),s={};for(const l of o)s[l]=n[l];return e.objectValues(s)},e.objectValues=n=>e.objectKeys(n).map(function(o){return n[o]}),e.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const o=[];for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&o.push(s);return o},e.find=(n,o)=>{for(const s of n)if(o(s))return s},e.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function a(n,o=" | "){return n.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}e.joinValues=a,e.jsonStringifyReplacer=(n,o)=>typeof o=="bigint"?o.toString():o})(util||(util={}));var objectUtil;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=e=>{switch(typeof e){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return Number.isNaN(e)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(e)?ZodParsedType.array:e===null?ZodParsedType.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&e instanceof Map?ZodParsedType.map:typeof Set<"u"&&e instanceof Set?ZodParsedType.set:typeof Date<"u"&&e instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(o){return o.message},a={_errors:[]},n=o=>{for(const s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(n);else if(s.code==="invalid_return_type")n(s.returnTypeError);else if(s.code==="invalid_arguments")n(s.argumentsError);else if(s.path.length===0)a._errors.push(r(s));else{let l=a,_=0;for(;_<s.path.length;){const c=s.path[_];_===s.path.length-1?(l[c]=l[c]||{_errors:[]},l[c]._errors.push(r(s))):l[c]=l[c]||{_errors:[]},l=l[c],_++}}};return n(this),a}static assert(t){if(!(t instanceof ZodError))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},a=[];for(const n of this.issues)if(n.path.length>0){const o=n.path[0];r[o]=r[o]||[],r[o].push(t(n))}else a.push(t(n));return{formErrors:a,fieldErrors:r}}get formErrors(){return this.flatten()}}ZodError.create=e=>new ZodError(e);const errorMap=(e,t)=>{let r;switch(e.code){case ZodIssueCode.invalid_type:e.received===ZodParsedType.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${util.joinValues(e.keys,", ")}`;break;case ZodIssueCode.invalid_union:r="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${util.joinValues(e.options)}`;break;case ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${util.joinValues(e.options)}, received '${e.received}'`;break;case ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case ZodIssueCode.invalid_date:r="Invalid date";break;case ZodIssueCode.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:util.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case ZodIssueCode.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case ZodIssueCode.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case ZodIssueCode.custom:r="Invalid input";break;case ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case ZodIssueCode.not_finite:r="Number must be finite";break;default:r=t.defaultError,util.assertNever(e)}return{message:r}};let overrideErrorMap=errorMap;function setErrorMap(e){overrideErrorMap=e}function getErrorMap(){return overrideErrorMap}const makeIssue=e=>{const{data:t,path:r,errorMaps:a,issueData:n}=e,o=[...r,...n.path||[]],s={...n,path:o};if(n.message!==void 0)return{...n,path:o,message:n.message};let l="";const _=a.filter(c=>!!c).slice().reverse();for(const c of _)l=c(s,{data:t,defaultError:l}).message;return{...n,path:o,message:l}},EMPTY_PATH=[];function addIssueToContext(e,t){const r=getErrorMap(),a=makeIssue({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===errorMap?void 0:errorMap].filter(n=>!!n)});e.common.issues.push(a)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const a=[];for(const n of r){if(n.status==="aborted")return INVALID;n.status==="dirty"&&t.dirty(),a.push(n.value)}return{status:t.value,value:a}}static async mergeObjectAsync(t,r){const a=[];for(const n of r){const o=await n.key,s=await n.value;a.push({key:o,value:s})}return ParseStatus.mergeObjectSync(t,a)}static mergeObjectSync(t,r){const a={};for(const n of r){const{key:o,value:s}=n;if(o.status==="aborted"||s.status==="aborted")return INVALID;o.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||n.alwaysSet)&&(a[o.value]=s.value)}return{status:t.value,value:a}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=e=>({status:"dirty",value:e}),OK=e=>({status:"valid",value:e}),isAborted=e=>e.status==="aborted",isDirty=e=>e.status==="dirty",isValid=e=>e.status==="valid",isAsync=e=>typeof Promise<"u"&&e instanceof Promise;var errorUtil;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(errorUtil||(errorUtil={}));class ParseInputLazyPath{constructor(t,r,a,n){this._cachedPath=[],this.parent=t,this.data=r,this._path=a,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(e,t)=>{if(isValid(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ZodError(e.common.issues);return this._error=r,this._error}}};function processCreateParams(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:a,description:n}=e;if(t&&(r||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:n}:{errorMap:(s,l)=>{const{message:_}=e;return s.code==="invalid_enum_value"?{message:_??l.defaultError}:typeof l.data>"u"?{message:_??a??l.defaultError}:s.code!=="invalid_type"?{message:l.defaultError}:{message:_??r??l.defaultError}},description:n}}class ZodType{get description(){return this._def.description}_getType(t){return getParsedType(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:getParsedType(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ParseStatus,ctx:{common:t.parent.common,data:t.data,parsedType:getParsedType(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(isAsync(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const a=this.safeParse(t,r);if(a.success)return a.data;throw a.error}safeParse(t,r){const a={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:getParsedType(t)},n=this._parseSync({data:t,path:a.path,parent:a});return handleResult(a,n)}"~validate"(t){var a,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:getParsedType(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:r});return isValid(o)?{value:o.value}:{issues:r.common.issues}}catch(o){(n=(a=o==null?void 0:o.message)==null?void 0:a.toLowerCase())!=null&&n.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(o=>isValid(o)?{value:o.value}:{issues:r.common.issues})}async parseAsync(t,r){const a=await this.safeParseAsync(t,r);if(a.success)return a.data;throw a.error}async safeParseAsync(t,r){const a={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:getParsedType(t)},n=this._parse({data:t,path:a.path,parent:a}),o=await(isAsync(n)?n:Promise.resolve(n));return handleResult(a,o)}refine(t,r){const a=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,o)=>{const s=t(n),l=()=>o.addIssue({code:ZodIssueCode.custom,...a(n)});return typeof Promise<"u"&&s instanceof Promise?s.then(_=>_?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(t,r){return this._refinement((a,n)=>t(a)?!0:(n.addIssue(typeof r=="function"?r(a,n):r),!1))}_refinement(t){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(t){return ZodUnion.create([this,t],this._def)}and(t){return ZodIntersection.create(this,t,this._def)}transform(t){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:r,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:r,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return ZodPipeline.create(this,t)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,jwtRegex=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4CidrRegex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Regex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ipv6CidrRegex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64urlRegex=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function timeRegex(e){return new RegExp(`^${timeRegexSource(e)}$`)}function datetimeRegex(e){let t=`${dateRegexSource}T${timeRegexSource(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function isValidIP(e,t){return!!((t==="v4"||!t)&&ipv4Regex.test(e)||(t==="v6"||!t)&&ipv6Regex.test(e))}function isValidJWT(e,t){if(!jwtRegex.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(a));return!(typeof n!="object"||n===null||"typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||t&&n.alg!==t)}catch{return!1}}function isValidCidr(e,t){return!!((t==="v4"||!t)&&ipv4CidrRegex.test(e)||(t==="v6"||!t)&&ipv6CidrRegex.test(e))}class ZodString extends ZodType{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==ZodParsedType.string){const o=this._getOrReturnCtx(t);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:o.parsedType}),INVALID}const a=new ParseStatus;let n;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),a.dirty());else if(o.kind==="max")t.data.length>o.value&&(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),a.dirty());else if(o.kind==="length"){const s=t.data.length>o.value,l=t.data.length<o.value;(s||l)&&(n=this._getOrReturnCtx(t,n),s?addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),a.dirty())}else if(o.kind==="email")emailRegex.test(t.data)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{validation:"email",code:ZodIssueCode.invalid_string,message:o.message}),a.dirty());else if(o.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(t.data)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{validation:"emoji",code:ZodIssueCode.invalid_string,message:o.message}),a.dirty());else if(o.kind==="uuid")uuidRegex.test(t.data)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{validation:"uuid",code:ZodIssueCode.invalid_string,message:o.message}),a.dirty());else if(o.kind==="nanoid")nanoidRegex.test(t.data)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:o.message}),a.dirty());else if(o.kind==="cuid")cuidRegex.test(t.data)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{validation:"cuid",code:ZodIssueCode.invalid_string,message:o.message}),a.dirty());else if(o.kind==="cuid2")cuid2Regex.test(t.data)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:o.message}),a.dirty());else if(o.kind==="ulid")ulidRegex.test(t.data)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{validation:"ulid",code:ZodIssueCode.invalid_string,message:o.message}),a.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{n=this._getOrReturnCtx(t,n),addIssueToContext(n,{validation:"url",code:ZodIssueCode.invalid_string,message:o.message}),a.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{validation:"regex",code:ZodIssueCode.invalid_string,message:o.message}),a.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{code:ZodIssueCode.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),a.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{code:ZodIssueCode.invalid_string,validation:{startsWith:o.value},message:o.message}),a.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{code:ZodIssueCode.invalid_string,validation:{endsWith:o.value},message:o.message}),a.dirty()):o.kind==="datetime"?datetimeRegex(o).test(t.data)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{code:ZodIssueCode.invalid_string,validation:"datetime",message:o.message}),a.dirty()):o.kind==="date"?dateRegex.test(t.data)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{code:ZodIssueCode.invalid_string,validation:"date",message:o.message}),a.dirty()):o.kind==="time"?timeRegex(o).test(t.data)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{code:ZodIssueCode.invalid_string,validation:"time",message:o.message}),a.dirty()):o.kind==="duration"?durationRegex.test(t.data)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{validation:"duration",code:ZodIssueCode.invalid_string,message:o.message}),a.dirty()):o.kind==="ip"?isValidIP(t.data,o.version)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{validation:"ip",code:ZodIssueCode.invalid_string,message:o.message}),a.dirty()):o.kind==="jwt"?isValidJWT(t.data,o.alg)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{validation:"jwt",code:ZodIssueCode.invalid_string,message:o.message}),a.dirty()):o.kind==="cidr"?isValidCidr(t.data,o.version)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{validation:"cidr",code:ZodIssueCode.invalid_string,message:o.message}),a.dirty()):o.kind==="base64"?base64Regex.test(t.data)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{validation:"base64",code:ZodIssueCode.invalid_string,message:o.message}),a.dirty()):o.kind==="base64url"?base64urlRegex.test(t.data)||(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{validation:"base64url",code:ZodIssueCode.invalid_string,message:o.message}),a.dirty()):util.assertNever(o);return{status:a.value,value:t.data}}_regex(t,r,a){return this.refinement(n=>t.test(n),{validation:r,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(a)})}_addCheck(t){return new ZodString({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...errorUtil.errToObj(t)})}url(t){return this._addCheck({kind:"url",...errorUtil.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...errorUtil.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...errorUtil.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...errorUtil.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...errorUtil.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...errorUtil.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...errorUtil.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...errorUtil.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...errorUtil.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...errorUtil.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...errorUtil.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...errorUtil.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...errorUtil.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...errorUtil.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...errorUtil.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...errorUtil.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...errorUtil.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...errorUtil.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...errorUtil.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...errorUtil.errToObj(r)})}nonempty(t){return this.min(1,errorUtil.errToObj(t))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}ZodString.create=e=>new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...processCreateParams(e)});function floatSafeRemainder(e,t){const r=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,n=r>a?r:a,o=Number.parseInt(e.toFixed(n).replace(".","")),s=Number.parseInt(t.toFixed(n).replace(".",""));return o%s/10**n}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==ZodParsedType.number){const o=this._getOrReturnCtx(t);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:o.parsedType}),INVALID}let a;const n=new ParseStatus;for(const o of this._def.checks)o.kind==="int"?util.isInteger(t.data)||(a=this._getOrReturnCtx(t,a),addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:o.message}),n.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(a=this._getOrReturnCtx(t,a),addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(a=this._getOrReturnCtx(t,a),addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):o.kind==="multipleOf"?floatSafeRemainder(t.data,o.value)!==0&&(a=this._getOrReturnCtx(t,a),addIssueToContext(a,{code:ZodIssueCode.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(a=this._getOrReturnCtx(t,a),addIssueToContext(a,{code:ZodIssueCode.not_finite,message:o.message}),n.dirty()):util.assertNever(o);return{status:n.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,errorUtil.toString(r))}gt(t,r){return this.setLimit("min",t,!1,errorUtil.toString(r))}lte(t,r){return this.setLimit("max",t,!0,errorUtil.toString(r))}lt(t,r){return this.setLimit("max",t,!1,errorUtil.toString(r))}setLimit(t,r,a,n){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:a,message:errorUtil.toString(n)}]})}_addCheck(t){return new ZodNumber({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:errorUtil.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:errorUtil.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:errorUtil.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&util.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(r===null||a.value>r)&&(r=a.value):a.kind==="max"&&(t===null||a.value<t)&&(t=a.value)}return Number.isFinite(r)&&Number.isFinite(t)}}ZodNumber.create=e=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...processCreateParams(e)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==ZodParsedType.bigint)return this._getInvalidInput(t);let a;const n=new ParseStatus;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(a=this._getOrReturnCtx(t,a),addIssueToContext(a,{code:ZodIssueCode.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(a=this._getOrReturnCtx(t,a),addIssueToContext(a,{code:ZodIssueCode.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(a=this._getOrReturnCtx(t,a),addIssueToContext(a,{code:ZodIssueCode.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):util.assertNever(o);return{status:n.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:r.parsedType}),INVALID}gte(t,r){return this.setLimit("min",t,!0,errorUtil.toString(r))}gt(t,r){return this.setLimit("min",t,!1,errorUtil.toString(r))}lte(t,r){return this.setLimit("max",t,!0,errorUtil.toString(r))}lt(t,r){return this.setLimit("max",t,!1,errorUtil.toString(r))}setLimit(t,r,a,n){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:a,message:errorUtil.toString(n)}]})}_addCheck(t){return new ZodBigInt({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:errorUtil.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}ZodBigInt.create=e=>new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...processCreateParams(e)});class ZodBoolean extends ZodType{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==ZodParsedType.boolean){const a=this._getOrReturnCtx(t);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:a.parsedType}),INVALID}return OK(t.data)}}ZodBoolean.create=e=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...processCreateParams(e)});class ZodDate extends ZodType{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==ZodParsedType.date){const o=this._getOrReturnCtx(t);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:o.parsedType}),INVALID}if(Number.isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return addIssueToContext(o,{code:ZodIssueCode.invalid_date}),INVALID}const a=new ParseStatus;let n;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{code:ZodIssueCode.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),a.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(n=this._getOrReturnCtx(t,n),addIssueToContext(n,{code:ZodIssueCode.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),a.dirty()):util.assertNever(o);return{status:a.value,value:new Date(t.data.getTime())}}_addCheck(t){return new ZodDate({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:errorUtil.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:errorUtil.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}ZodDate.create=e=>new ZodDate({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(e)});class ZodSymbol extends ZodType{_parse(t){if(this._getType(t)!==ZodParsedType.symbol){const a=this._getOrReturnCtx(t);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:a.parsedType}),INVALID}return OK(t.data)}}ZodSymbol.create=e=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(e)});class ZodUndefined extends ZodType{_parse(t){if(this._getType(t)!==ZodParsedType.undefined){const a=this._getOrReturnCtx(t);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:a.parsedType}),INVALID}return OK(t.data)}}ZodUndefined.create=e=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(e)});class ZodNull extends ZodType{_parse(t){if(this._getType(t)!==ZodParsedType.null){const a=this._getOrReturnCtx(t);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:a.parsedType}),INVALID}return OK(t.data)}}ZodNull.create=e=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(e)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(t){return OK(t.data)}}ZodAny.create=e=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(e)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(t){return OK(t.data)}}ZodUnknown.create=e=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(e)});class ZodNever extends ZodType{_parse(t){const r=this._getOrReturnCtx(t);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:r.parsedType}),INVALID}}ZodNever.create=e=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(e)});class ZodVoid extends ZodType{_parse(t){if(this._getType(t)!==ZodParsedType.undefined){const a=this._getOrReturnCtx(t);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:a.parsedType}),INVALID}return OK(t.data)}}ZodVoid.create=e=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(e)});class ZodArray extends ZodType{_parse(t){const{ctx:r,status:a}=this._processInputParams(t),n=this._def;if(r.parsedType!==ZodParsedType.array)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:r.parsedType}),INVALID;if(n.exactLength!==null){const s=r.data.length>n.exactLength.value,l=r.data.length<n.exactLength.value;(s||l)&&(addIssueToContext(r,{code:s?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:l?n.exactLength.value:void 0,maximum:s?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),a.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),a.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),a.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>n.type._parseAsync(new ParseInputLazyPath(r,s,r.path,l)))).then(s=>ParseStatus.mergeArray(a,s));const o=[...r.data].map((s,l)=>n.type._parseSync(new ParseInputLazyPath(r,s,r.path,l)));return ParseStatus.mergeArray(a,o)}get element(){return this._def.type}min(t,r){return new ZodArray({...this._def,minLength:{value:t,message:errorUtil.toString(r)}})}max(t,r){return new ZodArray({...this._def,maxLength:{value:t,message:errorUtil.toString(r)}})}length(t,r){return new ZodArray({...this._def,exactLength:{value:t,message:errorUtil.toString(r)}})}nonempty(t){return this.min(1,t)}}ZodArray.create=(e,t)=>new ZodArray({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(t)});function deepPartialify(e){if(e instanceof ZodObject){const t={};for(const r in e.shape){const a=e.shape[r];t[r]=ZodOptional.create(deepPartialify(a))}return new ZodObject({...e._def,shape:()=>t})}else return e instanceof ZodArray?new ZodArray({...e._def,type:deepPartialify(e.element)}):e instanceof ZodOptional?ZodOptional.create(deepPartialify(e.unwrap())):e instanceof ZodNullable?ZodNullable.create(deepPartialify(e.unwrap())):e instanceof ZodTuple?ZodTuple.create(e.items.map(t=>deepPartialify(t))):e}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=util.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==ZodParsedType.object){const c=this._getOrReturnCtx(t);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:c.parsedType}),INVALID}const{status:a,ctx:n}=this._processInputParams(t),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const c in n.data)s.includes(c)||l.push(c);const _=[];for(const c of s){const d=o[c],u=n.data[c];_.push({key:{status:"valid",value:c},value:d._parse(new ParseInputLazyPath(n,u,n.path,c)),alwaysSet:c in n.data})}if(this._def.catchall instanceof ZodNever){const c=this._def.unknownKeys;if(c==="passthrough")for(const d of l)_.push({key:{status:"valid",value:d},value:{status:"valid",value:n.data[d]}});else if(c==="strict")l.length>0&&(addIssueToContext(n,{code:ZodIssueCode.unrecognized_keys,keys:l}),a.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of l){const u=n.data[d];_.push({key:{status:"valid",value:d},value:c._parse(new ParseInputLazyPath(n,u,n.path,d)),alwaysSet:d in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const c=[];for(const d of _){const u=await d.key,f=await d.value;c.push({key:u,value:f,alwaysSet:d.alwaysSet})}return c}).then(c=>ParseStatus.mergeObjectSync(a,c)):ParseStatus.mergeObjectSync(a,_)}get shape(){return this._def.shape()}strict(t){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,a)=>{var o,s;const n=((s=(o=this._def).errorMap)==null?void 0:s.call(o,r,a).message)??a.defaultError;return r.code==="unrecognized_keys"?{message:errorUtil.errToObj(t).message??n}:{message:n}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(t){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ZodObject({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new ZodObject({...this._def,catchall:t})}pick(t){const r={};for(const a of util.objectKeys(t))t[a]&&this.shape[a]&&(r[a]=this.shape[a]);return new ZodObject({...this._def,shape:()=>r})}omit(t){const r={};for(const a of util.objectKeys(this.shape))t[a]||(r[a]=this.shape[a]);return new ZodObject({...this._def,shape:()=>r})}deepPartial(){return deepPartialify(this)}partial(t){const r={};for(const a of util.objectKeys(this.shape)){const n=this.shape[a];t&&!t[a]?r[a]=n:r[a]=n.optional()}return new ZodObject({...this._def,shape:()=>r})}required(t){const r={};for(const a of util.objectKeys(this.shape))if(t&&!t[a])r[a]=this.shape[a];else{let o=this.shape[a];for(;o instanceof ZodOptional;)o=o._def.innerType;r[a]=o}return new ZodObject({...this._def,shape:()=>r})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)}),ZodObject.strictCreate=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)}),ZodObject.lazycreate=(e,t)=>new ZodObject({shape:e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)});class ZodUnion extends ZodType{_parse(t){const{ctx:r}=this._processInputParams(t),a=this._def.options;function n(o){for(const l of o)if(l.result.status==="valid")return l.result;for(const l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const s=o.map(l=>new ZodError(l.ctx.common.issues));return addIssueToContext(r,{code:ZodIssueCode.invalid_union,unionErrors:s}),INVALID}if(r.common.async)return Promise.all(a.map(async o=>{const s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(n);{let o;const s=[];for(const _ of a){const c={...r,common:{...r.common,issues:[]},parent:null},d=_._parseSync({data:r.data,path:r.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:c}),c.common.issues.length&&s.push(c.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;const l=s.map(_=>new ZodError(_));return addIssueToContext(r,{code:ZodIssueCode.invalid_union,unionErrors:l}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(e,t)=>new ZodUnion({options:e,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(t)});const getDiscriminator=e=>e instanceof ZodLazy?getDiscriminator(e.schema):e instanceof ZodEffects?getDiscriminator(e.innerType()):e instanceof ZodLiteral?[e.value]:e instanceof ZodEnum?e.options:e instanceof ZodNativeEnum?util.objectValues(e.enum):e instanceof ZodDefault?getDiscriminator(e._def.innerType):e instanceof ZodUndefined?[void 0]:e instanceof ZodNull?[null]:e instanceof ZodOptional?[void 0,...getDiscriminator(e.unwrap())]:e instanceof ZodNullable?[null,...getDiscriminator(e.unwrap())]:e instanceof ZodBranded||e instanceof ZodReadonly?getDiscriminator(e.unwrap()):e instanceof ZodCatch?getDiscriminator(e._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==ZodParsedType.object)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:r.parsedType}),INVALID;const a=this.discriminator,n=r.data[a],o=this.optionsMap.get(n);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(addIssueToContext(r,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,a){const n=new Map;for(const o of r){const s=getDiscriminator(o.shape[t]);if(!s.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const l of s){if(n.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);n.set(l,o)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:n,...processCreateParams(a)})}}function mergeValues(e,t){const r=getParsedType(e),a=getParsedType(t);if(e===t)return{valid:!0,data:e};if(r===ZodParsedType.object&&a===ZodParsedType.object){const n=util.objectKeys(t),o=util.objectKeys(e).filter(l=>n.indexOf(l)!==-1),s={...e,...t};for(const l of o){const _=mergeValues(e[l],t[l]);if(!_.valid)return{valid:!1};s[l]=_.data}return{valid:!0,data:s}}else if(r===ZodParsedType.array&&a===ZodParsedType.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let o=0;o<e.length;o++){const s=e[o],l=t[o],_=mergeValues(s,l);if(!_.valid)return{valid:!1};n.push(_.data)}return{valid:!0,data:n}}else return r===ZodParsedType.date&&a===ZodParsedType.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class ZodIntersection extends ZodType{_parse(t){const{status:r,ctx:a}=this._processInputParams(t),n=(o,s)=>{if(isAborted(o)||isAborted(s))return INVALID;const l=mergeValues(o.value,s.value);return l.valid?((isDirty(o)||isDirty(s))&&r.dirty(),{status:r.value,value:l.data}):(addIssueToContext(a,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([o,s])=>n(o,s)):n(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}ZodIntersection.create=(e,t,r)=>new ZodIntersection({left:e,right:t,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(r)});class ZodTuple extends ZodType{_parse(t){const{status:r,ctx:a}=this._processInputParams(t);if(a.parsedType!==ZodParsedType.array)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:a.parsedType}),INVALID;if(a.data.length<this._def.items.length)return addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&a.data.length>this._def.items.length&&(addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const o=[...a.data].map((s,l)=>{const _=this._def.items[l]||this._def.rest;return _?_._parse(new ParseInputLazyPath(a,s,a.path,l)):null}).filter(s=>!!s);return a.common.async?Promise.all(o).then(s=>ParseStatus.mergeArray(r,s)):ParseStatus.mergeArray(r,o)}get items(){return this._def.items}rest(t){return new ZodTuple({...this._def,rest:t})}}ZodTuple.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:e,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(t)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:a}=this._processInputParams(t);if(a.parsedType!==ZodParsedType.object)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:a.parsedType}),INVALID;const n=[],o=this._def.keyType,s=this._def.valueType;for(const l in a.data)n.push({key:o._parse(new ParseInputLazyPath(a,l,a.path,l)),value:s._parse(new ParseInputLazyPath(a,a.data[l],a.path,l)),alwaysSet:l in a.data});return a.common.async?ParseStatus.mergeObjectAsync(r,n):ParseStatus.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(t,r,a){return r instanceof ZodType?new ZodRecord({keyType:t,valueType:r,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(a)}):new ZodRecord({keyType:ZodString.create(),valueType:t,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(r)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:a}=this._processInputParams(t);if(a.parsedType!==ZodParsedType.map)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:a.parsedType}),INVALID;const n=this._def.keyType,o=this._def.valueType,s=[...a.data.entries()].map(([l,_],c)=>({key:n._parse(new ParseInputLazyPath(a,l,a.path,[c,"key"])),value:o._parse(new ParseInputLazyPath(a,_,a.path,[c,"value"]))}));if(a.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const _ of s){const c=await _.key,d=await _.value;if(c.status==="aborted"||d.status==="aborted")return INVALID;(c.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(c.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const _ of s){const c=_.key,d=_.value;if(c.status==="aborted"||d.status==="aborted")return INVALID;(c.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(c.value,d.value)}return{status:r.value,value:l}}}}ZodMap.create=(e,t,r)=>new ZodMap({valueType:t,keyType:e,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(r)});class ZodSet extends ZodType{_parse(t){const{status:r,ctx:a}=this._processInputParams(t);if(a.parsedType!==ZodParsedType.set)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:a.parsedType}),INVALID;const n=this._def;n.minSize!==null&&a.data.size<n.minSize.value&&(addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&a.data.size>n.maxSize.value&&(addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());const o=this._def.valueType;function s(_){const c=new Set;for(const d of _){if(d.status==="aborted")return INVALID;d.status==="dirty"&&r.dirty(),c.add(d.value)}return{status:r.value,value:c}}const l=[...a.data.values()].map((_,c)=>o._parse(new ParseInputLazyPath(a,_,a.path,c)));return a.common.async?Promise.all(l).then(_=>s(_)):s(l)}min(t,r){return new ZodSet({...this._def,minSize:{value:t,message:errorUtil.toString(r)}})}max(t,r){return new ZodSet({...this._def,maxSize:{value:t,message:errorUtil.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}ZodSet.create=(e,t)=>new ZodSet({valueType:e,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(t)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==ZodParsedType.function)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:r.parsedType}),INVALID;function a(l,_){return makeIssue({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,getErrorMap(),errorMap].filter(c=>!!c),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:_}})}function n(l,_){return makeIssue({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,getErrorMap(),errorMap].filter(c=>!!c),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:_}})}const o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof ZodPromise){const l=this;return OK(async function(..._){const c=new ZodError([]),d=await l._def.args.parseAsync(_,o).catch(p=>{throw c.addIssue(a(_,p)),c}),u=await Reflect.apply(s,this,d);return await l._def.returns._def.type.parseAsync(u,o).catch(p=>{throw c.addIssue(n(u,p)),c})})}else{const l=this;return OK(function(..._){const c=l._def.args.safeParse(_,o);if(!c.success)throw new ZodError([a(_,c.error)]);const d=Reflect.apply(s,this,c.data),u=l._def.returns.safeParse(d,o);if(!u.success)throw new ZodError([n(d,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new ZodFunction({...this._def,args:ZodTuple.create(t).rest(ZodUnknown.create())})}returns(t){return new ZodFunction({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,a){return new ZodFunction({args:t||ZodTuple.create([]).rest(ZodUnknown.create()),returns:r||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(a)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}ZodLazy.create=(e,t)=>new ZodLazy({getter:e,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(t)});class ZodLiteral extends ZodType{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return addIssueToContext(r,{received:r.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:t.data}}get value(){return this._def.value}}ZodLiteral.create=(e,t)=>new ZodLiteral({value:e,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(t)});function createZodEnum(e,t){return new ZodEnum({values:e,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(t)})}class ZodEnum extends ZodType{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),a=this._def.values;return addIssueToContext(r,{expected:util.joinValues(a),received:r.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),a=this._def.values;return addIssueToContext(r,{received:r.data,code:ZodIssueCode.invalid_enum_value,options:a}),INVALID}return OK(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return ZodEnum.create(t,{...this._def,...r})}exclude(t,r=this._def){return ZodEnum.create(this.options.filter(a=>!t.includes(a)),{...this._def,...r})}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(t){const r=util.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(t);if(a.parsedType!==ZodParsedType.string&&a.parsedType!==ZodParsedType.number){const n=util.objectValues(r);return addIssueToContext(a,{expected:util.joinValues(n),received:a.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._cache||(this._cache=new Set(util.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const n=util.objectValues(r);return addIssueToContext(a,{received:a.data,code:ZodIssueCode.invalid_enum_value,options:n}),INVALID}return OK(t.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(e,t)=>new ZodNativeEnum({values:e,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(t)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==ZodParsedType.promise&&r.common.async===!1)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:r.parsedType}),INVALID;const a=r.parsedType===ZodParsedType.promise?r.data:Promise.resolve(r.data);return OK(a.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}}ZodPromise.create=(e,t)=>new ZodPromise({type:e,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(t)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:a}=this._processInputParams(t),n=this._def.effect||null,o={addIssue:s=>{addIssueToContext(a,s),s.fatal?r.abort():r.dirty()},get path(){return a.path}};if(o.addIssue=o.addIssue.bind(o),n.type==="preprocess"){const s=n.transform(a.data,o);if(a.common.async)return Promise.resolve(s).then(async l=>{if(r.value==="aborted")return INVALID;const _=await this._def.schema._parseAsync({data:l,path:a.path,parent:a});return _.status==="aborted"?INVALID:_.status==="dirty"||r.value==="dirty"?DIRTY(_.value):_});{if(r.value==="aborted")return INVALID;const l=this._def.schema._parseSync({data:s,path:a.path,parent:a});return l.status==="aborted"?INVALID:l.status==="dirty"||r.value==="dirty"?DIRTY(l.value):l}}if(n.type==="refinement"){const s=l=>{const _=n.refinement(l,o);if(a.common.async)return Promise.resolve(_);if(_ instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(a.common.async===!1){const l=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return l.status==="aborted"?INVALID:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(l=>l.status==="aborted"?INVALID:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(n.type==="transform")if(a.common.async===!1){const s=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!isValid(s))return INVALID;const l=n.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(s=>isValid(s)?Promise.resolve(n.transform(s.value,o)).then(l=>({status:r.value,value:l})):INVALID);util.assertNever(n)}}ZodEffects.create=(e,t,r)=>new ZodEffects({schema:e,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:t,...processCreateParams(r)}),ZodEffects.createWithPreprocess=(e,t,r)=>new ZodEffects({schema:t,effect:{type:"preprocess",transform:e},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(r)});class ZodOptional extends ZodType{_parse(t){return this._getType(t)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ZodOptional.create=(e,t)=>new ZodOptional({innerType:e,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(t)});class ZodNullable extends ZodType{_parse(t){return this._getType(t)===ZodParsedType.null?OK(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ZodNullable.create=(e,t)=>new ZodNullable({innerType:e,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(t)});class ZodDefault extends ZodType{_parse(t){const{ctx:r}=this._processInputParams(t);let a=r.data;return r.parsedType===ZodParsedType.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}ZodDefault.create=(e,t)=>new ZodDefault({innerType:e,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...processCreateParams(t)});class ZodCatch extends ZodType{_parse(t){const{ctx:r}=this._processInputParams(t),a={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return isAsync(n)?n.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ZodError(a.common.issues)},input:a.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new ZodError(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(e,t)=>new ZodCatch({innerType:e,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...processCreateParams(t)});class ZodNaN extends ZodType{_parse(t){if(this._getType(t)!==ZodParsedType.nan){const a=this._getOrReturnCtx(t);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:a.parsedType}),INVALID}return{status:"valid",value:t.data}}}ZodNaN.create=e=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(e)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(t){const{ctx:r}=this._processInputParams(t),a=r.data;return this._def.type._parse({data:a,path:r.path,parent:r})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(t){const{status:r,ctx:a}=this._processInputParams(t);if(a.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return o.status==="aborted"?INVALID:o.status==="dirty"?(r.dirty(),DIRTY(o.value)):this._def.out._parseAsync({data:o.value,path:a.path,parent:a})})();{const n=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return n.status==="aborted"?INVALID:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:a.path,parent:a})}}static create(t,r){return new ZodPipeline({in:t,out:r,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(t){const r=this._def.innerType._parse(t),a=n=>(isValid(n)&&(n.value=Object.freeze(n.value)),n);return isAsync(r)?r.then(n=>a(n)):a(r)}unwrap(){return this._def.innerType}}ZodReadonly.create=(e,t)=>new ZodReadonly({innerType:e,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(t)});function cleanParams(e,t){const r=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof r=="string"?{message:r}:r}function custom(e,t={},r){return e?ZodAny.create().superRefine((a,n)=>{const o=e(a);if(o instanceof Promise)return o.then(s=>{if(!s){const l=cleanParams(t,a),_=l.fatal??r??!0;n.addIssue({code:"custom",...l,fatal:_})}});if(!o){const s=cleanParams(t,a),l=s.fatal??r??!0;n.addIssue({code:"custom",...s,fatal:l})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(e,t={message:`Input not instance of ${e.name}`})=>custom(r=>r instanceof e,t),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:(e=>ZodString.create({...e,coerce:!0})),number:(e=>ZodNumber.create({...e,coerce:!0})),boolean:(e=>ZodBoolean.create({...e,coerce:!0})),bigint:(e=>ZodBigInt.create({...e,coerce:!0})),date:(e=>ZodDate.create({...e,coerce:!0}))},NEVER=INVALID,z=Object.freeze(Object.defineProperty({__proto__:null,BRAND,DIRTY,EMPTY_PATH,INVALID,NEVER,OK,ParseStatus,Schema:ZodType,ZodAny,ZodArray,ZodBigInt,ZodBoolean,ZodBranded,ZodCatch,ZodDate,ZodDefault,ZodDiscriminatedUnion,ZodEffects,ZodEnum,ZodError,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},ZodFunction,ZodIntersection,ZodIssueCode,ZodLazy,ZodLiteral,ZodMap,ZodNaN,ZodNativeEnum,ZodNever,ZodNull,ZodNullable,ZodNumber,ZodObject,ZodOptional,ZodParsedType,ZodPipeline,ZodPromise,ZodReadonly,ZodRecord,ZodSchema:ZodType,ZodSet,ZodString,ZodSymbol,ZodTransformer:ZodEffects,ZodTuple,ZodType,ZodUndefined,ZodUnion,ZodUnknown,ZodVoid,addIssueToContext,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,coerce,custom,date:dateType,datetimeRegex,defaultErrorMap:errorMap,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,getErrorMap,getParsedType,instanceof:instanceOfType,intersection:intersectionType,isAborted,isAsync,isDirty,isValid,late,lazy:lazyType,literal:literalType,makeIssue,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,get objectUtil(){return objectUtil},oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,quotelessJson,record:recordType,set:setType,setErrorMap,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,get util(){return util},void:voidType},Symbol.toStringTag,{value:"Module"}));z.string();const guidSchema=z.string().length(11);z.string().min(13),z.string(),z.number().int().positive();var ActionTypeEnum=(e=>(e.VIDEO="video",e.GET_LOCATION="getLocation",e.RESET_ELEMENT="resetElement",e.GET_METABASE="getMetabase",e.CHOOSE_IMAGE="chooseImage",e.RECORD_AUDIO="recordAudio",e.SHOW_WECHAT_AVATAR="showWechatAvatar",e.SHOW_WECHAT_NICKNAME="showWechatNickname",e.SHARE_INFO="shareinfo",e.WECHAT_MAP="wechatMap",e))(ActionTypeEnum||{});const aniEventSchema=enumType(["click","appear"]),aniBehaviorCommonParamSchema=objectType({event_name:stringType().optional()}),aniBehaviorCommonSchema=objectType({id:guidSchema,name:stringType(),type:nativeEnumType(ActionTypeEnum),event:aniEventSchema,autoJumpBeforeRun:booleanType().optional().default(!1),param:aniBehaviorCommonParamSchema,preBehaviorId:stringType().optional(),postBehaviorIds:arrayType(stringType()).optional()}),boolStrSchema=enumType(["0","1"]),aniBehaviorVideoSchema=aniBehaviorCommonSchema.extend({type:literalType(ActionTypeEnum.VIDEO),param:aniBehaviorCommonParamSchema.extend({video_name:stringType().optional(),video_url:stringType().optional(),video_id:stringType().optional(),video_holder:stringType().optional(),video_left:numberType().optional(),video_top:numberType().optional(),video_width:numberType().optional(),video_height:numberType().optional(),video_autoplay:boolStrSchema.optional(),video_controls:boolStrSchema.optional(),video_close:boolStrSchema.optional()})}),aniBehaviorGetLocationSchema=aniBehaviorCommonSchema.extend({type:literalType(ActionTypeEnum.GET_LOCATION),param:aniBehaviorCommonParamSchema.extend({location_format:stringType().optional(),location_show_target:stringType().optional()})}),aniBehaviorShareInfoSchema=aniBehaviorCommonSchema.extend({type:literalType(ActionTypeEnum.SHARE_INFO),param:aniBehaviorCommonParamSchema.extend({share_title:stringType().optional(),share_desc:stringType().optional(),share_timeline:stringType().optional(),share_thumb:stringType().optional()})}),aniBehaviorWechatMapSchema=aniBehaviorCommonSchema.extend({type:literalType(ActionTypeEnum.WECHAT_MAP),param:aniBehaviorCommonParamSchema.extend({coordinate:stringType().default("").describe("经纬度，格式为：纬度,经度"),location_name:stringType().default("").describe("自定义目标地点的名称"),location_desc:stringType().default("").describe("对目标地点进行简要描述"),scale:unionType([numberType(),stringType()]).default(20).describe("地图缩放倍数，数值越大显示")})});unionType([aniBehaviorVideoSchema,aniBehaviorGetLocationSchema,aniBehaviorShareInfoSchema,aniBehaviorWechatMapSchema]),stringType();const Action=function(e){this._event=e,this._behavior=null,this._displayObject=null,this._stage=null,this._logicRefernceAObject=null,this._callback=null,this._actionOnFinish=null,this._liveDisplayObject=null,this._options={}};Action._checkLogic=function(e,t,r){return e=="gt"&&parseFloat(t)>parseFloat(r)||e=="ge"&&parseFloat(t)>=parseFloat(r)||e=="lt"&&parseFloat(t)<parseFloat(r)||e=="le"&&parseFloat(t)<=parseFloat(r)||e=="eq"&&t==r||e=="ne"&&t!=r};var proto$2q=Action.prototype;proto$2q.logicPositive=function(){var that=this,replaceMacros=function(e){var t=that._stage;if(t){var r=t._displayObject._renderManager;e=r._replaceMacros(e)}return e};that._behavior=that._behavior||{};var logic=that._behavior.logic||that._behavior.param&&that._behavior.param._logic||{},logicOk=!1;if(logic.check==logicTypeEnum.CHECK_ELEMENT){logic.element;var property=logic.property,condition=logic.condition,reference=logic.reference;reference=replaceMacros(reference),reference=reference;var object=that._logicRefernceAObject;if(!object&&that._behavior&&that._behavior.param&&that._behavior.param&&that._behavior.param._logic&&that._behavior.param._logic.element){var stageDisplayObject=that._stage._displayObject,RenderManager=stageDisplayObject._renderManager;object=RenderManager.getReferenceElement(that._behavior.param._logic.element,!0)}if(object){var value=object[property];property=="rotate"?value=value*180/Math.PI:property=="alpha"&&(value=value*100),logicOk=Action._checkLogic(condition,value,reference)}}else if(logic.check==logicTypeEnum.EXPRESSION){var expression=logic.expression;try{expression=replaceMacros(expression);var func=new Function("return "+expression+";");logicOk=!!func()}catch{}}else if(logic.check==logicTypeEnum.EXPECTED&&that._liveDisplayObject){var param=that._displayObject._aniData.param,expectedObjects=param.expectedObjects||[],objectName=that._liveDisplayObject._name;expectedObjects.indexOf(objectName)>=0&&(logicOk=!0)}else if(logic.check==logicTypeEnum.UNEXPECTED&&that._liveDisplayObject){var param=that._displayObject._aniData.param,dragObjects=param.dragObjects||[],expectedObjects=param.expectedObjects||[],unExpectedObjects=dragObjects.filter(function(a){return expectedObjects.indexOf(a)===-1}),objectName=that._liveDisplayObject._name;unExpectedObjects.indexOf(objectName)>=0&&(logicOk=!0)}else if(logic.check==logicTypeEnum.ENV){const envExp=logic.envExp;if(envExp)try{logicOk=eval(envExp)}catch(e){console.warn(e),logicOk=!1}else logicOk=!0}else logicOk=!0;return logicOk},proto$2q._setOptions=function(e){e=e||{};for(var t in e)this._options[t]=e[t]},proto$2q.doAction=function(){var e=this;if(e.logicPositive()){var t=Browser$1._globalObject.MugedaBehavior;if(e._event===ActionEvent.CLICK)var r="click";else e._event===ActionEvent.APPEAR&&(r="appear");if(t){if(!e._behavior.object){var a=e._displayObject,n=a._getStage(),o=n._renderManager,s=o._mugeda;e._behavior.object=s._displayObjectHash[a._id]}return t.processAction(e._behavior,r,!0,e._callback)}}},mod.namespace("Action.Action",Action);var ActionAudioControl=function(e,t){ActionAudioControl.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._audioTarget=null};mod.extend(ActionAudioControl,Action);var proto$2p=ActionAudioControl.prototype;proto$2p.doAction=function(){var e=this;if(e.logicPositive()){e._movieClip;var t=e._audioTarget;if(t&&t._audioObject&&t._audioObject._audio){var r=t._audioObject._audio,a=e._behavior.param,n=a.jump_position;a.control_mode=="play"?r.play():a.control_mode=="pause"?r.readyState>0&&r.pause():a.control_mode=="stop"?r.readyState>0&&(r.pause(),r.currentTime=0):a.control_mode=="jump_and_play"?(r.readyState==0&&r.play(),setTimeout(function(){r.pause(),r.currentTime=n,r.play()},500)):a.control_mode=="jump_and_pause"&&(r.readyState==0&&r.play(),setTimeout(function(){r.pause(),r.currentTime=n},500));var o=parseFloat(a.control_volume);isNaN(o)||(r.volume=.01*o);var s=parseFloat(a.control_position);isNaN(s)||(r.currentTime=s)}ActionAudioControl.__super__.doAction.apply(e,arguments)}};var ActionAudio=function(e,t){ActionAudio.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionAudio,Action);var proto$2o=ActionAudio.prototype;proto$2o.doAction=function(){var e=this;if(e.logicPositive()){var t=e._movieClip,r=e._displayObject;if(t._objectFrames[r._id]){var a=t._objectFrames[r._id]._min,n=t._currentFrame;e._behavior.restart=a==n}ActionAudio.__super__.doAction.apply(e,arguments)}},mod.namespace("Action.ActionAudio",ActionAudio);var ActionAudioPause=function(e,t){ActionAudioPause.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionAudioPause,Action);var proto$2n=ActionAudioPause.prototype;proto$2n.doAction=function(){this.logicPositive()&&Mugeda.stopAudioAll&&Mugeda.stopAudioAll()},mod.namespace("Action.ActionAudioPause",ActionAudioPause);var ActionAudioResume=function(e,t){ActionAudioResume.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionAudioResume,Action);var proto$2m=ActionAudioResume.prototype;proto$2m.doAction=function(){this.logicPositive()&&Mugeda.playAudioAll&&Mugeda.playAudioAll()},mod.namespace("Action.ActionAudioResume",ActionAudioResume);var ActionAudioStop=function(e,t){ActionAudioStop.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionAudioStop,Action);var proto$2l=ActionAudioStop.prototype;proto$2l.doAction=function(){var e=this;if(e.logicPositive()){var t=e._movieClip,r=e._displayObject;t._objectFrames[r._id]&&(e._behavior.unit={frameStart:t._objectFrames[r._id]._min}),ActionAudioStop.__super__.doAction.apply(e,arguments)}};var ActionCallPhone=function(e,t){ActionCallPhone.__super__.constructor.apply(this,arguments);var r=this;r.counterType=e,r.behaviorData=t};mod.extend(ActionCallPhone,Action);var proto$2k=ActionCallPhone.prototype;proto$2k.doAction=function(){var e=this,t=e.behaviorData,r=t.phone_number,a=e._stage._displayObject,n=a._renderManager;if(r){var o;if((o=/\{\{(.*)\}\}/.exec(r))!=null){var s=n.getReferenceElement(o[1],!0);if(s){var l=s._getText();l&&window.open("tel:"+l,"_self")}}else window.open("tel:"+r,"_self")}};var ActionCanvasDraw=function(e,t){ActionCanvasDraw.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._canvasTarget={}};mod.extend(ActionCanvasDraw,Action);var proto$2j=ActionCanvasDraw.prototype;proto$2j.doAction=function(){var e=this;if(e.logicPositive()){e._movieClip,e._canvasTarget&&e._canvasTarget._aniData.guid;var t=e._behavior.param||{},r=t.canvas_control;if(e._canvasTarget){var a=e._canvasTarget._drawObject;a?r=="clear"?a.clear():r=="save"&&a.save():console.warn("行为出错：指定的绘图板不存在")}else console.warn("行为出错：指定的绘图板不存在");ActionCanvasDraw.__super__.doAction.apply(e,arguments)}};var ActionCounter$1=function(e,t){ActionCounter$1.__super__.constructor.apply(this,arguments);var r=this;r.counterType=e,r.behaviorData=t};mod.extend(ActionCounter$1,Action);var proto$2i=ActionCounter$1.prototype;proto$2i.doAction=function(){var e=this,t=e.behaviorData,r=t.canvas_name,a=t.pen_color,n=t.pen_width,o=e._stage._displayObject,s=o._renderManager;s.getReferenceElement(r,!0);var l=e._canvasTarget;console.log(a),a&&a.indexOf(" 0)")==-1&&l._drawObject.setColor(a),n&&l._drawObject.setWidth(n)};var ActionChangePicture=function(e,t){ActionChangePicture.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._targetAObject=[],r._sourceAObject=null};mod.extend(ActionChangePicture,Action);var proto$2h=ActionChangePicture.prototype;proto$2h.doAction=function(){var e=this;if(e.logicPositive()){e._movieClip;var t=e._targetAObject,r=e._sourceAObject;if(t&&r){var a=r._displayObject,n=r.src;if(!n&&a._aniData.type==2034){var o=r.dom.querySelector("canvas");o?n=o.toDataURL("image/png"):r.addEventListener("rendered",function(u){e.doAction()})}if(n)for(var s=0;s<t.length;s++){!t[s]._eventHandler._defaultSrc&&!t[s]._eventHandler.src?t[s]._eventHandler._defaultSrc="no":!t[s]._eventHandler._defaultSrc&&t[s]._eventHandler.src&&(t[s]._eventHandler._defaultSrc=t[s]._eventHandler.src),t[s]._eventHandler._defaultSrc===void 0&&n==t[s]._eventHandler.src&&(t[s]._eventHandler.src=n+"?random="+Math.random()),t[s]._eventHandler.src=n;var l=e._behavior||{},_=l.param||{},c=parseInt(_.keep_value||0);if(c)if(n.indexOf("data:image/")>-1)Mugeda.messageBox("图片转发时保持不支持舞台截图或base64编码格式。");else{var d=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};d.addCustomMugedaParameters(encodeURIComponent("m_"+t[s]._aniData.guid),encodeURIComponent(n))}}}ActionChangePicture.__super__.doAction.apply(e,arguments)}};var ActionCheckout=function(e,t){ActionCheckout.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._serviceId=null};mod.extend(ActionCheckout,Action);var proto$2g=ActionCheckout.prototype;proto$2g.doAction=function(e){return new Promise((t,r)=>{var a=this,n=a._stage._displayObject,o=n._renderManager,s=a._options.onFinish,l=a._options.onFailure;if(!a.logicPositive()){s&&s.doAction.apply(s),t();return}var _=a._behavior,c=_.param||{},d=o.getReferenceElement(c.result_target,!0),u=o.getReferenceElement(c.checkout_target,!0);if(o.getReferenceElement(c.nickname_target,!0),o.getReferenceElement(c.avatar_target,!0),!u){s&&s.doAction.apply(s),t();return}var f=u._getData().param.serviceId,p=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};p.checkout&&p.checkout({serviceId:f},function(v){if(v.status==0){var h=a._stage._displayObject._renderManager._mugeda;a._behavior.mugeda=h,a._behavior.type="submitForm",a._behavior.extraData={serviceId:f,operate:"sign_in",checkoutName:c.checkout_target},a._behavior.param.submit_object={nickname:c.nickname_target,avatar:c.avatar_target},a._callback=function(g){a._behavior.type="submitCheckout",g=g||{},g.status==0?(d&&(d.text="签到成功"),s&&s.doAction.apply(s),t(g)):g.status!==void 0&&(d&&(d.text="签到失败"),l&&l.doAction.apply(l),r(g))},ActionCheckout.__super__.doAction.apply(a,arguments)}else v.status==4?(d&&(d.text=v.desc),l&&l.doAction.apply(l)):(d&&(d.text="签到失败"),l&&l.doAction.apply(l))}),ActionCheckout.__super__.doAction.apply(a,arguments)})};var ActionChooseImage=function(e,t,r){ActionChooseImage.__super__.constructor.apply(this,arguments),r=r||{};var a=this;a._movieClip=t,a._targetAObject=null,a._type=r._type||ActionChooseImage.Type.Image,a._source=r._source||ActionChooseImage.Source.Choose,a._keepValue=r._keepValue===void 0?1:parseInt(r._keepValue)};mod.extend(ActionChooseImage,Action),ActionChooseImage.Type={Image:"image",Text:"text"},ActionChooseImage.Source={Choose:"choose",Value:"value"};var proto$2f=ActionChooseImage.prototype;proto$2f.doAction=function(){var e=this;if(e.logicPositive()){var t=e._behavior,r=t.param||{},a=r.target_name,n=r.cropping_mode;a=!a||a=="undefined"?null:a,e._movieClip;var o=e._targetAObject;if(o){o instanceof Array||(o=[o]);var s=o.length>1,l=o[0].width,_=o[0].height,c=o[0]._displayObject._guid;if(e._source==ActionChooseImage.Source.Choose&&l&&_)var d=function(u){chooseWxImage(u,{width:l,height:_,refId:c,croppingMode:n,guid:c})};else d=e._source;d&&d(function(u){if(u!=null)for(var f in o){var p=o[f],v=p._displayObject;if(e._type==ActionChooseImage.Type.Image){if(p.src=u,p.src)p.src=u;else{var h=v._aniData.param,g=v._aniData.curve||{},w=g.points||[];if(w.length){var y=h.fillInfo||{};y.fillImage=u;var x=new Image;x.src=u,x.displayObject=v,x.onload=function(){this.displayObject._updatedFillImage=this,this.displayObject._dispatchEvent(this.displayObject._changedEvent)}}}var m=e._options.onFinish;m&&m.doAction.apply(m)}else e._type==ActionChooseImage.Type.Text&&(p.text=u);if(s)var A=v._guid;else if(a)A=a;else{var T=p._currentScene;T._id=="_main"?A=v._guid:A=p._currentScene._id+"_"+v._guid}if(e._keepValue){var b=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};b.addCustomMugedaParameters(encodeURIComponent("m_"+A),encodeURIComponent(u))}}}),ActionChooseImage.__super__.doAction.apply(e,arguments)}}};var chooseWxImage=function(e,t){var r=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};r.chooseImage({wx:Browser$1._globalObject.wx,destWidth:t.width,refId:t.refId,guid:t.guid,destHeight:t.height,croppingMode:t.croppingMode,success:function(a){var n=a.url;e(n)},error:function(a){alert(`在获取图片时出错，请稍后重试。

错误信息：`+a.desc)}})},Color=function(e,t,r,a){e=e*1||0,t=t*1||0,r=r*1||0,a=a==null||isNaN(a)?1:a*1;var n=this;n._r=e,n._g=t,n._b=r,n._a=a,mod.definePropertyGetSet(n,["r",n._getR,n._setR,"g",n._getG,n._setG,"b",n._getB,n._setB,"a",n._getA,n._setA]),mod.definePropertyReadOnly(n,["cssText",n._getCssText])},proto$2e=Color.prototype;proto$2e._compareTo=function(e){var t=this;return t._a===e._a&&t._r===e._r&&t._g===e._g&&t._b===e._b},proto$2e.clone=function(){var e=this;return new Color(e._r,e._g,e._b,e._a)},proto$2e._getR=function(){return this._r},proto$2e._setR=function(e){this._r=e},proto$2e._getG=function(){return this._g},proto$2e._setG=function(e){this._g=e},proto$2e._getB=function(){return this._b},proto$2e._setB=function(e){this._b=e},proto$2e._getA=function(){return this._a},proto$2e._setA=function(e){this._a=e},proto$2e._getAlpha=function(){return this._a<.001?0:this._a},proto$2e._getCssText=function(){var e=this,t=Math.abs(e._r)<.001?0:e._r,r=Math.abs(e._g)<.001?0:e._g,a=Math.abs(e._b)<.001?0:e._b,n=Math.abs(e._a)<.001?0:e._a;return"rgba("+t+","+r+","+a+","+n+")"},Color._tween=function(e,t,r){return new Color(Math.round(Math.min(255,Math.max(0,(1-r)*(e._r-t._r)+t._r))),Math.round(Math.min(255,Math.max(0,(1-r)*(e._g-t._g)+t._g))),Math.round(Math.min(255,Math.max(0,(1-r)*(e._b-t._b)+t._b))),Math.min(255,Math.max(0,(1-r)*(e._a-t._a)+t._a)))},Color.parse=function(e){var t,r,a,n,o;return e=e.replace(/\s+/g,""),o=e.match(/rgb\(([-+]?[0-9]*\.?[0-9]+),\s*([-+]?[0-9]*\.?[0-9]+),\s*([-+]?[0-9]*\.?[0-9]+)\)/),o?(t=o[1],r=o[2],a=o[3],n=1,new Color(t,r,a,n)):(o=e.match(/rgba\(([-+]?[0-9]*\.?[0-9]+),\s*([-+]?[0-9]*\.?[0-9]+),\s*([-+]?[0-9]*\.?[0-9]+),\s*([-+]?[0-9]*\.?[0-9]+)\)/),o?(t=o[1],r=o[2],a=o[3],n=o[4],new Color(t,r,a,n)):(o=e.match(/^#(.)(.)(.)$/),o?(t=parseInt(o[1]+o[1],16),r=parseInt(o[2]+o[2],16),a=parseInt(o[3]+o[3],16),n=1,new Color(t,r,a,n)):(o=e.match(/#(..)(..)(..)/),o?(t=parseInt(o[1],16),r=parseInt(o[2],16),a=parseInt(o[3],16),n=1,new Color(t,r,a,n)):null)))},mod.namespace("Geom.Color",Color),mod.exportName(Color,["param",Color.parse]);var ActionClipboard=function(e){ActionClipboard.__super__.constructor.apply(this,arguments);var t=this;t._event=e};mod.extend(ActionClipboard,Action);var proto$2d=ActionClipboard.prototype;proto$2d.doAction=function(){var e=this;if(e.logicPositive()){ActionClipboard.__super__.doAction.apply(e,arguments);var t=e._behavior.param,r=t.element_name,a=e._stage._displayObject._renderManager,n=a.getReferenceElement(r,!0),o=t.element_property;if(!n){console.error(r+"没有找到");return}var s=n[o];o==="alpha"?s=s*100:o==="rotate"?s=Math.round(100*s/Math.PI*180)/100:o==="progress"&&(s=Math.round(100*s)/100);var l=document.createElement("textarea");l.value=s,l.style.opacity=0,document.body.appendChild(l),l.select(),document.execCommand("copy"),l.remove()}},mod.namespace("Action.ActionClipboard",ActionClipboard);var ActionComplexTimer=function(e,t){ActionComplexTimer.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._targetDisplayObject=[]};mod.extend(ActionComplexTimer,Action);var proto$2c=ActionComplexTimer.prototype;proto$2c.doAction=function(){var e=this;if(e.logicPositive()){var t=e._targetDisplayObject,r=e._behavior.param,a=r.timer_status;if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]?(a==="start"&&(t[n]._unLockTime=!0),t[n]._timerStatus=a):console.warn("行为出错：指定的定时器不存在");else console.warn("行为出错：指定的定时器不存在");ActionComplexTimer.__super__.doAction.apply(e,arguments)}},mod.namespace("Action.ActionComplexTimer",ActionComplexTimer);var ActionCounter=function(e,t){ActionCounter.__super__.constructor.apply(this,arguments);var r=this;r.counterType=e,r.behaviorData=t};mod.extend(ActionCounter,Action);var proto$2b=ActionCounter.prototype;proto$2b.doAction=function(){var e=this,t=e.behaviorData,r=t.counter_target,a=t.counter_display,n=e._stage._displayObject,o=n._renderManager,s=o.getReferenceElement(a,!0);if(e.counterType=="getCounter"){var l=Browser$1._getWeixinServerHost()+"/server/huodong.php/dataservice/counter/get";if(!e.logicPositive())return;if(!r){Mugeda.messageBox("获取计数失败"),console.warn("[行为 - 获取计数] 尚未绑定计数器组件");return}window.ajaxHelper({url:l+"?response_type=jsonp&serviceId="+r,type:"jsonp",mode:"postMessage",success:function(c){c.status===0?s&&s._setText(c.total):Mugeda.messageBox("服务器错误,错误码:"+c.status)}})}else if(e.counterType=="setCounter"){var e=this,_=Browser$1._getWeixinServerHost()+"/server/huodong.php/dataservice/counter/update",l=Browser$1._getWeixinServerHost()+"/server/huodong.php/dataservice/counter/get";if(!e.logicPositive())return;if(!r){Mugeda.messageBox("增加计数失败"),console.warn("[行为 - 增加计数] 尚未绑定计数器组件");return}window.ajaxHelper({url:_+"?response_type=jsonp&serviceId="+r,type:"jsonp",mode:"postMessage",success:function(u){u.status===0?s&&s._setText(u.total):Mugeda.messageBox("服务器错误,错误码:"+u.status)}})}};var ActionDatabase=function(e,t){ActionDatabase.__super__.constructor.apply(this,arguments);var r=this;r.dbOperation=e,r.behaviorData=t,r.dbConfig=null,r.getDbConfig()};mod.extend(ActionDatabase,Action);var proto$2a=ActionDatabase.prototype;proto$2a.getDbConfig=function(){var e=this,t=e.behaviorData,r=t.database_target,a=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};a.getDbConfigData&&a.getDbConfigData(r,function(n){e.dbConfig=n})},proto$2a.doAction=function(){var e=this,t=e.behaviorData,r=t.database_target,a=t.database_mode,n=t.database_key,o=t.database_value,s=e._stage._displayObject;s._renderManager;var l=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};e.dbOperation=="getData"?l.getDbData&&l.getDbData(r,function(_){if(_.status==0){var c=e._options.onFinish;if(c&&c.doAction.apply(c),e._targetAObject){var d=_.dataList||[],u=d[0]||{},f=u[n];e._targetAObject.text=f||"NULL"}}else{var p=e._options.onFailure;p&&p.doAction.apply(p)}}):e.dbOperation=="setData"&&l.setDbData&&l.setDbData({serviceId:r,mode:a,key:n,value:o},function(_){if(_.status==0){var c=e._options.onFinish;c&&c.doAction.apply(c)}else{var d=e._options.onFailure;d&&d.doAction.apply(d)}})};var Point=function(e,t){e=e||0,t=t||0;var r=this;r._x=e,r._y=t,mod.definePropertyGetSet(r,["x",r._getX,r._setX,"y",r._getY,r._setY]),mod.definePropertyReadOnly(r,["length",r._getLength])},proto$29=Point.prototype;proto$29._getX=function(){return this._x},proto$29._setX=function(e){this._x=e},proto$29._getY=function(){return this._y},proto$29._setY=function(e){this._y=e},proto$29._getLength=function(){var e=this;return Math.sqrt(e._x*e._x+e._y*e._y)},proto$29.add=function(e){var t=this;return new Point(t._x+e._x,t._y+e._y)},proto$29.clone=function(){var e=this;return new Point(e._x,e._y)},proto$29.copyFrom=function(e){var t=this;t._x=e._x,t._y=e._y},Point.distance=function(e,t){return Math.sqrt((e._x-t._x)*(e._x-t._x)+(e._y-t._y)*(e._y-t._y))},Point.angle=function(e,t){return Math.atan2(t._y-e._y,t._x-e._x)},proto$29.equals=function(e){var t=this;return t._x===e._x&&t._y===e._y},Point.interpolate=function(e,t,r){return new Point(r*(e._x-t._x)+t._x,r*(e._y-t._y)+t._y)},proto$29.normalize=function(e){e=e??1;var t=this;t._x=t._x/t.length*e,t._y=t._y/t.length*e},proto$29.offset=function(e,t){var r=this;r._x+=e,r._y+=t},Point.polar=function(e,t){return new Point(Math.cos(t)*e,Math.sin(t)*e)},proto$29.setTo=function(e,t){this._x=e,this._y=t},proto$29.subtract=function(e){var t=this;return new Point(t._x-e._x,t._y-e._y)},proto$29.toString=function(){var e=this;return"(x="+e._x+", y="+e._y+")"},mod.exportName(proto$29,["add",proto$29.add,"clone",proto$29.clone,"copyFrom",proto$29.copyFrom,"contains",proto$29.contains,"distance",proto$29.distance,"equals",proto$29.equals,"normalize",proto$29.normalize,"offset",proto$29.offset,"setTo",proto$29.setTo,"subtract",proto$29.subtract]),mod.exportName(Point,["distance",Point.distance,"interpolate",Point.interpolate,"polar",Point.polar]),mod.namespace("Geom.Point",Point);var Matrix=function(e,t,r,a,n,o,s){e=e??1,t=t||0,r=r||0,a=a??1,n=n||0,o=o||0;var l=this;l._a=e,l._b=t,l._c=r,l._d=a,l._tx=n,l._ty=o,l._ox=0,l._oy=0,s&&(l._rawSita=s.sita||0,l._rotateCenterX=s.rotateCenterX||0,l._rotateCenterY=s.rotateCenterY||0,l._rawLeft=s.left||0,l._rawTop=s.top||0,l._rawScaleX=s.rawScaleX||1,l._rawScaleY=s.rawScaleY||1),l._rawRotate3dX=null,l._rawRotate3dY=null,l._pers=null},proto$28=Matrix.prototype;proto$28._parseParam=function(e){var t=this,r=e.width,a=e.height,n=r/2,o=a/2;t._rawWidth=e.rawWidth===void 0?r:e.rawWidth,t._rawHeight=e.rawHeight===void 0?a:e.rawHeight,t._rawSita=e.rotate,t._rotateCenterX=isNaN(e.rotateCenterX)?n:e.rotateCenterX,t._rotateCenterY=isNaN(e.rotateCenterY)?o:e.rotateCenterY,t._rawLeft=e.left,t._rawTop=e.top,t._rawDock=e.dock||"none",t._rawScaleX=r/t._rawWidth,t._rawScaleY=a/t._rawHeight,t._rawRotate3dX=e.rotateX||0,t._rawRotate3dY=e.rotateY||0,t._pers=e.pers||25,t._H=Math.max.apply(Math,Matrix._getScaledBox(r,a,t._rawSita))},proto$28._reset=function(){var e=this;e._a=1,e._b=0,e._c=0,e._d=1,e._tx=0,e._ty=0,e._create3DMatrix(!0),e._is3d=!1},proto$28._calMatrixFormRaw=function(){if(this._rawSita!=null){var e=this,t=e._rawSita,r=e._rotateCenterX,a=e._rotateCenterY,n=e._rawLeft,o=e._rawTop,s=e._rawScaleX,l=e._rawScaleY,_=e._rawRotate3dX,c=e._rawRotate3dY,d=e._pers;e._scale(s,l),e._translate(-r,-a),e._rotate(t),e._translate(r,a),e._translate(n,o),(_||c)&&(e._create3DMatrix(),e._translate3D(-n,-o),e._translate3D(-r,-a),e._rotateZ3D(-t),e._rotateY3D(c),e._rotateX3D(_),e._perspective(e._H,d),e._rotateZ3D(t),e._translate3D(r,a),e._translate3D(n,o)),e._translate(-e._ox,-e._oy)}},proto$28._getScaleX=function(){var e=this;if(e._rawScaleX!=null)return e._rawScaleX;var t=e._a,r=e._b;return Math.sqrt(t*t+r*r)},proto$28._getScaleY=function(){var e=this;if(e._rawScaleY!=null)return e._rawScaleY;var t=e._c,r=e._d;return Math.sqrt(t*t+r*r)},proto$28._setScaleX=function(e){var t=this;t._rawScaleX!=null&&(t._rawScaleX=e),t._scale(1/t._getScaleX()*e,1)},proto$28._setScaleY=function(e){var t=this;t._rawScaleY!=null&&(t._rawScaleY=e),t._scale(1,1/t._getScaleY()*e)},proto$28._getRotation=function(){var e=this;if(e._rawSita!==void 0)return e._rawSita;var t=e._a,r=e._b;return Math.atan2(r,t)},proto$28._setRotation=function(e){var t=this;t._rotate(-t._getRotation()+e)},proto$28._create3DMatrix=function(e){var t=this;t._is3d=!0,(e||t._e==null)&&(t._e=0),(e||t._f==null)&&(t._f=0),(e||t._g==null)&&(t._g=0),(e||t._h==null)&&(t._h=0),(e||t._i==null)&&(t._i=1),(e||t._tz==null)&&(t._tz=0),(e||t._m==null)&&(t._m=0),(e||t._n==null)&&(t._n=0),(e||t._o==null)&&(t._o=0),(e||t._p==null)&&(t._p=1)},proto$28._translate=proto$28._translate3D=function(e,t,r){var a=this;a._is3d?(r=r||0,a._tx+=e*a._p,a._ty+=t*a._p,a._tz+=r*a._p,a._a+=e*a._m,a._c+=e*a._n,a._e+=e*a._o,a._b+=t*a._m,a._d+=t*a._n,a._f+=t*a._o,a._g+=r*a._m,a._h+=r*a._n,a._i+=r*a._o):(a._tx+=e,a._ty+=t)},proto$28._scale=function(e,t){var r=this;r._a*=e,r._b*=t,r._c*=e,r._d*=t,r._tx*=e,r._ty*=t},proto$28._scale3d=function(e,t,r){var a=this;a._a*=e,a._b*=t,a._g*=r,a._c*=e,a._d*=t,a._h*=r,a._e*=e,a._f*=t,a._i*=r,a._tx*=e,a._ty*=t,a._tz*=r},proto$28._rotate=proto$28._rotateZ3D=function(e){var t=this;if(e==0)a=0,r=1;else var r=Math.cos(e),a=Math.sin(e);var n=t._a,o=t._b,s=t._c,l=t._d,_=t._tx,c=t._ty;if(t._a=n*r-o*a,t._b=n*a+o*r,t._c=s*r-l*a,t._d=s*a+l*r,t._tx=_*r-c*a,t._ty=_*a+c*r,t._is3d){var d=t._e,u=t._f;t._e=d*r-u*a,t._f=d*a+u*r}};var det3=function(e,t,r,a,n,o,s,l,_){return e*n*_+a*l*r+s*t*o-s*n*r-e*l*o-a*t*_};proto$28._inverse=function(){var e=this,t=e._a,r=e._b,a=e._c,n=e._d,o=e._tx,s=e._ty;if(e._is3d){var l=e._e,_=e._f,c=e._g,d=e._h,u=e._i,f=e._m,p=e._n,v=e._o,h=e._p,g=e._tz,w=det3(n,d,p,_,u,v,s,g,h),y=-det3(a,d,p,l,u,v,o,g,h),x=det3(a,n,p,l,_,v,o,s,h),m=-det3(a,n,d,l,_,u,o,s,g),A=-det3(r,c,f,_,u,v,s,g,h),T=det3(t,c,f,l,u,v,o,g,h),b=-det3(t,r,f,l,_,v,o,s,h),C=det3(t,r,c,l,_,u,o,s,g),M=det3(r,c,f,n,d,p,s,g,h),E=-det3(t,c,f,a,d,p,o,g,h),O=det3(t,r,f,a,n,p,o,s,h),S=-det3(t,r,c,a,n,d,o,s,g),L=-det3(r,c,f,n,d,p,_,u,v),D=det3(t,c,f,a,d,p,l,u,v),$=-det3(t,r,f,a,n,p,l,_,v),R=det3(t,r,c,a,n,d,l,_,u),I=t*w+a*A+l*M+o*L,P=new Matrix(w/I,A/I,y/I,T/I,m/I,C/I);return P._e=x/I,P._f=b/I,P._g=M/I,P._h=E/I,P._i=O/I,P._m=L/I,P._n=D/I,P._o=$/I,P._tz=S/I,P._p=R/I,P}else return I=t*n-a*r,w=n/I,y=-r/I,A=-a/I,T=t/I,L=(a*s-n*o)/I,D=(-t*s+r*o)/I,new Matrix(w,y,A,T,L,D)},Matrix._multiplication=function(e,t){if(e._is3d||t._is3d){e._is3d||e._create3DMatrix(),t._is3d||t._create3DMatrix();var r=new Matrix(e._a*t._a+e._c*t._b+e._e*t._g+e._tx*t._m,e._b*t._a+e._d*t._b+e._f*t._g+e._ty*t._m,e._a*t._c+e._c*t._d+e._e*t._h+e._tx*t._n,e._b*t._c+e._d*t._d+e._f*t._h+e._ty*t._n,e._a*t._tx+e._c*t._ty+e._e*t._tz+e._tx*t._p,e._b*t._tx+e._d*t._ty+e._f*t._tz+e._ty*t._p);return r.e=e._a*t._e+e._c*t._f+e._e*t._i+e._tx*t._o,r.f=e._b*t._e+e._d*t._f+e._f*t._i+e._ty*t._o,r.g=e._g*t._a+e._h*t._b+e._i*t._g+e._tz*t._m,r.h=e._g*t._c+e._h*t._d+e._i*t._h+e._tz*t._n,r.i=e._g*t._e+e._h*t._f+e._i*t._i+e._tz*t._o,r.tz=e._g*t._tx+e._h*t._ty+e._i*t._tz+e._tz*t._p,r.m=e._m*t._a+e._n*t._b+e._o*t._g+e._p*t._m,r.n=e._m*t._c+e._n*t._d+e._o*t._h+e._p*t._n,r.o=e._m*t._e+e._n*t._f+e._o*t._i+e._p*t._o,r.p=e._m*t._tx+e._n*t._ty+e._o*t._tz+e._p*t._p,r}else return new Matrix(e._a*t._a+e._c*t._b,e._b*t._a+e._d*t._b,e._a*t._c+e._c*t._d,e._b*t._c+e._d*t._d,e._a*t._tx+e._c*t._ty+e._tx,e._b*t._tx+e._d*t._ty+e._ty)},proto$28._skew=function(e,t){var r=this,a=r._a,n=r._b,o=r._c,s=r._d,l=r._tx,_=r._ty,c=Math.tan(e),d=Math.tan(t);if(r._a=a+n*c,r._b=a*d+n,r._c=o+s*c,r._d=o*d+s,r._tx=l+_*c,r._ty=l*d+_,r._is3d){var u=r._e,f=r._f;r._e=u+f*c,r._f=u*d+f}},proto$28._transform=function(e,t){if(e instanceof Point)var r=e._x,a=e._y;else r=e,a=t;var n=this,o=n._a,s=n._b,l=n._c,_=n._d,c=n._tx,d=n._ty,u=o*r+l*a+c,f=s*r+_*a+d;if(n._is3d)var p=n._m*r+n._n*a+n._p;else p=1;return t&&e instanceof Point?(e._x=u/p,e._y=f/p,e):new Point(u/p,f/p)},proto$28._rotateY3D=function(e){var t=this,r=t._a,a=t._g,n=t._c,o=t._h,s=t._e,l=t._i,_=t._tx,c=t._tz,d=Math.cos(e),u=Math.sin(e);t._a=r*d-a*u,t._g=-r*u+a*d,t._c=n*d+o*u,t._h=-n*u+o*d,t._e=s*d-l*u,t._i=-s*u+l*d,t._tx=_*d+c*u,t._tz=-_*u+c*d},proto$28._rotateX3D=function(e){var t=this,r=t._b,a=t._g,n=t._d,o=t._h,s=t._f,l=t._i,_=t._ty,c=t._tz,d=Math.cos(-e),u=Math.sin(-e);t._b=r*d-a*u,t._g=r*u+a*d,t._d=n*d-o*u,t._h=n*u+o*d,t._f=s*d-l*u,t._i=s*u+l*d,t._ty=_*d-c*u,t._tz=_*u+c*d},proto$28._perspective=function(e,t,r){r||(t=(3+72*(t||25)*.01)*Math.PI/180);var a=e/2/Math.tan(t/2),n=this;n._m=-n._g/a,n._n=-n._h/a,n._o=-n._i/a,n._p=-n._tz/a+n._p},proto$28._toCssText=function(e,t){var r=this;if(e)r._is3d;else{if(r._is3d&&(r._e!=0||r._f!=0||r._g!=0||r._h!=0||r._tz!=0||r._m!=0||r._n!=0||r._o!=0||r._i!=1||r._p!=1))return"matrix3d("+r._a.toFixed(6)+","+r._b.toFixed(6)+","+r._g.toFixed(6)+","+r._m.toFixed(6)+","+r._c.toFixed(6)+","+r._d.toFixed(6)+","+r._h.toFixed(6)+","+r._n.toFixed(6)+","+r._e.toFixed(6)+","+r._f.toFixed(6)+","+r._i.toFixed(6)+","+r._o.toFixed(6)+","+r._tx.toFixed(6)+","+r._ty.toFixed(6)+","+r._tz.toFixed(6)+","+r._p.toFixed(6)+")";var a=parseFloat(r._tx||0),n=parseFloat(r._ty||0);return a=t?Math.round(a):a,n=t?Math.round(n):n,"matrix("+r._a.toFixed(6)+","+r._b.toFixed(6)+","+r._c.toFixed(6)+","+r._d.toFixed(6)+","+(Math.abs(a)<.01?0:a.toFixed(6))+","+(Math.abs(n)<.01?0:n.toFixed(6))+")"}},proto$28._clone=function(){var e=this,t=new Matrix(e._a,e._b,e._c,e._d,e._tx,e._ty);return t._ox=e._ox,t._oy=e._oy,Object.keys(e).forEach(function(r){t[r]=e[r]}),t},proto$28._compare=function(e){var t=this;return!(e instanceof Matrix)||e._rawLeft!==void 0&&t._rawLeft===void 0?!1:t._is3d||e._is3d?(t._is3d||(t=t._clone(),t._create3DMatrix()),e._is3d||(e=e._clone(),e._create3DMatrix()),t._a===e._a&&t._b===e._b&&t._c===e._c&&t._d===e._d&&t._e===e._e&&t._f===e._f&&t._g===e._g&&t._h===e._h&&t._i===e._i&&t._ox===e._ox&&t._oy===e._oy&&t._tx===e._tx&&t._ty===e._ty&&t._tz===e._tz&&t._m===e._m&&t._n===e._n&&t._o===e._o&&t._p===e._p):t._a===e._a&&t._b===e._b&&t._c===e._c&&t._d===e._d&&t._ox===e._ox&&t._oy===e._oy&&t._tx===e._tx&&t._ty===e._ty&&t._tz===e._tz},proto$28._setRawRotate3dX=function(e){this._rawRotate3dX=e},proto$28._setRawRotate3dY=function(e){this._rawRotate3dY=e},proto$28._setRawPers=function(e){this._pers=e},proto$28._setRawSita=function(e){this._rawSita=e},proto$28._setRawRotateCenterX=function(e){this._rotateCenterX=e},proto$28._setRawRotateCenterY=function(e){this._rotateCenterY=e},proto$28._setRawLeft=function(e){this._rawLeft=e},proto$28._setRawTop=function(e){this._rawTop=e},Matrix._getScaledBox=function(e,t,r){var a=new Point(e,0),n=new Point(0,t),o=new Point(e,t),s=new Point(0,0),l=new Matrix;l._rotate(r),a=l._transform(a,!0),n=l._transform(n,!0),o=l._transform(o,!0);var _=Math.min(a._x,n._x,o._x,s._x),c=Math.max(a._x,n._x,o._x,s._x),d=Math.min(a._y,n._y,o._y,s._y),u=Math.max(a._y,n._y,o._y,s._y);return[c-_,u-d]},Matrix._tween=function(e,t,r,a,n){if(t._rawSita==null||r._rawSita==null)e._a=n*(t._a-r._a)+r._a,e._b=n*(t._b-r._b)+r._b,e._c=n*(t._c-r._c)+r._c,e._d=n*(t._d-r._d)+r._d,e._tx=n*(t._tx-r._tx)+r._tx,e._ty=n*(t._ty-r._ty)+r._ty;else{e._rawWidth=(1-a._width(n))*(t._rawWidth-r._rawWidth)+r._rawWidth,e._rawHeight=(1-a._height(n))*(t._rawHeight-r._rawHeight)+r._rawHeight;var o=t._rawWidth*t._rawScaleX,s=r._rawWidth*r._rawScaleX,l=t._rawHeight*t._rawScaleY,_=r._rawHeight*r._rawScaleY,c=(1-a._width(n))*(o-s)+s,d=(1-a._height(n))*(l-_)+_;e._rawScaleX=c/e._rawWidth,e._rawScaleY=d/e._rawHeight,e._rawSita=(1-a._rotation(n))*(t._rawSita-r._rawSita)+r._rawSita,e._rotateCenterX=(1-a._rotation(n))*(t._rotateCenterX-r._rotateCenterX)+r._rotateCenterX,e._rotateCenterY=(1-a._rotation(n))*(t._rotateCenterY-r._rotateCenterY)+r._rotateCenterY,e._rawLeft=(1-a._left(n))*(t._rawLeft-r._rawLeft)+r._rawLeft,e._rawTop=(1-a._top(n))*(t._rawTop-r._rawTop)+r._rawTop,e._rawRotate3dX=(1-a._rotation(n))*(t._rawRotate3dX-r._rawRotate3dX)+r._rawRotate3dX,e._rawRotate3dY=(1-a._rotation(n))*(t._rawRotate3dY-r._rawRotate3dY)+r._rawRotate3dY,e._pers=(1-a._rotation(n))*(t._pers-r._pers)+r._pers,e._H=Math.max.apply(Math,Matrix._getScaledBox(c,d,e._rawSita))}return e},mod.namespace("Geom.Matrix",Matrix),mod.exportName(proto$28,["scale",proto$28._scale,"translate",proto$28._translate,"rotate",proto$28._rotate,"create3DMatrix",proto$28._create3DMatrix,"translate3D",proto$28._translate3D,"rotateZ3D",proto$28._rotateZ3D,"rotateY3D",proto$28._rotateY3D,"rotateX3D",proto$28._rotateX3D,"perspective",proto$28._perspective,"setRawRotate3dX",proto$28._setRawRotate3dX,"setRawRotate3dY",proto$28._setRawRotate3dY,"setRawPers",proto$28._setRawPers,"setRawSite",proto$28._setRawSita,"setRawRotateCenterX",proto$28._setRawRotateCenterX,"setRawRotateCenterY",proto$28._setRawRotateCenterY,"setRawLeft",proto$28._setRawLeft,"setRawTop",proto$28._setRawTop,"transform",proto$28._transform,"toCssText",proto$28._toCssText,"getScaleX",proto$28._getScaleX,"getScaleY",proto$28._getScaleY,"parseParam",proto$28._parseParam,"calMatrixFormRaw",proto$28._calMatrixFormRaw,"inverse",proto$28._inverse,"getRotation",proto$28._getRotation]),mod.exportName(Matrix,["multiplication",Matrix._multiplication]),mod.namespace("Geom.Matrix",Matrix);var eventPool=[],MuEvents=function(e,t,r){var a=this;eventPool.length||(a.canceled=!1,a.stopped=0,a._type=e,a._bubbles=t===!0,a._cancelable=r===!0,a._currentTarget=null,a._eventPhase=null,a._target=null,mod.definePropertyReadOnly(a,["type",function(){return a._type},"bubbles",function(){return a._bubbles},"cancelable",function(){return a._cancelable},"currentTarget",function(){return a._currentTarget},"eventPhase",function(){return a._eventPhase},"target",function(){return a._target}]))},_proto_$1=MuEvents.prototype;_proto_$1.clone=function(){},_proto_$1.formatToString=function(){},_proto_$1.isDefaultPrevented=function(){return this.canceled},_proto_$1._preventDefault=function(){this.cancelable&&(this.canceled=!0)},_proto_$1.stopImmediatePropagation=function(){this.stopped=2},_proto_$1.stopPropagation=function(){this.stopped===0&&(this.stopped=1)},_proto_$1.toString=function(){},mod.namespace("Events.Event",MuEvents),mod.exportName(_proto_$1,["clone",_proto_$1.clone,"formatToString",_proto_$1.formatToString,"isDefaultPrevented",_proto_$1.isDefaultPrevented,"preventDefault",_proto_$1._preventDefault,"stopImmediatePropagation",_proto_$1.stopImmediatePropagation,"stopPropagation",_proto_$1.stopPropagation,"toString",_proto_$1.toString]);var InputEvent=function(e,t){var r=this;InputEvent.__super__.constructor.apply(r,arguments),r._originEvent=t,r._originPreventDefault=t.preventDefault,r._originStopImmediatePropagation=t.stopImmediatePropagation,r._originStopPropagation=t.stopPropagation,r._stage=null,mod.definePropertyReadOnly(r,["inputX",proto$27._getInputX,"inputY",proto$27._getInputY,"systemEvent",proto$27._getSystemEvent])};mod.extend(InputEvent,MuEvents);var proto$27=InputEvent.prototype;InputEvent.CaptureDisplayObject=null,proto$27._getInputX=function(){return getRealPos.bind(this)()._x},proto$27._getInputY=function(){return getRealPos.bind(this)()._y},proto$27._setCapture=function(e){InputEvent.CaptureDisplayObject=e},proto$27._releaseCapture=function(){InputEvent.CaptureDisplayObject=null},proto$27._preventDefault=function(){var e=this;InputEvent.__super__._preventDefault.apply(e,arguments),e._originPreventDefault.call(e._originEvent)},proto$27.stopImmediatePropagation=function(){var e=this;InputEvent.__super__.stopImmediatePropagation.apply(e,arguments),e._originStopImmediatePropagation.call(e._originEvent)},proto$27.stopPropagation=function(){var e=this;InputEvent.__super__.stopPropagation.apply(e,arguments),e._originStopPropagation.call(e._originEvent)};var getRealPos=proto$27._getRealPos=function(){var e=this,t=e._originEvent,r=e._stage;return InputEvent._getRealPos(r,t)};InputEvent._getRealPos=function(e,t){if(t.changedTouches)var r=t.changedTouches[0],a=r.clientX,n=r.clientY;else a=t.clientX,n=t.clientY;return InputEvent._systemPositionToStagePosition(e,a,n)},InputEvent._systemPositionToStagePosition=function(e,t,r){var a=new Matrix(null,null,null,null,-e._fullScreenRect._left,-e._fullScreenRect._top);return a=Matrix._multiplication(e._transform._matrix,a),a._inverse()._transform(new Point(t,r))},proto$27._getSystemEvent=function(){return this._originEvent},mod.namespace("Events.InputEvent",InputEvent);var MAX_LEN=10,Inertia=function(e,t){var r=this;r._currentIdx=-1,r._startPoint=null,r._times=[],r._points=[],r._damping=e!==void 0?e:.001,t&&(r._damping*=t),r._speed=null,r._time=null},proto$26=Inertia.prototype;proto$26.start=function(e){var t=this;t._startPoint=e,t.add(e)},proto$26._clear=function(){var e=this;e._speed!=null?(e._speed._x=0,e._speed._y=0):(this._times=[],this._points=[])},proto$26.add=function(e,t){var r=this;t=t||new Date*1,r._times.length>=MAX_LEN&&(r._times.shift(),r._points.shift()),r._times.push(t),r._points.push(e)},proto$26._startIterate=function(){for(var e=this,t=new Date*1,r=[],a=[],n=0;n<e._times.length;n++){var o=e._times[n];o>t-200&&(r.push(o),a.push(e._points[n]))}if(r.length<2)e._speed=new Point(0,0),e._time=new Date*1,e._startPoint=null;else{var s=new Point(0,0),l=r[r.length-1]-r[0];s._x=(a[a.length-1]._x-a[0]._x)/l,s._y=(a[a.length-1]._y-a[0]._y)/l,e._speed=s,e._time=new Date*1}e._points=null,e._times=null,e._startPoint=null},proto$26._iterate=function(){var e=this,t=new Date*1,r=e._time,a=t-r,n=e._speed;if(!n)return n=new Point(0,0),n;var o=Math.sqrt(n._x*n._x+n._y*n._y),s=e._damping/o*n._x,l=e._damping/o*n._y,_=n._x!==0?n._x-.5*s*a:0,c=n._y!==0?n._y-.5*l*a:0;if(n._x>0&&_<0||n._x<0&&_>0||n._x===0){var d=n._x/s;_=0}else d=a;if(n._y>0&&c<0||n._y<0&&c>0||n._y===0){var u=n._y/l;c=0}else u=a;var f=n._x*d-.5*s*d*d,p=n._y*u-.5*l*u*u,v=new Point(f,p);return e._time=t,e._speed._x=_,e._speed._y=c,v},proto$26._getMovingOffset=function(){var e=this;return new Point(e._points[this._points.length-1]._x-e._points[this._points.length-2]._x,e._points[this._points.length-1]._y-e._points[this._points.length-2]._y)};var ActionDrag=function(e,t,r,a){ActionDrag.__super__.constructor.apply(this,arguments);var n=this;n._displayObject=e,n._dragType=t,n._dragReset=r,n._dragInfo=void 0,n._inertia=a*1};mod.extend(ActionDrag,Action);var proto$25=ActionDrag.prototype;proto$25.doAction=function(){var e=this;e.logicPositive()},proto$25._bindDragEvent=function(){var e=this,t=e._displayObject,r=e._dragType,a=e._dragReset,n={start:{x:void 0,y:void 0},end:{x:void 0,y:void 0},dragCaptured:void 0,initX:void 0,initY:void 0,initRect:void 0,initSita:void 0,initPos:void 0,rotateCenterX:void 0,rotateCenterY:void 0,deltaAngle:void 0,currentInertia:void 0},o=function(c){if(c._originEvent.button!==void 0&&c._originEvent.button!==0){n.dragCaptured&&_(c);return}n.dragCaptured=!0,t._dragCaptured=!0,n.initX=t._getX(),n.initY=t._getY(),n.initRect=t._getRect();var d=t._getStagePosition();if(n.initSita=e._dragInfo?e._dragInfo.initSita:t._transform._matrix._rawSita,n.initPos=e._dragInfo?e._dragInfo.initPos:d,n.rotateCenterX=t._transform._matrix._rotateCenterX+t._transform._matrix._rawLeft,n.rotateCenterY=t._transform._matrix._rotateCenterY+t._transform._matrix._rawTop,n.start.x=c._getInputX(),n.start.y=c._getInputY(),n.deltaAngle=0,document.addEventListener(Browser$1.InputMove,s,{passive:!1}),document.addEventListener(Browser$1.InputEnd,_,{passive:!1,capture:!0,once:!0}),e._inertia){var u=new Inertia(void 0,(r==4?.01:1)*3/(e._inertia/100));t._haveSelfFunction=null,n.currentInertia=u,r==4?u.start(new Point(0,0)):u.start(c._getRealPos())}e._dragInfo=n};t._addEventListener(Browser$1.InputStart,o,!1,100);var s=function(c){if(n.dragCaptured){var d=new InputEvent(c.type,c);d._stage=t._getStage();var u=c.target;Browser$1.os.ios&&u&&u.nodeName.toLowerCase()=="video"||(d._preventDefault(),console.debug("preventDefault")),n.end.x=d._getInputX(),n.end.y=d._getInputY();var f=n.end.x-n.start.x,p=n.end.y-n.start.y,v=0,h=r;if((h==1||h==3||h==4)&&Math.abs(f)>v||(h==2||h==3||h==4)&&Math.abs(p)>v){var g=new MuEvents("switchcannel",!1);d._stage._dispatchEvent(g),n.dragCaptured=2}n.dragCaptured===2&&l(f,p,d)}},l=function(c,d,u,f){var p=r,v=n.initX+c,h=n.initY+d,g=t._getX(),w=t._getY();t._setX(v),t._setY(h);var y=t._getRect(),x=t._getStage(),m=x._fullScreenRect.clone();m._left<0&&(m._setRight(m._getRight()-m._left),m._setLeft(0)),m._top<0&&(m._setBottom(m._getBottom()-m._top),m._setTop(0));var A=x._stageWidth,T=x._stageHeight,b=0,C=0;if(y.left<m.left&&y.right<m.left+A?b=Math.min(m.left-y.left,m.left+A-y.right):y.right>m.left+A&&y.left>m.left&&(b=Math.max(m.left-y.left,m.left+A-y.right)),y.top<m.top&&y.bottom<m.top+T?C=Math.min(m.top-y.top,m.top+T-y.bottom):y.bottom>m.top+T&&y.top>m.top&&(C=Math.max(m.top-y.top,m.top+T-y.bottom)),t._setX(g),t._setY(w),(b!=0||C!=0)&&(v+=b,h+=C),p<4&&p>0){if(u&&e._inertia&&n.currentInertia.add(u._getRealPos()),p==3){t._setX(v),t._setY(h);var M=e._checkDrop(n,v,h);v=M[0],h=M[1]}(p==1||p==3)&&t._setX(v),(p==2||p==3)&&t._setY(h)}else if(p==4){var x=t._getStage(),E=x._renderManager,O=E._mugeda,S=O._displayObjectHash[t._id],L=S._getRotate();if(f)R=L+f-n.initSita;else var D=Math.atan2(n.start.y-n.rotateCenterY,n.start.x-n.rotateCenterX),$=Math.atan2(n.end.y-n.rotateCenterY,n.end.x-n.rotateCenterX),R=$-D;for(var I=Math.PI;R-n.deltaAngle>I;)R-=Math.PI*2;for(;R-n.deltaAngle<-I;)R+=Math.PI*2;n.deltaAngle=R,R=n.initSita+n.deltaAngle;var P=Math.floor(L/2/Math.PI),F=L-P*2*Math.PI,N=R-Math.floor(R/2/Math.PI)*2*Math.PI;F>Math.PI?Math.abs(N-F)>Math.abs(N+Math.PI*2-F)?R=(P+1)*2*Math.PI+N:R=P*2*Math.PI+N:F>Math.PI&&(Math.abs(N-F)>Math.abs(N-Math.PI*2-F)?R=(P-1)*2*Math.PI+N:R=P*2*Math.PI+N),S._setRotate(R),u&&e._inertia&&n.currentInertia.add(new Point(R-n.initSita,0))}Mugeda.DataStats&&Mugeda.DataStats.entry({event:"dragMove"})},_=function(c){if(!(c.type=="mouseup"&&c.button!=0)){if(n.dragCaptured===2){var d=function(){if(e._handleDragEnd(n),a)if(r==4){var u=t._getStage(),f=u._renderManager,p=f._mugeda,v=p._displayObjectHash[t._id];v._setRotate(n.initSita)}else(r==1||r==3)&&t._setX(n.initPos.left),(r==2||r==3)&&t._setY(n.initPos.top),c.stopImmediatePropagation();e._dragInfo=void 0};e._inertia?(t._haveSelfFunction=function(){var u=n.currentInertia,f=u._iterate();r==4?l(null,null,null,f._x):(n.inertiaStartX+=f._x,n.inertiaStartY+=f._y,l(n.inertiaStartX-n.start.x,n.inertiaStartY-n.start.y)),u._speed._x===0&&u._speed._y===0&&(t._haveSelfFunction=null,n.currentInertia=void 0,d())},n.currentInertia._startIterate(),n.inertiaStartX=n.end.x,n.inertiaStartY=n.end.y):d()}n.dragCaptured&&(n.dragCaptured=!1,t._dragCaptured=!1,document.removeEventListener(Browser$1.InputMove,s),document.removeEventListener(Browser$1.InputEnd,_,!0))}}},proto$25._handleDragEnd=function(e){var t=this,r=t._displayObject,a=r,n=function(N,j,U){var J=32,B=(N.left+N.right)/2,W=(N.top+N.bottom)/2,G=B-j,q=W-U,X=Math.max(J,(N.right-N.left)/2),Y=Math.max(J,(N.bottom-N.top)/2),K=Math.abs(G)<X&&Math.abs(q)<Y;return K},o=function(N){var j=[],U=[];for(var J in N)N[J].dropIn?U.push(N[J]):j.push(N[J]);return j.concat(U)};r._onDragged();var s=r._getStage(),l=s._renderManager,_={},c={},d=null,u=[];l._dropObjectList&&Array.isArray(l._dropObjectList)&&l._dropObjectList.length>1&&(l._dropObjectList=o(l._dropObjectList));for(var f in l._dropObjectList)if(l._dropObjectList.hasOwnProperty(f)){var p=l._dropObjectList[f],v=p.action||null,h=p.container;if(v&&(v._behavior.logic||v._behavior.param&&v._behavior.param._logic),!!h._getRealVisible()){h.lastDropped=null;var g=p.target;if(h){var w=r._getRect(),y=h._getRect(),x=e.initRect||{};if(v){var m=v._behavior.param.element_name,A="{{dragend}}";if(m&&m.indexOf(A)>=0&&m.length>A.length&&a._name){m=m.replace("{{dragend}}",a._name);var l=a._getStage()._renderManager;v._liveDisplayObject=l.getReferenceElement(m)}else v._liveDisplayObject=a}if(!g||g!=r){var M=w.left+a._getWidth()/2,E=w.top+a._getHeight()/2,T=h._dropTestWithUpdate?h._dropTestWithUpdate(a,M,E):{},b=_[h._id];b||(_[h._id]=T);var C=T.canDrop===void 0?n(y,M,E):T.canDrop;C&&(d=h,d.lastDropped=a);var M=x.left+a._getWidth()/2,E=x.top+a._getHeight()/2,O=h._dropTest?h._dropTest(a,M,E):{},S=c[h._id];S||(c[h._id]=O),h._activeDrop=!1;var L=p.dropIn,D=O.canDrop===void 0?!n(y,M,E):!O.canDrop,$=L&&C&&D,R=!L&&!C&&!D,I=$||R;v&&I&&!g&&u.push(v)}if(g==r){var P=a._getRect(),M=P.left+g._getWidth()/2,E=P.top+g._getHeight()/2,T=h._dropTest?h._dropTest(g,M,E):{},b=_[h._id];b||(_[h._id]=T);var C=T.canDrop===void 0?n(y,M,E):T.canDrop;M=x.left+g._getWidth()/2,E=x.top+g._getHeight()/2,T=h._dropTest?h._dropTest(g,M,E):{};var D=T.canDrop===void 0?!n(y,M,E):!T.canDrop,L=p.dropIn,$=L&&C&&D,R=!L&&!C&&!D,I=L!==void 0&&($||R);I&&(v&&u.push(v),d=h,d.lastDropped=$?g:null)}}}}for(var F in _)if(_.hasOwnProperty(F)){var b=_[F],h=b.container;h&&h._onDropped&&!b.canDrop&&h._onDropped(a,d,!1)}return d&&d._onDropped&&d._onDropped(a,d,!0),u.sort(function(N,j){var U={dragout:0,drop:1};return U[N._event]-U[j._event]}),u.forEach(function(N){N.doAction()}),Mugeda.DataStats&&Mugeda.DataStats.entry({event:"dragEnd"}),d},proto$25._checkDrop=function(e,t,r){var a=this,n=a._displayObject,o=n._getStage()._renderManager;for(var s in o._dropObjectList)if(o._dropObjectList.hasOwnProperty(s)){var l=o._dropObjectList[s],_=l.container;if(_._getRealVisible()){var c=new Point(n._getRawWidth()/2,n._getRawHeight()/2),d=n._getTotalMatrix()._transform(c),u=_&&_._dropTest?_._dropTest(n,d._x,d._y):{};if(u.canDrop){if(a._inertia&&(u.x!==void 0||u.y!==void 0)&&e.currentInertia&&e.currentInertia._clear(),u.x!=null)var f=t+(u.x-d._x);if(u.y!=null)var p=r+(u.y-d._y)}}}return f?[f,p]:[t,r]};var ActionDragFree=function(e,t,r,a){ActionDragFree.__super__.constructor.apply(this,arguments);var n=this;n._funDownBind=n._funDown.bind(n),n._funMoveBind=n._funMove.bind(n),n._funEndBind=n._funEnd.bind(n),n._displayObject=e,n._dragType=t,n._dragReset=r,n._dragInfo=void 0,n._inertiaRate=a*1};ActionDragFree.TYPE_NoDrag=0,ActionDragFree.TYPE_Horizontal_Drag=1,ActionDragFree.TYPE_Vertical_Drag=2,ActionDragFree.TYPE_Free_Drag=3,ActionDragFree.TYPE_Rotation_Drag=4,ActionDragFree.TYPE_Free_Drag_Rotate_Scale=5,mod.extend(ActionDragFree,Action);var proto$24=ActionDragFree.prototype;proto$24.doAction=function(){var e=this;e.logicPositive()},proto$24._bindDragEvent=function(){var e=this,t=e._displayObject;e._stage=t._getStage(),t._addEventListener(Browser$1.InputStart,e._funDownBind,!1,100)},proto$24._funDown=function(e){var t=this,r=t._getTouches(e),a=t._toStagePos(r);t._startPoints=a,a.length===1&&a.push(a[0]),a.length>1&&(t._startDragDistance=Point.distance(a[0],a[1]),t._startDragRotate=Point.angle(a[0],a[1]),t._startTransform=t._displayObject._transform._clone(),t._initRect=t._displayObject._getRect(),t._lastPoints=a),document.addEventListener(Browser$1.InputMove,t._funMoveBind,{passive:!1}),document.addEventListener(Browser$1.InputEnd,t._funEndBind,{passive:!1})},proto$24._funMove=function(e){var t=this;if(t._startTransform){var r=new MuEvents("switchcannel",!1);t._stage._dispatchEvent(r),t._updatePos(e),e.preventDefault()}},proto$24._funEnd=function(e){var t=this;if(t._startTransform){var r=t._getTouches(e);if(t._updatePos(e,r),e.changedTouches===void 0||r.length===0){var a=t._displayObject;ActionDrag.prototype._handleDragEnd.call(t,{initRect:t._initRect}),t._dragReset&&a._setTransform(t._startTransform),t._startDragDistance=void 0,t._startDragRotate=void 0,t._startTransform=void 0,document.removeEventListener(Browser$1.InputMove,t._funMoveBind,{passive:!1}),document.removeEventListener(Browser$1.InputEnd,t._funEndBind,{passive:!1})}e.stopImmediatePropagation()}},proto$24._updatePos=function(e,t){var r=this;t=t||r._getTouches(e);var a=r._toStagePos(t);if(a.length===1){var n=a[0].identifier,o=r._lastPoints;if(n===o[0].identifier){var s=o[1].subtract(o[0]).add(a[0]);s.identifier=o[1].identifier,a.push(s)}else s=o[0].subtract(o[1]).add(a[0]),s.identifier=o[0].identifier,a.unshift(s)}if(a.length>1){var l=Point.distance(a[0],a[1]);if(r._startDragDistance===0)var _=1,c=0;else{_=l/r._startDragDistance;var d=Point.angle(a[0],a[1]);c=d-r._startDragRotate,r._lastPoints=a}r._dragType%100-r._dragType%10===0&&(c=0),r._dragType%1e3-r._dragType%100===0&&(_=1);var u=r._dragType%10,f=a[0]._x-_*Math.cos(c)*r._startPoints[0]._x+_*Math.sin(c)*r._startPoints[0]._y,p=a[0]._y-_*Math.sin(c)*r._startPoints[0]._x-_*Math.cos(c)*r._startPoints[0]._y,v=r._startTransform._clone(),h=v._matrix;if([0,1,2].indexOf(u)!==-1){var g=new Point(h._rotateCenterX,h._rotateCenterY);h._transform(g,!0)}if(h._scale(_,_),h._rawScaleX!=null&&(h._rawScaleX*=_,h._rawScaleY*=_),h._rotate(c),h._rawSita!=null&&(h._rawSita+=c),h._translate(f,p),[0,1,2].indexOf(u)!==-1){var w=new Point(h._rotateCenterX,h._rotateCenterY);h._transform(w,!0);var y=w.subtract(g);u===0?h._translate(-y._x,-y._y):u===1?h._translate(0,-y._y):u===2&&h._translate(-y._x,0)}if(h._rawLeft!=null){var x=new Matrix;x._scale(_,_),x._translate(-h._rotateCenterX,-h._rotateCenterY),x._rotate(c),x._translate(h._rotateCenterX,h._rotateCenterY),h._rawLeft=h._tx-x._tx,h._rawTop=h._ty-x._ty}r._displayObject._setTransform(v);var m=r._displayObject._getX(),A=r._displayObject._getY(),T=ActionDrag.prototype._checkDrop.call(r,{},m,A);T[0]!==m&&r._displayObject._setX(T[0]),T[1]!==A&&r._displayObject._setY(T[1])}},proto$24._getTouches=function(e){e=e._originEvent||e;var t=e.touches||[{identifier:99,clientX:e.clientX,clientY:e.clientY}];return Array.prototype.slice.call(t,0,2)},proto$24._toStagePos=function(e){var t=this;return e.map(function(r){var a=InputEvent._getRealPos(t._stage,r);return a.identifier=r.identifier,a})};var ActionElement=function(e,t){ActionElement.__super__.constructor.apply(this,arguments);var r=this;r._event=e,r._behavior=null,r._targetAObject=null,r._reset=t};mod.extend(ActionElement,Action);var proto$23=ActionElement.prototype;proto$23.doAction=function(){var e=this;if(e.logicPositive()){ActionElement.__super__.doAction.apply(e,arguments);var t=e._stage,r=function(w){if(t){var y=t._displayObject._renderManager;w=y._replaceMacros(w)}return w.toString()},a=function(w){var y=w;if(!y&&e._liveDisplayObject){var x=e._stage._displayObject._renderManager._mugeda;y=x._displayObjectHash[e._liveDisplayObject._id],e._liveDisplayObject=null}if(y&&s){var m=s.element_property,A=s.element_type,T=s.element_value.toString(),b=T.split(";");b.length>1&&(b[b.length-1]==""&&b.pop(),T=b[Math.floor(Math.random()*b.length)]);try{T=r(T),(T===""||T.match(/^[A-Za-z0-9]+$/))&&(T="'"+T+"'");var C=new Function("return "+T+";");T=C()}catch{}if(m=="background"){if(T){if(T.replace(/\s+/g,"")===y[m])return;y[m]=T}}else if(m=="border"&&T){if(T.replace(/\s+/g,"")===y[m])return;y[m]=T}if(m!="animation"){y._changedHash=y._changedHash||{};var M=y._changedHash[m]||0,E=8;if(M<E){if(y._changedHash[m]=M+1,A=="overwrite"){var O=m=="text"?T:parseFloat(T),S=y[m];m=="rotate"?O=O*Math.PI/180:m=="alpha"&&(O=O*.01),(m=="text"||Math.abs(S-O)>1e-5)&&(y[m]=O)}else if(A=="delta"&&Math.abs(T)>1e-5){parseFloat(y[m]);var O=m=="text"?T:parseFloat(T);m=="rotate"?O=O*Math.PI/180:m=="alpha"&&(O=O*.01),y[m]=parseFloat(y[m])+parseFloat(O)}if(m=="text"&&parseInt(s.keep_value||0)){var L=e._stage._displayObject,D=L._renderManager,$=D.getReferenceElement(s.element_name,!0),R=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};R.addCustomMugedaParameters(encodeURIComponent("m_"+y.data.guid),encodeURIComponent($.text))}delete y._changedHash[m]}else console.warn("行为链对id为"+y._displayObject._id+"的元素的属性（"+m+"）设置超出了允许的次数。请检查内容逻辑中是否有循环设置属性的问题。")}}},n=function(w,y){var x={stopFlag:!1};y(w,x);for(var m=w._children,A=m.length,T=0;T<A;T++){var b=m[T];n(b,y)}},o=function(w){var y=[];if(["{{all}}","{{alldragged}}","{{visible}}","{{dragged}}"].indexOf(w)>=0)n(t,function(m){var A=m._displayObject._aniData||{},T=A.param||{};if((w!="{{dragged}}"&&w!="{{alldragged}}"||T.drag>0)&&(w=="{{all}}"||w=="{{alldragged}}"||m._displayObject._getRealVisible())){var b=(A.type||"").toString();b.match(/\d+/)&&y.push(_._displayObjectHash[m._displayObject._id])}});else{var x=_._scene.getObjectByName(w);x&&y.push(x)}return y},s=e._behavior.param;if(e._reset){if(s){var l=e._stage._displayObject._renderManager,_=l._mugeda,c=s.element_name,d=s.element_range,u=s.element_property;d==="all"&&(u="all");var f=[];if(c&&c.indexOf("more|-|")>-1){var p=o("{{all}}"),v=s.element_name.split("more|-|")[1];if(v){v.indexOf("_")>-1&&(v=v.split("_")[1]);for(var h=0;h<p.length;h++)p[h].name&&p[h].name.substring(0,v.length)==v&&f.push(p[h])}}else c.indexOf("{{")>-1&&c.indexOf("}}")>-1?f=o(c):f.push(e._targetAObject);f.forEach(function(w){var y=w._displayObject;y._reset(u)})}}else{var l=e._stage._displayObject._renderManager,_=l._mugeda;if(s.element_name&&s.element_name.indexOf("more|-|")>-1){var p=o("{{all}}"),v=s.element_name.split("more|-|")[1];if(v){v.indexOf("_")>-1&&(v=v.split("_")[1]);for(var h=0;h<p.length;h++)p[h].name&&p[h].name.substring(0,v.length)==v&&a(p[h])}}else{var g=e._targetAObject;a(g)}}}},mod.namespace("Action.ActionElement",ActionElement);var ActionForm=function(e,t,r){var a=this;ActionForm.__super__.constructor.apply(a,arguments),this._nestedAction=r,this._stageDom=t};mod.extend(ActionForm,Action);var proto$22=ActionForm.prototype;proto$22.doAction=function(){var e=this;if(e.logicPositive()){e._nestedAction&&(e._behavior.param.callback=e._nestedAction.doAction.bind(e._nestedAction));var t=Browser$1._globalObject.MugedaBehavior;if(t){e._behavior.param.isCss=!0,t.popupForm(e._behavior.param);var r=e._behavior.param.iframeDiv;r&&e._stageDom&&(r.style.padding=0,e._stageDom.appendChild(r))}}};var ActionGetCheckout=function(e,t){ActionGetCheckout.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._serviceId=null};mod.extend(ActionGetCheckout,Action);var proto$21=ActionGetCheckout.prototype;proto$21.doAction=function(e){var t=this,r=t._stage._displayObject;r._renderManager;var a=t._options.onFinish,n=t._options.onFailure;if(!t.logicPositive()){a&&a.doAction.apply(a);return}var o=t._behavior,s=o.param||{},l,_;switch(s.time_cycle){case"today":l=new Date,l.setHours(0,0,0,0),_=new Date(l.getTime()+24*3600*1e3-1);break;case"yesterday":l=new Date(new Date().getTime()-24*3600*1e3),l.setHours(0,0,0,0),_=new Date(l.getTime()+24*3600*1e3-1);break;case"this_Week":l=new Date(new Date);let g=l.getDay(),w=l.getDate()-g+(g==0?-6:1);l.setDate(w),_=new Date(l.getTime()+168*3600*1e3-1);break;case"this_month":l=new Date,l.setDate(1),l.setHours(0,0,0,0),_=new Date,_.setMonth(_.getMonth()+1),_.setDate(0),_.setHours(23,59,59,999);break;case"custom":l=new Date(s.start_time),_=new Date(s.end_time);break}var c=t._stage._displayObject._renderManager._mugeda,d=s.nickname_target,u=s.avatar_target;if(!d||d.indexOf("more2|-|")===-1)f=[];else{let g=d.replace("more2|-|","");var f=c._scene.getObjectByName(g,"prefix2")}if(!u||u.indexOf("more2|-|")===-1)p=[];else{let g=u.replace("more2|-|","");var p=c._scene.getObjectByName(g,"prefix2")}var v=s.checkout_target,h=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};h.getCheckout&&h.getCheckout({serviceId:v,timeStart:`${l.getFullYear()}-${l.getMonth()+1}-${l.getDate()} ${l.getHours()}:${l.getMinutes()}:${l.getSeconds()}`,timeEnd:`${_.getFullYear()}-${_.getMonth()+1}-${_.getDate()} ${_.getHours()}:${_.getMinutes()}:${_.getSeconds()}`,sort:s.sort==="时间降序"?"DESC":"升序",count:Math.max(f.length,p.length)},function(g){g.status==0?(g.data.forEach(function(w,y){f[y]&&f[y]._setText(w.nickname),p[y]&&c._displayObjectHash[p[y]._id]._setSrc(w.avatar)}),a&&a.doAction.apply(a),ActionGetCheckout.__super__.doAction.apply(t,arguments)):n&&n.doAction.apply(n)}),ActionGetCheckout.__super__.doAction.apply(t,arguments)};var ActionGetLocalData=function(){ActionGetLocalData.__super__.constructor.apply(this,arguments)};mod.extend(ActionGetLocalData,Action);var proto$20=ActionGetLocalData.prototype;proto$20.doAction=function(){var e=this,t=e._behavior.param;if(e.logicPositive()){var r=e._displayObject._getRoot(),a=r._renderManager._mugeda,n=a._scene.getObjectByName(e._behavior.param.element);if(n){var o=Mugeda.getContentId(),s=o.crid,l=null;switch(t.readRange){case"every":for(var _=new RegExp("Mugeda_localData_(.+?)_"+t.readName),c=0;c<localStorage.length;c++){var f=localStorage.key(c);if(_.test(f)){l=localStorage.getItem(f);break}}break;case"selected":for(var d=t.readId?t.readId.split(`
`):[],f,u=null,c=0;c<d.length;c++)if(f="Mugeda_localData_"+d[c]+"_"+t.readName,u=window.localStorage.getItem(f),u){l=u;break}break;case"my":default:var f="Mugeda_localData_"+s+"_"+t.readName;l=window.localStorage.getItem(f)}var p,v;try{var h=JSON.parse(l);p=h.value,v=h.expire}catch{return console.log("解析本地数据失败"),!1}if(v&&!(v>new Date().getTime())){window.localStorage.removeItem(f);return}n.text=p}}},mod.namespace("Action.ActionGetLocalData",ActionGetLocalData);var ActionGetLocation=function(e,t){ActionGetLocation.__super__.constructor.apply(this,arguments);var r=this;r.behaviorData=t};mod.extend(ActionGetLocation,Action);var proto$1$=ActionGetLocation.prototype;proto$1$.doAction=function(){function e(d){return d instanceof Function}var t=this,r=t.behaviorData,a=r.location_show_target,n=r.location_format?r.location_format.split(","):null,o=t._stage._displayObject,s=o._renderManager,l=s.getReferenceElement(a,!0);if(Browser$1._isWeChat()){var _=Browser$1._globalObject.wx;_&&e(_.getLocation)&&_.getLocation({type:"wgs84",success:function(d){c({longitude:d.longitude,latitude:d.latitude})},cancel:function(d){console.info(d)},fail:function(d){console.info(d)}})}else window.location.protocol!="https:"&&Mugeda.log("当前行为包含获取地理信息服务。该特性仅在HTTPS协议下生效，在你目前使用的HTTP协议下可能无效。"),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(d){c({longitude:d.coords.longitude,latitude:d.coords.latitude})},function(d){console.info(d.message)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0,provider:"system",coordsType:"wgs84",geocode:!1});function c(d){if(n&&a){var u=Browser$1._getWeixinServerHost()+"/server/huodong.php/get_city";if(!t.logicPositive())return;window.ajaxHelper({url:u+"?longitude="+d.longitude+"&latitude="+d.latitude+"&response_type=jsonp",type:"jsonp",mode:"postMessage",success:function(f){if(f.status===0)if(f.result&&f.result.addressComponent){var p=f.result.addressComponent,v="";n.forEach((h,g)=>{v+=(g>0?" ":"")+p[h]}),l&&l._setText(v)}else Mugeda.messageBox("地理位置数据获取失败。");else Mugeda.messageBox("服务器错误,错误码:"+f.status)}})}}};var ActionGlobalPause=function(e,t){ActionGlobalPause.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionGlobalPause,Action);var proto$1_=ActionGlobalPause.prototype;proto$1_.doAction=function(){if(this.logicPositive()){var e=this._stage._displayObject._renderManager;e.pause();var t=this._movieClip._currentScene.getDom();t.querySelectorAll("video").forEach(function(r){r.paused||(r.pause(),r.pausedByGlobalPause=!0)}),Mugeda.stopAudioAll&&Mugeda.stopAudioAll()}},mod.namespace("Action.ActionGlobalPause",ActionGlobalPause);var ActionGlobalResume=function(e,t){ActionGlobalResume.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionGlobalResume,Action);var proto$1Z=ActionGlobalResume.prototype;proto$1Z.doAction=function(){if(this.logicPositive()){var e=this._stage._displayObject._renderManager;e.resume();var t=this._movieClip._currentScene.getDom();t.querySelectorAll("video").forEach(function(r){r.paused&&r.pausedByGlobalPause&&(r.play(),r.pausedByGlobalPause=!1)}),Mugeda.playAudioAll&&Mugeda.playAudioAll()}},mod.namespace("Action.ActionGlobalResume",ActionGlobalResume);var History=function(){},MUGEDA_STATE="MUGEDASTATE",getMugedaState=function(e,t){var r={param:t};return r[MUGEDA_STATE]=e,r},activeState=-1,actionList=null,syncActionList=function(){try{window.sessionStorage[MUGEDA_STATE]=JSON.stringify(actionList)}catch(e){console.log("window.sessionStorage:"+e.toString())}},getActionList=function(){try{window.sessionStorage[MUGEDA_STATE]||(window.sessionStorage[MUGEDA_STATE]=JSON.stringify([])),actionList=JSON.parse(window.sessionStorage[MUGEDA_STATE])}catch(e){console.log("window.sessionStorage:"+e.toString()),actionList=[],syncActionList()}return actionList};History._pushAction=function(e){getActionList(),activeState<actionList.length-1&&actionList.splice(activeState+1,actionList.length-1-activeState),actionList.push({backward:e}),syncActionList(),window.history.pushState(getMugedaState(++activeState),document.title)};var runHistory=function(e,t){var r=e.param.concat([t]),a=window.Mugine;return e.mod.split(".").forEach(function(n){a=a[n]}),a[e.fun].apply(window,r)};Browser$1._isServer||window.addEventListener("popstate",function(){var e=window.history.state;if(e==null)t=-1;else var t=e[MUGEDA_STATE];if(t*1==t)if(t<activeState){getActionList();var r=actionList[t+1];_planToRun((function(a){return function(n){a.forward=runHistory(a.backward,n),syncActionList()}})(r)),activeState=t}else t>activeState&&(getActionList(),r=actionList[t],r&&(_planToRun((function(a){return function(n){runHistory(a.forward,n)}})(r)),activeState=t))});var runList=[],_planToRun=function(e){runList.push(e),_runNext()},_runNext=function(){var e=function(r){r&&runList.splice(0,1),_runNext()};if(runList.length){var t=runList[0];t(e)}};mod.namespace("Utils.History",History);var Common={},rootList=[];Common._GetRoot=function(e){return rootList[e]},Common._RegRoot=function(e){return rootList.push(e),rootList.length-1},mod.namespace("Utils.Common",Common);var ActionGoTo=function(e,t,r,a,n,o,s){ActionGoTo.__super__.constructor.apply(this,arguments);var l=this;l._movieClip=a,l._stop=n,l._event=e,l._scene=r,l._relative=t,l._appear=o,l._needBackPoint=s};mod.extend(ActionGoTo,Action);var proto$1Y=ActionGoTo.prototype;proto$1Y.doAction=function(){var e=this,t=e._movieClip||(e._liveDisplayObject&&e._liveDisplayObject._type=="MovieClip"?e._liveDisplayObject:null);if(t instanceof Array){e._liveDisplayObject=null;for(var r=0;r<t.length;r++){var l=t[r];if(!e.logicPositive()||!l)return;ActionGoTo.__super__.doAction.apply(e,arguments);var a=e._relative,n,o=e._behavior.param,s=e._behavior.type,l=t[r];if(s=="next"?n=1:s=="previous"?n=-1:n=getActualFrame(o,l,e),a&&(n+=l._currentFrame),n<0||n>=l._getTotalFrames())return;var _=this._stage._displayObject._renderManager._mugeda;e._scene=(_._displayObjectHash[l._id]||_)._scene,e._scene.currentSegment=null,e._stop?l.gotoAndStop(n,null,20):l.gotoAndPlay(n,null,20),e._needBackPoint&&History._pushAction({mod:"Action.ActionGoTo",fun:"doHistory",param:[l._getRoot()._rootId,l._id,n,e._movieClip._currentFrame,e._movieClip._pausedBeforeRender,e._stop]}),[ActionEvent.CLICK,ActionEvent.DRAGEND,ActionEvent.DRAGOUT,ActionEvent.DROP,ActionEvent.CONNECTORCONNECTED].indexOf(e._event)>=0&&!l._manualChange&&l._toggleManualChange(!0)}}else{var l=e._movieClip||(e._liveDisplayObject&&e._liveDisplayObject._type=="MovieClip"?e._liveDisplayObject:null);if(e._liveDisplayObject=null,!e.logicPositive()||!l)return;ActionGoTo.__super__.doAction.apply(e,arguments);var a=e._relative,n,o=e._behavior.param,s=e._behavior.type;if(s=="next"?n=1:s=="previous"?n=-1:n=getActualFrame(o,l,e),a&&(n+=l._currentFrame),n<0||n>=l._getTotalFrames())return;var _=this._stage._displayObject._renderManager._mugeda;e._scene=(_._displayObjectHash[l._id]||_)._scene,e._scene.currentSegment=null,e._stop?l.gotoAndStop(n,null,20):l.gotoAndPlay(n,null,20),e._needBackPoint&&History._pushAction({mod:"Action.ActionGoTo",fun:"doHistory",param:[l._getRoot()._rootId,l._id,n,e._movieClip._currentFrame,e._movieClip._pausedBeforeRender,e._stop]}),[ActionEvent.CLICK,ActionEvent.DRAGEND,ActionEvent.DRAGOUT,ActionEvent.DROP,ActionEvent.CONNECTORCONNECTED].indexOf(e._event)>=0&&!l._manualChange&&l._toggleManualChange(!0)}},ActionGoTo._doHistory=function(e,t,r,a,n,o,s){var l=Common._GetRoot(e),_=l._getDisplayObjectById(t);return _._checkMovieClipBusy(s,function(){n?_.gotoAndStop(a,null,20):_.gotoAndPlay(a,null,20)}),{mod:"Action.ActionGoTo",fun:"doHistory",param:[e,t,null,r,o,null]}};var getActualFrame=ActionGoTo._getActualFrame=function(e,t,r){var a=e.frame_name,n=e.frame_number||"";if(n.indexOf("{{")>-1&&n.indexOf("}}")>-1){var o=r._stage._displayObject,s=o._renderManager,l=n.replace(/[\{|\}]/g,""),_=s.getReferenceElement(l,!0);parseInt(_.text)?n=_.text:a=_.text}var c=e.page_id;if(t.id===1&&c){var d=t._scenes.filter(function(y){return y._guid===c});if(d.length===0)throw window.alert("没有找到跳转的目标页"),"没有找到跳转的目标页";u=d[0]}else var u=t._currentScene||t._scenes[0]||{};var f=u._startFrame,p=u._numFrames+f;if(n&&n.length>0){for(var v=n.split(";"),h=[],g=0;g<v.length;g++){var w=v[g];w=parseInt(w)-1+f,w>=f&&w<p&&h.push(w)}n=h.join(";")}return n.length?n:a};mod.exportName(ActionGoTo,["doHistory",ActionGoTo._doHistory]),mod.namespace("Action.ActionGoTo",ActionGoTo);var ActionLink=function(e,t,r){ActionLink.__super__.constructor.apply(this,arguments);var a=this;a._target=t,a._link=e,a._replace=r};mod.extend(ActionLink,Action);var proto$1X=ActionLink.prototype;proto$1X.doAction=function(){var e=this;if(e.logicPositive()){var t=Browser$1._globalObject.MugedaMraid;if(t){var r=e._link,a=r;Browser$1._isPreview()&&a!="about:blank"&&(a=Browser$1._getRedirectUrl(a)),t.openLink(a,e._target,e._replace)}}};var ActionPage=function(e,t,r,a,n,o,s){ActionPage.__super__.constructor.apply(this,arguments);var l=this;l._aimPage=r,l._movieClip=n,l._scene=a,l._relative=t,l._switcher=o,l._needBackPoint=s};mod.extend(ActionPage,Action);var getActualPage=function(){var a=this,e=a._behavior.param,t=e.page_guid||"",r=e.page_number||"",a=this,n=a._movieClip._scenes;if(r){if(r.indexOf("{{")>-1&&r.indexOf("}}")>-1){var o=a._stage._displayObject,s=o._renderManager;r=r.replace(/[\{|\}]/g,"");var l=s.getReferenceElement(r,!0),_=l.text;if(parseInt(_))r=parseInt(_);else if(!parseInt(_)&&_)for(var c="",d=0;d<n.length;d++){var u=n[d];if(c=d+1,u._name==_){r=c;break}}}}else if(t)for(var d=0;d<n.length;d++){var u=n[d];if(u._guid==t){r=d+1;break}}return r},proto$1W=ActionPage.prototype;proto$1W.doAction=function(){var e=this;if(e.logicPositive()){ActionPage.__super__.doAction.apply(e,arguments);var t=e._relative,r=e._aimPage&&e._relative?e._aimPage:getActualPage.call(e);if(t){var a=e._movieClip._getSceneIndexByFrameNum(e._movieClip._currentFrame);r+=a}else{var n=r;if(typeof n=="string"){var o=n.split(";");o.length>1&&(n=o[Math.floor(Math.random()*o.length)]),n=parseInt(n)}r=n-1}if(!e._switcher){console.warn("内容触发了翻页行为但是没有发现翻页对象。这个内容只有一页吗？");return}if(!(e._switcher._isBusy()||isNaN(r))){var s={transition:e._behavior.param.page_transition,exit:e._behavior.param.page_exit,direction:e._behavior.param.page_direction,duration:e._behavior.param.page_time};if(e._movieClip.gotoPage(r,s),e._needBackPoint){var l=this._movieClip;History._pushAction({mod:"Action.ActionPage",fun:"doHistory",param:[l._getRoot()._rootId,l._id,r,s,l._currentFrame,e._movieClip._pausedBeforeRender,0]})}}}},ActionPage._doHistory=function(e,t,r,a,n,o,s,l){var _=Common._GetRoot(e),c=_._getDisplayObjectById(t);return c._checkMovieClipBusy(l,function(){s==0?(c.gotoPage(r,a),o?c.gotoAndStop(n,null):c.gotoAndPlay(n,null)):c.gotoPage(r,a)}),{mod:"Action.ActionPage",fun:"doHistory",param:[e,t,r,a,n,o,1]}},mod.exportName(ActionPage,["doHistory",ActionPage._doHistory]),mod.namespace("Action.ActionPage",ActionPage);var ActionPageControl=function(e,t,r,a){ActionPageControl.__super__.constructor.apply(this,arguments);var n=this;n._event=e,n._disabled=t,n._renderObjectSceneSwitcher=r,n._actionType=a};mod.extend(ActionPageControl,Action);var proto$1V=ActionPageControl.prototype;proto$1V.doAction=function(){var e=this;if(e.logicPositive()&&(ActionPageControl.__super__.doAction.apply(e,arguments),e._renderObjectSceneSwitcher&&e._renderObjectSceneSwitcher._options)){switch(e._actionType){case"forward":e._renderObjectSceneSwitcher._options._scrollDisabledForward=e._disabled;break;case"after":e._renderObjectSceneSwitcher._options._scrollDisabledAfter=e._disabled;break;case"all":e._renderObjectSceneSwitcher._options._scrollDisabledForward=e._disabled,e._renderObjectSceneSwitcher._options._scrollDisabledAfter=e._disabled;break;default:e._renderObjectSceneSwitcher._options._scrollDisabled=e._disabled}e._renderObjectSceneSwitcher._updateArrowStatus()}};var ActionStop=function(e,t,r,a){ActionStop.__super__.constructor.apply(this,arguments);var n=this;n._scene=t,n._movieClip=r,n._appear=a};mod.extend(ActionStop,Action);var proto$1U=ActionStop.prototype;proto$1U.doAction=function(){var e=this;if(e.logicPositive()){var t=e._movieClip;if(!e._scene){var r=this._stage._displayObject._renderManager._mugeda;e._scene=(r._displayObjectHash[t._id]||r)._scene}if(!e._scene)e._movieClip._presetAnimation&&e._movieClip._presetAnimation._setStatus("pause");else{e._scene.currentSegment=null,ActionStop.__super__.doAction.apply(e,arguments);var t=e._movieClip;t.stop(20)}}},mod.namespace("Action.ActionStop",ActionStop);var NodeEvent=function(e,t){var r=this;NodeEvent.__super__.constructor.apply(r,arguments),r._displayObject=t};mod.extend(NodeEvent,MuEvents),NodeEvent.prototype,NodeEvent.CaptureDisplayObject=null;var visibilityEvent=function(e,t){var r=this;visibilityEvent.__super__.constructor.apply(r,arguments),r._displayObject=t};mod.extend(visibilityEvent,MuEvents),visibilityEvent.prototype,visibilityEvent.CaptureDisplayObject=null;var EventPhase=function(){};EventPhase.AT_TARGET=2,EventPhase.BUBBLING_PHASE=3,EventPhase.CAPTURING_PHASE=1,mod.exportName(EventPhase,["AT_TARGET",EventPhase.AT_TARGET,"BUBBLING_PHASE",EventPhase.BUBBLING_PHASE,"CAPTURING_PHASE",EventPhase.CAPTURING_PHASE]),mod.namespace("Events.EventPhase",EventPhase);var EventChangedEvent=function(e,t,r){var a=this;EventChangedEvent.__super__.constructor.apply(a,arguments),a._event=t,a._add=r};mod.extend(EventChangedEvent,MuEvents),EventChangedEvent.prototype;var IEventDispatcher=function(){this.eventListenersCapture={},this.eventListenersBubble={}},_counter=0,_proto_=IEventDispatcher.prototype,domEventList={touchstart:!0,touchmove:!0,touchend:!0,mousedown:!0,mousemove:!0,mouseup:!0,click:!0,dblclick:!0,mouseover:!0,mouseout:!0,pointerdown:!0,pointermove:!0,pointerup:!0,blur:!0,focus:!0},visibilityLikeEvent={visibilityChanged:!0,rendered:!0,removed:!0};_proto_._addEventListenerOnce=function(e,t,r,a){var n=this,o=function(){t.apply(this,arguments),n._removeEventListener(e,t,r)};n._addEventListener(e,o,r,a)},_proto_._addEventListener=function(e,t,r,a,n){var o=this;r=r===!0,a=a||0;var s={priority:a,listener:t,stamp:_counter++,domEvent:!1,domEventBind:!1,type:e,useCapture:r,visibilityLikeEventTarget:n},l=r?o.eventListenersCapture:o.eventListenersBubble,_=l[e];if(_==null&&(_=l[e]=[],_.sorted=!0),_.useSort=_.useSort||a!==0,_.push(s),_.useSort&&(_.sorted=!1),domEventList[e]){s.domEvent=!0;var c=new EventChangedEvent("domeventchanged",s,!0);this._dispatchEvent(c)}visibilityLikeEvent[e]&&(n||(s.visibilityLikeEventTarget=o),o._parent&&o._parent._addEventListener(e,t,r,a,s.visibilityLikeEventTarget))},_proto_._removeParentVisibilityLikeEvent=function(){var e=this;[e.eventListenersCapture,e.eventListenersBubble].forEach(function(t){Object.keys(t).forEach(function(r){if(visibilityLikeEvent[r]){var a=t[r];a.forEach(function(n){e._parent&&e._parent._removeEventListener(n.type,n.listener,n.useCapture,n.visibilityLikeEventTarget)})}})})},_proto_._addParentVisibilityLikeEvent=function(){var e=this;[e.eventListenersCapture,e.eventListenersBubble].forEach(function(t){Object.keys(t).forEach(function(r){if(visibilityLikeEvent[r]){var a=t[r];a.forEach(function(n){e._parent&&e._parent._addEventListener(n.type,n.listener,n.useCapture,n.priority,n.visibilityLikeEventTarget)})}})})};var _dispatchEvent=function(e,t){var r=t._type,a=e[r],n=this;if(a){if(a.useSort&&!a.sorted&&(a.sort(function(o,s){return s.priority===o.priority?s.stamp-o.stamp:s.priority-o.priority}),a.sorted=!0),!a.length)return;a.slice(0).forEach(function(o){if(t.stopped!==2){var s=o.listener.call(n,t);s===!1&&(t.stopPropagation(),t.preventDefault())}})}};_proto_._dispatchEvent=function(e){var t=this;switch(e._target===t&&(e._eventPhase=EventPhase.AT_TARGET),e.eventPhase){case EventPhase.CAPTURING_PHASE:_dispatchEvent.bind(t)(this.eventListenersCapture,e);break;case EventPhase.BUBBLING_PHASE:_dispatchEvent.bind(t)(this.eventListenersBubble,e),t._parent&&e.stopped===0&&(domEventList[e._type]&&t._parent._haveDom||t._parent._dispatchEvent(e));break;case EventPhase.AT_TARGET:_dispatchEvent.bind(t)(this.eventListenersCapture,e),e.stopped!==2&&_dispatchEvent.bind(t)(this.eventListenersBubble,e),e._eventPhase=EventPhase.BUBBLING_PHASE,t._parent&&e.stopped===0&&(domEventList[e._type]&&t._parent._haveDom||t._parent._dispatchEvent(e));break;default:_dispatchEvent.bind(t)(this.eventListenersCapture,e),e.stopped!==2&&_dispatchEvent.bind(t)(this.eventListenersBubble,e)}},_proto_.hasEventListener=function(e,t){return t==null?this.eventListenersCapture[e]!=null&&this.eventListenersCapture[e].length||this.eventListenersBubble[e]!=null&&this.eventListenersBubble[e].length:this.eventListenersCapture[e]!=null&&this.eventListenersCapture[e].length&&this.eventListenersCapture[e].some(function(r){return r.listener==t})||this.eventListenersBubble[e]!=null&&this.eventListenersBubble[e].length&&this.eventListenersBubble[e].some(function(r){return r.listener==t})},_proto_.hasEventListenerBubble=function(e){return this.eventListenersBubble[e]!=null&&this.eventListenersBubble[e].length},_proto_.hasEventListenerCapture=function(e){return this.eventListenersCapture[e]!=null&&this.eventListenersCapture[e].length},_proto_._removeEventListener=function(e,t,r,a){var n=this;r=r===!0;var o=r?this.eventListenersCapture:this.eventListenersBubble,s=visibilityLikeEvent[e],l=o[e];if(l){for(var _=l.length,c=!1;_;){var d=l[--_];if(d.listener===t&&(!s||d.visibilityLikeEventTarget==(a||n))){c=!0;break}}if(c){var u=l.splice(_,1)[0];if(domEventList[e]){var f=new EventChangedEvent("domeventchanged",u,!1);this._dispatchEvent(f)}s&&n._parent&&n._parent._removeEventListener(e,t,r,d.visibilityLikeEventTarget)}}},_proto_.willTrigger=function(e){return this.hasEventListener(e)},mod.namespace("Events.IEventDispatcher",IEventDispatcher),mod.exportName(_proto_,["addEventListener",_proto_._addEventListener,"dispatchEvent",_proto_._dispatchEvent,"hasEventListener",_proto_.hasEventListener,"removeEventListener",_proto_._removeEventListener,"willTrigger",_proto_.willTrigger]);var ColorTransform=function(e){var t=this;t._alphaMultiplier=1,t._filters={},mod.definePropertyGetSet(t,["alphaMultiplier",t._getAlphaMultiplier,t._setAlphaMultiplier])};ColorTransform._tween=function(e,t,r,a,n){var o=a._filter(n);e._alphaMultiplier=(1-a._alpha(n))*(t._alphaMultiplier-r._alphaMultiplier)+r._alphaMultiplier;var s=function(u,f,p){return u==="drop-shadow"?[(1-o)*(f[0]-p[0])+p[0],(1-o)*(f[1]-p[1])+p[1],(1-o)*(f[2]-p[2])+p[2],Color._tween(f[3],p[3],o)]:(1-o)*(f-p)+p},l=t._filters,_=r._filters,c={},d=Object.keys(l);return Object.keys(_).forEach(function(u){l[u]||d.push(u)}),d.forEach(function(u){if(l[u]===void 0)var f=getUndefinedVal(u),p=ColorTransform.parseFilter(u,f);else p=l[u];if(_[u]===void 0){f=getUndefinedVal(u);var v=ColorTransform.parseFilter(u,f)}else v=_[u];c[u]=s(u,p,v)}),e._filters=c,e};var getUndefinedVal=ColorTransform._getUndefinedVal=function(e){return{grayscale:{itensity:0},brightness:{itensity:100},contrast:{itensity:100},saturate:{itensity:100},sepia:{itensity:0},invert:{itensity:0},blur:{itensity:0},"hue-rotate":{rotation:0},"drop-shadow":{h:0,v:0,itensity:0,color:"rgba(0,0,0,0)"}}[e]},getDefaultFilterVal=ColorTransform._getDefaultFilterVal=function(e){return{grayscale:{itensity:100},brightness:{itensity:50},contrast:{itensity:50},saturate:{itensity:50},sepia:{itensity:100},invert:{itensity:100},blur:{itensity:4},"hue-rotate":{rotation:180},"drop-shadow":{h:4,v:4,itensity:4,color:"rgba(0,0,0,1)"}}[e]},proto$1T=ColorTransform.prototype;proto$1T._parseParam=function(e){var t=this;t._alphaMultiplier=e.alpha;var r=e.filters||[];t._filters={},r.forEach(function(a){var n=a.name,o=a.config;o===void 0&&(o=getDefaultFilterVal(n)),t._filters[n]=ColorTransform.parseFilter(n,o)})},ColorTransform.parseFilter=function(e,t){var r=function(n,o){return n===void 0?o:n},a=getDefaultFilterVal(e);return e==="drop-shadow"?[r(t.h,a.h),r(t.v,a.v),r(t.itensity,a.itensity),t.color?Color.parse(t.color):Color.parse(a.color)]:e==="hue-rotate"?r(t.rotation,a.rotation):r(t.itensity,a.itensity)},proto$1T._generateFilterString=function(){var e="",t=this;return Object.keys(t._filters).forEach(function(r){var a=t._filters[r];switch(r){case"grayscale":case"brightness":case"contrast":case"saturate":case"sepia":case"invert":e+=r+"("+a+"%) ";break;case"blur":e+=r+"("+a+"px) ";break;case"hue-rotate":e+=r+"("+a+"deg) ";break;case"drop-shadow":e+=r+"("+a[0]+"px "+a[1]+"px "+a[2]+"px "+a[3]._getCssText()+") ";break}}),e},proto$1T._getAlphaMultiplier=function(){return this._alphaMultiplier},proto$1T._setAlphaMultiplier=function(e){this._alphaMultiplier=e},proto$1T._getFillInfo=function(){return this._fillInfo},proto$1T._setFillInfo=function(e){this._fillInfo=e},proto$1T._getStrokeColor=function(){return this._strokeColor},proto$1T._setStrokeColor=function(e){this._strokeColor=e},proto$1T._getLineWidth=function(){return this._lineWidth},proto$1T._setLineWidth=function(e){this._lineWidth=e},proto$1T._compare=function(e){e=e||{};var t=this,r,a;return t._alphaMultiplier===e._alphaMultiplier&&(r=Object.keys(t._filters))&&(a=Object.keys(e._filters))&&r.length===a.length&&r.every(function(n){var o=r[n],s=a[n];return n==="drop-shadow"?o!==void 0&&s!==void 0&&o[0]===s[0]&&o[1]===s[1]&&o[2]===s[2]&&o[2]===s[2]:!isNaN(o)&&!isNaN(s)&&o===s})},proto$1T._clone=function(){var e=this,t=new ColorTransform;t._alphaMultiplier=e._alphaMultiplier,t._filters=[];for(var r in e._filters)t._filters[r]=e._filters[r];return t},proto$1T._getAlpha=function(){var e=this,t=e._alphaMultiplier;return t<.001?0:t},mod.namespace("Geom.ColorTransform",ColorTransform),mod.exportName(ColorTransform,["getUndefinedVal",getUndefinedVal,"getDefaultFilterVal",getDefaultFilterVal]);var TextTransform=function(e){var t=this;t._letterSpace=0,t._fontSize=32,t._lineHeight=100,mod.definePropertyGetSet(t,["letterSpace",t._getLetterSpace,t._setLetterSpace,"fontSize",t._getFontSize,t._setFontSize,"lineHeight",t._getLineHeight,t._setLineHeight])},proto$1S=TextTransform.prototype;proto$1S._getLetterSpace=function(){return this._letterSpace},proto$1S._setLetterSpace=function(e){this._letterSpace=e},proto$1S._getFontSize=function(){return this._fontSize},proto$1S._setFontSize=function(e){this._fontSize=e},proto$1S._getLineHeight=function(){return this._lineHeight},proto$1S._setLineHeight=function(e){this._lineHeight=e},proto$1S._compare=function(e){e=e||{};var t=this;return t._letterSpace===e._letterSpace&&t._fontSize===e._fontSize&&t._lineHeight===e._lineHeight},proto$1S._clone=function(){var e=this,t=new TextTransform;return t._letterSpace=e._letterSpace,t._fontSize=e._fontSize,t._lineHeight=e._lineHeight,t},mod.namespace("Geom.TextTransform",TextTransform);var Transform=function(){var e=this;e._matrix=new Matrix,e._colorTransform=new ColorTransform,e._paramTransform=null,e._beforeTranform=null,e._afterTransform=null,e._additionCss=null,mod.definePropertyGetSet(e,["matrix",e._getMatrix,e._setMatrix,"colorTransform",e._getColorTransform,e._setColorTransform,"paramTransform",e._getParamTransform,e._setParamTransform,"textTransform",e._getTextTransform,e._setTextTransform,"additionCss",e._getAdditionCss,e._setAdditionCss])},div=null;Transform._tween=function(e,t,r,a,n){Matrix._tween(e._matrix,t._matrix,r._matrix,a,n),ColorTransform._tween(e._colorTransform,t._colorTransform,r._colorTransform,a,n),e._paramTransform&&e._paramTransform.constructor._tween(e._paramTransform,t._paramTransform,r._paramTransform,a,n)};var proto$1R=Transform.prototype;proto$1R._parseParam=function(e,t){var r=this;r._matrix._parseParam(e),r._colorTransform._parseParam(e),r._paramTransform&&r._paramTransform._parseParam(e,t)},proto$1R._getAdditionCss=function(){return this._additionCss},proto$1R._setAdditionCss=function(e){e&&(div||(div=document.createElement("div")),div.style.cssText=e,e=div.style.cssText),this._additionCss=e},proto$1R._getMatrix=function(){return this._matrix},proto$1R._setMatrix=function(e){this._matrix=e},proto$1R._getColorTransform=function(){return this._colorTransform},proto$1R._setColorTransform=function(e){this._colorTransform=e},proto$1R._getParamTransform=function(){return this._paramTransform},proto$1R._setParamTransform=function(e){this._paramTransform=e},proto$1R._getTextTransform=function(){return this._textTransform},proto$1R._setTextTransform=function(e){this._textTransform=e},proto$1R._compare=function(e){var t=this;return e instanceof Transform?e===t?!0:t._matrix._compare(e._matrix)&&t._colorTransform._compare(e._colorTransform)&&(t._paramTransform==null&&e._paramTransform==null||t._paramTransform&&t._paramTransform._compareTo(e._paramTransform))&&t._beforeTranform==e._beforeTranform&&t._afterTransform==e._afterTransform&&t._additionCss==e._additionCss:!1},proto$1R._clone=function(){var e=this,t=new Transform;return t._matrix=e._matrix._clone(),t._colorTransform=e._colorTransform._clone(),e._paramTransform!=null&&(t._paramTransform=e._paramTransform._clone()),t._beforeTranform=e._beforeTranform,t._afterTransform=e._afterTransform,t._additionCss=e._additionCss,t},mod.namespace("Geom.Transform",Transform);var Rectangle=function(e,t,r,a){e=e||0,t=t||0,r=r||0,a=a||0;var n=this;n._height=a,n._left=e,n._top=t,n._width=r,mod.definePropertyGetSet(n,["bottom",n._getBottom,n._setBottom,"bottomRight",n._getBottomRight,n._setBottomRight,"height",n._getHeight,n._setHeight,"left",n._getLeft,n._setLeft,"right",n._getRight,n._setRight,"size",n._getSize,n._setSize,"top",n._getTop,n._setTop,"topLeft",n._getTopLeft,n._setTopLeft,"width",n._getWidth,n._setWidth,"x",n._getLeft,n._setLeft,"y",n._getTop,n._setTop])},proto$1Q=Rectangle.prototype;proto$1Q._getBottom=function(){var e=this;return e._top+e._height},proto$1Q._setBottom=function(e){var t=this;t._height=e-t._top},proto$1Q._getBottomRight=function(){var e=this;return new Point(e._left+e._width,e._top+e._height)},proto$1Q._setBottomRight=function(e){var t=this;t._height=e._y-t._top,t._width=e._x-t._left},proto$1Q._getBottomLeft=function(){var e=this;return new Point(e._left,e._top+e._height)},proto$1Q._getHeight=function(){return this._height},proto$1Q._setHeight=function(e){this._height=e},proto$1Q._getLeft=function(){return this._left},proto$1Q._setLeft=function(e){this._left=e},proto$1Q._getRight=function(){var e=this;return e._left+e._width},proto$1Q._setRight=function(e){var t=this;t._width=e-t._left},proto$1Q._getSize=function(){var e=this;return new Point(e._width,e._height)},proto$1Q._setSize=function(e){var t=this;t._width=e._x,t._height=e._y},proto$1Q._getTop=function(){return this._top},proto$1Q._setTop=function(e){this._top=e},proto$1Q._getTopLeft=function(){var e=this;return new Point(e._left,e._top)},proto$1Q._setTopLeft=function(e){var t=this;t._left=e._x,t._top=e._y},proto$1Q._getTopRight=function(){var e=this;return new Point(e._left+e._width,e._top)},proto$1Q._getWidth=function(){return this._width},proto$1Q._setWidth=function(e){var t=this;t._width=e},proto$1Q.clone=function(){var e=this;return new Rectangle(e._left,e._top,e._width,e._height)},proto$1Q.contains=function(e,t){var r=this;return e>=r._left&&e<=r._left+r._width&&t>=r._top&&t<=r._top+r._width},proto$1Q.containsPoint=function(e){var t=this;return t.contains(e._x,e._y)},proto$1Q.containRect=function(e){var t=this;return t.contains(e._left,e._top)&&t.contains(e.left,e._getBottom())&&t.contains(e._getRight(),e.top)&&t.contains(e._getRight(),e._getBottom())},proto$1Q.copyFrom=function(e){var t=this;t._left=e._left,t._top=e._top,t._width=e._width,t._height=e._height},proto$1Q.equals=function(e){var t=this;return t._left===e._left&&t._top===e._top&&t._width===e._width&&t._height===e._height},proto$1Q.inflate=function(e,t){var r=this;r._left-=e,r._width+=2*e,r._top-=t,r._height+=2*t},proto$1Q.inflatePoint=function(e){return proto$1Q.inflate(e._x,e._y)},proto$1Q.intersection=function(e){var t=this,r=e,a=t._left+t._width,n=r._left+r._width,o=t._top+t._height,s=r._top+r._height;if(a<r._left||n<t._left||o<r._top||s<t._top)return new Rectangle;var l=Math.max(t._left,r._left),_=Math.max(t._top,r._top);return new Rectangle(l,_,Math.min(a,n)-l,Math.min(o,s)-_)},proto$1Q.intersects=function(e){var t=this,r=e,a=t._left+t._width,n=r._left+r._width,o=t._top+t._height,s=r._top+r._height;return!(a<r._left||n<t._left||o<r._top||s<t._top)},proto$1Q.isEmpty=function(){var e=this;return e._width<=0||e._height<=0},proto$1Q.offset=function(e,t){var r=this;r._left+=e,r._top+=t},proto$1Q.offsetPoint=function(e){var t=this;t.offset(e._x,e._y)},proto$1Q.setEmpty=function(){this.setTo(0,0,0,0)},proto$1Q.setTo=function(e,t,r,a){var n=this;n._left=e,n._width=r,n._top=t,n._height=a},proto$1Q.toString=function(){var e=this;return"(x="+e._left+", y="+e._top+", width="+e._width+", height="+e._height+")"},mod.exportName(proto$1Q,["clone",proto$1Q.clone,"contains",proto$1Q.contains,"containsPoint",proto$1Q.containsPoint,"containRect",proto$1Q.containRect,"copyFrom",proto$1Q.copyFrom,"equals",proto$1Q.equals,"inflate",proto$1Q.inflate,"inflatePoint",proto$1Q.inflatePoint,"intersection",proto$1Q.intersection,"intersects",proto$1Q.intersects,"isEmpty",proto$1Q.isEmpty,"offset",proto$1Q.offset,"offsetPoint",proto$1Q.offsetPoint,"setEmpty",proto$1Q.setEmpty,"setTo",proto$1Q.setTo,"toString",proto$1Q.toString]),mod.namespace("Geom.Rectangle",Rectangle);var Boundary=function(){this._nodes=[],mod.definePropertyReadOnly(this,["nodes",this._getNodes])},proto$1P=Boundary.prototype;proto$1P._getNodes=function(){return this._nodes},proto$1P._getRoundRect=function(){var e=1/0,t=-1/0,r=1/0,a=-1/0;return this._nodes.forEach(function(n){e>n._x&&(e=n._x),t<n._x&&(t=n._x),r>n._y&&(r=n._y),a<n._y&&(a=n._y)}),new Rectangle(e,r,t-e,a-r)},proto$1P._addPoint=function(e){var t=this._nodes;t.push(e)},proto$1P._clockwiseSortPoints=function(){for(var e=this._nodes,t=e.length,r=0,a=0,n=0;n<t;n++)r+=e[n]._x,a+=e[n]._y;var o=new Point(r/t,a/t);for(n=0;n<t-1;n++)for(var s=0;s<t-n-1;s++)if(Boundary._pointCmp(e[s],e[s+1],o)){var l=e[s];e[s]=e[s+1],e[s+1]=l}},Boundary._pointCmp=function(e,t,r){if(e._x>=0&&t._x<0)return!0;if(e._x==0&&t._x==0)return e._y>t._y;var a=(e._x-r._x)*(t._y-r._y)-(t._x-r._x)*(e._y-r._y);if(a<0)return!0;if(a>0)return!1;var n=(e._x-r._x)*(e._x-r._x)+(e._y-r._y)*(e._y-r._y),o=(t._x-r._x)*(t._x-r._y)+(t._y-r._y)*(t._y-r._y);return n>o},Boundary._polygonClip=function(e,t){var r=e._nodes,a=t._nodes,n=r.length,o=a.length;if(n<3||o<3)return!1;for(var s=new Boundary,l=0;l<n;l++)for(var _=(l+1)%n,c=0;c<o;c++){var d=(c+1)%o,u=Boundary._getCrossPoint(r[l],r[_],a[c],a[d]);u&&s._addPoint(u)}for(l=0;l<n;l++)Boundary._isPointInpolygon(t,r[l])&&s._addPoint(r[l]);for(l=0;l<o;l++)Boundary._isPointInpolygon(e,a[l])&&s._addPoint(a[l]);if(!(s._nodes.length<=0))return s._clockwiseSortPoints(),s},Boundary._getCrossPoint=function(e,t,r,a){if(Boundary._isRectCross(e,t,r,a)&&Boundary._isLineSegmentCross(e,t,r,a)){var n=(a._x-r._x)*(e._y-t._y)-(t._x-e._x)*(r._y-a._y),o=(e._y-r._y)*(t._x-e._x)*(a._x-r._x)+r._x*(a._y-r._y)*(t._x-e._x)-e._x*(t._y-e._y)*(a._x-r._x),s=o/n;n=(e._x-t._x)*(a._y-r._y)-(t._y-e._y)*(r._x-a._x),o=t._y*(e._x-t._x)*(a._y-r._y)+(a._x-t._x)*(a._y-r._y)*(e._y-t._y)-a._y*(r._x-a._x)*(t._y-e._y);var l=o/n;return new Point(s,l)}},Boundary._isRectCross=function(e,t,r,a){return Math.min(e._x,t._x)<=Math.max(r._x,a._x)&&Math.min(r._x,a._x)<=Math.max(e._x,t._x)&&Math.min(e._y,t._y)<=Math.max(r._y,a._y)&&Math.min(r._y,a._y)<=Math.max(e._y,t._y)},Boundary._isLineSegmentCross=function(e,t,r,a){var n=e._x*(r._y-t._y)+t._x*(e._y-r._y)+r._x*(t._y-e._y),o=e._x*(a._y-t._y)+t._x*(e._y-a._y)+a._x*(t._y-e._y);return!((n^o)>=0&&!(n==0&&o==0)||(n=r._x*(e._y-a._y)+a._x*(r._y-e._y)+e._x*(a._y-r._y),o=r._x*(t._y-a._y)+a._x*(r._y-t._y)+t._x*(a._y-r._y),(n^o)>=0&&!(n==0&&o==0)))},Boundary._isPointInpolygon=function(e,t){var r,a,n=!1,o=e._nodes,s=o.length;for(r=0,a=s-1;r<s;a=r++)(o[r]._y<=t._y&&t._y<o[a]._y||o[a]._y<=t._y&&t._y<o[r]._y)&&t._x<(o[a]._x-o[r]._x)*(t._y-o[r]._y)/(o[a]._y-o[r]._y)+o[r]._x&&(n=!n);return n},mod.namespace("Geom.Boundary",Boundary),mod.exportName(proto$1P,["addPoint",proto$1P._addPoint,"getRoundRect",proto$1P._getRoundRect]);var AniDataUtils=function(){};AniDataUtils.getTransformObjFromParam=function(e,t){var r=new Transform;return t._bindTrans(r),r._parseParam(e,t),r._matrix._calMatrixFormRaw(),r},AniDataUtils.colorToRgba=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(t)return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:1};var r=/^rgba\s?\(\s?(\d+)\s?,\s?(\d+)\s?,\s?(\d+)\s?,\s?(\d+(\.\d+)?)\s?\)\s?$/i.exec(e);return r?{r:parseInt(r[1]),g:parseInt(r[2]),b:parseInt(r[3]),a:parseFloat(r[4])}:typeof e=="object"?{r:parseInt(e.r),g:parseInt(e.g),b:parseInt(e.b),a:parseFloat(e.a),p:parseFloat(e.p||0)}:null};var DisplayObject=function(e){DisplayObject.__super__.constructor.apply(this,arguments);var t=this;t._useNewId?t._id="n"+DisplayObject._counter2+++(Math.random()*100).toString().substr(0,1):t._id=DisplayObject._counter++,t._mouseX=0,t._mouseY=0,t._visible=!0,t._name=null,t._parent=e||null,t._transform=new Transform,t._rawWidth=0,t._rawHeight=0,t._maxWidth=null,t._maxHeight=null,t._offsetMatrix=null,t._flipMatrix=null,t._notInitialized=!0,t.actions=[],t._filters=[],t._filterStr="",t._easeFactors=[],t._actionClickList=[],t._actionLikedList=[],t._actionUnlikedList=[],t._actionChangeList=[],t._actionTouchStartList=[],t._actionTouchEndList=[],t._actionSlideList={},t._actionScriptHash={},t._actionDragEndList=[],t._hashPrivateActions={},t._behaviors=null,t._haveClickAction=!1,t._dragCaptured=!1,t._guid=null,t._forceHide=!1,t._aniData=null,t._link=null,t._changedEvent=new MuEvents("changed"),Browser$1.os.ios&&(t._changed3dEvent=new MuEvents("changed"),t._changed3dEvent._reason="3d"),t._visibilityEvent=new visibilityEvent("visibilityChanged",t),t._renderedEvent=new visibilityEvent("rendered",t),t._haveDom=!0,t._eventHandler=null,t._maskToList=null,t._maskByList=null,t._unitId=null,t._H=0,mod.definePropertyGetSet(t,["x",t._getX,t._setX,"y",t._getY,t._setY,"width",t._getWidth,t._setWidth,"height",t._getHeight,t._setHeight,"rawWidth",t._getRawWidth,t._setRawWidth,"rawHeight",t._getRawHeight,t._setRawHeight,"scaleX",t._getScaleX,t._setScaleX,"scaleY",t._getScaleY,t._setScaleY,"rotation",t._getRotation,t._setRotation,"alpha",t._getAlpha,t._setAlpha,"visible",t._getVisible,t._setVisible,"name",t._getName,t._setName,"transform",t._getTransform,t._setTransform]),mod.definePropertyReadOnly(t,["mouseX",t._getMouseX,"mouseY",t._getMouseY,"parent",t._getParent,"root",t._getRoot,"realVisible",t._getRealVisible,"aniData",t._getAniData,"stage",t._getStage,"id",t._getId,"type",t._getType])};mod.extend(DisplayObject,IEventDispatcher),DisplayObject._counter=0,DisplayObject._counter2=0,DisplayObject._maxWidth=0,DisplayObject._maxHeight=0;var proto$1O=DisplayObject.prototype;proto$1O._getId=function(){return this._id},proto$1O._getType=function(){return this._type},proto$1O._parseData=function(e){},proto$1O._reset=function(e){var t=this,r=t._aniData.param,a=t._aniData.type,n=t._getStage()._renderManager._mugeda,o=n._displayObjectHash[t._id],s=["left","top","width","height","alpha","rotate","text","frame","image","select"],l=e?e.split(","):s;l=l[0]==="all"?s:l,l.forEach(function(_){if(_=="image")o._defaultSrc&&(o._defaultSrc==="no"?o.src=void 0:o.src=o._defaultSrc);else if(_=="select")if(o.data.type==2038||o.data.type==2041){var c=o.dom.querySelectorAll("input");if(c.length)for(var d=0;d<c.length;d++)c[d].checked=!1}else o.data.type==2039&&(o.dom.querySelector("select").value="",o.text="请选择");else if(_=="frame"&&t._aniData.type==2021&&t._manualChange){var u=t._statusBeforeManualChange;u.paused?t.gotoAndStop(u.frame):t.gotoAndPlay(u.frame),t._toggleManualChange(!1)}else if(_=="text"&&(t._aniData.type==2038||t._aniData.type==2041)){for(var f=o.dom,p=f.querySelectorAll("input"),d=0;d<p.length;d++)p[d].checked=!1;o.checked=!1}else if(_==="text"&&t._aniData.type==2039)o.text=null;else{var v=r[_=="text"?"textContent":_];_=="text"&&(a==2031?v="":v=unescape(v));var h=o[_];v!==void 0&&h!=v&&(o[_]=v)}}),t._dispatchEvent(t._changedEvent)},proto$1O._onChanged=function(e){var t=this,r=t._actionChangeList;r.forEach(function(a){a.doAction()})},proto$1O._onDragged=function(e){var t=this,r=t._actionDragEndList;r.forEach(function(a){a.doAction()})},proto$1O._getRealVisible=function(){var e=this;return this._visible===!1?!1:e._parent?e._parent._getRealVisible():!0},proto$1O._getX=function(){return this._transform._matrix._tx},proto$1O._setX=function(e){var t=this,r=e-t._transform._matrix._tx;t._transform._matrix._rawLeft+=r,t._transform._matrix._tx=e,t._dispatchEvent(t._changedEvent)},proto$1O._getY=function(){return this._transform._matrix._ty},proto$1O._setY=function(e){var t=this,r=e-t._transform._matrix._ty;t._transform._matrix._rawTop+=r,t._transform._matrix._ty=e,t._dispatchEvent(t._changedEvent)},proto$1O._getRawWidth=function(){return this._rawWidth},proto$1O._setRawWidth=function(e){this._rawWidth=e},proto$1O._getRawHeight=function(){return this._rawHeight},proto$1O._setRawHeight=function(e){this._rawHeight=e},proto$1O._getWidth=function(){return this._rawWidth*this._getScaleX()},proto$1O._setWidth=function(e){var t=this,r=e/t._rawWidth;t._setScaleX(r),t._dispatchEvent(t._changedEvent)},proto$1O._getHeight=function(){return this._rawHeight*this._getScaleY()},proto$1O._setHeight=function(e){var t=this,r=e/this._rawHeight;t._setScaleY(r),t._dispatchEvent(t._changedEvent)},proto$1O._getScaleX=function(){var e=this,t=e._transform._matrix;return t._getScaleX()},proto$1O._setScaleX=function(e){var t=this,r=t._transform._matrix;r._setScaleX(e),t._dispatchEvent(t._changedEvent)},proto$1O._getScaleY=function(){var e=this,t=e._transform._matrix;return t._getScaleY()},proto$1O._setScaleY=function(e){var t=this,r=t._transform._matrix;r._setScaleY(e),t._dispatchEvent(t._changedEvent)},proto$1O._getMouseX=function(){return this._mouseX},proto$1O._getMouseY=function(){return this._mouseY},proto$1O._getRotation=function(){var e=this,t=e._transform._matrix;return t._getRotation()},proto$1O._setRotation=function(e){var t=this,r=t._transform._matrix;r._setRotation(e),r._rawSita=e,t._dispatchEvent(t._changedEvent)},proto$1O._getAlpha=function(){return this._transform._colorTransform._alphaMultiplier},proto$1O._setAlpha=function(e){var t=this;if(t._transform._colorTransform._alphaMultiplier!=e)var r=!0;t._transform._colorTransform._alphaMultiplier=e,r&&t._dispatchEvent(t._changedEvent)},proto$1O._getVisible=function(){return this._visible},proto$1O._setVisible=function(e,t){var r=this;if(t===1&&(e==!1?r._forceHide=!0:r._forceHide=null),r._visible!=e)var a=!0;var n=r._visible;return r._visible=e,a&&(r._dispatchEvent(r._changedEvent),r._dispatchEvent(r._visibilityEvent)),n},proto$1O._getName=function(){return this._name},proto$1O._setName=function(e){this._name=e},proto$1O._setAttribute=function(e,t){},proto$1O._getAttribute=function(e){},proto$1O._getObject=function(e){},proto$1O._getParent=function(){return this._parent},proto$1O._getRoot=function(e){var t=this;return t._parent==null?null:t._parent._getRoot(e)},proto$1O._getCurrentFrame=function(){var e=this;return e._currentFrame!==null&&e._currentFrame!==void 0?e._currentFrame:e._parent==null?null:e._parent._getCurrentFrame()},proto$1O._getCurrentSceneFrame=function(){var e=this;return e._currentSceneFrame!==null&&e._currentSceneFrame!==void 0?e._currentSceneFrame:e._parent==null?null:e._parent._getCurrentSceneFrame()},proto$1O._getStage=function(){var e=this;return e._parent==null?null:e._parent._getStage()},proto$1O._getTransform=function(){return this._transform},proto$1O._setTransform=function(e){var t=this,r=!0;t._transform==e||t._transform._compare(e)?r=!1:t._transform=e,r&&t._dispatchEvent(t._changedEvent)},proto$1O.update=function(e){},proto$1O._getTotalMatrix=function(){var e=this,t=this._transform._matrix;return e._parent&&e._parent._offsetMatrix&&(t=Matrix._multiplication(e._parent._offsetMatrix,t)),e._parent&&e._parent._id!=0?Matrix._multiplication(e._parent._getTotalMatrix(),t):t},proto$1O._getBoundary=function(e,t,r){r=r||{};var a=new Boundary,n=this;if(t=t||0,r.total&&(e=n._getTotalMatrix()),e==null)return a._addPoint(new Point(0-t,0-t)),a._addPoint(new Point(n._rawWidth+t,0-t)),a._addPoint(new Point(n._rawWidth+t,n._rawHeight+t)),a._addPoint(new Point(0-t,n._rawHeight+t)),a;if(a._addPoint(e._transform(new Point(0-t,0-t),!0)),a._addPoint(e._transform(new Point(n._rawWidth+t,0-t),!0)),a._addPoint(e._transform(new Point(n._rawWidth+t,n._rawHeight+t),!0)),a._addPoint(e._transform(new Point(0-t,n._rawHeight+t),!0)),r.plain){var o=a.nodes;return{left:o[0]._x,top:o[0]._y,right:o[2]._x,bottom:o[2]._y}}else return a},proto$1O._addResource=function(e){this._resourceList==null?this._resourceList=[e]:this._resourceList.push(e)},proto$1O._getRect=function(){var e=this,t=e._getTotalMatrix(),r=t._transform(new Point(0,0)),a=t._transform(new Point(e._rawWidth,0)),n=t._transform(new Point(0,e._rawHeight)),o=t._transform(new Point(e._rawWidth,e._rawHeight));return{left:Math.min(r.x,o.x,a.x,n.x),top:Math.min(r.y,o.y,a.y,n.y),right:Math.max(r.x,o.x,a.x,n.x),bottom:Math.max(r.y,o.y,a.y,n.y)}},proto$1O._getStagePosition=function(e,t){var r=this,a=r._getTotalMatrix(),n=new Point(0,0);a._transform(n,!0);var o=e!==void 0?e-r._getX():0,s=t!==void 0?t-r._getY():0;return{left:n._x+o,top:n._y+s}},proto$1O._getFixedParam=function(e){return e.rawWidth===void 0&&(e.rawWidth=e.width),e.rawHeight===void 0&&(e.rawHeight=e.height),e.rawWidth<1&&(e.rawWidth=1),e.rawHeight<1&&(e.rawHeight=1),e.width<1&&(e.width=1),e.height<1&&(e.height=1),e},proto$1O.parseParamToDisplayObject=function(e,t){var r=this;e=r._getFixedParam(e,t);var a=e.name;a&&(r._name=a),e.rotate,e.width,e.height;var n=e.rawWidth,o=e.rawHeight,s=e.vF,l=e.hF;(s||l)&&(r._flipMatrix=new Matrix(l?-1:1,0,0,s?-1:1,l?n:0,s?o:0));var _=AniDataUtils.getTransformObjFromParam(e,r);r._setTransform(_),r._updateDisplayObjectFromTransform(_)},proto$1O._updateDisplayObjectFromTransform=function(e){var t=this;t._rawWidth=e._matrix._rawWidth,t._rawHeight=e._matrix._rawHeight,t._width=t._rawWidth*e._matrix._rawScaleX,t._height=t._rawHeight*e._matrix._rawScaleY,DisplayObject._maxWidth=Math.max(DisplayObject._maxWidth,e._matrix._rawWidth),DisplayObject._maxHeight=Math.max(DisplayObject._maxHeight,e._matrix._rawHeight)},proto$1O.tweenParam=function(e,t,r,a){e||(e={}),e.lineCap=t.lineCap||"round",e.lineJoin=t.lineJoin||"round";var n=typeof a=="object"?a:{},o=n.default==null?a:n.default,s=n.left==null?o:n.left,l=n.top==null?o:n.top,_=n.width==null?o:n.width,c=n.height==null?o:n.height,d=n.rotation==null?o:n.rotation,u=n.filter==null?o:n.filter,f=n.alpha==null?o:n.alpha;e.startX=t.startX+s*(r.startX-t.startX),e.startY=t.startY+l*(r.startY-t.startY),e.endX=t.endX+s*(r.endX-t.endX),e.endY=t.endY+l*(r.endY-t.endY),e.width=t.width+_*(r.width-t.width),e.height=t.height+c*(r.height-t.height),e.alpha=t.alpha+f*(r.alpha-t.alpha),e.scaleX=t.scaleX+_*(r.scaleX-t.scaleX),e.scaleY=t.scaleY+c*(r.scaleY-t.scaleY),e.rotate=t.rotate+d*(r.rotate-t.rotate),t.rotateX!=null&&t.rotateY!=null&&r.rotateX!=null&&r.rotateY!=null&&(e.rotateX=t.rotateX+d*(r.rotateX-t.rotateX),e.rotateY=t.rotateY+d*(r.rotateY-t.rotateY),e.pers=t.pers+o*(r.pers-t.pers)),t.rotateCenterX!==void 0&&r.rotateCenterX!==void 0&&t.rotateCenterY!==void 0&&r.rotateCenterY!==void 0&&(e.rotateCenterX=t.rotateCenterX+d*(r.rotateCenterX-t.rotateCenterX),e.rotateCenterY=t.rotateCenterY+d*(r.rotateCenterY-t.rotateCenterY)),e.customPivot=!0;var p=function($,R,I,P,F){return{p:$,r:R,g:I,b:P,a:F}},v=function(){var $={fillStyle:0,fillImage:"",fillStartPos:{x:32,y:10},fillEndPos:{x:80,y:100},fillColors:[p(0,144,200,255,1),p(.8,255,144,200,1),p(1,200,255,144,1)]};return $};e.fillInfo=e.fillInfo||v(),t.fillInfo&&r.fillInfo&&(t.fillInfo.fillStyle==1||t.fillInfo.fillStyle==2)&&(e.fillInfo.fillStartPos.x=t.fillInfo.fillStartPos.x+o*(r.fillInfo.fillStartPos.x-t.fillInfo.fillStartPos.x),e.fillInfo.fillStartPos.y=t.fillInfo.fillStartPos.y+o*(r.fillInfo.fillStartPos.y-t.fillInfo.fillStartPos.y),e.fillInfo.fillEndPos.x=t.fillInfo.fillEndPos.x+o*(r.fillInfo.fillEndPos.x-t.fillInfo.fillEndPos.x),e.fillInfo.fillEndPos.y=t.fillInfo.fillEndPos.y+o*(r.fillInfo.fillEndPos.y-t.fillInfo.fillEndPos.y)),e.fillInfo.fillImage=t.fillInfo.fillImage||r.fillInfo.fillImage,e.fillInfo.imagePosition=t.fillInfo.imagePosition||r.fillInfo.imagePosition,e.fillInfo.imageSize=t.fillInfo.imageSize||r.fillInfo.imageSize;var h=parseFloat(t.fillInfo.horOffset)||0,g=parseFloat(r.fillInfo.horOffset)||0,w=parseFloat(t.fillInfo.verOffset)||0,y=parseFloat(r.fillInfo.verOffset)||0;if(e.fillInfo.horOffset=h+o*(g-h),e.fillInfo.verOffset=w+o*(y-w),e.left=e.startX,e.top=e.startY,e.right=e.startX+e.width,e.bottom=e.startY+e.height,t.curve&&r.curve&&t.curve.points&&r.curve.points&&t.curve.points.length==r.curve.points.length){var x=AniDataUtils.colorToRgba(t.strokeColor),m=AniDataUtils.colorToRgba(r.strokeColor),A={r:Math.max(0,Math.min(255,Math.floor(x.r+o*(m.r-x.r)))),g:Math.max(0,Math.min(255,Math.floor(x.g+o*(m.g-x.g)))),b:Math.max(0,Math.min(255,Math.floor(x.b+o*(m.b-x.b)))),a:Math.max(0,Math.min(1,x.a+o*(m.a-x.a)))},T=Math.min(1,Math.max(0,A.a));if(e.strokeColor="rgba("+Math.round(A.r)+","+Math.round(A.g)+","+Math.round(A.b)+","+T+")",e.lineWidth=parseInt(t.lineWidth)+o*(parseInt(r.lineWidth)-parseInt(t.lineWidth)),e.fillInfo.fillStyle=t.fillInfo.fillStyle||r.fillInfo.fillStyle,e.fillInfo.fillColors=[],t.fillInfo&&r.fillInfo){var b=t.fillStyle==0?1:t.fillInfo.fillColors.length,C=r.fillStyle==0?1:r.fillInfo.fillColors.length,M=Math.max(b,C),E=t.fillInfo.fillStyle==0?r.fillInfo.fillStartPos:t.fillInfo.fillStartPos,O=r.fillInfo.fillStyle==0?t.fillInfo.fillStartPos:r.fillInfo.fillStartPos;e.fillInfo.fillStartPos.x=E.x+o*(O.x-E.x),e.fillInfo.fillStartPos.y=E.y+o*(O.y-E.y),E=t.fillInfo.fillStyle==0?r.fillInfo.fillEndPos:t.fillInfo.fillEndPos,O=r.fillInfo.fillStyle==0?t.fillInfo.fillEndPos:r.fillInfo.fillEndPos,e.fillInfo.fillEndPos.x=E.x+o*(O.x-E.x),e.fillInfo.fillEndPos.y=E.y+o*(O.y-E.y);for(var S=0;S<M;S++){var x=AniDataUtils.colorToRgba(t.fillInfo.fillColors[Math.min(b-1,S)]),m=AniDataUtils.colorToRgba(r.fillInfo.fillColors[Math.min(C-1,S)]);if(!(x&&m))break;var L=isFinite(x.p)?x.p:m.p,D=isFinite(m.p)?m.p:x.p,A={r:Math.max(0,Math.min(255,Math.floor(x.r+o*(m.r-x.r)))),g:Math.max(0,Math.min(255,Math.floor(x.g+o*(m.g-x.g)))),b:Math.max(0,Math.min(255,Math.floor(x.b+o*(m.b-x.b)))),p:Math.max(0,Math.min(1,L+o*(D-L))),a:Math.max(0,Math.min(1,x.a+o*(m.a-x.a)))};e.fillInfo.fillColors.push(A)}}}return this.tweenFilter(e,t,r,u),e},proto$1O.tweenFilter=function(e,t,r,a){var n=t.filters||[],o=r.filters||[],s={};n.forEach(function(b){s[b.name]={config1:b.config||{},config2:void 0}}),o.forEach(function(b){s[b.name]=s[b.name]||{config1:void 0},s[b.name].config2=b.config||{}});var l=[];for(var _ in s){var c=s[_],d=c.config1,u=c.config2,f=100,p=0,v="itensity",h,g,w,y=function(b,C,M,E){return b==null?E:b[C]==null?M:b[C]},x={name:_};if(x.config={},_=="drop-shadow"){[v,"h","v"].forEach(function(b){g=y(d,b,4,0),w=y(u,b,4,0),h=g+a*(w-g),x.config[b]=h}),g=y(d,"color","rgba(0,0,0,1)","rgba(0,0,0,0)"),w=y(u,"color","rgba(0,0,0,1)","rgba(0,0,0,0)");var m=AniDataUtils.colorToRgba(g),A=AniDataUtils.colorToRgba(w),T={r:Math.min(255,Math.max(0,Math.floor(m.r+a*(A.r-m.r)))),g:Math.min(255,Math.max(0,Math.floor(m.g+a*(A.g-m.g)))),b:Math.min(255,Math.max(0,Math.floor(m.b+a*(A.b-m.b)))),a:Math.min(1,Math.max(0,m.a+a*(A.a-m.a)))};T.a=T.a<.001?0:T.a,x.config.color="rgba("+Math.floor(T.r)+","+Math.floor(T.g)+","+Math.floor(T.b)+","+T.a+")",l.push(x)}else["brightness","saturate","contrast"].indexOf(_)>=0?(f=50,p=100):["hue-rotate"].indexOf(_)>=0?(f=180,p=0,v="rotation"):["blur"].indexOf(_)>=0&&(f=4,p=0),g=y(d,v,f,p),w=y(u,v,f,p),h=g+a*(w-g),x.config[v]=h,l.push(x)}e.filters=l},proto$1O._bindTrans=function(){},proto$1O._bindUserAPI=function(e){},proto$1O._hasPresetAnimation=function(){return this._presetAnimation},proto$1O._getRenderObject=function(e){return(e||this._getRoot()._renderManager)._getRenderObjectByDisplayId(this._id)},proto$1O._initProcessAnimation=function(){},proto$1O._getProcessAnimationLength=function(){return 0},proto$1O._setProcessAnimationRatio=function(e){},mod.exportName(proto$1O,["getTotalMatrix",proto$1O._getTotalMatrix,"getBoundary",proto$1O._getBoundary,"hasPresetAnimation",proto$1O._hasPresetAnimation,"getRenderObject",proto$1O._getRenderObject]),mod.namespace("Display.DisplayObject",DisplayObject);var InteractiveObject=function(){InteractiveObject.__super__.constructor.apply(this,arguments)};mod.extend(InteractiveObject,DisplayObject),mod.namespace("Display.InteractiveObject",InteractiveObject);var Assert=function(e,t){if(e==null||!(e instanceof t))throw new TypeError};Assert.Num=function(e){if(e*1!==e)throw new TypeError},Assert.Int=function(e){if(Math.floor(e)!==e)throw new TypeError},Assert.Str=function(e){if(e==null||e.constructor!==String)throw new TypeError},mod.exportName(Assert,["Num",Assert.Num]),mod.exportName(Assert,["Str",Assert.Str]),mod.namespace("Utils.Assert",Assert);var DisplayObjectContainer=function(){DisplayObjectContainer.__super__.constructor.apply(this,arguments);var e=this;e.mouseChildren=!0,e.numChildren=0,e.children=[],e.containerCachedFresh=!0,e.containerCache=[],mod.definePropertyReadOnly(e,["numChildren",function(){return e.children.length}])};mod.extend(DisplayObjectContainer,InteractiveObject);var _prop_=DisplayObjectContainer.prototype;_prop_.setContainerCachedFresh=function(e){var t=this;e instanceof DisplayObjectContainer&&(t.containerCachedFresh=!1)},_prop_.addChild=function(e){var t=this;if(e===t)throw new TypeError;return t.regChild(e),e instanceof DisplayObjectContainer&&(t.containerCachedFresh=!1),t.children.push(e),e},_prop_.addChildAt=function(e,t){Assert.Int(t),Assert(e,DisplayObject);var r=this,a=r.children;if(Assert(e,DisplayObject),r.regChild(e),t>a.length)throw new RangeError;return a.splice(t,0,e),e},_prop_.regChild=function(e){var t=this,r=e._parent;r!=null&&r instanceof DisplayObjectContainer&&r.removeChild(e),t.setContainerCachedFresh(e),e._parent=t,e._addParentVisibilityLikeEvent&&e._addParentVisibilityLikeEvent();var a=new NodeEvent("addchild",e);t._dispatchEvent(a)},_prop_.contains=function(e){Assert(e,DisplayObject);var t=this,r=t.children;if(r.indexOf(e)!==-1)return!0;var a=t.getContainerChildren(),n=a.length,o;for(o=0;o<n;o++)if(a[o].contains(e))return!0;return!1},_prop_.getContainerChildren=function(){var e=this;return e.containerCachedFresh||(e.containerCache=e.children.filter(function(t){return t instanceof DisplayObjectContainer}),e.containerCachedFresh=!0),e.containerCache},_prop_.getDisplayObjectListByType=function(e,t){var r=this,a=r.children,n=a.filter(function(s){return s instanceof e}),o=r.getContainerChildren();return o.forEach(function(s){(!t||!(s instanceof t))&&n.concat(s.getDisplayObjectListByType(e,t))}),n},_prop_.getChildAt=function(e){Assert.Int(e);var t=this,r=t.children;if(e>r.length-1)throw new RangeError;return r[e]},_prop_.getChildByName=function(e){var t=this,r=t.children,a=r.length,n;for(n=a-1;n>-1;n--)if(r[n]._name===e)return r[n];return null},_prop_.getChild=function(){return this.children},_prop_.getChildIndex=function(e){Assert(e,DisplayObject);var t=this,r=t.children,a=r.indexOf(e);if(a==-1)throw new TypeError;return a},_prop_.getObjectUnderPoint=function(e){},_prop_.removeChild=function(e){var t=this;Assert(e,DisplayObject);var r=t.children.indexOf(e);if(r===-1){if(t!==e._parent)throw new RangeError}else return t.removeChildAt(r)},_prop_.removeChildAt=function(e){Assert.Int(e);var t=this,r=t.children;if(e>r.length-1)throw new RangeError;var a=r[e];a._removeParentVisibilityLikeEvent(),a._parent=null,r.splice(e,1),t.setContainerCachedFresh(a);var n=new NodeEvent("remove",a);return t._dispatchEvent(n),n=new NodeEvent("removed"),a._dispatchEvent(n),a},_prop_.setChildIndex=function(e,t){Assert(e,DisplayObject),Assert.Int(t);var r=this,a=r.children,n=a.indexOf(e);if(n===-1)throw new RangeError;a.splice(n,1),n<t?a.splice(t-1,0,e):n>t&&a.splice(t,0,e)},_prop_.swapChildren=function(e,t){Assert(e,DisplayObject),Assert(t,DisplayObject);var r=this,a=r.children,n=a.indexOf(e),o=a.indexOf(t);if(n==-1||o==-1)throw new TypeError;r.swapChildrenAt(n,o)},_prop_.swapChildrenAt=function(e,t){Assert.Int(e),Assert.Int(t);var r=this,a=r.children,n=a.length;if(e>n-1||t>n-1)throw new RangeError;var o=a[e],s=a[t];a[t]=o,a[e]=s},_prop_._getDisplayObjectById=function(e,t){var r=this,a=r.children,n=a.length,o;for(o=0;o<n;o++){var s=a[o],l=t=="guid"?s._guid:s._id;if(l==e)return s;if(s._getDisplayObjectById){var _=s._getDisplayObjectById(e,t);if(_)return _}}},_prop_._getDisplayObjectByGuid=function(e){return this._getDisplayObjectById(e,"guid")},mod.exportName(_prop_,["addChild",_prop_.addChild,"addChildAt",_prop_.addChildAt,"contains",_prop_.contains,"getChildAt",_prop_.getChildAt,"getChildByName",_prop_.getChildByName,"getChildIndex",_prop_.getChildIndex,"getObjectUnderPoint",_prop_.getObjectUnderPoint,"removeChild",_prop_.removeChild,"removeChildAt",_prop_.removeChildAt,"setChildIndex",_prop_.setChildIndex,"swapChildren",_prop_.swapChildren,"swapChildrenAt",_prop_.swapChildrenAt,"getDisplayObjectListByType",_prop_.getDisplayObjectListByType]),mod.namespace("Display.DisplayObjectContainer",DisplayObjectContainer);var Sprite=function(){var e=this;Sprite.__super__.constructor.apply(e,arguments),e._haveAnimation=!1,e._type="Sprite"};mod.extend(Sprite,DisplayObjectContainer);var proto$1N=Sprite.prototype;proto$1N.update=function(e){e=e||{};for(var t=this,r=t.children.length,a=0;a<r;a++){var n=t.children[a];n._type!="MovieClip"&&(n._type=="Sprite"||n instanceof DisplayObject)&&n.update(e)}},proto$1N._getFixedParam=function(e,t){return e.render==="trim"&&(e.rawWidth=e.width,e.rawHeight=e.height),Sprite.__super__._getFixedParam.call(this,e,t),e},proto$1N.tweenParam=function(e,t,r,a){e=Sprite.__super__.tweenParam.apply(this,arguments);var n=typeof a=="object"?a:{},o=n.default===void 0?a:n.default;if(t.render=="trim"&&r.render=="trim"){e.render="trim";var s=parseFloat(t.horOffset)||0,l=parseFloat(r.horOffset)||0,_=parseFloat(t.verOffset)||0,c=parseFloat(t.verOffset)||0;e.horOffset=s+o*(l-s),e.verOffset=_+o*(c-_)}return e},mod.namespace("Display.Sprite",Sprite);var Bezier=function(){};function bezierInterpolate$1(e,t,r,a,n,o){var s=Math.pow(t,3)*r+3*Math.pow(t,2)*e*a+3*t*Math.pow(e,2)*n+Math.pow(e,3)*o;return s}function bezierGetPoint$1(e,t,r){var a=1-r,n=e.nodeX,o=e.nodeY,s=e.forwardX,l=e.forwardY,_=t.backwardX,c=t.backwardY,d=t.nodeX,u=t.nodeY,f=bezierInterpolate$1(r,a,n,s,_,d),p=bezierInterpolate$1(r,a,o,l,c,u);return{x:f,y:p}}Bezier.getPoint=function(e,t,r){return bezierGetPoint$1(e,t,r)},Bezier.subdivision=function(e,t,r){function a(f,p,v){var h=f+v*(p-f);return h}var n=e.length,o=t,s=t+1;s==n&&(s=0);var l={},_={},c={};l.x=a(e[o].nodeX,e[o].forwardX,r),l.y=a(e[o].nodeY,e[o].forwardY,r),_.x=a(e[s].backwardX,e[s].nodeX,r),_.y=a(e[s].backwardY,e[s].nodeY,r);var d=a(e[o].forwardX,e[s].backwardX,r),u=a(e[o].forwardY,e[s].backwardY,r);c.backwardX=a(l.x,d,r),c.backwardY=a(l.y,u,r),c.forwardX=a(d,_.x,r),c.forwardY=a(u,_.y,r),c.nodeX=a(c.backwardX,c.forwardX,r),c.nodeY=a(c.backwardY,c.forwardY,r),e[o].forwardX=l.x,e[o].forwardY=l.y,e[s].backwardX=_.x,e[s].backwardY=_.y,t===n-1?e.push(c):e.splice(s,0,c)},mod.namespace("Utils.Bezier",Bezier);var Tween=(function(){var e,t,r,a,n=[];return{start:function(o){r=setInterval(this.update,1e3/(o||60))},stop:function(){clearInterval(r)},add:function(o){n.push(o)},getAll:function(){return n},removeAll:function(){n=[]},remove:function(o){e=n.indexOf(o),e!==-1&&n.splice(e,1)},update:function(){for(e=0,t=n.length,a=new Date().getTime();e<t;)n[e].update(a)?e++:(n.splice(e,1),t--)}}})();Tween.Tween=function(e){var t=e,r={},a={},n={},o=1e3,s=0,l=null,_=Tween.Easing.Linear.EaseNone,c=null,d=null,u=null,f=this;f.to=function(p,v){v!==null&&(o=v);for(var h in p)t[h]!==null&&(n[h]=p[h]);return this},f.start=function(){Tween.add(this),l=new Date().getTime()+s;for(var p in n)t[p]!==null&&(r[p]=t[p],a[p]=n[p]-t[p]);return this},f.stop=function(){return Tween.remove(this),this},f.delay=function(p){return s=p,this},f.easing=function(p){return _=p,this},f.chain=function(p){c=p},f.onUpdate=function(p){return d=p,this},f.onComplete=function(p){return u=p,this},f.getFactor=function(p,v){var h,g;if(h=Math.min(1,Math.max(0,p)),v){g={},v.default==null&&(g.default=_(h,0,0,1,1));for(var w in v){var y=v[w];y&&y.length>5&&(g[w]=_(h,y[2],y[3],y[4],y[5]))}}else g=_(h);return g},f.update=function(p){var v,h,g;if(p<l)return!0;h=(p-l)/o,h=h>1?1:h,g=_(h);for(v in a)t[v]=r[v]+a[v]*g;return d!==null&&d.call(t,g),h==1?(u!==null&&u.call(t),c!==null&&c.start(),!1):!0}},Tween.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{},Step:{},Bezier:{}},Tween.Easing.Linear.EaseNone=function(e){return e},Tween.Easing.Linear.EaseAcc=function(e,t){t=t===void 0?0:t;var r=2/(1+t),a=r*(t-1);return r*e+.5*a*e*e},Tween.Easing.Quadratic.EaseIn=function(e){return e*e},Tween.Easing.Quadratic.EaseOut=function(e){return-e*(e-2)},Tween.Easing.Quadratic.EaseInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},Tween.Easing.Cubic.EaseIn=function(e){return e*e*e},Tween.Easing.Cubic.EaseOut=function(e){return--e*e*e+1},Tween.Easing.Cubic.EaseInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},Tween.Easing.Quartic.EaseIn=function(e){return e*e*e*e},Tween.Easing.Quartic.EaseOut=function(e){return-(--e*e*e*e-1)},Tween.Easing.Quartic.EaseInOut=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},Tween.Easing.Quintic.EaseIn=function(e){return e*e*e*e*e},Tween.Easing.Quintic.EaseOut=function(e){return(e=e-1)*e*e*e*e+1},Tween.Easing.Quintic.EaseInOut=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},Tween.Easing.Sinusoidal.EaseIn=function(e){return-Math.cos(e*Math.PI/2)+1},Tween.Easing.Sinusoidal.EaseOut=function(e){return Math.sin(e*Math.PI/2)},Tween.Easing.Sinusoidal.EaseInOut=function(e){return-.5*(Math.cos(Math.PI*e)-1)},Tween.Easing.Exponential.EaseIn=function(e){return e==0?0:Math.pow(2,10*(e-1))},Tween.Easing.Exponential.EaseOut=function(e){return e==1?1:-Math.pow(2,-10*e)+1},Tween.Easing.Exponential.EaseInOut=function(e){return e==0?0:e==1?1:(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*(e-1))+2)},Tween.Easing.Circular.EaseIn=function(e){return-(Math.sqrt(1-e*e)-1)},Tween.Easing.Circular.EaseOut=function(e){return Math.sqrt(1- --e*e)},Tween.Easing.Circular.EaseInOut=function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},Tween.Easing.Elastic.EaseIn=function(e){var t,r=.1,a=.25;return e==0?0:e==1?1:(!r||r<1?(r=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/r),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a)))},Tween.Easing.Elastic.EaseOut=function(e){var t,r=.1,a=.25;return e==0?0:e==1?1:(!r||r<1?(r=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/a)+1)},Tween.Easing.Elastic.EaseInOut=function(e){var t,r=.1,a=.25;return e==0?0:e==1?1:(!r||r<1?(r=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/r),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a)*.5+1)},Tween.Easing.Back.EaseIn=function(e){var t=1.70158;return e*e*((t+1)*e-t)},Tween.Easing.Back.EaseOut=function(e){var t=1.70158;return(e=e-1)*e*((t+1)*e+t)+1},Tween.Easing.Back.EaseInOut=function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},Tween.Easing.Bounce.EaseIn=function(e){return 1-Tween.Easing.Bounce.EaseOut(1-e)},Tween.Easing.Bounce.EaseOut=function(e){return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},Tween.Easing.Bounce.EaseInOut=function(e){return e<.5?Tween.Easing.Bounce.EaseIn(e*2)*.5:Tween.Easing.Bounce.EaseOut(e*2-1)*.5+.5},Tween.Easing.Step.EaseIn=function(e){return 1},Tween.Easing.Step.EaseOut=function(e){return 0},Tween.Easing.Bezier.Ease=function(e,t,r,a,n){var o=1-e,s=3*o*o*e*t+3*o*e*e*a+e*e*e,l=3*o*o*e*r+3*o*e*e*n+e*e*e;return{x:s,y:l}};var PI=Math.PI;function Complex(e,t,r,a){if(t=t||0,!(this instanceof Complex))return new Complex(e,t,r,a);typeof r=="number"?this.m=Math.abs(r):this.m=Math.sqrt(e*e+t*t),typeof a=="number"?this.t=r>=0?a:a+PI:this.t=Math.atan2(t,e),this.t=(this.t%(PI*2)+PI*2)%(PI*2),this.t-=this.t>PI?PI*2:0,this.r=e,this.i=t}Complex.sqrt=function(e){return e.rPow(.5)},Complex.cbrt=function(e){return e.rPow(1/3)},Complex.prototype.rPow=function(e){return Complex.Polar(Math.pow(this.m,e),this.t*e)},Complex.Polar=function(e,t){return new Complex(e*Math.cos(t),e*Math.sin(t),e,t)},Complex.prototype.add=function(e){return new Complex(this.r+e.r,this.i+e.i)},Complex.prototype.sub=function(e){return new Complex(this.r-e.r,this.i-e.i)},Complex.prototype.mult=function(e){return Complex.Polar(this.m*e.m,this.t+e.t)},Tween.CubicBezier=function(e,t,r,a){var n=3*e-3*r+1,o=3*r-6*e,s=3*e,l=3*t-3*a+1,_=3*a-6*t,c=3*t,d=o/3/n,u=s/3/n-d*d;return function(f){if(Math.abs(f-1)<1e-4)return 1;var p=o*s/6/n/n-o*o*o/27/n/n/n+f/2/n,v=p*p+u*u*u;if(v>0){var h=.3333333333333333,g=Math.sqrt(v),w=p+g,y=p-g;return w=w>=0?Math.pow(w,h):-Math.pow(-w,h),y=y>=0?Math.pow(y,h):-Math.pow(-y,h),L=w+y-d,((l*L+_)*L+c)*L}else{var x=new Complex(v),m=Complex.sqrt(x),A=new Complex(p).add(m),T=new Complex(p).sub(m);A=Complex.cbrt(A),T=Complex.cbrt(T);var b=new Complex(d),C=new Complex(-1/2,Math.sqrt(3)/2),M=new Complex(-1/2,-Math.sqrt(3)/2),E=A.add(T).sub(b),O=C.mult(A).add(M.mult(T)).sub(b),S=M.mult(A).add(C.mult(T)).sub(b),L;return E.i<1e-4&&E.r>-1e-4&&E.r<1.0001?L=E:O.i<1e-4&&O.r>-1e-4&&O.r<1.0001?L=O:S.i<1e-4&&S.r>-1e-4&&S.r<1.0001&&(L=S),((l*L.r+_)*L.r+c)*L.r}}},Tween.GetEasingPercent=function(e,t){var r=Tween.map[t];return r(e)},Tween.map={"Linear.EaseNone":Tween.Easing.Linear.EaseNone,"Linear.EaseAcc":Tween.Easing.Linear.EaseAcc,"Quadratic.EaseIn":Tween.Easing.Quadratic.EaseIn,"Quadratic.EaseOut":Tween.Easing.Quadratic.EaseOut,"Quadratic.EaseInOut":Tween.Easing.Quadratic.EaseInOut,"Cubic.EaseIn":Tween.Easing.Cubic.EaseIn,"Cubic.EaseOut":Tween.Easing.Cubic.EaseOut,"Cubic.EaseInOut":Tween.Easing.Cubic.EaseInOut,"Quartic.EaseIn":Tween.Easing.Quartic.EaseIn,"Quartic.EaseOut":Tween.Easing.Quartic.EaseOut,"Quartic.EaseInOut":Tween.Easing.Quartic.EaseInOut,"Quintic.EaseIn":Tween.Easing.Quintic.EaseIn,"Quintic.EaseOut":Tween.Easing.Quintic.EaseOut,"Quintic.EaseInOut":Tween.Easing.Quintic.EaseInOut,"Sinusoidal.EaseIn":Tween.Easing.Sinusoidal.EaseIn,"Sinusoidal.EaseOut":Tween.Easing.Sinusoidal.EaseOut,"Sinusoidal.EaseInOut":Tween.Easing.Sinusoidal.EaseInOut,"Exponential.EaseIn":Tween.Easing.Exponential.EaseIn,"Exponential.EaseOut":Tween.Easing.Exponential.EaseOut,"Exponential.EaseInOut":Tween.Easing.Exponential.EaseInOut,"Circular.EaseIn":Tween.Easing.Circular.EaseIn,"Circular.EaseOut":Tween.Easing.Circular.EaseOut,"Circular.EaseInOut":Tween.Easing.Circular.EaseInOut,"Elastic.EaseIn":Tween.Easing.Elastic.EaseIn,"Elastic.EaseOut":Tween.Easing.Elastic.EaseOut,"Elastic.EaseInOut":Tween.Easing.Elastic.EaseInOut,"Back.EaseIn":Tween.Easing.Back.EaseIn,"Back.EaseOut":Tween.Easing.Back.EaseOut,"Back.EaseInOut":Tween.Easing.Back.EaseInOut,"Bounce.EaseIn":Tween.Easing.Bounce.EaseIn,"Bounce.EaseOut":Tween.Easing.Bounce.EaseOut,"Bounce.EaseInOut":Tween.Easing.Bounce.EaseInOut,"Step.EaseIn":Tween.Easing.Step.EaseIn,"Step.EaseOut":Tween.Easing.Step.EaseOut,custom:Tween.Easing.Bezier.Ease},mod.namespace("Transitions.Tween",Tween);var TweenKeys={};TweenKeys._default="default",TweenKeys._left="left",TweenKeys._top="top",TweenKeys._width="width",TweenKeys._height="height",TweenKeys._rotation="rotation",TweenKeys._filter="filter",TweenKeys._alpha="alpha";var TweenKeysKeys=Object.keys(TweenKeys),Ease=function(){this._type="Linear.EaseNone",this._easeFun={}},proto$1M=Ease.prototype;TweenKeysKeys.forEach(function(e){proto$1M[e]=function(t){return(this._easeFun[e]||this._easeFun._default)(t)}}),Ease._parseEase=function(e){var t=new Ease,r=t._type=e.tween||"Linear.EaseNone";if(r==="custom"||r==="Bezier.Ease"){var a=e.ease||{};Array.isArray(a)&&a.length==0&&(a={}),a[TweenKeys._default]||(t._easeFun._default=Tween.Easing.Linear.EaseNone),Object.keys(TweenKeys).forEach(function(n){var o=a[TweenKeys[n]];o&&(t._easeFun[n]=Tween.CubicBezier(o[2],o[3],o[4],o[5]))})}else t._easeFun._default=Tween.map[r];return t};var easeLine$1=Ease._parseEase({}),MovieClip=function(){MovieClip.__super__.constructor.apply(this,arguments);var e=this;e._currentFrameDecimal=0,e._currentFrame=0,e._currentSceneFrame=0,e._currentFrameLabel=null,e._currentLabels=[],e._currentScene=null,e._enabled=!0,e._loop=!0,e._scenes=[],e._totalFrames=0,e._paused=!1,e._pausedTimeStamp=null,e._pausedFrame=null,e._frameLoaded=0,e._frameLoadedStatus={},e._frameImageLeftNum={},e._prevLoadFrame=-1,e._manualChange=!1,e._statusBeforeManualChange={},e._type="MovieClip",e._frames=[],e._objectFrames={},e._gotoFlag=!1,e._playFlag=!0,e._manual=!1,e._prevActionFlag=null,e._aimFrameDec=null,e._audioList=[],e._prevFrame=null,e._progressAnimationGroup={},e._smoothMode=!1,e._sceneSwitchOpts=null,e._actionAppearList=[],e._prevDisplayListInfo={},e._beforeenterframeEvent=new MuEvents("beforeenterframe"),e.enterFrameEvent=new MuEvents("enterframe"),e._sceneChangeEvent=new MuEvents("scenechange"),e._haveLoadingPage=!1,e._childSelfAnimationDisplayObject=[],e._pausedBeforeRender=!1,e._inBindAnimationMode=!1,mod.definePropertyReadOnly(e,["currentFrame",e._getCurrentFrame,"currentFrameLabel",e._getCurrentFrameLabel,"currentLabels",e._getCurrentLabels,"currentScene",e._getCurrentScene,"frameLoaded",e._getFrameLoaded,"scenes",e._getScenes,"totalFrames",e._getTotalFrames]),mod.definePropertyGetSet(e,["enabled",e._getEnabled,e._setEnabled])};mod.extend(MovieClip,Sprite);var proto$1L=MovieClip.prototype;proto$1L._toggleManualChange=function(e){var t=this;t._manualChange=e,t._statusBeforeManualChange=e?{paused:t._paused,frame:t._currentFrame}:{}},proto$1L._getCurrentFrame=function(){return this._currentFrame},proto$1L._getCurrentSceneFrame=function(){return this._currentSceneFrame},proto$1L._getCurrentFrameLabel=function(){return this._currentFrameLabel},proto$1L._getCurrentLabels=function(){return this._currentLabels},proto$1L._getCurrentScene=function(){return this._currentScene},proto$1L._getEnabled=function(){return this._enabled},proto$1L._setEnabled=function(e){this._enabled=e},proto$1L._getFrameLoaded=function(){return this._frameLoaded},proto$1L._setFrameLoaded=function(e){var t=this,r=t._frameLoaded;if(t._frameLoaded=e,r!=e){var a=new MuEvents("framesLoadedChange",!1,!1);t._dispatchEvent(a)}},proto$1L._getScenes=function(){return this._scenes},proto$1L._getTotalFrames=function(){return this._totalFrames},proto$1L._getFrame=function(e,t){var r=this,a=0;if(t&&(a=t._startFrame),e&&e.length>0){var n=e.split(";");e=n[Math.floor(Math.random()*n.length)]}if(isNaN(e))for(var o=!1,s=r._scenes,l=0;l<s.length;l++){for(var _=s[l],c=_._labels,d=0;d<c.length;d++){var u=c[d];if(u._name===e){var e=u._frame+_._startFrame;o=!0;break}}if(o)break}else e=e*1+a;return parseFloat(e)},proto$1L.toggleSmoothMode=function(e){this._smoothMode=e},proto$1L.gotoPage=function(e,t){var r=this,a=r._scenes;if(e<0)return console.warn("Go to page err: aim page id "+e+" is less than 0.");if(e>a.length-1)return console.warn("Go to page err: aim page id "+e+" is greater than max page "+(a.length-1));var n=a[e]._startFrame;r._sceneSwitchOpts&&(r._sceneSwitchOpts.customPagingOptions=t),r.gotoAndPlay(n,null)},proto$1L.chkActionPower=function(e){return!0},proto$1L.gotoAndPlay=function(e,t,r){var a=this;a._manual||a.chkActionPower(r)&&(a._gotoFlag=Math.floor(e)!=a._currentFrame,a._playFlag=!0,e=a._getFrame(e,t),!e&&e!=0&&(e=0),a._aimFrameDec=e,a._pausedFrame=null,a._paused=!1)},proto$1L._setFrame=function(e){var t=this;t._currentFrame=Math.floor(e),t._currentSceneFrame=Math.floor(e)-Math.floor(t._currentScene?t._currentScene._startFrame:0),t._currentFrameDecimal=e,t._updateScene()},proto$1L._updateScene=function(){var e=this,t=e._currentFrame;if(!(e._currentScene&&t>e._currentScene._startFrame&&t<e._currentScene._startFrame+e._currentScene._numFrames)){var r=e._getSceneIndexByFrameNum(e._currentFrame),a=e._scenes[r];a!==e._currentScene&&(e._currentScene=a,e._dispatchEvent(e._sceneChangeEvent))}},proto$1L.gotoAndStop=function(e,t,r){var a=this;if(!a._manual&&a.chkActionPower(r)){if(a._gotoFlag=Math.floor(e)!=a._currentFrame,a._playFlag=!1,e=a._getFrame(e,t),!e&&e!=0)return!1;a._aimFrameDec=e,a._paused||(a._getStage(),a._pausedTimeStamp=-1/0,a._pausedFrame=e),a._paused=!0}},proto$1L._addFrameDec=function(e){var t=this;if(!t._stopApplyAction){var r=t._totalFrames,a=r-1,n=t._currentFrameDecimal,o=n+e;if(!t._paused&&!t._gotoFlag&&!t._manual){if(Math.floor(o)>a)t._loop?t.gotoAndPlay(0,null,0):t.stop(0);else{var s=t._playFlag,l=t._gotoFlag;t.gotoAndPlay(o,null,0),t._gotoFlag=l,t._playFlag=s}return!0}else return!1}},proto$1L._updateDisplayObjectAnimation=function(e,t,r,a){var n=this,o=e._id,s=n._objectFrames,l=s[o],_=l._keyframes||{};if(e._hasShapeAnimation){var c=l.getNearFrameInfo(r),d=c[0],u=c[1],f=c[2];if(f===void 0)return;var p=new Transform;e._bindTrans(p);var v=l._keyframes[d],h=l._keyframes[u];Transform._tween(p,v,h,l._eases[d],f),e._updateDisplayObjectFromTransform(p),p._matrix._calMatrixFormRaw(),e._setTransform(p),e._dispatchEvent(e._changedEvent)}else if(e._presetAnimation){var g=e._presetAnimation._updateTransformByFrameNum();g&&e._setTransform(g)}else{var w=_[t]||e._transform;if(a)var y=l.getRefTrans(t+1);if(w&&y){var x=r-t,m=new Transform;Transform._tween(m,w,y,easeLine$1,x),m._matrix._calMatrixFormRaw(),e._setTransform(m)}else e._setTransform(w)}},proto$1L._calculateAimFrame=function(){var e=this;e._aimFrameDec==null&&(e._aimFrameDec=e._currentFrameDecimal)},proto$1L._updateTransformByCurrentFrame=function(e){var t=this;if(t._manual&&(t._manual=!1),!t._stopApplyAction){t._dispatchEvent(t._beforeenterframeEvent);var r=t._aimFrameDec,a=t._getRoot()._renderManager;(t._scenes||[]).length>1&&(a._listPendingActions=[]),t._currentFrame=Math.floor(r),t._currentSceneFrame=Math.floor(r)-Math.floor(t._currentScene?t._currentScene._startFrame:0),t._currentFrameDecimal=r,t._paused=!t._playFlag,t._updateScene();var n=t._currentFrame,o=t._currentFrameDecimal;if(t._paused)var s=t._getStage()._totolFrame-t._pausedTimeStamp,l=s+o;var _=t._getDisplayInfoByFrame(n),c=t._prevDisplayListInfo,d=t._prevDisplayListInfo={};_==null&&(_={_displayObjectList:[]});for(var u=_._displayObjectList,f=t._actionAppearList,p=f.some(function(S){if(S._event==ActionEvent.APPEAR)return S instanceof ActionStop&&u.indexOf(S._displayObject)>-1}),v=t._objectFrames,h=u.length,g={},w=0;w<h;w++){var y=u[w],x=y._id;delete c[x],d[x]=y;var m;if(y._hasProgress){var A=y._unitId;g[A]=t._progressAnimationGroup[A]}if(y._forceHide===!0?y._setVisible(!1):(y._forceHide,m=y._setVisible(!0)),y._haveAnimation){var T=v[x];if(T._keyframes,!t._smoothMode&&t._paused){var b=T._getStopFrame(n),C=Math.min(b,l);r=parseInt(C),E=C}else{var M=t._pausedFrame;if(!t._smoothMode&&M!=null)b=T._getStopFrame(M),b>o?(r=parseInt(b),E=b):(t._pausedFrame=null,r=n,E=o);else{r=n;var E=o}}p&&(E=Math.floor(T._getStopFrame(n))),t._updateDisplayObjectAnimation(y,r,E,e)}y._haveSelfFunction?y._haveSelfFunction():y.children&&y.children.forEach(S=>{S._haveSelfFunction&&S._haveSelfFunction()}),y.update({appear:m!=!0||y._notInitialized}),y._notInitialized=!1}Object.keys(c).forEach(function(S){c[S]._setVisible(!1)}),Object.keys(g).forEach(function(S){var L=g[S],D=t._objectFrames[L[0]._id],$=((E===void 0?o:E)-D._min)/(D._max-D._min);handleProcessAnimation($,L)});var O=!1;return t._currentFrame!==t._prevFrame&&(t._aimFrameDec=null,t._gotoFlag=!1,t._prevActionFlag=null,t._prevFrame=t._currentFrame,O=!0),O}};var handleProcessAnimation=MovieClip.handleProcessAnimation=function(e,t){var r=[];t.forEach(function(o){var s=o._getProcessAnimationLength();r.push(s)});var a=r.reduce(function(o,s){return o+s},0),n=e*a;t.forEach(function(o,s){var l=r.slice(0,s).reduce(function(d,u){return d+u},0),_=l+r[s],c;n<=l?c=0-(l-n)/r[s]:n>=_?c=1+(n-_)/r[s]:c=(n-l)/r[s],o._setProcessAnimationRatio(c)})};proto$1L._getDisplayInfoByFrame=function(e){return this._frames[e]},proto$1L.addChild=function(e){var t=this;MovieClip.__super__.addChild.apply(t,arguments),t._prevDisplayListInfo[e._id]=e},proto$1L._getObjectSceneIndex=function(e){var t=e._id,r=this,a=r._objectFrames[t];if(a)for(var n=a._min,o=a._max,s=r._scenes,l=s.length,_=0;_<l;_++){var c=s[_];if(n>=c._startFrame&&n<c._startFrame+c._numFrames)return o<c._startFrame+c._numFrames?_:1/0}else return 1/0;throw new Error("object not belong to this movieClip")},proto$1L._getSceneIndexByFrameNum=function(e){for(var t=this,r=t._scenes,a=r.length,n=0;n<a;n++){var o=r[n];if(e>=o._startFrame&&e<o._startFrame+o._numFrames)return n}return-1},proto$1L.nextFrame=function(){},proto$1L.nextScene=function(){},proto$1L.play=function(e){var t=this;t._manual||t.chkActionPower(e)&&(t._gotoFlag&&t._playFlag||(t._gotoFlag=!1,t._playFlag=!0,t._aimFrameDec=t._currentFrameDecimal,t._paused=!1))},proto$1L.prevFrame=function(){},proto$1L.stop=function(e){var t=this;if(!t._manual&&t.chkActionPower(e)){if(t._gotoFlag&&!t._playFlag||(t._gotoFlag=!1,t._playFlag=!1,t._aimFrameDec=t._currentFrameDecimal),!t._paused){var r=t._getStage();t._pausedTimeStamp=r._totolFrame,t._pausedFrame=t._currentFrame}t._paused=!0}},proto$1L.checkFrameResourceLoaded=function(e,t){var r=this,a=r._frameImageLeftNum;if(r._totalFrames!==r._frameLoaded){for(var n=e;n<=t;n++)if(a[n]>0)return!1}var o=function(){var f=new MuEvents("framesLoadedChange");r._dispatchEvent(f),this._removeEventListener("framesLoadedChange",o)},s=r.children,l=[],_=r._objectFrames;s.forEach(function(f){if(f instanceof Sprite){var p=f._id,v=_[p];if(v._min<e||v._max>t)return;f instanceof MovieClip?l.push(f):l.concat(f.getDisplayObjectListByType(MovieClip,MovieClip))}});for(var c=l.length,d=0;d<c;d++){var u=l[d];if(u.checkFrameResourceLoaded(0,u._totalFrames-1)===!1)return u._addEventListener("framesLoadedChange",o),!1}return!0},proto$1L.removeChild=function(e){var t=this;MovieClip.__super__.removeChild.apply(t,arguments);var r=e._id;delete t._objectFrames[r];var a=t._frames;for(var n in a)if(a.hasOwnProperty(n)){var o=a[n];o.removeObject(e)}},proto$1L._checkMovieClipBusy=function(e,t){var r=this,a=function(){if(!(n++<1)){if(r._removeEventListener("enterframe",a),r._getRoot()._renderManager._paging)return e(!1);t(),e(!0)}},n=0;r._addEventListener("enterframe",a)},proto$1L._getKeyFrameInfo=function(e){return this._objectFrames[e]},mod.exportName(proto$1L,["gotoAndPlay",proto$1L.gotoAndPlay,"gotoAndStop",proto$1L.gotoAndStop,"nextFrame",proto$1L.nextFrame,"nextScene",proto$1L.nextScene,"play",proto$1L.play,"prevFrame",proto$1L.prevFrame,"stop",proto$1L.stop,"removeChild",proto$1L.removeChild,"updateDisplayObjectAnimation",proto$1L._updateDisplayObjectAnimation,"getKeyFrameInfo",proto$1L._getKeyFrameInfo]),mod.namespace("Display.MovieClip",MovieClip);var ActionPlay=function(e,t,r){ActionPlay.__super__.constructor.apply(this,arguments);var a=this;a._scene=t,a._movieClip=r};mod.extend(ActionPlay,Action);var proto$1K=ActionPlay.prototype;proto$1K.doAction=function(){var e=this;if(e.logicPositive()){var t=e._movieClip;if(!e._scene){var r=this._stage._displayObject._renderManager._mugeda;e._scene=(r._displayObjectHash[t._id]||r)._scene}e._scene?(e._scene.currentSegment=null,ActionPlay.__super__.doAction.apply(e,arguments),e._movieClip.play(20)):e._movieClip._presetAnimation&&e._movieClip._presetAnimation._setStatus("play")}};var ActionVideoPause=function(e,t){ActionVideoPause.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionVideoPause,Action);var proto$1J=ActionVideoPause.prototype;proto$1J.doAction=function(){if(this.logicPositive()){var e=this._movieClip._currentScene.getDom();e.querySelectorAll("video").forEach(function(t){t.paused||(t.pause(),t.pausedByGlobalPause=!0)})}},mod.namespace("Action.ActionVideoPause",ActionVideoPause);var ActionVideoResume=function(e,t){ActionVideoResume.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionVideoResume,Action);var proto$1I=ActionVideoResume.prototype;proto$1I.doAction=function(){if(this.logicPositive()){var e=this._movieClip._currentScene.getDom();e.querySelectorAll("video").forEach(function(t){t.paused&&t.pausedByGlobalPause&&(t.play(),t.pausedByGlobalPause=!1)})}},mod.namespace("Action.ActionVideoResume",ActionVideoResume);var ActionStagePause=function(e,t){ActionStagePause.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionStagePause,Action);var proto$1H=ActionStagePause.prototype;proto$1H.doAction=function(){if(this.logicPositive()){var e=this._stage._displayObject._renderManager;e.pause()}},mod.namespace("Action.ActionStagePause",ActionStagePause);var ActionStageResume=function(e,t){ActionStageResume.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionStageResume,Action);var proto$1G=ActionStageResume.prototype;proto$1G.doAction=function(){if(this.logicPositive()){var e=this._stage._displayObject._renderManager;e.resume()}},mod.namespace("Action.ActionStageResume",ActionStageResume);var ActionVideoControl=function(e,t){ActionVideoControl.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._videoTarget={}};mod.extend(ActionVideoControl,Action);var proto$1F=ActionVideoControl.prototype;proto$1F.doAction=function(){var e=this;if(e.logicPositive()){e._movieClip,e._videoTarget&&e._videoTarget._aniData.guid;var t=e._behavior.param||{},r=t.control_mode,a=t.jump_position;r==="play"?e._videoTarget._play():r==="pause"?e._videoTarget._pause():r==="stop"?e._videoTarget._stop():r==="jump_and_play"?e._videoTarget._jumpAndPlay(a):r==="jump_and_pause"&&e._videoTarget._jumpAndPause(a),ActionVideoControl.__super__.doAction.apply(e,arguments)}};var ActionUpdateChart=function(e,t){ActionUpdateChart.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._targetChartObject=null};mod.extend(ActionUpdateChart,Action);var proto$1E=ActionUpdateChart.prototype;proto$1E.doAction=function(e){var t=this;if(t.logicPositive()){var r=t._behavior,a=r.param||{};if(t._targetChartObject){var n=t._targetChartObject.getChartObject();n&&n.updateData(a.chart_data,e&&e._originEvent?e._originEvent:null)}else console.warn("行为出错：指定的图表不存在");ActionUpdateChart.__super__.doAction.apply(t,arguments)}};var ActionVote=function(e,t){ActionVote.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._serviceId=null,r._voteDisplayAObject=null};mod.extend(ActionVote,Action);var proto$1D=ActionVote.prototype;proto$1D.updateVoteData=function(e,t){var r=this,a=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{},n=r._behavior,o=n.param||{},s=o.vote_value;a.getVoteData&&a.getVoteData(o.vote_target,function(l,_){var c=_[s]||{};r._countDisplayAObject&&(r._countDisplayAObject.text=c.count?c.count:0),r._votedDisplayAObject&&(r._votedDisplayAObject.text=c.voted?1:0)})},proto$1D.doAction=function(e){var t=this;if(t.logicPositive()){var r=t._behavior,a=r.param||{},n=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};n.vote&&n.vote({serviceId:a.vote_target,value:a.vote_value},function(o){if(o.status==0){var s=t._options.onFinish;s&&s.doAction.apply(s);var l=(o.result||{})[a.vote_value]||{};t._countDisplayAObject&&(t._countDisplayAObject.text=l.count?l.count:0),t._votedDisplayAObject&&(t._votedDisplayAObject.text=l.voted?1:0)}else{var _=t._options.onFailure;_&&_.doAction.apply(_)}}),ActionVote.__super__.doAction.apply(t,arguments)}};var ActionWiper=function(e,t){ActionWiper.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._targetVRObject=null};mod.extend(ActionWiper,Action);var proto$1C=ActionWiper.prototype;proto$1C.doAction=function(e){var t=this;if(t.logicPositive()){var r=t._behavior;r.param;var a=t._targetObject.getWiperObject?t._targetObject.getWiperObject():null;a&&a.reset(),ActionWiper.__super__.doAction.apply(t,arguments)}};var ActionUpdateVR=function(e,t){ActionUpdateVR.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._targetVRObject=null};mod.extend(ActionUpdateVR,Action);var proto$1B=ActionUpdateVR.prototype;proto$1B.doAction=function(e){var t=this;if(t.logicPositive()){var r=t._behavior;r.param;var a=t._targetObject.getVRObject?t._targetObject.getVRObject():null;a&&a.doAction(r,e&&e._originEvent?e._originEvent:null),ActionUpdateVR.__super__.doAction.apply(t,arguments)}};var ActionRecordAudio=function(e,t,r){ActionRecordAudio.__super__.constructor.apply(this,arguments),r=r||{};var a=this;a._targetAudioObject=null,a._targetTextObject=null,a._useNative=r.mode==="native"};mod.extend(ActionRecordAudio,Action);var proto$1A=ActionRecordAudio.prototype;proto$1A.doAction=function(){var e=this,t=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};if(e.logicPositive()){var r=e._behavior||{},a=(r.param||{}).record_action||"start",n=e._targetAudioObject,o=e._targetTextObject,s=function(l){var _=l.url,c=l.localId,d=e._options.onFinish;if(o&&t.translateVoice({wx:Browser$1._globalObject.wx,isShowProgressTips:1,localId:c,callback:function(p){o._setText(p),d&&d.doAction.apply(d)}}),n){n._audioObject._setAudioSrc(_);var u=n._audioObject._audio;if(u){var f=n._renderObject;u.addEventListener("pause",f._audioPauseEventHandler.bind(f)),u.addEventListener("playing",f._audioPlayingEventHandler.bind(f))}t.addCustomMugedaParameters(encodeURIComponent("m_"+n._aniData.guid),encodeURIComponent(_))}!o&&d&&d.doAction.apply(d,[l])};a=="stop"?e._useNative?t.stopNativeRecord({guid:n?n._aniData.guid:"",success:function(l){s(l)}}):t.stopRecord({wx:Browser$1._globalObject.wx,success:function(l){s(l)}}):e._useNative?t.startNativeRecord({success:function(l){s(l)},error:function(l){console.log("Error in recording audio: "+l.desc)}}):t.startRecord({wx:Browser$1._globalObject.wx,isShowProgressTips:1,success:function(l){s(l)},error:function(l){console.log("Error in recording audio: "+l.desc)}}),ActionRecordAudio.__super__.doAction.apply(e,arguments)}},mod.namespace("Action.ActionRecordAudio",ActionRecordAudio);var ActionSubmit=function(e,t){ActionSubmit.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._extraData=null};mod.extend(ActionSubmit,Action);var proto$1z=ActionSubmit.prototype;proto$1z.lottery=function(e){var t=this;t._extraData=e},proto$1z.doAction=function(){return new Promise((e,t)=>{var r=this,a=r._options.onFinish,n=r._options.onFailure,o=!!this._behavior.param.submit_once,s=this._behavior.id;if(!r.logicPositive()){t(new Error("条件不满足，无法提交"));return}var l;try{l=JSON.parse(window.localStorage.getItem("mugedaFormSubmitData"))}catch{l=[]}Array.isArray(l)||(l=[]);var _=!0,c="",d=!1,u=Mugeda.getContentId(),f=u.crid;if(o){for(var p=0;p<l.length;p++)l[p].id===s&&l[p].id&&l[p].crid===f&&(_=!1,c="你只能提交一次表单。",d=!0,l[p].time=new Date*1);d||l.push({id:s,time:new Date*1,crid:f})}l=l.filter(function(h){if(isNaN(h.time))return!1;var g=new Date*1-h.time;return g<1e3*3600*24*7});try{window.localStorage.setItem("mugedaFormSubmitData",JSON.stringify(l))}catch{console.error("记录提交记录失败")}if(!_){n?n.doAction.apply(n):Mugeda.messageBox(c||"表单提交条件未满足。请检查输入后重试。"),t(new Error(c||"表单提交条件未满足。请检查输入后重试。"));return}r._movieClip;var v=r._stage._displayObject._renderManager._mugeda;r._behavior.extraData=r._extraData,r._behavior.mugeda=v,r._callback=function(h){h=h||{},h.status==0?(a&&a.doAction.apply(a),e(h)):h.status!==void 0&&(n&&n.doAction.apply(n),t(h))},ActionSubmit.__super__.doAction.apply(r,arguments)})},mod.namespace("Action.ActionSubmit",ActionSubmit);var ActionSegment=function(e){ActionSegment.__super__.constructor.apply(this,arguments);var t=this;t._event=e,t._behavior=null,t._targetAObject=null};mod.extend(ActionSegment,Action);var proto$1y=ActionSegment.prototype;proto$1y.doAction=function(){var e=this;if(e.logicPositive()){ActionSegment.__super__.doAction.apply(e,arguments);var t=e._behavior.param,r=e._targetAObject;if(r&&t){var a=t.segment_loop=="loop",n=parseInt(t.segment_start),o=parseInt(t.segment_end);if(n>o){var s=o;o=n,n=s}r.scene&&(r.scene.setSegment("segment",n-1,o-1,a),r.scene.playSegment("segment"))}}},mod.namespace("Action.ActionSegment",ActionSegment);var ActionShare=function(e){ActionShare.__super__.constructor.apply(this,arguments);var t=this;t._event=e};mod.extend(ActionShare,Action);var proto$1x=ActionShare.prototype;proto$1x.doAction=function(){var e=this;if(e.logicPositive()){ActionShare.__super__.doAction.apply(e,arguments);var t=function(p){var v=e._stage;if(v){var h=v._displayObject._renderManager;p=h._replaceMacros(p,"")}return p},r=e._behavior||{},a=r.param||{},n=a.share_title,o=a.share_desc,s=a.share_timeline||n,l=a.share_thumb,_={};if(n&&(_.title=t(n)),o&&(_.desc=t(o)),s&&(_.timelineTitle=t(s)),l){var c=Mugeda.getMugedaObject()||{},d=c.aniData||{},u=d.metadata,f=location.origin;u&&(l=Mugeda.previewMode?f+l:(c.resDir||window._mrmcp.creative_path||"")+l),_.img_url=l}Browser$1._globalObject.defineWechatParameters&&Browser$1._globalObject.defineWechatParameters(_)}},mod.namespace("Action.ActionShare",ActionShare);var ActionMusicIcon=function(e){ActionMusicIcon.__super__.constructor.apply(this,arguments)};mod.extend(ActionMusicIcon,Action);var proto$1w=ActionMusicIcon.prototype;proto$1w.doAction=function(){var e=this;if(e.logicPositive()){var t=e._behavior.param,r=t.audioicon_mode,a=t.audioicon_status,l=t.audio,n=parseFloat(t.control_volume),o=parseFloat(t.control_position),s=e._stage._displayObject._renderManager._audioIndicator;s._setAudio(l),s._setMode(r),s._setStatus(a);var l=s.audio;l&&(isNaN(n)||(l.volume=.01*n),isNaN(o)||(l.currentTime=o)),ActionMusicIcon.__super__.doAction.apply(e,arguments)}};var ActionTimer=function(e,t){ActionTimer.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._targetDisplayObject=[]};mod.extend(ActionTimer,Action);var proto$1v=ActionTimer.prototype;proto$1v.doAction=function(){var e=this;if(e.logicPositive()){var t=e._targetDisplayObject,r=e._behavior.param,a=r.timer_status;if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]?t[n]._timerStatus=a:console.warn("行为出错：指定的定时器不存在");else console.warn("行为出错：指定的定时器不存在");ActionTimer.__super__.doAction.apply(e,arguments)}},mod.namespace("Action.ActionTimer",ActionTimer);var Macro=function(){};Macro.FunList={},Macro.NeedRender={},Macro._regFunction=function(e,t,r){Macro.FunList[e]=t,r&&(Macro.NeedRender[e]=1)},Macro._chkNeedFresh=function(e){var t=!1;return Macro._parseMacroText(e,function(r){Macro.NeedRender[r]&&(t=!0)},!0,!1),t},Macro._getValue=function(e){if(Macro.FunList[e])return Macro.FunList[e].apply(this,Array.prototype.slice.call(arguments,1))},Macro._parseMacroText=function(e,t,r,a,n){return a=a!==!1,e.replace(/P\{\{(.+?)\}\}/g,function(o,s){for(var l=s.split("|"),_=null,c=0;c<l.length;c++){for(var d=l[c],u=[],f=0;;){var p=d.indexOf(":",f);if(p==-1)break;f=p+1,d.substr(p-1,2)!="\\:"&&(u.push(d.substr(0,p)),d=d.substr(p+1),f=0)}u.push(d),u=u.map(function(v){return v.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/\\(.)/g,"$1")}),u.splice(1,0,_),u.push(n),Macro.FunList[u[0]]?(a&&(_=Macro.FunList[u[0]].apply(this,u)),r&&t.apply(this,u)):(r&&t.apply(this,u),a||(_=null))}return _})},Macro.prototype,mod.exportName(Macro,["parseMacroText",Macro._parseMacroText,"regFunction",Macro._regFunction]),mod.namespace("Utils.Macro",Macro);function Plugin(){}Plugin._userDisplayObjectClass=globalThis.userDisplayObjectClass=globalThis.userDisplayObjectClass||{},Plugin._registerDisplayObjectClass=function(e,t){Plugin._userDisplayObjectClass[e]=t},Plugin._userRenderObjectClass=globalThis.userRenderObjectClass=globalThis.userRenderObjectClass||{},Plugin._registerRenderObjectClass=function(e,t){Plugin._userRenderObjectClass[e]=t},Plugin._getRenderObjectClassByDisplayObject=function(e){const t=e._aniData&&e._aniData.type;if(t!==void 0&&Plugin._userRenderObjectClass[t])return Plugin._userRenderObjectClass[t];var r=Object.keys(Plugin._userDisplayObjectClass).filter(function(a){return e instanceof Plugin._userDisplayObjectClass[a]});if(r.length)return Plugin._userRenderObjectClass[r[0]]},Plugin._getUserDisplayObject=function(e){return Plugin._userDisplayObjectClass[e]},Plugin._userActionObjectClass=globalThis._userActionObjectClass=globalThis._userActionObjectClass||{},Plugin._registerActionObjectClass=function(e,t){Plugin._userActionObjectClass[e]=t},Plugin._getUserActionObjectClass=function(e){return Plugin._userActionObjectClass[e]},Plugin._commonPlugin=globalThis._commonPlugin=globalThis._commonPlugin||{},Plugin._registerActionCommonPlugin=function(e,t){return Plugin._commonPlugin[e]=t},Plugin._anidataPlugin=globalThis._anidataPlugin=globalThis._anidataPlugin||{},Plugin._registerAniDataPlugin=function(e,t){return Plugin._anidataPlugin[e]=t},mod.namespace("Utils.Plugin",Plugin),mod.exportName(Plugin,["registerDisplayObjectClass",Plugin._registerDisplayObjectClass,"registerRenderObjectClass",Plugin._registerRenderObjectClass]);var ActionRanking=function(e,t){ActionRanking.__super__.constructor.apply(this,arguments);var r=this;r.RankingType=e,r.behaviorData=t};mod.extend(ActionRanking,Action);var proto$1u=ActionRanking.prototype;function WechatUserInfo(e){function t(r){var a=new RegExp("(^|&)"+r+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(a);return n!=null?decodeURIComponent(n[2]):null}switch(e){case 0:return t("nickname")||"微信昵称";case 1:return t("avatar");case 2:return t("openid")}}var decodeHtmlEntity=function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(r)})},config=null;Math.random().toString(),proto$1u.doAction=function(){return new Promise((e,t)=>{var r=this,a=r.behaviorData,n=a.ranking_target,o=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{},s=r._stage._displayObject,l=s._renderManager,_=Browser$1._getWeixinServerHost()+"/server/huodong.php/dataservice/get?response_type=jsonp";if(config||window.ajaxHelper({url:_+"&serviceId="+n,type:"jsonp",mode:"postMessage",success:function(T){T.status==0?config=T:Mugeda.messageBox("获取配置信息失败")}}),this.RankingType=="submitScore"){var c=Browser$1._getWeixinServerHost()+"/server/huodong.php/dataservice/ranking/submit_score",d,u,f;l.getReferenceElement(a.score,!0)&&(d=parseInt(l.getReferenceElement(a.score,!0)._getText())),l.getReferenceElement(a.ranking_name,!0)&&(u=l.getReferenceElement(a.ranking_name,!0)._getText()),l.getReferenceElement(a.ranking_avatar,!0)&&(f=l.getReferenceElement(a.ranking_avatar,!0)._getSrc());var p;if(a.on_board&&(p=l.getReferenceElement(a.on_board,!0)),!r.logicPositive()){t();return}var v={serviceId:"&serviceId="+n,score:"&score="+d};WechatUserInfo(0)=="微信昵称"?(v.openId="&openId="+getMsuid(),v.nickname=u?"&nickname="+u:"",v.avatar="&avatar="+(f||"http://card.mgd5.com/mugeda/user_large.jpg")):(v.openId="&openId="+WechatUserInfo(2),v.nickname=u?"&nickname="+u:"",v.avatar="&avatar="+(f||"http://card.mgd5.com/mugeda/user_large.jpg")),o.message.show("正在提交..."),window.ajaxHelper({url:c+"?response_type=jsonp"+v.serviceId+v.openId+v.score+v.nickname+v.avatar,type:"jsonp",jsonp_callback:"mgdCallback_"+ +new Date,mode:"postMessage",success:function(T){if(o.message.close(),T.status===0){var b=r._options.onFinish;b&&b.doAction.apply(b),p&&(T.ranked?p._setText("1"):p._setText("0")),config&&y({score:d,nickname:v.nickname.split("=")[1],avatar:v.avatar.split("=")[1],serviceId:"local",openId:getMsuid(),id:"local"}),e()}else Mugeda.messageBox("提交失败"),t()}})}else if(this.RankingType=="getRanking"){if(!r.logicPositive()){t();return}var h=Browser$1._getWeixinServerHost()+"/server/huodong.php/dataservice/ranking/get?response_type=jsonp&serviceId="+n,g=window.localStorage.getItem(n);if(g){g=JSON.parse(g);var w=Date.parse(new Date)/1e3;w-g.time>10?x(function(T){var b={};b.res=T,b.time=Date.parse(new Date)/1e3,window.localStorage.setItem(n,JSON.stringify(b)),window.localStorage.setItem(n,JSON.stringify(b))}):(console.log("正在获取本地数据..."),A(g.res),console.log("获取成功.."),e())}else x(function(T){var b={};b.res=T,b.time=Date.parse(new Date)/1e3,window.localStorage.setItem(n,JSON.stringify(b))})}function y(T){var b=window.localStorage.getItem(n);if(b){b=JSON.parse(b);var C=b.res,M=b.time;if(config.config.rankingRule=="DESC"){for(var E=!1,O=0;O<C.length;O++)T.openId==C[O].openId&&(E=!0);if(E){for(var S=0;S<C.length;S++)if(T.openId==C[S].openId&&T.score>C[S].score){C.splice(S,1),C.splice(S,0,T);break}}else for(var L=0;L<C.length;L++)if(T.score>=C[L].score){C.splice(L,0,T),C.pop();break}}else if(config.config.rankingRule=="ASC"){for(var E=!1,O=0;O<C.length;O++)T.openId==C[O].openId&&(E=!0);if(E){for(var S=0;S<C.length;S++)if(T.openId==C[S].openId&&T.score<C[S].score){C.splice(S,1),C.splice(S,0,T);break}}else for(var L=0;L<C.length;L++)if(T.score<=C[L].score){C.splice(L,0,T),C.pop();break}}window.localStorage.setItem(n,JSON.stringify({res:C,time:M})),console.log(C)}}function x(T){o.message.show("正在获取..."),window.ajaxHelper({url:h,type:"jsonp",mode:"postMessage",success:function(b){o.message.close(),b.status===0&&(A(b.rankings),T&&T(b.rankings))}})}function m(T,b){return T.indexOf("_")>-1?l.getReferenceElement(T.split("_")[0]+"/"+T.split("_")[1]+(b+1),!0):l.getReferenceElement(T+(b+1),!0)}function A(T){for(var b=a.ranking_element,C=a.rankee_element,M=a.score_element,E=a.avatar_element,O=0;O<T.length;O++){var S=m(b,O),L=m(C,O),D=m(M,O),$=m(E,O);S&&S._setText(O+1),L&&L._setText(decodeHtmlEntity(T[O].nickname.toString())),D&&D._setText(decodeHtmlEntity(T[O].score.toString())),$&&$._setSrc(decodeHtmlEntity(T[O].avatar))}e()}})};var ActionSetLocalData=function(){ActionSetLocalData.__super__.constructor.apply(this,arguments)};mod.extend(ActionSetLocalData,Action);var proto$1t=ActionSetLocalData.prototype;proto$1t.doAction=function(){var e=this;if(e.logicPositive()){var t=Mugeda.getContentId(),r=t.crid,a=parseInt(e._behavior.param.expire),n=new Date().getTime()+a*60*1e3;if((isNaN(n)||a===0)&&(n=1/0),e._behavior.param=e._behavior.param||{},e._behavior.param.name===void 0)console.warn("行为出错：设定的本地数据未指定名称");else{var o=e._behavior.param.value||"",s=e._stage._displayObject._renderManager;o=s._replaceMacros(o),window.localStorage.setItem("Mugeda_localData_"+r+"_"+e._behavior.param.name,JSON.stringify({value:o,expire:n}))}}},mod.namespace("Action.ActionSetLocalData",ActionSetLocalData);const mapIdActions={};class ActionWechatMap extends Action{doAction(){if(!isWeChat()){console.warn(" [行为 - 微信地图导航] 当前环境不是微信"),isPreview()&&alert("当前环境不是微信");return}if(typeof window.wx>"u"){console.error("wx is not defined"),isPreview()&&alert("wx is not defined");return}const t=aniBehaviorWechatMapSchema.safeParse(this._behavior);if(!t.success){console.warn(" [行为 - 微信地图导航] 参数错误",t.error),isPreview()&&alert("参数错误");return}const r=t.data;if(!r.param.coordinate){console.warn(" [行为 - 微信地图导航] 坐标经纬度不能为空"),isPreview()&&alert("坐标经纬度不能为空");return}const[a,n]=r.param.coordinate.split(","),o=parseFloat(a),s=parseFloat(n);if(isNaN(o)||isNaN(s)||Math.abs(o)>90||Math.abs(s)>180){console.warn(" [行为 - 微信地图导航] 坐标经纬度格式错误"),isPreview()&&alert("坐标经纬度格式错误");return}const l=Number(r.param.scale)||20,_=r.param.location_name,c=r.param.location_desc;window.wx.openLocation({latitude:o,longitude:s,name:_,address:c,scale:l,infoUrl:"",success:function(d){console.log("打开地图成功")},fail:function(d){console.log("打开地图失败",d),isPreview()&&alert("打开地图失败："+d.errMsg)}})}}var ActionManager=function(){};ActionManager._getAction=function(e,t){var r=e.type,a=e.param||{},n=a.scope||"",o=e.event,s=t.parentMovieClip,l=t.parentParentMovieClip,_=t.renderObjectSceneSwitcher,c=t.stage,d=c.getNode(),u=t.displayObj,f=t.needBackPoint,p=t.referenceActions,v=function(H,ee){var ae={stopFlag:!1};ee(H,ae);for(var Q=H._children,te=Q.length,ie=0;ie<te;ie++){var oe=Q[ie];v(oe,ee)}},h=function(H){var ee=[];if(["{{all}}","{{alldragged}}","{{visible}}","{{dragged}}"].indexOf(H)>=0)v(c,function(Q){var te=Q._displayObject._aniData||{};te.param;{var ie=(te.type||"").toString();ie.match(/\d+/)&&ee.push(w._displayObjectHash[Q._displayObject._id])}});else{var ae=w._scene.getObjectByName(H);ae&&ee.push(ae)}return ee},g=null;if(!n.match(/\{\{.*\}\}/)){if(n==="symbol"||r=="audio")g=s;else if(n&&n.length&&n!="stage"){var w=c._displayObject._renderManager._mugeda;if(n&&n.indexOf("more|-|")>-1){var y=[],x=n.split("more|-|")[1],m=w._scene.getObjectByName(x,"prefix");m&&(g=m)}else if(n.indexOf("[[")>-1&&n.indexOf("]]")>-1){var y=[],A=n.replace(/[\[|\]]/g,"");if(A=="all"){for(var T=h("{{all}}"),b=0;b<T.length;b++){var m=T[b]._displayObject;m&&m._type=="MovieClip"&&y.push(m)}g=y}}else{var C=n.split("_");if(C&&C.length>1){var M=w.scene.getObjectByName(C[0]);M&&(g=M.scene.getObjectByName(C[1],"displayobject"))}else g=w._scene.getObjectByName(n,"displayobject")}}g||(g=l||s)}var E;if(r==="gotoAndPlay"||r==="gotoAndStop"||r==="gotoAndPause"){var O=r!=="gotoAndPlay";E=new ActionGoTo(o,!1,null,g,O,o===ActionEvent.APPEAR,f)}else if(r=="call")E=new ActionCallPhone(r,a);else if(r=="next")E=new ActionGoTo(o,!0,null,g,!0,o===ActionEvent.APPEAR,f);else if(r=="previous")E=new ActionGoTo(o,!0,null,g,!0,o===ActionEvent.APPEAR,f);else if(r=="pause")E=new ActionStop(o,null,g,o===ActionEvent.APPEAR);else if(r=="play")E=new ActionPlay(o,null,g);else if(r=="gotoPage")E=new ActionPage(o,!1,a.page_number,null,g,_,f);else if(r=="disablePage")E=new ActionPageControl(o,!0,_,"all");else if(r=="disablePageForward")E=new ActionPageControl(o,!0,_,"forward");else if(r=="disablePageAfter")E=new ActionPageControl(o,!0,_,"after");else if(r=="enablePage")E=new ActionPageControl(o,!1,_,"all");else if(r=="enablePageForward")E=new ActionPageControl(o,!1,_,"forward");else if(r=="enablePageAfter")E=new ActionPageControl(o,!1,_,"after");else if(r=="nextPage")E=new ActionPage(o,!0,1,null,g,_,f);else if(r=="prevPage")E=new ActionPage(o,!0,-1,null,g,_,f);else if(r==="globalPause")E=new ActionGlobalPause(o,g);else if(r==="globalResume")E=new ActionGlobalResume(o,g);else if(r==="audioPause")E=new ActionAudioPause(o,g);else if(r==="audioResume")E=new ActionAudioResume(o,g);else if(r==="videoPause")E=new ActionVideoPause(o,g);else if(r==="videoResume")E=new ActionVideoResume(o,g);else if(r==="stagePause")E=new ActionStagePause(o,g);else if(r==="stageResume")E=new ActionStageResume(o,g);else if(r=="changeElement")E=new ActionElement(o);else if(r==ActionTypeEnum.RESET_ELEMENT)E=new ActionElement(o,!0);else if(r=="playSegment")E=new ActionSegment(o);else if(r=="audioicon")E=new ActionMusicIcon(o);else if(r=="timerStatus")E=new ActionTimer(o);else if(r=="complexTimerStatus")E=new ActionComplexTimer(o);else if(r=="shareinfo")E=new ActionShare(o);else if(r=="audio")E=new ActionAudio(o,g);else if(r=="controlAudio")E=new ActionAudioControl(o,g);else if(r=="controlVideo")E=new ActionVideoControl(o,g);else if(r=="controlCanvas")E=new ActionCanvasDraw(o,g);else if(r=="chooseImage")E=new ActionChooseImage(o,g,{_keepValue:a.keep_value});else if(r=="showWechatAvatar")E=new ActionChooseImage(o,g,{_type:ActionChooseImage.Type.Image,_keepValue:a.keep_value,_source:function(H){H(Macro._getValue("wechatAvatar"))}});else if(r=="showWechatNickname")E=new ActionChooseImage(o,g,{_type:ActionChooseImage.Type.Text,_keepValue:a.keep_value,_source:function(H){H(Macro._getValue("wechatNickName"))}});else if(r=="updateChart")E=new ActionUpdateChart(o,g);else if(r=="vote")E=new ActionVote(o,g);else if(r=="submitCheckout")E=new ActionCheckout(o,g);else if(r=="getCheckout")E=new ActionGetCheckout(o,g);else if(r=="vrControl")E=new ActionUpdateVR(o,g);else if(r=="resetWiper")E=new ActionWiper(o,g);else if(r=="changePicture")E=new ActionChangePicture(o,g);else if(r=="recordAudio")E=new ActionRecordAudio(o,g);else if(r=="recordNativeAudio")E=new ActionRecordAudio(o,g,{mode:"native"});else if(r=="submitForm")E=new ActionSubmit(o,g);else if(r=="link")E=new ActionLink(a.url,a.urlTarget,a.replace);else if(r=="form"){var S,L=a.targetValue,D=L?JSON.parse(unescape(L)):null;if(D)var $={event:"click",id:"form",mode:2,name:"",param:D,type:a.openTarget=="frame"?"gotoAndPlay":"gotoPage"},S=ActionManager._getAction($,t);E=new ActionForm(o,d,S)}else if(r=="drag"){var R=a.type*1;R===4?R=10:R===5&&(R=113),[1,2,3,10].indexOf(R)!==-1?(R===10&&(R=4),E=new ActionDrag(u,R,a.reset,a.inertia)):E=new ActionDragFree(u,R,a.reset,a.inertia)}else if(Plugin._getUserActionObjectClass(r))E=new(Plugin._getUserActionObjectClass(r))(e,t);else if(r=="getCounter"||r=="setCounter")E=new ActionCounter(r,a);else if(r=="wechatMap")E=new ActionWechatMap(o);else if(r=="getLocation")E=new ActionGetLocation(r,a);else if(r=="setData"||r=="getData")E=new ActionDatabase(r,a);else if(r=="changeCanvas"){var I=a.canvas_name,P=c._displayObject._renderManager;E=new ActionCounter$1(r,a),E._canvasTarget=P.getReferenceElement(I,!1)}else if(r=="submitScore"||r=="getRanking")E=new ActionRanking(r,a);else if(r=="setLocalData")E=new ActionSetLocalData(o);else if(r=="getLocalData")E=new ActionGetLocalData(o);else if(r=="clipboard")E=new ActionClipboard(o);else{var I=a.element_name||a.instance_name,P=c._displayObject._renderManager,F=P.getReferenceElement(I,!1);if(F&&F._createActionClass)var N=F._createActionClass();else N=Action;E=new N(o)}if(E){E._behavior=e,E._displayObject=u,E._stage=c,E._event=o,u.actions=u.actions||[];var j=p||u.actions;if(j.push(E),e&&e.logic){var U=e.logic,P=c._displayObject._renderManager;E._logicRefernceAObject=P.getReferenceElement(U.element,!0)}if(e&&(e.type=="changeElement"||e.type==ActionTypeEnum.RESET_ELEMENT||e.type=="playSegment")){var I=a.element_name||a.instance_name||"",J=I.match(/\{\{.*\}\}/),P=c._displayObject._renderManager;E._targetAObject=J?null:P.getReferenceElement(I,!0,!1,t.displayObj)}if(e&&e.type=="timerStatus"){var w=c._displayObject._renderManager._mugeda,I=a.timer_name,P=c._displayObject._renderManager;if(I&&I.indexOf("more|-|")>-1){var x=I.split("more|-|")[1],m=w._scene.getObjectByName(x,"prefix");if(m)for(var b=0;b<m.length;b++)E._targetDisplayObject.push(P.getReferenceElement(m[b]._name,!1))}else E._targetDisplayObject.push(P.getReferenceElement(I,!1))}if(e&&e.type=="complexTimerStatus"){var w=c._displayObject._renderManager._mugeda,I=a.timer_name,P=c._displayObject._renderManager;E._targetDisplayObject.push(P.getReferenceElement(I,!1))}if(e&&e.type=="controlAudio"){var I=a.audio_target,P=c._displayObject._renderManager;E._audioTarget=P.getReferenceElement(I,!1)}if(e&&e.type=="controlVideo"){var I=a.video_target,P=c._displayObject._renderManager;E._videoTarget=P.getReferenceElement(I,!1)}if(e&&e.type=="controlCanvas"){var I=a.element_name,P=c._displayObject._renderManager;E._canvasTarget=P.getReferenceElement(I,!1)}if(e&&(e.type=="chooseImage"||e.type=="showWechatNickname"||e.type=="showWechatAvatar")){var I=a.target_name,P=c._displayObject._renderManager;if(!I||I=="undefined")var B=P._mugeda._displayObjectHash[u._id];else var B=P.getReferenceElement(I,!0,!0);E._targetAObject=B}if(e&&e.type=="updateChart"){var I=a.target_chart,P=c._displayObject._renderManager;E._targetChartObject=P.getReferenceElement(I,!1)}else if(e&&e.type=="vote"){var I=a.vote_display,P=c._displayObject._renderManager;E._countDisplayAObject=I&&I!=="undefined"?P.getReferenceElement(I,!0):null;var I=a.vote_voted,P=c._displayObject._renderManager;E._votedDisplayAObject=I&&I!=="undefined"?P.getReferenceElement(I,!0):null,E.updateVoteData()}else if(e&&e.type=="vrControl"){var I=a.element_name,P=c._displayObject._renderManager;E._targetObject=I&&I!=="undefined"?P.getReferenceElement(I,!1):E._displayObject}else if(e&&e.type=="resetWiper"){var I=a.element_name,P=c._displayObject._renderManager;E._targetObject=I&&I!=="undefined"?P.getReferenceElement(I,!1):E._displayObject}else if(e&&e.type=="getData"){var I=a.element_name,P=c._displayObject._renderManager;E._targetAObject=I&&I!=="undefined"?P.getReferenceElement(I,!0):null}if(e&&e.type=="changePicture"){var P=c._displayObject._renderManager,w=c._displayObject._renderManager._mugeda,I=a.target_name;if(I&&I.indexOf("more|-|")>-1){var x=I.split("more|-|")[1],W=w._scene.getObjectByName(x,"prefix");if(W)for(var b=0;b<W.length;b++)E._targetAObject.push(P.getReferenceElement(W[b]._name,!1))}else!I||I=="undefined"?E._targetAObject.push(P._mugeda._displayObjectHash[u._id]):E._targetAObject.push(P.getReferenceElement(I,!1));var G=a.source_name;if(G)var q=P.getReferenceElement(G,!0);E._sourceAObject=q}if(e&&(e.type=="recordAudio"||e.type=="recordNativeAudio")){var X=a.target_name,Y=a.target_text,P=c._displayObject._renderManager;E._targetAudioObject=P.getReferenceElement(X,!1),E._targetTextObject=P.getReferenceElement(Y,!1)}var K,ne;try{var Z=a.submit_onsuccess,k=JSON.parse(decodeURIComponent(a.onsuccess_param)),V=a.submit_onfailure,re=JSON.parse(decodeURIComponent(a.onfailure_param))}catch{}if(Z&&Z!="none"&&k){var S={event:"click",id:"onFinish",mode:2,name:"",param:k,type:Z};K=ActionManager._getAction(S,t)}if(V&&V!="none"&&re){var S={event:"click",id:"onFailure",mode:2,name:"",param:re,type:V};ne=ActionManager._getAction(S,t)}E._setOptions({onFinish:K,onFailure:ne});const H=E.doAction;return E.doAction=function(...ee){const ae=H.apply(E,ee);let Q=null;return ae instanceof Promise?Q=ae:Q=Promise.resolve(),Q.then(()=>{(E._behavior.postBehaviorIds||[]).forEach(ie=>{const oe=mapIdActions[ie];oe&&oe.doAction()})}).catch(te=>{}),Q},mapIdActions[E._behavior.id]=E,E}},mod.namespace("Action.ActionManager",ActionManager);var Bitmap=function(){Bitmap.__super__.constructor.apply(this,arguments);var e=this;e._bitmapData=null,e._smoothing=null,e._pixelSnapping=null,e._resourceList=null,mod.definePropertyGetSet(e,["bitmapData",e._getBitmapData,e._setBitmapData,"Smoothing",e._getSmoothing,e._setSmoothing])};mod.extend(Bitmap,DisplayObject);var proto$1s=Bitmap.prototype;proto$1s._getBitmapData=function(){return this._bitmapData},proto$1s._setBitmapData=function(e){var t=this;t._bitmapData=e,t._dispatchEvent(t._changedEvent)},proto$1s._getSmoothing=function(){return this._smoothing},proto$1s._setSmoothing=function(e){this._smoothing=e},mod.namespace("Display.Bitmap",Bitmap);var AudioControl=function(){AudioControl.__super__.constructor.apply(this,arguments);var e=this;e._audio=null,e._autoPlay=!1,e._audioOnBitmap=null,e._audioOffBitmap=null,e._loop=null,e._type="audio",e._updateChecker=null,e._actionAudioControlList={},e._resourceList=[],e.constructor._createAObject||(e.constructor._createAObject=function(){var t=function(n,o){var s=this;t.__super__.constructor.apply(s,arguments),mod.definePropertyGetSet(s,["progress",a._getProgress,a._setProgress])},r=MugineRequire("Utils/mugedaAPIAObject");mod.extend(t,r);var a=t.prototype;return a._getProgress=function(){var n=this._displayObject._audioObject;return 100*n._audio.currentTime/n._audio.duration},a._setProgress=function(n){var o=this._displayObject._audioObject;o._audio.currentTime=o._audio.duration/100*n},t})};mod.extend(AudioControl,Bitmap);var proto$1r=Bitmap.prototype;proto$1r._bindBehavior=function(e,t){var r=this;r._actionAudioControlList=r._actionAudioControlList||{},r._actionAudioControlList[e]?r._actionAudioControlList[e].push(t):r._actionAudioControlList[e]=[t]},proto$1r._triggerBehavior=function(e,t){var r=this;r._actionAudioControlList=r._actionAudioControlList||{},r._actionAudioControlList[e]&&r._actionAudioControlList[e].forEach(function(a){a(t)})},proto$1r._setUrl=function(e){var t=this;t._audioObject._setAudioSrc(e)},mod.namespace("Display.AudioControl",AudioControl);var LoaderInfo=function(){var e=this;LoaderInfo.__super__.constructor.apply(e,arguments),e._content=null,e._contentType=null,e._loader=null,e._url=null,e._state=LoaderInfo.STATE.IDLE};mod.extend(LoaderInfo,IEventDispatcher),LoaderInfo.STATE={CANCELLED:-1,IDLE:0,LOAD:1,LOADED:2};var proto$1q=LoaderInfo.prototype;proto$1q._cancel=function(){this._state=LoaderInfo.STATE.CANCELLED},mod.namespace("Display.LoaderInfo",LoaderInfo);var Loader=function(e){var t=this;e&&e._useNewId&&(t._useNewId=!0),Loader.__super__.constructor.apply(t,arguments),t._content=null,t._contentLoaderInfo=new LoaderInfo};mod.extend(Loader,DisplayObjectContainer);var proto$1p=Loader.prototype;proto$1p._load=function(e){var t=this;e._load(t)},mod.namespace("Display.Loader",Loader);var id$3=0,ResourceData=function(){var e=this;e._id="r"+id$3++,e._src=null,e._loader=new Loader(e),mod.definePropertyGetSet(e,["src",e._getSrc,e._setSrc])},proto$1o=ResourceData.prototype;proto$1o._getSrc=function(){return this._src},proto$1o._setSrc=function(e){this._src=e};var WebAudioMock=function(e){var t=this;WebAudioMock.__super__.constructor.apply(t,arguments),t._src=e,t._readyState=0,t._buffer=null,t._waitingPlay=!1,t._connected=!1,t._currentSource=null,t._gainNode=null,t._currentTime=null,t._loop=!1,t._paused=!0,t._prevPlayTimeStamp=null,t._ended=!1,t._prevStopTime=null,t._needDispatchTimeUpdate=!1,t._currentGain=1,t._audioBufferQuene=[],t._muted=!1,mod.definePropertyGetSet(t,["src",t._getSrc,t._setSrc,"currentTime",t._getCurrentTime,t._setCurrentTime,"loop",t._getLoop,t._setLoop,"volume",t._getVolume,t._setVolume,"muted",t._getMuted,t._setMuted]),mod.definePropertyReadOnly(t,["readyState",t._getReadyState,"paused",t._getPaused,"duration",t._getDuration,"ended",t._getEnded])},audioCtx=null;if(Browser$1._globalObject.AudioContext||Browser$1._globalObject.webkitAudioContext)var getAudioContext=WebAudioMock.getAudioContext=function(){return audioCtx||(audioCtx=new(window.AudioContext||window.webkitAudioContext)),audioCtx};mod.extend(WebAudioMock,IEventDispatcher);var proto$1n=WebAudioMock.prototype;proto$1n._getEnded=function(){return this._ended},proto$1n._addEventListener=function(e){var t=this;e==="timeupdate"&&!t._needDispatchTimeUpdate&&(t._needDispatchTimeUpdate=!0),WebAudioMock.__super__._addEventListener.apply(t,arguments)},proto$1n._removeEventListener=function(e){var t=this;WebAudioMock.__super__._removeEventListener.apply(t,arguments),e==="timeupdate"&&!t.hasEventListener(e)&&(t._needDispatchTimeUpdate=!1)},proto$1n._getVolume=function(){var e=this;return e._currentGain},proto$1n._setVolume=function(e){var t=this;t._currentGain=e,t._gainNode&&(t._gainNode.gain.value=t._muted?0:e)},proto$1n._getMuted=function(){var e=this;return e._muted},proto$1n._setMuted=function(e){var t=this;t._muted=!!e,t._setVolume(t._currentGain)},proto$1n._getLoop=function(){return this._loop},proto$1n._setLoop=function(e){var t=this;t._loop=e},proto$1n._getCurrentTime=function(){var e=this;return e._paused?e._prevStopTime:getAudioContext().currentTime-this._prevPlayTimeStamp},proto$1n._setCurrentTime=function(e){var t=this,r=t._paused;e!=t._getCurrentTime()&&(t._pause(),t._prevStopTime=e,r||t._play(),t._needDispatchTimeUpdate&&t._dispatchEvent(new MuEvents("timeupdate")))},proto$1n._getSrc=function(){return this._src},proto$1n._setSrc=function(e){var t=this;e!=t._src&&(t._src=e,t._readyState=0,t._connected&&(t._disconnect(),t._paused||(t._paused=!0,t._dispatchEvent(new MuEvents("pause")))))},proto$1n._getReadyState=function(){return this._readyState},proto$1n._getDuration=function(){var e=this,t=e._buffer;if(t)return t.duration},proto$1n._load=function(){var e=this,t=e._src,r=new XMLHttpRequest;r.onload=function(){var a=r.response;if(Browser$1.os.ios){var n=new Uint8Array(a.slice(0,10));if(n[0]===73&&n[1]===68&&n[2]===51){var o=(n[6]&127)*2097152+(n[7]&127)*16384+(n[8]&127)*128+(n[9]&127);a=a.slice(o)}if(typeof Uint8Array<"u"){Uint8Array.prototype.indexOf===void 0&&(Uint8Array.prototype.indexOf=Array.prototype.indexOf);var s=new Uint8Array(a),l=s.indexOf(255);l===-1||(a=a.slice(l))}}getAudioContext().decodeAudioData(a,function(_){e._buffer=_,e._readyState=4,e._prevStopTime=0,e._dispatchEvent(new MuEvents("canplay")),e._dispatchEvent(new MuEvents("canplaythrough"))},function(_){console.error(_)})},r.open("GET",t,!0),r.responseType="arraybuffer",r.send()},proto$1n._connect=function(e){var t=this;t._currentSource=e,t._gainNode||(t._gainNode=getAudioContext().createGain(),t._gainNode.connect(getAudioContext().destination),t._gainNode.gain.value=t._currentGain),e.buffer=t._buffer,e.connect(t._gainNode),t._connected=!0,t._currentSource=e,e.onended=function(){t._currentSource==this&&(t._disconnect(),t._paused||(t._prevStopTime=0,t._paused=!0,t._loop?t._play():(t._dispatchEvent(new MuEvents("pause")),t._ended=!0)))}},proto$1n._disconnect=function(){var e=this;e._currentSource.disconnect(),e._currentSource=null,e._connected=!1},proto$1n._play=function(){var e=this;if(e._ended=!1,!!e._paused){var t=getAudioContext().createBufferSource();if(e._audioBufferQuene.push(t),!(e._waitingPlay||e._playingNeedToConfirm)){var r=function(){var n=function(){if(e._audioBufferQuene.length){var o=e._audioBufferQuene.pop();if(e._connected||e._connect(o),e._prevStopTime!=null)var s=e._prevStopTime;else s=e._getCurrentTime();e._currentSource.start(0,s),e._playingNeedToConfirm=!0;var l=function(_){if(getAudioContext().activeSourceCount>0||getAudioContext().state==="running"){e._prevPlayTimeStamp=getAudioContext().currentTime-s,e._playingNeedToConfirm=!1,e._paused=!1,e._dispatchEvent(new MuEvents("playing")),e._audioBufferQuene=[];return}else return _<3?setTimeout(function(){l(_+1)},150):(e._playingNeedToConfirm=!1,e._disconnect(),n())};l(1)}};n()};if(e._readyState===0){e._waitingPlay=!0,e._load();var a=function(){e._removeEventListener("canplaythrough",a),e._waitingPlay&&(r(),e._waitingPlay=!1)};e._addEventListener("canplaythrough",a)}else r()}}},proto$1n._pause=function(){var e=this;e._waitingPlay=!1,e._currentSource&&(e._currentSource.stop(0),e._prevStopTime=e._getCurrentTime(),e._paused=!0,e._dispatchEvent(new MuEvents("pause")),e._disconnect())},proto$1n._getPaused=function(){return this._paused},mod.exportName(proto$1n,["load",proto$1n._load,"play",proto$1n._play,"pause",proto$1n._pause,"addEventListener",proto$1n._addEventListener]),mod.namespace("Utils.WebAudioMock",WebAudioMock);var needUseWebAudio=Browser$1.os.android&&Browser$1._isWeChat()&&new Audio().play()!=null,isVolume=!0;if(Browser$1._globalObject.audio){isVolume=!0;var testAudio=new Audio;testAudio.volume=.2,testAudio.volume!=.2&&(isVolume=!1),testAudio=void 0}var AudioData=function(){var e=this;AudioData.__super__.constructor.apply(e,arguments),e._src=null,e._name=null,e._audio=null,e._loop=!1,e._dataDisplayObject=!0,e._playWaiting=!1,e._isVolumeBehavior=!1,mod.definePropertyGetSet(e,["loop",proto$1m._getLoop,proto$1m._setLoop]),e.enterframeBinded=!1,e.enterFrameCallback=e._checkVisible.bind(e),e._visible=!1};mod.extend(AudioData,ResourceData);var proto$1m=AudioData.prototype;proto$1m._getLoop=function(){return this._loop},proto$1m._setLoop=function(e){var t=this;t._audio&&(t._audio.loop=e),t._loop=e},proto$1m._checkVisible=function(){var e=this;if(e._getRealVisible()==!1){e._setVisible(!1);var t=e;do t=t._parent;while(t._id!=1);t._removeEventListener("enterframe",e.enterFrameCallback),e.enterframeBinded=!1}},proto$1m._setVisible=function(e){var t=this,r=t._audio;if(r&&t._visible!=e)if(t._visible=e,e)try{if(r.currentTime=0,r.loop=t._loop,r.play(),!t.enterframeBinded){var a=t;do a=a._parent;while(a._id!=1);a._addEventListener("enterframe",t.enterFrameCallback),t.enterframeBinded=!0}}catch{console.log("play problem")}else r.pause()},proto$1m._setAudioSrc=function(e,t){var r=this;r._src=e,Browser$1._globalObject.Audio||(Browser$1._globalObject.Audio=function(c){this.play=function(){},this.pause=function(){},this.load=function(){},this.loop=!0,this.src=c,this.paused=!1,this.addEventListener=function(d,u){},this.removeEventListener=function(d,u){}});var a=Browser$1._globalObject.weixinAudioLoader;if(a){var n=Object.keys(a).filter(function(c){var d=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?((\/?[^\?#]+)?\??([^#]+)?#?(\w*))/,u=c.match(d);if(u&&u[8]&&e.indexOf(u[8])>-1)return!0});if(n[0])var o=r._audio=a[n[0]]}if(!o){var s=r._isVolumeBehavior;if(needUseWebAudio&&t||Browser$1.os.ios&&t||!isVolume&&s||Browser$1.os.ios&&s?o=r._audio=new WebAudioMock(e):(o=r._audio=new Browser$1._globalObject.Audio,o.src=e),Browser$1._isWeChat()){var l=o.play;o.play=function(){Browser$1.os.ios&&o instanceof WebAudioMock&&WebAudioMock.getAudioContext().state!=="running"&&window.top===window||l.call(o),!r._playWaiting&&(r._playWaiting=!0,Browser$1._getWechatJSBridge(function(c){c.invoke("getNetworkType",{},function(){if(r._playWaiting){var d=l.call(o);d&&d.then(function(){}).catch(function(u){}),r._playWaiting=!1}})}))};var _=o.pause;o.pause=function(){r._playWaiting=!1,_.call(o)},o.addEventListener("pause",function(){r._playWaiting=!1})}}o.loop=r._loop},proto$1m._load=function(){var e=this,t=e._loader._contentLoaderInfo;if(!(t._state==LoaderInfo.STATE.LOAD||t._state==LoaderInfo.STATE.LOADED)){var r=Browser$1._globalObject.webkitURL||Browser$1._globalObject.URL,a=function(){mod._jsonp(e._src+".base64.js","MUGEDA_DATA_CALLBACK_"+(e._src.match(/[^/\\\\]+$/)||[""])[0].replace(/[^A-Za-z0-9]/g,"$"),function(_,c){_?(t._state=LoaderInfo.STATE.CANCELLED,l=new MuEvents("ioError",!1),t._dispatchEvent(l)):(t._state=LoaderInfo.STATE.LOADED,l=new MuEvents("complete",!1),t._dispatchEvent(l),e._audio.src=c)})},n=function(){e._audio.load();var _=function(){e._audio.removeEventListener("canplay",_),e._audio.removeEventListener("error",c),t._state=LoaderInfo.STATE.LOADED,l=new MuEvents("complete",!1),t._dispatchEvent(l)},c=function(){e._audio.removeEventListener("canplay",_),e._audio.removeEventListener("error",c),t._state=LoaderInfo.STATE.CANCELLED,l=new MuEvents("ioError",!1),t._dispatchEvent(l)};e._audio.addEventListener("canplay",_),e._audio.addEventListener("error",c)},o=navigator.userAgent.toLowerCase();if(e._audio instanceof WebAudioMock)n();else if(o.indexOf("tbs")==-1&&o.indexOf("crosswalk")==-1&&Browser$1.os.android&&((Browser$1.os.version||"").match(/(\d+)/)||[4])[0]*1<5)t._state=LoaderInfo.STATE.CANCELLED,l=new MuEvents("ioError",!1),setTimeout(function(){t._dispatchEvent(l)});else if(!r||o.indexOf("crosswalk")!=-1)a();else if(!Browser$1.os.tablet&&!Browser$1.os.phone)n();else{var s=new XMLHttpRequest;s.onreadystatechange=function(){if(s.readyState==4)if(t._state=LoaderInfo.STATE.LOADED,s.status==200){var _=this.response,c=r.createObjectURL(_);e._audio.src=c,t._state=LoaderInfo.STATE.LOADED;var d=new MuEvents("complete",!1);t._dispatchEvent(d)}else a()},s.open("GET",e._src,!0);try{s.responseType="blob",s.send()}catch{a()}t._state=LoaderInfo.STATE.LOAD;var l=new MuEvents("open",!1);t._dispatchEvent(l)}}},proto$1m._addEventListener=function(){var e=this;e._audio.addEventListener.apply(e._audio,arguments)},proto$1m._removeEventListener=function(){var e=this;e._audio.removeEventListener.apply(e._audio,arguments)},proto$1m._bindUserAPI=function(){},mod.exportName(proto$1m,["addEventListener",proto$1m._addEventListener,"removeEventListener",proto$1m._removeEventListener]),mod.namespace("Display.AudioData",AudioData);var BitmapData=function(){var e=this;BitmapData.__super__.constructor.apply(e,arguments),e._image=null};mod.extend(BitmapData,ResourceData),typeof Image<"u"&&(BitmapData.blankImage=new Image,BitmapData.blankImage.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");var proto$1l=BitmapData.prototype;proto$1l._load=function(){var e=this,t=e._loader._contentLoaderInfo,r=!1;if(!(t._state==LoaderInfo.STATE.LOAD||t._state==LoaderInfo.STATE.LOADED)){var a=t._url=e._src;t._contentType="image/*";var n=new Image;if(n.setAttribute("data-load","ok"),(Browser$1._globalObject._mrmcp&&(Browser$1._globalObject._mrmcp.cros||Browser$1._globalObject._mrmcp.previewMode)||a.indexOf("wx.qlogo.cn")>=0)&&(n.crossOrigin="Anonymous"),a.indexOf("wx.qlogo.cn")>=0){var o=new Image;o.src=a,a=a+(a.indexOf("?")>0?"&":"?")+"hash="+e._id}n.src=a;var s=e._loader._content=t._content=new Bitmap,l=s._bitmapData=new BitmapData;l._src=a,l._image=n;var _=function(){if(e._image=l._image,!r){n.removeEventListener("load",_),t._state=LoaderInfo.STATE.LOADED;var u=new MuEvents("complete",!1);t._dispatchEvent(u)}},c=function(){if(e._image=l._image,!r){if(this.crossOrigin==="anonymous"){var u=this;console.info("图片跨域加载失败，尝试非跨域，一些依赖跨域的功能可能失效："+this.src);var f=this.src;this.src="",this.crossOrigin=void 0,r=!0,setTimeout(function(){u.src=f,r=!1});return}n.removeEventListener("error",c),t._state=LoaderInfo.STATE.CANCELLED;var p=new MuEvents("ioError",!1);t._dispatchEvent(p)}};n.addEventListener("load",_),n.addEventListener("error",c);var d=new MuEvents("open",!1);t._state=LoaderInfo.STATE.LOAD,t._dispatchEvent(d)}},mod.namespace("Display.BitmapData",BitmapData);var displayListInfo=function(){var e=this;e._displayObjectList=[]},proto$1k=displayListInfo.prototype;proto$1k.addObjectAndTransition=function(e){var t=this,r=t._displayObjectList;r.indexOf(e)==-1&&r.push(e)},proto$1k.removeObject=function(e){var t=this,r=t._displayObjectList,a=r.indexOf(e);a>-1&&r.splice(a,1)};var StyleSheetManager=function(){};if(typeof document<"u"){var style=document.createElement("style");document.head.appendChild(style);var styleSheet=style.sheet}else console.warn("no document found");var counter=0,perfix="mugine_class_",ruleHash={},cssRulesPool=[],animationRulesPool=[],animationRuleHash={};StyleSheetManager.prototype,StyleSheetManager.addRule=function(e,t,r){if(styleSheet)if(r=r||e+"{ "+t+"}",cssRulesPool.length){var a=cssRulesPool.pop(),n=a.selectorText;if(n==null&&a.cssText.indexOf("@font-face")==0){var o=a.cssText.match(/font-family:\s*(.+?);/);o&&(n=o[1])}var s=ruleHash[n];delete ruleHash[n],styleSheet.deleteRule(s);try{styleSheet.insertRule(r,s)}catch(_){console.error("inval style: "+r,_)}ruleHash[e]=s}else{var l=(styleSheet.cssRules||styleSheet.rules).length;try{styleSheet.insertRule(r,l)}catch(_){console.error("inval style: "+r,_)}ruleHash[e]=l}},StyleSheetManager.removeRule=function(e){var t=ruleHash[e];if(t!=null){var r=styleSheet.cssRules||styleSheet.rules;cssRulesPool.push(r[t])}},StyleSheetManager.insertFontStyle=function(e,t){StyleSheetManager.addRule(e,null,"@font-face{font-family:'"+e+"';src:"+t+";}")},StyleSheetManager.removeFontStyle=function(e){StyleSheetManager.removeRule(e)},StyleSheetManager.insertCss=function(e,t){return arguments.length==1&&(t=e,e=perfix+counter++),StyleSheetManager.addRule("."+e,t),e},StyleSheetManager.animationPrefix=null,StyleSheetManager.insertKeyframes=function(e){var t=perfix+counter++,r="@"+StyleSheetManager.animationPrefix+"keyframes "+t+"{ "+e+"}";if(animationRulesPool.length){var a=animationRulesPool.pop(),n=a.name,o=animationRuleHash[n];delete animationRuleHash[n],styleSheet.deleteRule(o),styleSheet.insertRule(r,o),animationRuleHash[t]=o}else{var s=styleSheet.cssRules.length;styleSheet.insertRule(r,s),animationRuleHash[t]=s}return t},StyleSheetManager.deleteCss=function(e){StyleSheetManager.removeRule("."+e)},StyleSheetManager.deleteAnimationCss=function(e){var t=animationRuleHash[e];if(t!=null){var r=styleSheet.cssRules||styleSheet.rules;animationRulesPool.push(r[t])}},StyleSheetManager.updateCss=function(e,t){StyleSheetManager.deleteCss(e),StyleSheetManager.insertCss(e,t)},mod.namespace("Render.StyleSheet",StyleSheetManager);var FontData=function(e,t,r,a,n){var o=this;FontData.__super__.constructor.apply(o,arguments),o._fontName=e,o._src=t,o._chars=r||"",o._dynamic=a,o._base64=null,o._addedToDocument=!1,o._resource=n};extend(FontData,ResourceData),FontData._unique=function(e){return e.replace(/(.)(?=.*\1)/g,"")},FontData._getServerAddress=function(e,t,r){r=r||(Browser$1._isSupportWoff()?"woff":"ttf");var a=Browser$1._getWeixinServerHost()+"/server/";return a+"cloudfont.php?font="+e+"&content="+encodeURIComponent(t)+"&format="+r+"&api_type=3"};var fontCharMap={};FontData._resetIncrease=function(){Object.keys(fontCharMap).forEach(function(e){fontCharMap[e].lastForceNewIdx=fontCharMap[e].length})},FontData._getFontData=function(e,t,r,a,n){a==null&&(a=!0),fontCharMap[e]==null&&(fontCharMap[e]=[]);var o=fontCharMap[e];for(c=0;c<o.length;c++){for(var s=o[c],l=0;l<r.length&&s._chars.indexOf(r.charAt(l))!=-1;l++);if(l==r.length)return s}if(o.length==0||!a){var _=new FontData(e,t,r,a,n);return o.push(_),_}else{for(var c=o.length-1;c>=(o.lastForceNewIdx||0)&&!(o[c]._dynamic&&o[c]._getState()==LoaderInfo.STATE.IDLE);c--);return c==(o.lastForceNewIdx||0)-1?(o.push(new FontData(e,t,r,!0,n)),o[o.length-1]):(o[c]._merge(r),o[c])}},FontData._getFontDataIncrease=function(e,t,r,a){if(t.indexOf("cloudfont.php")>-1){var n=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?/,o=t.match(n);o&&Browser$1._globalObject._mrmcp&&Browser$1._globalObject._mrmcp.data_server?t=t.replace(n,Browser$1._getWeixinServerHost()):o||(t=Browser$1._getWeixinServerHost()+t);var s=e.lastIndexOf("-"),l=e.substr(0,s);s=e.indexOf("-"),l=l.substr(s+1)}else{s=e.lastIndexOf("-"),l=e.substr(0,s),s=e.indexOf("-"),l=l.substr(s+1);var _=!1}return FontData._getFontData(l,t,r,_,a)};var proto$1j=FontData.prototype;proto$1j._getServerAddress=function(e){return FontData._getServerAddress(this._fontName,this._chars,e)},proto$1j._getFontFamily=function(){var e=this;return"c-"+e._fontName+"-"+e._id},proto$1j._getContentType=function(){return"font/*"},proto$1j._merge=function(e){var t=this;t._chars=FontData._unique(t._chars+e)},proto$1j._getState=function(){var e=this;return e._loader._contentLoaderInfo._state},proto$1j._load=function(){var e=this,t=e._loader._contentLoaderInfo,r=e._getState();if(!(r==LoaderInfo.STATE.LOAD||r==LoaderInfo.STATE.LOADED)){if(e._dynamic)var a=e._getServerAddress();else a=e._resource.dir.getFullPath(e._src);var n=function(){e._dynamic?(t._state=LoaderInfo.STATE.CANCELLED,s=new MuEvents("ioError",!1),t._dispatchEvent(s),StyleSheetManager.insertFontStyle(e._getFontFamily(),'url("'+a+'")')):_jsonp(a=e._resource.dir.getFullPath(e._src+".base64.js"),"MUGEDA_DATA_CALLBACK_"+(e._src.match(/[^/\\\\]+$/)||[""])[0].replace(/[^A-Za-z0-9]/g,"$"),function(_,c){_?(s=new MuEvents("ioError",!1),t._dispatchEvent(s)):(e._base64=c,t._state=LoaderInfo.STATE.LOADED,s=new MuEvents("complete",!1),t._dispatchEvent(s))})};if(location.protocol==="file:")n();else{var o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState==4)if(o.status==200){var _=o.response,c=new window.FileReader;c.readAsDataURL(_),c.onload=function(){e._base64=this.result,t._state=LoaderInfo.STATE.LOADED;var d=new MuEvents("complete",!1);t._dispatchEvent(d)}}else n()};var s=new MuEvents("open",!1);t._state=LoaderInfo.STATE.LOAD,t._dispatchEvent(s);try{if(a.length>1024){var l=a.match(/content=(.*?)(&|$)/);if(!l)throw new Error("No Content");a=a.replace(l[0],""),l=l[1],o.open("POST",a,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.responseType="blob",o.send("content="+l)}else o.open("GET",a,!0),o.responseType="blob",o.send()}catch{setTimeout(n)}}}},proto$1j._addToDocument=function(){var e=this;e._base64&&!e._addedToDocument&&(StyleSheetManager.insertFontStyle(e._getFontFamily(),'url("'+e._base64+'")'),e._addedToDocument=!0)},namespace("Display.FontData",FontData);var Form=function(){Form.__super__.constructor.apply(this,arguments)};mod.extend(Form,DisplayObject),mod.namespace("Display.Form",Form);var FrameLabel=function(){FrameLabel.__super__.constructor.apply(this,arguments);var e=this;e._frame=0,e._name=""};mod.extend(FrameLabel,IEventDispatcher),mod.namespace("Display.FrameLabel",FrameLabel);var GradientType=function(){};GradientType.LINEAR="linear",GradientType.RADIAL="radial";var id$2=0,GraphicsGradientFill=function(e,t,r,a,n){var o=this;o.type=e||GradientType.LINEAR,o.colors=t,o.ratios=r,o.fillStartPos=a,o.fillEndPos=n,o._gradId="grad_"+id$2++},proto$1i=GraphicsGradientFill.prototype;proto$1i._getDefs=function(){var e=this,t=e.type;if(t==GradientType.LINEAR)var r="linearGradient";else r="radialGradient";var a=e.fillStartPos,n=e.fillEndPos,o="<defs><"+r+' id="'+e._gradId+'" ';if(t==GradientType.LINEAR)o+='x1="'+a._x+'" x2="'+n._x+'" y1="'+a._y+'" y2="'+n._y+'" ';else{o+='cx="'+a._x+'" cy="'+a._y+'" fx="'+a._x+'" fy="'+a._y+'" ';var s=a._x-n._x,l=a._y-n._y,_=Math.sqrt(s*s+l*l);o+='r="'+_+'" '}o+='gradientUnits="userSpaceOnUse">';for(var c=e.colors,d=e.ratios,u=c.length,f=0;f<u;f++){var p=Math.abs(d[f])<.001?0:d[f],v=c[f]._getAlpha();o+='<stop class="" stop-opacity="'+v+'" offset="'+p+'" style="stop-color: '+c[f]._getCssText()+';"></stop>'}return o+="</"+r+"></defs>",o},proto$1i._getFill=function(){return"url(#"+this._gradId+")"},proto$1i._updateDefs=function(){return!1},mod.namespace("Display.GraphicsGradientFill",GraphicsGradientFill);var id$1=0,GraphicsImageFill=function(e,t,r,a,n){var o=this;o._bitmapData=e,o._horOffset=parseFloat(t)||0,o._verOffset=parseFloat(r)||0,o._imagePosition=a||"center",o._imageSize=n||"cover",o._gradId="fill_"+id$1++},proto$1h=GraphicsImageFill.prototype;proto$1h._getImageSizePosition=function(e){var t=this,r=t._bitmapData,a=e._getWidth(),n=e._getHeight(),o=e._getX(),s=e._getY(),l=e._hasShapeAnimation;if(!r)return null;var _=r._image,c=_.width,d=_.height,u=c/d,f=a/n,p=_.src.indexOf(r._src)>=0,v={},h=e._lastInfo||{};p&&(e._lastInfo=h);var g=t._horOffset,w=t._verOffset;l&&(a=Math.round(a),n=Math.round(n),o=Math.round(o),s=Math.round(s));var y=t._imageSize,x=t._imagePosition;if(y=="cover"?(v.desHeight=n,v.desWidth=a,u<f?(v.srcWidth=a,v.srcHeight=a/u):(v.srcHeight=n,v.srcWidth=n*u)):y=="contain"?(v.srcWidth=c,v.srcHeight=d,u>f?(v.desWidth=a,v.desHeight=a/u):(v.desHeight=n,v.desWidth=n*u)):y=="fill"?(v.desHeight=n,v.desWidth=a,v.srcWidth=a,v.srcHeight=n):y=="width"?(v.desWidth=a,v.desHeight=n,v.srcWidth=a,v.srcHeight=a/u):y=="height"?(v.desWidth=a,v.desHeight=n,v.srcWidth=n*u,v.srcHeight=n):y=="tile"?(v.desHeight=d,v.desWidth=c,v.srcWidth=c,v.srcHeight=d):(v.desHeight=n,v.desWidth=a,v.srcWidth=c,v.srcHeight=d),l&&(v.desHeight=Math.round(v.desHeight),v.desWidth=Math.round(v.desWidth),v.srcWidth=Math.round(v.srcWidth),v.srcHeight=Math.round(v.srcHeight)),y=="tile")v.srcLeft=0,v.desLeft=0;else if(x=="center"||x=="top"||x=="bottom"){var m=(a-v.srcWidth)/2,A=(a-v.desWidth)/2,T=Math.round(a/2),b=h.centerImageLeft===void 0||x=="center"&&y=="raw"&&Math.abs(h.centerObjLeft-o-T)<2||x=="top"&&y=="width"&&h.lastTop==s||x=="bottom"&&y=="width"&&h.lastBottom==s+n;if(l&&b){h.centerImageLeft===void 0&&(m=Math.round(m),A=Math.round(A),h.lastTop=s,h.lastBottom=s+n,h.centerImageLeft=-m+T,h.centerObjLeft=o+T);var C=h.centerImageLeft,M=o+T-h.centerObjLeft;v.srcLeft=T-C-M+Math.round(g),v.desLeft=Math.round(A)}else v.srcLeft=m+g,v.desLeft=A}else x.indexOf("left")>=0?(v.srcLeft=g,v.desLeft=0):x.indexOf("right")>=0&&(v.srcLeft=a-v.srcWidth-g,v.desLeft=a-v.desWidth);if(y=="tile")v.srcTop=0,v.desTop=0;else if(x=="center"||x=="left"||x=="right"){var E=(n-v.srcHeight)/2,O=(n-v.desHeight)/2,S=Math.round(n/2),b=h.centerImageTop===void 0||x=="center"&&y=="raw"&&Math.abs(h.centerObjTop-s-S)<2||x=="left"&&y=="height"&&h.lastLeft==o||x=="right"&&y=="height"&&h.lastRight==o+a;if(l&&b){h.centerImageTop===void 0&&(E=Math.round(E),O=Math.round(O),h.lastLeft=o,h.lastRight=o+a,h.centerImageTop=-E+S,h.centerObjTop=s+S);var L=h.centerImageTop,D=s+S-h.centerObjTop;v.srcTop=S-L-D+Math.round(w),v.desTop=Math.round(O)}else v.srcTop=E+w,v.desTop=O}else x.indexOf("top")>=0?(v.srcTop=w,v.desTop=0):x.indexOf("bottom")>=0&&(v.srcTop=n-v.srcHeight-w,v.desTop=n-v.desHeight);return v},proto$1h._getDefs=function(e){var t=this,r="",a=e._aniData.param,n=a.fillInfo,o=navigator.userAgent,s=!!o.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),l=!!((n.horOffset||n.verOffset)&&(n.horOffset!="0"||n.verOffset!="0")),_=t._getImageSizePosition(e);if(!_)r="";else if(!l&&s&&e._bitmapData&&e._aniData.type&&(e._aniData.type==2004||e._aniData.type==2003)){var c={radius:e._aniData.type==2004?"50%":"0%",width:"100%",height:"100%",src:t._bitmapData._src,repeat:"no-repeat",size:"auto",position:"left top"};n.imageSize?n.imageSize=="cover"?c.size="cover":n.imageSize=="width"?c.size="100% auto":n.imageSize=="height"?c.size="auto 100%":n.imageSize=="fill"?c.size="100% 100%":n.imageSize=="raw"?c.size="auto auto":n.imageSize=="tile"&&(c.repeat="repeat",c.size="auto"):c.size="cover",n.imagePosition?n.imagePosition=="center"?c.position="center":n.imagePosition=="left"?c.position="left center":n.imagePosition=="lefttop"?c.position="left top":n.imagePosition=="top"?c.position="top center":n.imagePosition=="righttop"?c.position="right top":n.imagePosition=="right"?c.position="right center":n.imagePosition=="rightbottom"?c.position="right bottom":n.imagePosition=="bottom"?c.position="bottom center":n.imagePosition=="leftbottom"&&(c.position="left bottom"):c.position="center",r+='<div id="'+t._gradId+'" style="border-radius:'+c.radius+";width:"+c.width+";height:"+c.height+";background-image:url("+c.src+");background-size:"+c.size+";background-position:"+c.position+";background-repeat:"+c.repeat+';"></div>'}else r+='<defs><pattern patternUnits="userSpaceOnUse"  id="'+t._gradId+'" width="'+_.desWidth+'" height="'+_.desHeight+'"><image xlink:href="'+t._bitmapData._src+'" x="'+(Math.abs(_.srcLeft)<.001?0:_.srcLeft)+'" y="'+(Math.abs(_.srcTop)<.001?0:_.srcTop)+'" width="'+_.srcWidth+'" height="'+_.srcHeight+'" preserveAspectRatio="none" /></pattern></defs>';return r},proto$1h._updateDefs=function(e,t){return!1},proto$1h._getFill=function(){return"url(#"+this._gradId+")"},mod.namespace("Display.GraphicsImageFill",GraphicsImageFill);var GraphicsPathWinding$1="../display/graphicsPathWinding",GraphicsPathCommand$1="../display/graphicsPathCommand",GraphicsPath=function(e,t,r){e=e||[],t=t||[],r=r||GraphicsPathWinding$1.EVEN_ODD;var a=this;a._commands=e,a._data=t,a._winding=r,mod.definePropertyGetSet(a,["commands",a._getCommands,a._setCommands,"data",a._getData,a._setData,"winding",a._getWinding,a._setWinding])},proto$1g=GraphicsPath.prototype;proto$1g._getCommands=function(){return this._commands},proto$1g._setCommands=function(e){this._commands=e},proto$1g._getData=function(){return this._data},proto$1g._setData=function(e){this._data=e},proto$1g._getWinding=function(){return this._winding},proto$1g._setWinding=function(e){this._winding=e},proto$1g.curveTo=function(e,t,r,a){var n=this;n._commands.push(GraphicsPathCommand$1.CUBIC_CURVE_TO),n._data.push(e,t,r,a)},proto$1g.lineTo=function(e,t){var r=this;r._commands.push(GraphicsPathCommand$1.LINE_TO),r._data.push(e,t)},proto$1g.moveTo=function(e,t){var r=this;r._commands.push(GraphicsPathCommand$1.MOVE_TO),r._data.push(e,t)},proto$1g.wideLineTo=function(e,t){var r=this;r._commands.push(GraphicsPathCommand$1.WIDE_LINE_TO),r._data.push(e,t)},proto$1g.wideMoveTo=function(e,t){var r=this;r._commands.push(GraphicsPathCommand$1.WIDE_MOVE_TO),r._data.push(e,t)},mod.exportName(proto$1g,["curveTo",proto$1g.curveTo,"lineTo",proto$1g.lineTo,"moveTo",proto$1g.moveTo,"wideLineTo",proto$1g.wideLineTo,"wideMoveTo",proto$1g.wideMoveTo]),mod.namespace("Display.GraphicsPath",GraphicsPath);var GraphicsSolidFill=function(e){this._color=e||0},proto$1f=GraphicsSolidFill.prototype;proto$1f._getDefs=function(){return""},proto$1f._getFill=function(){return this._color._getCssText()},proto$1f._updateDefs=function(){return!1},mod.namespace("Display.GraphicsSolidFill",GraphicsSolidFill);var GraphicsStroke=function(e,t,r,a,n,o,s){var l=this;l._thickness=e||NaN,l._pixelHinting=t||!1,l._scaleMode=r||"normal",l._caps=a||"round",l._joints=n||"round",l._miterLimit=o??3,l._fill=s},proto$1e=GraphicsStroke.prototype;proto$1e._setFill=function(e){this._fill=e},mod.namespace("Display.GraphicsStroke",GraphicsStroke);var Graphics=function(){var e=this;e._actions=[],e._thickness=0,e._hash=0},proto$1d=Graphics.prototype;proto$1d.reset=function(){this._actions=[],this._hash++},proto$1d.drawPath=function(e,t,r,a){var n=this,o=n._actions.length?n._actions[n._actions.length-1]:null;(a||!(o instanceof GraphicsPath))&&(o=new GraphicsPath,n._actions.push(o),n._hash++),o._commands=o._commands.concat(e),o._data=o._data.concat(t),r&&(o._winding=r)},proto$1d.getActions=function(){return this._actions},proto$1d.beginFill=function(e,t){var r=this,a=new GraphicsSolidFill(e);r._actions.splice(t===void 0?this._actions.length:t,0,a),r._hash++},proto$1d.beginGradientFill=function(e,t,r,a,n){var o=this,s=new GraphicsGradientFill(e,t,r,a,n);o._actions.push(s),o._hash++},proto$1d.beginBitmapFill=function(e,t,r,a,n){var o=this,s=new GraphicsImageFill(e,t,r,a,n);o._actions.push(s),o._hash++},proto$1d.endFill=function(){},proto$1d.lineStyle=function(e,t,r,a){var n=this,o=new GraphicsSolidFill(t),s=new GraphicsStroke(e,null,null,r,a,null,o);n._thickness=e,n._actions.push(s),n._hash++},mod.exportName(proto$1d,["drawPath",proto$1d.drawPath]),mod.namespace("Display.Graphics",Graphics);var GraphicsPathCommand=function(){};GraphicsPathCommand.CUBIC_CURVE_TO=6,GraphicsPathCommand.CURVE_TO=3,GraphicsPathCommand.LINE_TO=2,GraphicsPathCommand.MOVE_TO=1,GraphicsPathCommand.NO_OP=0,GraphicsPathCommand.WIDE_LINE_TO=5,GraphicsPathCommand.WIDE_MOVE_TO=4,mod.exportName(GraphicsPathCommand,["CUBIC_CURVE_TO",GraphicsPathCommand.CUBIC_CURVE_TO,"CURVE_TO",GraphicsPathCommand.CURVE_TO,"LINE_TO",GraphicsPathCommand.LINE_TO,"MOVE_TO",GraphicsPathCommand.MOVE_TO,"NO_OP",GraphicsPathCommand.NO_OP,"WIDE_LINE_TO",GraphicsPathCommand.WIDE_LINE_TO,"WIDE_MOVE_TO",GraphicsPathCommand.WIDE_MOVE_TO]),mod.namespace("Display.GraphicsPathCommand",GraphicsPathCommand);var GraphicsPathWinding=function(){};GraphicsPathWinding.EVEN_ODD="evenOdd",GraphicsPathWinding.NON_ZERO="nonZero",mod.exportName(GraphicsPathWinding,["EVEN_ODD",GraphicsPathWinding.EVEN_ODD,"NON_ZERO",GraphicsPathWinding.NON_ZERO]),mod.namespace("Display.GraphicsPathWinding",GraphicsPathWinding);var IFrame=function(){IFrame.__super__.constructor.apply(this,arguments);var e=this;e._url=null};mod.extend(IFrame,DisplayObject);var proto$1c=IFrame.prototype;proto$1c._getUrl=function(){return this._url},proto$1c._setUrl=function(e){var t=this,r=e!=t._url;t._url=e,r&&t._dispatchEvent(t._changedEvent)},proto$1c._type="IFrame",mod.namespace("Display.IFrame",IFrame);var KeyframeInfo=function(){var e=this;e._keyframes={},e._eases={},e._refTrans={},e._min=null,e._max=null,e._interpolateFrame=null,e._aniData=null},proto$1b=KeyframeInfo.prototype;proto$1b._setInterpolateFrame=function(e){this._interpolateFrame=e},proto$1b._getStopFrame=function(e){var t=this,r=t._interpolateFrame;return r==null||e<=r||e>t._max?e:(e-r)/(t._max-t._interpolateFrame)*(t._max-t._interpolateFrame+1)+r},proto$1b.addKeyframe=function(e,t,r,a){var n=this,o=n._min,s=n._max;n._keyframes[e]=t,r!==void 0&&(n._refTrans[e]=r),a!==void 0&&(n._eases[e]=a),n._keyframes[e]=t,n._min=o===null?e:Math.min(e,o),n._max=s===null?e:Math.max(e,s)},proto$1b.getRefTrans=function(e){var t=this;return t._refTrans[e]==null?t._keyframes[e]:t._refTrans[e]},proto$1b.getNearFrameInfo=function(e){for(var t=void 0,r=-1/0,a=void 0,n=1/0,o=Object.keys(this._keyframes),s=0;s<o.length;s++){var l=o[s]-e;l<=0&&l>r&&(r=l,t=o[s]),l>=0&&l<n&&(n=l,a=o[s])}if(t===void 0&&a!==void 0){a=t;var _=0}else t!==void 0&&a===void 0?(a=t,_=0):t!==void 0&&a!==void 0&&(a-t===0?_=0:_=(e-t)/(a-t));return[t,a,_]},proto$1b.getKeyframe=function(e){return this._keyframes[e]},proto$1b.getKeyframes=function(e){return this._keyframes},mod.exportName(proto$1b,["getKeyframes",proto$1b.getKeyframes]);var MaskType=function(){};MaskType.MaskSource=1,MaskType.MaskAim=2;var Scene=function(){var e=this;e._labels=[],e._name="",e._guid="",e._numFrames=0,e._startFrame=0,e._aniData=null,mod.definePropertyReadOnly(e,["startFrame",e._getStartFrame,"length",e._getLength])},proto$1a=Scene.prototype;proto$1a._getStartFrame=function(){return this._startFrame},proto$1a._getLength=function(){return this._numFrames},proto$1a.getDom=function(){return document.querySelector("div[data-type=scene][data-guid="+this._guid+"]")},mod.namespace("Display.Scene",Scene);var DisplayObjectTrans=function(){},FillType=function(){};FillType.COLOR="COLOR",FillType.LINEAR="LINEAR",FillType.RADIAL="RADIAL",FillType.IMAGE="IMAGE",mod.namespace("Transform.FillType",FillType);var ShapeTrans=function(){var e=this;ShapeTrans.__super__.constructor.apply(this,arguments),e._fillType=FillType.COLOR,e._fillVal=new Color,e._strokeColor=new Color,e._strokeWidth=1,e._curves=[],mod.definePropertyGetSet(e,["fillType",e._getFillType,e._setFillType,"fillVal",e._getFillVal,e._setFillVal])};mod.extend(ShapeTrans,DisplayObjectTrans);var proto$19=ShapeTrans.prototype;proto$19._getFillType=function(){return this._fillType},proto$19._setFillType=function(e){this._fillType=e},proto$19._getFillVal=function(){return this._fillVal},proto$19._setFillVal=function(e){this._fillVal=e},proto$19._compareDetailFillAndStock=function(e){var t=new this.constructor,r=this;if(t._fillType=void 0,t._fillVal=void 0,t._strokeColor=void 0,t._strokeWidth=void 0,r._fillType!==e._fillType)t._fillType=r._fillType,t._fillVal=r._fillVal;else{var a=r._fillType;a===FillType.COLOR?r._fillVal._compareTo(e._fillVal)===!1&&(t._fillType=r._fillType,t._fillVal=r._fillVal):a===FillType.LINEAR||a===FillType.RADIAL?(r._fillVal._colors.some(function(n,o){return n._compareTo(e._fillVal._colors[o])===!1})||r._fillVal._ratios.some(function(n,o){return n===e._fillVal._ratios[o]})||!r._fillVal._p0.equals(e._fillVal._p0)||!r._fillVal._p1.equals(e._fillVal._p1))&&(t._fillType=r._fillType,t._fillVal=r._fillVal):a===FillType.IMAGE&&(r._fillVal._url!==e._fillVal._url||r._fillVal._x!==e._fillVal._x||r._fillVal._y!==e._fillVal._y||r._fillVal._pos!==e._fillVal._pos||r._fillVal._size!==e._fillVal._size)&&(t._fillType=r._fillType,t._fillVal=r._fillVal)}return r._strokeColor._compareTo(e._strokeColor)===!1&&(t._strokeColor=e._strokeColor),r._strokeWidth!==e._strokeWidth&&(t._strokeWidth=e._strokeWidth),t},proto$19._compareFillAndStockTo=function(e){var t=this;if(t._fillType!==e._fillType)return!1;var r=t._fillType;if(r===FillType.COLOR){if(t._fillVal._compareTo(e._fillVal)===!1)return!1}else if(r===FillType.LINEAR||r===FillType.RADIAL){if(t._fillVal._colors.some(function(a,n){return a._compareTo(e._fillVal._colors[n])===!1})||t._fillVal._ratios.some(function(a,n){return a===e._fillVal._ratios[n]})||!t._fillVal._p0.equals(e._fillVal._p0)||!t._fillVal._p1.equals(e._fillVal._p1))return!1}else if(r===FillType.IMAGE&&(t._fillVal._url!==e._fillVal._url||t._fillVal._x!==e._fillVal._x||t._fillVal._y!==e._fillVal._y||t._fillVal._pos!==e._fillVal._pos||t._fillVal._size!==e._fillVal._size))return!1;if(t._strokeColor._compareTo(e._strokeColor)===!1||t._strokeWidth!==e._strokeWidth)return!1},proto$19._compareTo=function(e){var t=this;return!(e==null||t._compareFillAndStockTo(e)===!1||JSON.stringify(t._curves)!==JSON.stringify(t._curves))},proto$19._parseParam=function(e,t){var r=this;r._parseFillAndStroke(e,t),r._parseCurve(e,t)},proto$19._parseCurve=function(e){var t=this,r=e.curves,a=e.curve;r||(r=[a]),t._curves=r},proto$19._parseFillAndStroke=function(e,t){var r=this,a=e.customValue,n=e.presetImage,o=e.fillInfo||{},s=t._bitmapDataSetByAPI||a||Macro._getValue(n)||o.fillImage;if(s)r._fillType=FillType.IMAGE,r._fillVal={_url:s,_x:o.horOffset,_y:o.verOffset,_pos:o.imagePosition,_size:o.imageSize};else if(o.fillStyle===0){r._fillType=FillType.COLOR;var l=o.fillColors[0];r._fillVal=new Color(l.r,l.g,l.b,l.a)}else if(o.fillStyle===void 0)r._fillType=FillType.COLOR,r._fillVal=new Color(0,0,0,0);else{r._fillType=o.fillStyle===1?FillType.LINEAR:FillType.RADIAL;var _=o.fillColors,c=_.map(function(p){return new Color(p.r,p.g,p.b,p.a)}),d=_.map(function(p){return p.p}),u=o.fillStartPos,f=o.fillEndPos;r._fillVal={_colors:c,_ratios:d,_p0:new Point(u.x,u.y),_p1:new Point(f.x,f.y)}}r._strokeColor=Color.parse(e.strokeColor),r._strokeWidth=e.lineWidth},ShapeTrans._tween=function(e,t,r,a,n){n=a._default(n),ShapeTrans._tweenFillAndStroke(e,t,r,a,n);var o=function(m,A,T){var b={};return b.nodeX=m.nodeX+T*(A.nodeX-m.nodeX),b.nodeY=m.nodeY+T*(A.nodeY-m.nodeY),b.forwardX=m.forwardX+T*(A.forwardX-m.forwardX),b.forwardY=m.forwardY+T*(A.forwardY-m.forwardY),b.backwardX=m.backwardX+T*(A.backwardX-m.backwardX),b.backwardY=m.backwardY+T*(A.backwardY-m.backwardY),b},s=t._curves,l=r._curves,_=Math.min(s.length,l.length);e._curves=[];for(var c=0;c<_;c++){for(var d=s[c].points,u=l[c].points,f=Math.max(d.length,u.length),p=Math.min(d.length,u.length),v=[],h=0;h<p-2;h++){var g=d[h],w=u[h],y=o(g,w,n);v.push(y)}for(var h=p-2;h<f;h++){if(d.length>u.length){var g=d[h],x=[u[p-2],u[p-1]];Bezier.subdivision(x,0,(h-(p-2))/(f-p+1));var w=x[1]}else if(d.length<u.length){var x=[g[p-2],g[p-1]];Bezier.subdivision(x,0,(h-(p-2))/(f-p+1));var g=x[1],w=u[h]}else var g=d[h],w=u[h];var y=o(g,w,n);v.push(y)}e._curves.push({points:v,closed:s[c].closed})}},ShapeTrans._tweenFillAndStroke=function(e,t,r,a,n){var o=t._fillType,s=r._fillType;if(o===s&&o===FillType.COLOR)e._fillType=o,e._fillVal=Color._tween(t._fillVal,r._fillVal,n);else if(o===s&&o===FillType.IMAGE)e._fillType=o,e._fillVal={_url:t._fillVal._url,_x:t._fillVal._x+n*(r._fillVal._x-t._fillVal._x),_y:t._fillVal._y+n*(r._fillVal._y-t._fillVal._y),_pos:t._fillVal._pos,_size:t._fillVal._size};else if(o===FillType.IMAGE)e._fillType=o,e._fillVal={_url:t._fillVal._url,_x:t._fillVal._x,_y:t._fillVal._y,_pos:t._fillVal._pos,_size:t._fillVal._size};else if(s===FillType.IMAGE&&n===1)e._fillType=s,e._fillVal={_url:r._fillVal._url,_x:r._fillVal._x,_y:r._fillVal._y,_pos:r._fillVal._pos,_size:r._fillVal._size};else{e._fillType=o;var l=t._fillVal,_=r._fillVal;o===FillType.COLOR?(e._fillType=s,l={_colors:_._colors.map(function(){return l.clone()}),_ratios:_._ratios.slice(0),_p0:new Point(0,0),_p1:new Point(0,0)}):s===FillType.COLOR&&(_={_colors:l._colors.map(function(){return _.clone()}),_ratios:l._ratios.slice(0),_p0:new Point(0,0),_p1:new Point(0,0)});for(var c=l._colors,d=_._colors,u=l._ratios,f=_._ratios,p=c.length,v=d.length,h=Math.min(p,v),g=l._p0,w=_._p0,y=l._p1,x=_._p1,m=[],A=[],T=0;T<h;T++){m.push(Color._tween(c[T],d[T],n));var b=isFinite(u[T])?u[T]:f[T],C=isFinite(f[T])?f[T]:u[T];A.push(Math.min(1,b+n*(C-b)))}e._fillVal={_colors:m,_ratios:A,_p0:new Point(g._x+n*(w._x-g._x),g._y+n*(w._y-g._y)),_p1:new Point(y._x+n*(x._x-y._x),y._y+n*(x._y-y._y))}}e._strokeColor=Color._tween(t._strokeColor,r._strokeColor,n),e._strokeWidth=t._strokeWidth+n*(r._strokeWidth-t._strokeWidth)},proto$19._clone=function(){var e=this,t=new ShapeTrans,r=t._fillType=e._fillType;return r===FillType.IMAGE?t._fillVal=JSON.parse(JSON.stringify(e._fillVal)):r===FillType.COLOR?t._fillVal=e._fillVal.clone():t._fillVal={_colors:e._fillVal._colors.map(function(a){return a.clone()}),_ratios:e._fillVal._ratios.slice(0),_p0:e._fillVal._p0.clone(),_p1:e._fillVal._p1.clone()},e._strokeColor&&(t._strokeColor=e._strokeColor.clone()),t._strokeWidth=e._strokeWidth,t._curves=JSON.parse(JSON.stringify(e._curves)),t},mod.namespace("Transform.ShapeTrans",ShapeTrans);var Shape=function(){Shape.__super__.constructor.apply(this,arguments);var e=this;e._graphics=new Graphics,e._resourceList=null,e._progressRatio=1,e._keyframes=[],e._bitmapDataSetByAPI=null,mod.definePropertyReadOnly(e,["graphics",e._getGraphics])};mod.extend(Shape,DisplayObject);var proto$18=Shape.prototype;proto$18._type="Shape",proto$18._getGraphics=function(){return this._graphics},proto$18._getBoundary=function(e,t){t=t||1;var r=this,a=r._graphics._thickness/2*t;return Shape.__super__._getBoundary.call(r,e,a)},proto$18._getBitmapData=function(){return this._bitmapData},proto$18._setBitmapData=function(e){var t=this;t._bitmapDataSetByAPI=e;var r=t._transform._clone();if(r._paramTransform._fillType===FillType.IMAGE)r._paramTransform._fillVal._url=e?e._src:"";else{var a=t._aniData.param&&t._aniData.param.fillInfo?t._aniData.param.fillInfo:{};r._paramTransform._fillType=FillType.IMAGE,r._paramTransform._fillVal={_url:e,_size:a.imageSize?a.imageSize:"cover",_pos:a.imagePosition?a.imagePosition:"center",_x:a.horOffset?a.horOffset:0,_y:a.verOffset?a.verOffset:0}}t._updateDisplayObjectFromTransform(r),t._dispatchEvent(t._changedEvent)},proto$18._setFillStyle=function(e){for(var t=this,r=t._graphics,a=r.getActions(),n=0;n<a.length;n++){var o=a[n];if(o instanceof GraphicsSolidFill||o instanceof GraphicsGradientFill||o instanceof GraphicsImageFill){a.splice(n,1);break}}r.beginFill(e,n),t._dispatchEvent(t._changedEvent)},proto$18._getFillStyle=function(){for(var e=this,t=e._graphics,r=t.getActions(),a=0;a<r.length;a++){var n=r[a];if(n instanceof GraphicsSolidFill)return n._color;if(n instanceof GraphicsGradientFill||n instanceof GraphicsImageFill)return}},proto$18._setLineStyle=function(e){for(var t=this,r=t._graphics,a=r.getActions(),n=0;n<a.length;n++){var o=a[n];if(o instanceof GraphicsStroke){o._setFill(new GraphicsSolidFill(e)),r._hash++;break}}t._dispatchEvent(t._changedEvent)},proto$18._getLineStyle=function(e){for(var t=this,r=t._graphics,a=r.getActions(),n=0;n<a.length;n++){var o=a[n];if(o instanceof GraphicsStroke)return o._fill._color}},proto$18._initProcessAnimation=function(){this._initialText=this._getText()},proto$18._updateDisplayObjectFromTransform=function(e,t){var r=this,a=r._graphics;t=!0,a.reset(),e=e||r._transform;var n=e._paramTransform,o=r._aniData,s=o.param,l=s.lineCap,_=s.lineJoin;a.lineStyle(n._strokeWidth,n._strokeColor,l,_);var c=n._fillVal;if(n._fillType===FillType.IMAGE){var d=c._url;if(r._resourceList=r._resourceList||[],r._bitmapData&&(d===r._bitmapData||r._bitmapData._src===d))var u=r._bitmapData;else{if(r._bitmapData){var f=r._resourceList.indexOf(r._bitmapData);r._resourceList.splice(f,1)}var p=r._getRoot(!0);d instanceof BitmapData?u=d:u=p._getBitmapData(d),r._resourceList.push(u),r._bitmapData=u}var v=c._x,h=c._y,g=c._pos,w=c._size;a.beginBitmapFill(u,v,h,g,w)}else if(n._fillType===FillType.COLOR)a.beginFill(c);else{var y=n._fillType===FillType.LINEAR?GradientType.LINEAR:GradientType.RADIAL;a.beginGradientFill(y,c._colors,c._ratios,c._p0,c._p1)}n._curves.forEach(function(x){if(x&&x.points){var m=x.points,A=m.length,T,b=[],C=[];for(T=0;T<A;T++){var M=m[T],E=T>0?m[T-1]:0;T===0?(b.push(GraphicsPathCommand.MOVE_TO),C.push(M.nodeX),C.push(M.nodeY)):(b.push(GraphicsPathCommand.CUBIC_CURVE_TO),C.push(M.nodeX),C.push(M.nodeY),C.push(E.forwardX),C.push(E.forwardY),C.push(M.backwardX),C.push(M.backwardY))}x.closed&&A>1&&(M=m[0],E=m[A-1],b.push(GraphicsPathCommand.CUBIC_CURVE_TO),C.push(M.nodeX),C.push(M.nodeY),C.push(E.forwardX),C.push(E.forwardY),C.push(M.backwardX),C.push(M.backwardY))}a.drawPath(b,C,!1,t)}),Shape.__super__._updateDisplayObjectFromTransform.call(this,e,t)},proto$18._getFixedParam=function(e,t){return e.rawWidth=e.width,e.rawHeight=e.height,t&&(e.curve=t.curve),Shape.__super__._getFixedParam.call(this,e,t),e},proto$18.tweenParam=function(e,t,r,a){e=Shape.__super__.tweenParam.apply(this,arguments);var n=function(v,h,g){var w={};return w.nodeX=v.nodeX+g*(h.nodeX-v.nodeX),w.nodeY=v.nodeY+g*(h.nodeY-v.nodeY),w.forwardX=v.forwardX+g*(h.forwardX-v.forwardX),w.forwardY=v.forwardY+g*(h.forwardY-v.forwardY),w.backwardX=v.backwardX+g*(h.backwardX-v.backwardX),w.backwardY=v.backwardY+g*(h.backwardY-v.backwardY),w};if(t.curve&&r.curve&&t.curve.points&&r.curve.points&&t.curve.points.length==r.curve.points.length){e.curveTweened=!0;var o=t.curve.points,s=r.curve.points,l=t.curve.points.length;e.customPivot=!1,e.curve=e.curve||{closed:t.curve.closed},e.curve.points=[];for(var _=typeof a=="object"?a:{},c=_.default===void 0?a:_.default,d=0;d<l;d++){var u=o[d],f=s[d],p=n(u,f,c);e.curve.points.push(p)}}return e},proto$18._bindTrans=function(e){e._paramTransform=new ShapeTrans},proto$18._bindUserAPI=function(e){var t=this;Shape.__super__._bindUserAPI.call(t,e),mod.exportName(e,["setFillColor",function(r,a,n,o){t._setFillStyle(new Color(r,a,n,o))},"setLineColor",function(r,a,n,o){t._setLineStyle(new Color(r,a,n,o))}]),mod.definePropertyGetSet(e,["fillColor",function(){var r=t._getFillStyle();return r?r._getCssText():null},function(r){t._setFillStyle(Color.parse(r))}])},proto$18._initProcessAnimation=function(){this._originProgressTransform=this._transform},proto$18._getProcessAnimationLength=function(){var e=0,t=this._originProgressTransform._paramTransform._curves;return t.forEach(function(r){var a=r.closed,n=r.points.length;a||n--,e+=n}),e},proto$18._setProcessAnimationRatio=function(e){if(this._originProgressTransform._paramTransform&&this._originProgressTransform._paramTransform._curves){var t=this._originProgressTransform._paramTransform._curves,r=[],a=this._aniData.param.lineType;if(a&&a!=="solid"){t.forEach(function(s){var l=s.closed,_=s.points.length;l||_--;var c;e<0?c=-1:e>1?c=1:c=e;var d=c*_,u={closed:s.closed,points:JSON.parse(JSON.stringify(s.points))},f=Math.floor(d<0?0:d),p=d-f;f<u.points.length&&(Bezier.subdivision(u.points,f,p),p>0&&f++,u.points=u.points.slice(0,f+1),u.closed=!1),r.push(u)});var n=this._originProgressTransform._clone();n._paramTransform._curves=r,this._transform=n,this._updateDisplayObjectFromTransform(n,!0)}else{t.forEach(function(s){s.closed,s.points.length});var o;e<0?o=-1:e>1?o=1:o=e,this._progressRatio=o}this._dispatchEvent(this._changedEvent)}},mod.namespace("Display.Shape",Shape);var Slides=function(){Slides.__super__.constructor.apply(this,arguments);var e=this;e._imageList=null,e._activeIndex=0,mod.definePropertyReadOnly(e,["imageList",e._getImageList])};mod.extend(Slides,DisplayObject);var proto$17=Slides.prototype;proto$17._type="Slides",proto$17._getImageList=function(){return this._imageList},proto$17._getText=function(){return this._activeIndex+1},mod.namespace("Display.Slides",Slides);var StageAlign=function(){};StageAlign.BOTTOM="B",StageAlign.BOTTOM_LEFT="BL",StageAlign.BOTTOM_RIGHT="BR",StageAlign.LEFT="L",StageAlign.RIGHT="R",StageAlign.TOP="T",StageAlign.TOP_LEFT="TL",StageAlign.TOP_RIGHT="TR",mod.exportName(StageAlign,["BOTTOM",StageAlign.BOTTOM,"BOTTOM_LEFT",StageAlign.BOTTOM_LEFT,"BOTTOM_RIGHT",StageAlign.BOTTOM_RIGHT,"LEFT",StageAlign.LEFT,"RIGHT",StageAlign.RIGHT,"TOP",StageAlign.TOP,"TOP_LEFT",StageAlign.TOP_LEFT,"TOP_RIGHT",StageAlign.TOP_RIGHT]),mod.namespace("Display.StageAlign",StageAlign);var StageDisplayState=function(){};StageDisplayState.FULL_SCREEN_INTERACTIVE="fullScreenInteractive",StageDisplayState.NORMAL="normal",mod.exportName(StageDisplayState,["BOTTOM",StageDisplayState.FULL_SCREEN_INTERACTIVE,"BOTTOM_LEFT",StageDisplayState.NORMAL]),mod.namespace("Display.StageDisplayState",StageDisplayState);var StageScaleMode=function(){};StageScaleMode.ADAPT_WIDTH="width",StageScaleMode.ADAPT_WIDTH2="width2",StageScaleMode.ADAPT_HEIGHT="height",StageScaleMode.ADAPT_COVER="cover",StageScaleMode.ADAPT_CONTAIN="contain",StageScaleMode.ADAPT_FILL="fill",StageScaleMode.ADAPT_NONE="none",StageScaleMode.ADAPT_NONEMOBILE="none_mobile",StageScaleMode.ADAPT_NONEPC="none_pc",StageScaleMode.ADAPT_NOSCALE="no_scale",mod.namespace("Display.StageScaleMode",StageScaleMode);var Stage=function(e){Stage.__super__.constructor.apply(this,arguments);var t=this;t._align=StageAlign.TOP_LEFT,t._color=0,t._frameRate=0,t._fullScreenHeight=0,t._fullScreenWidth=0,t._fullScreenSourceRect=null,t._nativeWindow=null,t._scaleMode=StageScaleMode.ADAPT_WIDTH,t._displayState=StageDisplayState.NORMAL,t._stageHeight=0,t._stageWidth=0,t._parent=e||null,t._deltaFrame=0,t._totolFrame=0,t._renderManager=null,t._getBitmapData=null,t._rootId=null,t._cacheActionFunc=null,t._msuidCallbacks=[],mod.definePropertyReadOnly(t,["x",t._getX,"y",t._getY,"scaleX",t._getScaleX,"scaleY",t._getScaleY,"rotation",t._getRotation,"alpha",t._getAlpha,"visible",t._getVisible,"name",t._getName,"fullScreenHeight",t._getFullScreenHeight,"fullScreenWidth",t._getFullScreenWidth]),mod.definePropertyGetSet(t,["align",t._getAlign,t._setAlign,"color",t._getColor,t._setColor,"frameRate",t._getFrameRate,t._setFrameRate,"displayState",t._getDisplayState,t._setDisplayState,"fullScreenSourceRect",t._getFullScreenSourceRect,t._setFullScreenSourceRect,"scaleMode",t._getScaleMode,t._setScaleMode])};mod.extend(Stage,DisplayObjectContainer);var proto$16=Stage.prototype;proto$16._type="Stage",proto$16._getAlign=function(){return this._align},proto$16._setAlign=function(e){this._align=e},proto$16._getColor=function(){return this._color},proto$16._setColor=function(e){this._color=e},proto$16._getFrameRate=function(){return this._frameRate},proto$16._setFrameRate=function(e){this._frameRate=e},proto$16._getDisplayState=function(){return this._displayState},proto$16._setDisplayState=function(e){this._displayState=e},proto$16._getFullScreenHeight=function(){},proto$16._getFullScreenWidth=function(){},proto$16._getFullScreenSourceRect=function(){return this._fullScreenSourceRect},proto$16._setFullScreenSourceRect=function(e){this._fullScreenSourceRect=e},proto$16._getScaleMode=function(){return this._scaleMode},proto$16._setScaleMode=function(e){this._scaleMode=e},proto$16._getStage=function(){return this},proto$16._getRoot=function(e){return e&&this._isVirtual&&this._parent?this._parent._getRoot(e):this},proto$16._registerMsuidCallback=function(e){e&&this._msuidCallbacks.push(e)},proto$16._runMsuidCallbacks=function(e){this._msuidCallbacks.forEach(function(t){t&&t(e)})},mod.namespace("Display.Stage",Stage);var id=0,VideoData=function(){var e=this;e._useNewId=!0,VideoData.__super__.constructor.apply(e,arguments),e._id=id++,e._src=null,e._guid=null};mod.extend(VideoData,ResourceData);var proto$15=VideoData.prototype;proto$15._load=function(){var e=this,t=e._loader._contentLoaderInfo;if(t._state===LoaderInfo.STATE.LOAD||t._state===LoaderInfo.STATE.LOADED){t._state=LoaderInfo.STATE.CANCELLED,setTimeout(function(){var l=new MuEvents("ioError",!1);t._dispatchEvent(l)},0);return}var r='video/mp4; codecs="avc1.42401f,mp4a.40.2"';if(!("MediaSource"in window)||!MediaSource.isTypeSupported(r)){t._state=LoaderInfo.STATE.CANCELLED,setTimeout(function(){var l=new MuEvents("ioError",!1);t._dispatchEvent(l)},0);return}var a=e._mediaSource=new MediaSource;e._meidaSourceUrl=URL.createObjectURL(a);var n,o=[],s=!1;a.addEventListener("sourceopen",function(){var l=a.addSourceBuffer(r);n=function(){a.readyState==="open"&&l&&l.updating===!1&&(o.length?l.appendBuffer(o.shift()):s&&a.readyState==="open"&&a.endOfStream())},l.addEventListener("updateend",n),n()}),fetch(e._src).then(function(l){if(l.ok){var _=l.body.getReader(),c=0,d=function(){_.read().then(function(u){if(u.done){if(s=!0,t._state!==LoaderInfo.STATE.LOADED){var f=new MuEvents("complete",!1);t._dispatchEvent(f)}}else{if(c+=u.value.length,o.push(u.value),n&&n(),c>512*1024&&t._state!==LoaderInfo.STATE.LOADED){t._state=LoaderInfo.STATE.LOADED;var f=new MuEvents("complete",!1);t._dispatchEvent(f)}d()}})};d()}}).catch(function(l){t._state=LoaderInfo.STATE.CANCELLED;var _=new MuEvents("ioError",!1);t._dispatchEvent(_)})},proto$15._mediaSourceOpen=function(){},mod.namespace("Display.VideoData",VideoData);var VideoIFrame=function(){VideoIFrame.__super__.constructor.apply(this,arguments)};mod.extend(VideoIFrame,IFrame);var proto$14=VideoIFrame.prototype;proto$14._type="VideoIFrame",mod.namespace("Display.VideoIFrame",VideoIFrame);var Video=function(){Video.__super__.constructor.apply(this,arguments);var e=this;e._video=null,e._embedVideo=!1,e._showControls=!0,e._nodownload=!1,e._showPlayIcon=!1,e._needStopAudio=!1,e._autoPlay=!1,e._clickCanPause=!0,e._currentTime=0,e._play=null,e._pause=null,e._stop=null,e._loop=!1,e._type="video",e._getText=function(t){return e._currentTime}};mod.extend(Video,Bitmap);var proto$13=Video.prototype;Video.prototype.isSupportSameLayer=function(){return(navigator.userAgent.match(/TBS\/(\d+)/)||[null,0])[1]*1>=36849||(Browser$1.os.version||"").substr(0,2)==="11"},proto$13._getFixedParam=function(e,t){return e.rawWidth=e.width,e.rawHeight=e.height,Video.__super__._getFixedParam.call(this,e,t),e},proto$13._bindBehavior=function(e,t){this._addEventListener(e.replace("_",""),function(r){t(r._media)})},mod.namespace("Display.Video",Video);var LoadProgressEvent=function(e){var t=this;LoadProgressEvent.__super__.constructor.apply(t,arguments),t._loaded=0,t._total=0,t._loadedOver=!1,mod.definePropertyReadOnly(t,["loaded",proto$12._getLoaded,"total",proto$12._getTotal,"loadOver",proto$12._getLoadOver])};mod.extend(LoadProgressEvent,MuEvents);var proto$12=LoadProgressEvent.prototype;proto$12._getLoaded=function(){return this._loaded},proto$12._getTotal=function(){return this._total},proto$12._getLoadOver=function(){return this._loadedOver};var ReadyEvent=function(){var e=this;ReadyEvent.__super__.constructor.apply(e,arguments),e._waitNum=0,e._callback=null};mod.extend(ReadyEvent,MuEvents);var proto$11=ReadyEvent.prototype;proto$11._goOnLoad=function(){var e=this;e._waitNum--,e._chkOk()},proto$11._chkOk=function(){var e=this;e._waitNum===0?e._callback&&e._callback():e._callbackFail&&e._callbackFail()},proto$11._stopLoad=function(){this._waitNum++},proto$11._registerCallback=function(e){this._callback=e},proto$11._registerFailCallback=function(e){this._callbackFail=e},mod.exportName(proto$11,["stopLoad",proto$11._stopLoad,"goOnLoad",proto$11._goOnLoad]),mod.namespace("Events.ReadyEvent",ReadyEvent);var ResourceEvent=function(e,t){var r=this;ResourceEvent.__super__.constructor.apply(r,arguments),r._url="",mod.definePropertyReadOnly(r,["url",proto$10._getUrl])};mod.extend(ResourceEvent,ReadyEvent);var proto$10=ResourceEvent.prototype;proto$10._getUrl=function(){return this._url};var PresetType=function(){};PresetType.Animation={MOVE_IN:"move_in",MOVE_OUT:"move_out",FADE_IN:"fade_in",FADE_OUT:"fade_out",BOUNCE_IN:"bounce_in",FLIP_IN:"flip_in",ROTATE:"rotate",APPEAR:"appear",POP_IN:"pop_in",CLOSER_IN:"closer_in",ROLL_IN:"roll_in",FLY_IN:"fly_in",SWIRL_IN:"swirl_in",SWIRL_OUT:"swirl_out",FURTHER_IN:"further_in",SHAKE:"shake",SQUEEZE:"squeeze",FLIP:"flip",SWING:"swing",MOVE:"move",SLIDE_UP:"slide_up",QUIVER:"quiver",tilt:"tilt",BOUNCE_OUT:"bounce_out",FLIP_OUT:"flip_out",POP_OUT:"pop_out",FURTHER_OUT:"further_out",ROLL_OUT:"roll_out",FLY_OUT:"fly_out",CLOSER_OUT:"closer_out",RAISED_IN:"raise_in",RAISED_OUT:"raise_out"},PresetType.Param={TYPE:"type",DURATION:"duration",DELAY:"delay",LENGTH:"length",TRANSLATE_X:"translateX",TRANSLATE_Y:"translateY",LOOP:"loop",TRIGGER:"trigger",X:"x",Y:"y",LEFT:"left",TOP:"top",RIGHT:"right",BOTTOM:"bottom",FROM2:"from2",FROM:"from",TO:"to",TO2:"to2",UNIFORM:"uniform",CLOCKWISE:"clockwise",RAISE:"raise",RAISE_UP:"up",DEG:"deg",DATA:"data",WAY:"way"},PresetType.WAY={KEYFRAME:"keyframe",PROGRESS:"progress",CURVE_SHAPE:"curveShape",TEXT_SHAPE:"textShape",MASK:"mask"},PresetType.Trigger={},PresetType.Custom="custom_";var PresetAnimation=function(e){var t=this,r=Browser$1._globalObject._mrmcp||{};t._type=e[PresetType.Param.TYPE]||PresetType.Animation.APPEAR,t._duration=r.report_mode?.001:parseFloat(e[PresetType.Param.DURATION])||.1,t._delay=parseFloat(e[PresetType.Param.DELAY])||0,t._length=parseFloat(e[PresetType.Param.LENGTH])||0,t._startTime=null},proto$$=PresetAnimation.prototype;proto$$._applyAnimation=function(e,t){console.warn("Unknown animation:"+this._type)};var EasingFun=Tween.CubicBezier(.25,.1,.25,1);proto$$._getFrameAnimation=function(e,t,r){for(var a=t[0],n=t.length,o=1;o<n;o++){var s=t[o],l=s.rate;if(e>l)a=s;else{var _=a.rate,c=(e-_)/(l-_);if(c=(s.fun||r||EasingFun)(c),isNaN(s.param)){var d={};Object.keys(s.param).forEach(function(p){var v=s.param[p],h=a.param[p];d[p]=h+(v-h)*c})}else{var u=s.param,f=a.param;d=f+(u-f)*c}return d}}};var MUGEDA_CUSTOM_EVENT_NAME="mugeda_custom",RenderObject=function(e){var t=this;t._displayObject=e,t._eventProxyDom=null,t._transform=null,t._children=[],t._parent=null,t._parentSceneRenderObject=null,t._parentMovieClipRenderObject=null,t._parentMovieClipRenderObjectChild=null,t._c3Accelerate=!window.DEBUG_CS2_MODE,t._c3AccelerateEnabled=null,t._c3AccelerateCurrent=!1,t._childDisplayObjectList=[];var r="mugeda_render_object";t._classNameList=[r],t._staticClassName=null,t._matrixClassName=null,t._clipClassName=null,t._html="",t._node=null,t._prevTransform=null,t._prevVisible=null,t._prevClassText=null,t._displayVal="display: block;",t._prevAdditionCss=null,RenderObject.inited||(RenderObject.inited=!0,StyleSheetManager.insertCss(r,"position: absolute; "+Browser$1.prefix.css+"transform-origin: left top;"+Browser$1.prefix.css+"user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); display: block;")),t._needRenderNext=!1,t._bindedDomEventCapture={},t._bindedDomEventBubble={},t._thisDispatchInputEvent=t._dispatchInputEvent.bind(t),t.touch={},t._boundary=[],t._activeFilterString="",t._prevParentOffsetMatrix=null,t._iAm3d=!1,t._3dBrotherCounter=0,t._prevNeed3dFix=!1};RenderObject.inited=!1,RenderObject.Pixel="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs=";var proto$_=RenderObject.prototype;proto$_._init=function(){var e=this,t=e._displayObject,r=t._getStage();if(r){var a=r._renderManager._mugeda,n=function(c){var d=t._transform._clone(),u=d._matrix,f=d._matrix._rawDock||"none";if(u._reset(),d._ox=d._oy=0,f!="none"){f=="top"||f=="lefttop"||f=="righttop"?d._matrix._oy=c.marginTop:(f=="bottom"||f=="leftbottom"||f=="rightbottom")&&(d._matrix._oy=-c.marginTop),f=="left"||f=="leftbottom"||f=="lefttop"?d._matrix._ox=c.marginLeft:(f=="right"||f=="rightbottom"||f=="righttop")&&(d._matrix._ox=-c.marginLeft),t._dispatchEvent(t._changedEvent);for(var p=e;p=p._parent,!(!p||p._displayObject._type=="scene"););p&&(p._node?(p=p._node.children[0],p&&(p.style.overflow="visible")):e._overwriteOverflow=!0)}u._calMatrixFormRaw(),t._setTransform(d),t._presetAnimation&&f!="none"&&t._presetAnimation._setStaticTransform(d)};if(t._id>1){if(r._fullScreenRect){var o=a._getAdaption();n(o)}var s=t._parent,l=function(){if(r._fullScreenRect){var c=a._getAdaption();n(c)}},_=function(c){c._displayObject===t&&(r._removeEventListener("changed",l),s=t._parent,s&&s._removeEventListener("remove",_))};r._addEventListener("changed",l),s&&s._addEventListener("remove",_)}}},proto$_._setNode=function(e){this._node=e},proto$_.renderC3Status=function(){var e=this,t=e._c3AccelerateEnabled===null?e._c3Accelerate:e._c3AccelerateEnabled,r=e._c3AccelerateCurrent;r!=t&&(e._c3AccelerateCurrent=t,e.setClassName())},proto$_._initActionAndEvent=function(){var e=this,t=e._displayObject,r=t._getRoot();!r||r._isVirtual||(e._initAction(),t._addEventListener("domeventchanged",(function(){return function(a){e._domEventChangedHandler.call(e,t,a)}})()),e._domEventChangedHandler(t))},proto$_._buildFun=function(){var e=this,t=e._displayObject;t._visible==!1&&(e._node.style.display="none"),e._initActionAndEvent()},proto$_._domEventChangedHandler=function(e,t){var r=this;if(t)var a=[t._event],n=t._add;else a=[],[e.eventListenersCapture,e.eventListenersBubble].forEach(function(o){for(var s in o)o.hasOwnProperty(s)&&(a=a.concat(o[s]))}),n=!0;a.forEach(function(o){if(o.domEvent){var s=o.type,l=o.useCapture,_=r._canvasRender;if(_)c=l?_._bindedDomEventCapture:_._bindedDomEventBubble;else var c=l?r._bindedDomEventCapture:r._bindedDomEventBubble;n?c[s]?c[s]++:(c[s]=0,_?_._node.addEventListener(s,_._thisDispatchInputEvent,l):r._node.addEventListener(s,r._thisDispatchInputEvent,l)):--c[s]==0&&(_?_._node.removeEventListener(s,_._thisDispatchInputEvent,l):r._node.removeEventListener(s,r._thisDispatchInputEvent,l))}})},proto$_._dispatchInputEvent=function(e){for(var t=this,r=e.type,a=t._eventProxyDom||e.target,n=t._displayObject._getRoot()._getRenderObject(),o=n.getNode(),s=!1;a&&a!==o&&_==null;){var l=a.className||"";if(typeof a.className!="string"&&(l=""),l.indexOf("__mugeda_stat")>=0){s=!0;break}var _=a._relateRenderObject;a=a.parentNode}if(!s){_==null?_={}:_._displayObject._type=="scene"&&(_=_._parent);var c=new InputEvent(r,e);c._eventPhase=e.eventPhase,c._target=_._displayObject,c._stage=n._displayObject,c[r+"MugedaHookSource"]=e[r+"MugedaHookSource"],t._displayObject._dispatchEvent(c)}},proto$_._getHTML=function(){var e=this,t=e._html,r=e._classNameList.join(" ");return t=t.replace("{{className}}",r),t},RenderObject._findClickDisplayObject=function(e,t,r){for(var a=e.length,n=a-1;n>=0;n--){var o=e[n];if(!o._maskToList){var s=o._transform._matrix;s=Matrix._multiplication(r,s);var l=o._getBoundary(s);if(Boundary._isPointInpolygon(l,t))return o.children&&o.children.length!=0?(o._offsetMatrix&&(s=Matrix._multiplication(o._offsetMatrix,s)),RenderObject._findClickDisplayObject(o.children,t,s)):o;if(o.children&&o.children.length){o._offsetMatrix&&(s=Matrix._multiplication(o._offsetMatrix,s));var _=RenderObject._findClickDisplayObject(o.children,t,s);if(_)return _}}}},proto$_._addChild=function(e,t,r,a){var n=this;e._displayObject=t,e._transform=r||t._transform,a==null?(n._childDisplayObjectList.push(t),n._children.push(e)):(n._childDisplayObjectList.splice(a,0,t),n._children.splice(a,0,e)),e._parent=n,e._parentMovieClipRenderObject=n._parentMovieClipRenderObject,e._parentMovieClipRenderObjectChild=n._parentMovieClipRenderObjectChild,e._parentSceneRenderObject=n._parentSceneRenderObject;var o;return n._displayObject&&(o=n._displayObject._getRoot()),o||(o=t._getRoot()),o._renderManager._displayHash[t._id]=e,e._parentMovieClipRenderObject&&t._type=="MovieClip"&&e._parentMovieClipRenderObject._movieClipRenderObjectList.push(e),e},proto$_._beforeRedraw=function(e,t){var r=this,a=r._displayObject;if(a._presetAnimation&&a._presetAnimation._currentAniIndex!==void 0){var n=a._presetAnimation._list[a._presetAnimation._currentAniIndex];if(n&&n._maskData&&n.canvasNode){var o=r.currentPresetCanvas=n.canvasNode;e.save();var s=t,l=o._canvasMatrix._getScaleX(),_=o._canvasMatrix._getScaleY();return e.transform(s._a,s._b,s._c,s._d,s._tx,s._ty),e.drawImage(o,0,0,o.width*l,o.height*_),e.restore(),!1}}return!0},proto$_._prepareCanvasRender=function(){},proto$_._removeChild=function(e){var t=this,r=e._displayObject,a=t._childDisplayObjectList.indexOf(r);if(t._childDisplayObjectList.splice(a,1),a=t._children.indexOf(e),t._children.splice(a,1),e._parentMovieClipRenderObject){var n=e._parentMovieClipRenderObject._movieClipRenderObjectList;a=n.indexOf(n),a!==-1&&n.splice(a,1)}var o=t._displayObject._getRoot()||t._parent._displayObject._getRoot();delete o._renderManager._displayHash[r._id]},proto$_._setDisplayInitState=function(){var e=this,t=e._displayObject,r=StyleSheetManager.insertCss("width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+(t._haveClickAction?"cursor: pointer;":""));e._classNameList.push(r),e._staticClassName=r},proto$_._setStaticPosition=function(e,t,r){var a=this,n=a._displayObject,o=n._transform;e=e||o._matrix;var s=n._parent&&n._parent._offsetMatrix,l=n._graphics||{},_=l._actions||[],c=!1;_.forEach(function(A){A._bitmapData&&(c=!0)});var d="";if(s&&(d+=" "+s._toCssText()),n._hasShapeAnimation&&n._resourceList&&n._resourceList[0]){var u=e._clone();u._tx=Math.round(u._tx),d+=" "+u._toCssText(!1,n._hasShapeAnimation&&c)}else d+=" "+e._toCssText(!1,n._hasShapeAnimation&&c);o._beforeTranform&&(d=o._beforeTranform+" "+d),n._flipMatrix&&(d+=" "+n._flipMatrix._toCssText());var f=!Browser$1.os.ios,p=Browser$1.enable3DRendering===void 0?f:Browser$1.enable3DRendering,v=!1,h=Browser$1.os.ios&&(e._is3d||n._type==="VR"||n._type==="video"||n._type==="IFrame"||n._type==="Live"||n._type==="Wiper");h=h||a._iAm3d&&n._haveAnimation,a._3dBrotherCounter||h?d=" translateZ("+a._parent._children.indexOf(a)*100+"px) "+d:(p||v)&&(d=" translateZ(0) "+d);var g=o._colorTransform,w=""+Browser$1.prefix.css+"transform:"+d+";opacity: "+(a.currentPresetCanvas?0:g._getAlpha())+";";o._additionCss&&(w+=o._additionCss),n._visible?w+=a._displayVal:a._node&&(w+="display: none;");var y=a._matrixClassName;if(t)o._additionCss!=a._prevAdditionCss&&(a._node.style.cssText=a._node.style.cssText.replace(a._prevAdditionCss,""),a._prevAdditionCss=o._additionCss),a._node.style.cssText+=w;else{var x=StyleSheetManager.insertCss(w);a._classNameList.push(x),a._matrixClassName=x}if(a._prevCurrentPresetCanvas&&(a._prevCurrentPresetCanvas.style.display=n._visible?"block":"none"),Browser$1.os.ios){var m=a;h&&!a._iAm3d?(m._visibilityChangedHandlerBinded||(m._visibilityChangedHandlerBinded=RenderObject._visibilityChangedHandler.bind(m),m._removeNodeHandlerBinded=RenderObject._removeNodeHandler.bind(m),n._addEventListener("visibilityChanged",m._visibilityChangedHandlerBinded),n._addEventListener("removed",m._removeNodeHandlerBinded)),a._iAm3d=!0,a._displayObject._getRealVisible()&&m._visibilityChangedHandlerBinded()):!h&&a._iAm3d&&(n._removeEventListener("visibilityChanged",m._visibilityChangedHandlerBinded),n._removeEventListener("removed",m._removeNodeHandlerBinded),m._visibilityChangedHandlerBinded=void 0,a._displayObject._getRealVisible()&&(RenderObject._set3dCounter(!1,a),delete a.prevIosFixedVisible),a._iAm3d=!1)}t||y&&a._classNameList.splice(a._classNameList.indexOf(y),1),r&&a.setClassName(),t||y&&StyleSheetManager.deleteCss(y),a._prevTransform=o._clone(),a._prevVisible=n._visible,a._prevNeed3dFix=!!a._3dBrotherCounter,a._prevParentOffsetMatrix=n._parent&&n._parent._offsetMatrix?n._parent._offsetMatrix._clone():null},RenderObject._visibilityChangedHandler=function(){var e=this,t=e._displayObject._getRealVisible();!t&&e.prevIosFixedVisible?(RenderObject._set3dCounter(!1,this),e.prevIosFixedVisible=!1):t&&!e.prevIosFixedVisible&&(RenderObject._set3dCounter(!0,this),e.prevIosFixedVisible=!0)},RenderObject._removeNodeHandler=function(){RenderObject._set3dCounter(!1,this)},RenderObject._set3dCounter=function(e,t,r){var a=function(n,o){for(var s=n._parent,l=s._children,_=l.indexOf(n),c=_+(o?1:0);c<l.length;c++){var d=l[c],u=d._displayObject,f=d._3dBrotherCounter;e?d._3dBrotherCounter++:d._3dBrotherCounter--,!!f!=!!d._3dBrotherCounter&&u._getRealVisible()&&u._dispatchEvent(d._displayObject._changed3dEvent)}var p=s._displayObject;p&&p._type==="scene"&&(s=s._parent),p&&p._id>1&&a(s)};r?a(t):a(t,!0)},proto$_._setClipClass=function(e){var t=this;if(t._parent._clipTop!=null){t._clipClassName&&(StyleSheetManager.deleteCss(t._clipClassName),t._classNameList.splice(t._classNameList.indexOf(t._clipClassName),1));var r=StyleSheetManager.insertCss("top:"+Math.round(Math.min(0,t._parent._clipTop))+"px; left:"+Math.round(Math.min(0,t._parent._clipLeft))+"px");if(t._classNameList.push(r),t._clipClassName=r,t._canvasRender)var a=t._canvasRender._getNode();e&&t.setClassName(a)}};var staticGlobalBehaviors=[{customEventName:"mugeda_audio_pause",event:"custom_event",id:"mugeda_audio_pause",mode:2,name:"声音暂停",param:{event_name:"声音暂停"},type:"audioPause"},{customEventName:"mugeda_audio_resume",event:"custom_event",id:"mugeda_audio_resume",mode:2,name:"声音恢复",param:{event_name:"声音恢复"},type:"audioResume"},{customEventName:"mugeda_video_pause",event:"custom_event",id:"mugeda_video_pause",mode:2,name:"视频暂停",param:{event_name:"视频暂停"},type:"videoPause"},{customEventName:"mugeda_video_resume",event:"custom_event",id:"mugeda_video_resume",mode:2,name:"视频恢复",param:{event_name:"视频恢复"},type:"videoResume"},{customEventName:"mugeda_stage_pause",event:"custom_event",id:"mugeda_stage_pause",mode:2,name:"舞台暂停",param:{event_name:"舞台暂停"},type:"stagePause"},{customEventName:"mugeda_stage_resume",event:"custom_event",id:"mugeda_stage_resume",mode:2,name:"舞台恢复",param:{event_name:"舞台恢复"},type:"stageResume"},{customEventName:"mugeda_global_pause",event:"custom_event",id:"mugeda_global_pause",mode:2,name:"全局暂停",param:{event_name:"全局暂停"},type:"globalPause"},{customEventName:"mugeda_global_resume",event:"custom_event",id:"mugeda_global_resume",mode:2,name:"全局恢复",param:{event_name:"全局恢复"},type:"globalResume"},{customEventName:"mugeda_next_page",event:"custom_event",id:"mugeda_next_page",mode:2,name:"下一页",param:{event_name:"下一页"},type:"nextPage"},{customEventName:"mugeda_prev_page",event:"custom_event",id:"mugeda_prev_page",mode:2,name:"上一页",param:{event_name:"上一页"},type:"prevPage"}];proto$_._initAction=function(){var e=this,t=e._displayObject;e._displayObject._renderObject=e;var r=t._getStage()._aniData,a,n;if(t._type==="Stage")a=t.children[0],n=t.children[0],t._behaviors||(t._behaviors=[]),t._behaviors=t._behaviors.concat(staticGlobalBehaviors);else{var o=e._parentMovieClipRenderObject||{};n=o._displayObject,n&&(a=n._getStage().children[0])}if(t._behaviors){var s=t._behaviors;handleBehavior.bind(e)(t,s,n,a);const h=s.filter(function(y){return y.type==="submitDefaultQuestion"}),g=[];let w=!1;h.forEach(function(y){const x=y.param.submit_source,m=t._getRoot()._renderManager.getReferenceElement(x);if(w=w||!m,m){const A=m._aniData.param.question;try{const T=JSON.parse(A);g.push(T.data)}catch(T){console.error("Error processing question data:",T)}}}),w&&g.push(r.metadata.question);for(const y of g){for(var l=new Date,_=y||{},c=t._getStage()._renderManager,d=_.checkedNames||_.checked||[],u=0;u<d.length;u++){var f=c.getReferenceElement(d[u]);!f&&e._getOldTikuDisplayObject&&(f=e._getOldTikuDisplayObject(d[u],"score")),f&&(f._addEventListener(Browser$1.InputEnd,function(){e._setQuestionReportObj(e._recalculateScore(d,_.passScore),l,r.title||r.tt)}),f._addEventListener("changed",function(){e._setQuestionReportObj(e._recalculateScore(d,_.passScore),l,r.title||r.tt)}))}e._setQuestionReportObj(e._recalculateScore(d,_.passScore||0),l,r.title||r.tt)}t._behaviors=null}for(var p in t._hashPrivateActions){var v=t._hashPrivateActions[p];s=v.behaviors,handleBehavior.bind(e)(t,s,n,a,v.actions)}},proto$_._recalculateScore=function(e,t,r){for(var a=this,n=a._displayObject,o=n._getStage()._renderManager,s=0,l=0,_=0,c=0,d=0;d<e.length;d++){var u=o.getReferenceElement(e[d]);if(!u&&a._getOldTikuDisplayObject){var f=a._getOldTikuDisplayObject(e[d],"score");_=(f?f._getText()*1:0)||0;var p=a._getOldTikuData(e[d]);p&&p.data&&p.data.tickling&&p.data.tickling.correct&&(c=p.data.tickling.correct.score*1)}else if(u){var v=u._getRenderObject();v._checkAns(),_=u._getScore(),c=u._total}else break;s+=_||0,l+=c||0}return n._value=s,l=parseFloat(parseFloat(l).toFixed(1)),s=parseFloat(parseFloat(s).toFixed(1)),{totalCorrect:s,totalAll:l,passValue:t}},proto$_._setQuestionReportObj=function({totalCorrect:e,totalAll:t,passValue:r},a,n){var o=this,s=o._displayObject,l=new Date,_=l-a;s.reportObj={startTime:a,endTime:l,duration:_,totalCorrect:e,totalAll:t,passValue:r,title:n}},proto$_.setClassName=function(e){var t=this;if(e=e||t._node,e==null&&(t.getNode(),e=t._node),e!=null){if(t._c3AccelerateCurrent&&t._animtionClassName)var r=t._classNameList.concat([t._animtionClassName]).join(" ");else r=t._classNameList.join(" ");t._prevClassText!=r&&(t._prevClassText=r,e.setAttribute("class",r))}},proto$_.getNode=function(){var e=this;if(e._node==null){var t=document.querySelector('[data-mid="'+e._displayObject._id+'"]');t?(e._node=t,e._node._relateRenderObject=e,e._buildFun&&e._buildFun(),e._prevVisible||(e._node.style.cssText+="display:none;")):e._canvasRender&&e._canvasRender._getNode()}return e._node},proto$_.render=function(e){var t=this;if(t._node){var r=t._displayObject,a=r._transform,n=a._colorTransform._generateFilterString();if(t.currentPresetCanvas=void 0,r._presetAnimation&&r._presetAnimation._currentAniIndex!==void 0){var o=r._presetAnimation._list[r._presetAnimation._currentAniIndex];if(o&&o._maskData)var s=t.currentPresetCanvas=o.canvasNode}if(t._prevNeed3dFix===!!t._3dBrotherCounter&&a._compare(t._prevTransform)&&t._prevVisible===r._visible&&n===t._activeFilterString&&s===t._prevCurrentPresetCanvas&&(!r._parent||!r._parent._offsetMatrix||r._parent._offsetMatrix._compare(t._prevParentOffsetMatrix)))return;var l=!0;if((n||n!==t._activeFilterString)&&(t._node.style[Browser$1.prefix.js+"Filter"]=n,t._activeFilterString=n),t._setStaticPosition(null,l),t._prevCurrentPresetCanvas!==s&&(t._prevCurrentPresetCanvas&&(t._prevCurrentPresetCanvas.style.display="none"),s&&(s.style.display="block"),t._prevCurrentPresetCanvas=s),r._dispatchEvent(r._renderedEvent),t._overwriteOverflow){for(var _=t;_=_._parent,!(!_||_._displayObject._type=="scene"););_&&(_=_._node.children[0],_&&(_.style.overflow="visible"),t._overwriteOverflow=!1)}return!0}};var handleBehavior=function(e,t,r,a,n){var o=this;try{var s=o._displayObject._getRoot().children[0]._getRenderObject()._renderObjectSceneSwitcher}catch{s=null}t.forEach(function(l){var _=l.event;if(_={appear:ActionEvent.APPEAR,click:ActionEvent.CLICK,mouseover:ActionEvent.MOUSEOVER,mouseout:ActionEvent.MOUSEOUT,hotspot:ActionEvent.HOTSPOT,property:ActionEvent.CHANGE,dragend:ActionEvent.DRAGEND,drag:ActionEvent.DRAG,drop:ActionEvent.DROP,dragout:ActionEvent.DRAGOUT,preset_end:ActionEvent.PRESETEND,liked:ActionEvent.LIKED,unliked:ActionEvent.UNLIKED,video_start:ActionEvent.VIDEOSTART,video_pause:ActionEvent.VIDEOPAUSE,video_end:ActionEvent.VIDEOEND,video_at:ActionEvent.VIDEOAT,wiper_finish:ActionEvent.WIPERFINISH,canvas_save_finish:ActionEvent.CANVASFINISH,connector_connected:ActionEvent.CONNECTORCONNECTED,connector_disconnected:ActionEvent.CONNECTORDISCONNECTED,touch_start:ActionEvent.TOUCHSTART,touch_end:ActionEvent.TOUCHEND,slide_right:ActionEvent.SLIDERIGHT,slide_right_up:ActionEvent.SLIDERIGHTUP,slide_up:ActionEvent.SLIDEUP,slide_left_up:ActionEvent.SLIDELEFTUP,slide_left:ActionEvent.SLIDELEFT,slide_left_down:ActionEvent.SLIDELEFTDOWN,slide_down:ActionEvent.SLIDEDOWN,slide_right_down:ActionEvent.SLIDERIGHTDOWN,audio_at:ActionEvent.AUDIOAT,audio_start:ActionEvent.AUDIOSTART,audio_pause:ActionEvent.AUDIOPAUSE,audio_stop:ActionEvent.AUDIOSTOP,behavior_success:ActionEvent.BEHAVIOR_SUCCESS,custom_event:ActionEvent.CUSTOMEVENT,han_complete:ActionEvent.HAN_COMPLETE,script:ActionEvent.SCRIPT}[_],_==null&&(_=ActionEvent.OTHER),l.param.bk&&([ActionEvent.CLICK,ActionEvent.DRAGEND,ActionEvent.DROP,ActionEvent.DRAGOUT].indexOf(_)>-1||_.indexOf("touch_")==0||_.indexOf("slide_")==0))var c=!0;var d=ActionManager._getAction(l,{parentMovieClip:r,parentParentMovieClip:a,renderObjectSceneSwitcher:s,stage:e._getRoot()._getRenderObject(),displayObj:e,needBackPoint:c,referenceActions:n});if(d){if(_===ActionEvent.APPEAR)r._actionAppearList.push(d);else if(_===ActionEvent.CLICK)e._actionClickList.push(d),o._bindTapAction(e);else if(_===ActionEvent.LIKED)e._actionLikedList.push(d);else if(_===ActionEvent.UNLIKED)e._actionUnlikedList.push(d);else if(_===ActionEvent.CHANGE)e._actionChangeList.push(d),o._bindChangeAction(e);else if(_===ActionEvent.DRAGEND)e._actionDragEndList.push(d);else if(_===ActionEvent.DRAG)d._bindDragEvent(e);else if(_===ActionEvent.TOUCHSTART)e._actionTouchStartList.push(d),o._bindTouchStartEvent(e);else if(_===ActionEvent.TOUCHEND)e._actionTouchEndList.push(d),o._bindTouchEndEvent(e);else if(_===ActionEvent.SCRIPT){var u=d._behavior.scriptName;e._actionScriptHash[u]=d}else if(_.indexOf("slide_")===0)e._actionSlideList[_]||(e._actionSlideList[_]=[]),e._actionSlideList[_].push(d),o._bindSlideEvent(e);else if([ActionEvent.AUDIOSTART,ActionEvent.AUDIOPAUSE,ActionEvent.AUDIOSTOP,ActionEvent.AUDIOAT].indexOf(_)!==-1)o._bindMediaAction(_,l,d);else if([ActionEvent.VIDEOSTART,ActionEvent.VIDEOPAUSE,ActionEvent.VIDEOEND,ActionEvent.VIDEOAT].indexOf(_)!==-1)o._bindMediaAction(_,l,d);else if(_===ActionEvent.DROP||_===ActionEvent.DRAGOUT){var f=d._behavior.drop||{},p=d._behavior.param||{},v=p.scope||p.element_name||p.audio_target||"";v.match(/\{\{.*\}\}/);var h=f.name;if(h||v){var g=d._stage._displayObject._renderManager,w=h?g.getReferenceElement(h):null,y=g._dropObjectList.filter(function(b){return b.container==e&&b.dropIn===void 0});y&&y.length?(y=y[0],y.action=d,y.target=w,y.dropIn=_===ActionEvent.DROP):g._dropObjectList.push({container:e,action:d,target:w,dropIn:_===ActionEvent.DROP})}}else if(_===ActionEvent.PRESETEND){var x=d._behavior.preset||{},h=x.name;if(h)var g=d._stage._displayObject._renderManager,m=g.getReferenceElement(h);else m=o._displayObject;m._presetAnimation&&m._presetAnimation._registerAction({event:_,action:d})}else if(_===ActionEvent.MOUSEOVER)o._displayObject._addEventListener("mouseover",function(){d.doAction.bind(d)()});else if(_===ActionEvent.MOUSEOUT)o._displayObject._addEventListener("mouseout",function(){d.doAction.bind(d)()});else if(_===ActionEvent.WIPERFINISH)e._wiperActionList.push(d);else if(_===ActionEvent.CANVASFINISH)e._canvasActionList.push(d);else if(_===ActionEvent.CONNECTORCONNECTED||_===ActionEvent.CONNECTORDISCONNECTED)e._connectorActionList.push(d);else if(_===ActionEvent.CUSTOMEVENT)o._bindCustomEvent(d);else if(_!==ActionEvent.BEHAVIOR_SUCCESS){if(_===ActionEvent.HAN_COMPLETE)e._hanCompleteActionList.push(d);else if(_===ActionEvent.OTHER){var A=Browser$1._globalObject.MugedaBehavior;if(A){var T=o.getNode();A.setupMobileActions({dataRef:null,displayObject:e,aniData:e._aniData,dom:T},l,function(){d.constructor!==Action&&d.doAction.bind(d)()})}}}}})},_checkSlide=function(e){var t=e._getInputX(),r=e._getInputY(),a=this,n=a,o=a._getStage(),s=setTimeout(function(){o.hasEventListener(Browser$1.InputEnd,l)&&o._removeEventListener(Browser$1.InputEnd,l,!0,-100),s=null},2e3),l=function(_){var c=this,d=_._getInputX()-t,u=_._getInputY()-r;if(d*d+u*u>1024){var f=Math.atan2(-u,d)*180/Math.PI;if(-22.5<f&&f<=22.5)var p=ActionEvent.SLIDERIGHT;else 22.5<f&&f<=67.5?p=ActionEvent.SLIDERIGHTUP:67.5<f&&f<=112.5?p=ActionEvent.SLIDEUP:112.5<f&&f<=157.5?p=ActionEvent.SLIDELEFTUP:157.5<f||f<=-157.5?p=ActionEvent.SLIDELEFT:-157.5<f&&f<=-112.5?p=ActionEvent.SLIDELEFTDOWN:-112.5<f&&f<=-67.5?p=ActionEvent.SLIDEDOWN:-67.5<f&&f<=-22.5&&(p=ActionEvent.SLIDERIGHTDOWN)}p&&(n._actionSlideList[p]||[]).forEach(function(v){v.doAction(_)}),c._removeEventListener(Browser$1.InputEnd,l,!0,-100),s!=null&&clearTimeout(s)};o._addEventListener(Browser$1.InputEnd,l,!0,-100)};proto$_._bindSlideEvent=function(){var e=this,t=e._displayObject;t.hasEventListener(Browser$1.InputStart,_checkSlide)||t._addEventListener(Browser$1.InputStart,_checkSlide,!1,-100)};var customEventDisplayObjMap=new Map,hasListenerCustomEvent=!1;function getMovieClipByDisplayObject(e){if(!e)throw new Error("getMovieClip param is not provide");if(e._movieClip)return e._movieClip;var t=e._parent;if(!t)throw new Error("no found movieclip");if(t instanceof MovieClip)return t;var r=t._parent;if(r&&r instanceof MovieClip)return r;throw new Error("unknow error on found movieclip")}var _customEventHandle=function(e){var t=e.detail,r;if(!t||!(r=t.customEventName)){console.warn("customevent接收到错误的事件");return}if(!customEventDisplayObjMap.has(r)){console.warn("该自定义触发未绑定行为！");return}var a=customEventDisplayObjMap.get(r)||[];a.forEach(function(n){var o=n._behavior.autoJumpBeforeRun;if(o)try{var s=getMovieClipByDisplayObject(n._displayObject),l=n._displayObject.id,_=s.getKeyFrameInfo(l);_&&s.gotoAndPlay(_._min)}catch(c){console.warn(c)}n.doAction(e)})};proto$_._bindCustomEvent=function(e){if(e){var t=e._behavior.customEventName;customEventDisplayObjMap.has(t)||customEventDisplayObjMap.set(t,[]),customEventDisplayObjMap.get(t).push(e),hasListenerCustomEvent||(hasListenerCustomEvent=!0,document.addEventListener(MUGEDA_CUSTOM_EVENT_NAME,_customEventHandle))}};var _touchEndHandle=function(e){var t=this,r=t._actionTouchEndList;t._getRealVisible()&&r.forEach(function(a){a.doAction(e)})};proto$_._bindTouchEndEvent=function(){var e=this,t=e._displayObject;t.hasEventListener(Browser$1.InputEnd,_touchEndHandle)||t._addEventListener(Browser$1.InputEnd,_touchEndHandle,!1,-100)};var _touchStartHandle=function(e){var t=this,r=t._actionTouchStartList;r.forEach(function(a){a.doAction(e)})};proto$_._bindTouchStartEvent=function(){var e=this,t=e._displayObject;t.hasEventListener(Browser$1.InputStart,_touchStartHandle)||t._addEventListener(Browser$1.InputStart,_touchStartHandle,!1,-100)},proto$_._bindTapAction=function(){var e=this,t=e._displayObject;t.hasEventListener(Browser$1.Click,_tapActionHandler)||(t._addEventListener(Browser$1.InputStart,_tapActionHandler,!1,-100),t._addEventListener(Browser$1.InputEnd,_tapActionHandler,!1,-100),t._addEventListener(Browser$1.Click,_tapActionHandler,!1,-100))},proto$_._bindChangeAction=function(){var e=this,t=e._displayObject;t.hasEventListener("changed",_changeActionHandler)||t._addEventListener("changed",_changeActionHandler,!1,-100)},proto$_._bindMediaAction=function(e,t,r){var a=t.param,n=this._displayObject,o=a.mediaElement;if(o===void 0||o==="")var s=n;else{var l=n._getRoot()._renderManager._mugeda;s=l._scene.getObjectByName(o,"name_name")}if(!s)return console.error("物体"+o+"不存在");if(!s._bindBehavior)return console.error("物体不是媒体元素");s._bindBehavior(e,function(_){if([ActionEvent.VIDEOAT,ActionEvent.AUDIOAT].indexOf(e)!==-1){var c=a.mediaCondition,d=a.mediaValue;if(c===void 0||c===""||d===void 0||d==="")return r.doAction.bind(r)();var u=_.currentTime;c=="eq"&&Math.abs(u-d)<.2&&(u=d),Action._checkLogic(c,u,d)&&r.doAction.bind(r)()}else r.doAction.bind(r)()})};var _changeActionHandler=function(e){var t=this;e._reason==="3d"||t._onChanged(e)},tapEventList=[],_tapActionHandler=function(e){var t=this;e.type==Browser$1.InputStart?(tapEventList=tapEventList.filter(function(r){return r.eventMark==1&&e._originEvent.timeStamp-r.startTime<500}),tapEventList.push({startObject:t,eventMark:1,startTime:e._originEvent.timeStamp,startX:e._getInputX(),startY:e._getInputY()})):e.type==Browser$1.InputEnd?tapEventList.forEach(function(r){r.startObject==t&&(r.eventMark|=2,r.diffTime=e._originEvent.timeStamp-r.startTime,r.diffX=e._getInputX()-r.startX,r.diffY=e._getInputY()-r.startY)}):e.type==Browser$1.Click&&tapEventList.forEach(function(r){if(r.startObject==t&&(r.eventMark|=4,r.diffTime<500&&r.diffX*r.diffX+r.diffY*r.diffY<64)){var a=t._actionClickList,n=[];a.forEach(function(o,s){var l={id:o._displayObject._guid,action:o._behavior.type,desc:o._behavior.desc||(o._behavior.param||{}).event_name||o._behavior.name||""};if(o._behavior.type=="submitForm"){var _="",c=Mugeda.getMugedaObject(),d=o._behavior.param.submit_object;d&&(d=d.split(","),d.length&&d.forEach(function(v,h){var g=v.split("_"),w;if(g&&g.length>1){var y=c.scene.getObjectByName(g[0]);y&&(w=y.scene.getObjectByName(g[1]))}else w=c.scene.getObjectByName(v);if(w){var x=w.text;h==d.length-1?_+=v+"="+x:_+=v+"="+x+"&"}})),_&&(l.data=_)}if(n.push(l),o._behavior.type=="video"){var u=t._aniData.param||{};if(o._behavior.param.video_id=t._id,u.behavior){var f,p;f=JSON.parse(u.behavior),p=parseInt(f[s].param.video_controls),o._behavior.param.video_controls=p}o._behavior.param.video_continue_audio=u.continueAudio,o._behavior.param.auto=u.videoAutoPlay,o._behavior.param.clickStatus=u.clickStatus,o._behavior.param.hidePlayIcon=u.hidePlayIcon,o._behavior.param.video_name=u.name,o._behavior.param.video_mode="object"}o.doAction(e)}),Mugeda.DataStats&&Mugeda.DataStats.entry({type:"interActions",data:n})}})};proto$_._getDisplayObject=function(){return this._displayObject},mod.definePropertyReadOnly(proto$_,["displayObject",proto$_._getDisplayObject]),mod.namespace("Render.RenderObject",RenderObject);var renderObjectBitmap=function(){renderObjectBitmap.__super__.constructor.apply(this,arguments);var e=this;e._prevImageSrc=null,e._canvasRender=null};mod.extend(renderObjectBitmap,RenderObject);var proto$Z=renderObjectBitmap.prototype;proto$Z._init=function(){var e=this;renderObjectBitmap.__super__._init.apply(e);var t=e._displayObject;e._prevImageSrc=t._bitmapData._image?t._bitmapData._image.src:""},proto$Z._setDisplayInitState=function(){var e=this,t=e._displayObject,r="width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+Browser$1.prefix.css+"user-select: none;"+(t._haveClickAction?"cursor: pointer;":"");if(Browser$1.browser.safari&&(Browser$1.os.phone||Browser$1.os.tablet)){var a=t._flipMatrix;e._neg2Fix=!0;var n=-2,o=-2;r+="border: 2px transparent solid;box-sizing: content-box;";var s=new Matrix(1,0,0,1,n,o);t._flipMatrix?t._flipMatrix=Matrix._multiplication(a,s):t._flipMatrix=s}var l=StyleSheetManager.insertCss(r);e._classNameList.push(l),e._staticClassName=l,e._html='<img ondragstart="return false;" style="'+(BitmapData.blankImage.src==e._prevImageSrc?"visibility:hidden;":"")+'" data-type="bitmap" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}" src="'+e._prevImageSrc+'" />'},proto$Z.render=function(){var e=this,t=e._canvasRender;t||renderObjectBitmap.__super__.render.apply(e,arguments),e._refreshImage()},proto$Z._redraw=function(e,t){var r=this;if(r._beforeRedraw(e,t)){var a=r._displayObject;if(a._bitmapData){var n=a._bitmapData._image;e.transform(t._a,t._b,t._c,t._d,t._tx,t._ty);try{var o=Mugeda.hashCachedImages||{};n=o[a._bitmapData._src]||n,r._neg2Fix?e.drawImage(n,2,2,a._rawWidth,a._rawHeight):e.drawImage(n,0,0,a._rawWidth,a._rawHeight)}catch(s){console.error(s),window.location.href.indexOf("m_dbg=1")>0&&Mugeda.log("渲染图片出错！地址："+n.src.substr(0,32))}}}},proto$Z._refreshImage=function(){var e=this,t=e._displayObject;if(t._bitmapData==null)r="";else{if(t._bitmapData._image==null)return;var r=t._bitmapData._src}if(r!==e._prevImageSrc){e._prevImageSrc=r;var a=e._canvasRender;if(!a){var n=e.getNode(!0);n.tagName=="DIV"?(n.firstChild&&n.firstChild.tagName=="IMG"?n.firstChild.setAttribute("src",e._prevImageSrc):n.style.backgroundImage='url("'+e._prevImageSrc+'")',n.style.visibility="visible"):(n.setAttribute("src",e._prevImageSrc),n.style.visibility="visible")}}},mod.namespace("Render.Bitmap",renderObjectBitmap);var TransitionEffects=function(){};TransitionEffects._registerEffect=function(e,t){TransitionEffects[e]=t},TransitionEffects._getInstance=function(e,t){var r=new TransitionEffects[e](t);return r},mod.namespace("SceneSwitcher.TransitionEffects",TransitionEffects);var TransitionEffect=function(e){this._switcher=e,this._dir=null,this._renderObject=null,this._fromSceneRenderObject=null,this._toSceneRenderObject=null,this._duration=null,this._direction=null,this._stage=null,this._fromPrevious=null};TransitionEffect.prototype,mod.namespace("SceneSwitcher.TransitionEffect",TransitionEffect);var EffectCssTransition=function(){EffectCssTransition.__super__.constructor.apply(this,arguments),this.TRANSITION_CLASS_NAME="mugine_class_transition_"+this._switcher._counter,this.ENTER_CLASS_NAME="mugine_class_enter_"+this._switcher._counter,this._enterUp=!0,this.constructor._globalInited||(this._globalInit(),this.constructor._globalInited=!0)};mod.extend(EffectCssTransition,TransitionEffect);var proto$Y=EffectCssTransition.prototype;proto$Y._globalInit=function(){},proto$Y._updateTransitionClass=function(){var e=this,t=Browser$1.prefix.css+"transition-duration: "+e._duration+"ms;";StyleSheetManager.updateCss(e.TRANSITION_CLASS_NAME,t),t="z-index: 1",StyleSheetManager.updateCss(e.ENTER_CLASS_NAME,t)},proto$Y._start=function(e,t){var r=this;if(r._updateTransitionClass(),r._enterUp)if(e===0){var a=r._toSceneRenderObject;a._classNameList.push(r.ENTER_CLASS_NAME),a._displayObject._visible=!0,a.setClassName()}else a=r._fromSceneRenderObject;else e===0?(a=r._toSceneRenderObject,a._displayObject._visible=!0):(a=r._fromSceneRenderObject,a._classNameList.push(r.ENTER_CLASS_NAME),a.setClassName());const n=r._setTransitionStart(e,a,function(){o()}),o=function(){setTimeout(function(){a._classNameList.push(r.TRANSITION_CLASS_NAME),a.setClassName(),e===1&&a._node.getBoundingClientRect(),setTimeout(function(){r._setTransitionEnd(e,a),a._setStaticPosition(null,!0,!0)},0)},1),e===1?(r._isLeaving=!0,t()):(r._isEntering=!0,r._leaveCallback=t);var s=function(){if(Browser$1.haveTransitionEnd&&this.removeEventListener(Browser$1.TransitionEnd,s),e===0){if(!r._isEntering)return;r._isEntering=!1}else{if(!r._isLeaving)return;r._isLeaving=!1}!r._isLeaving&&!r._isEntering&&r._leaveCallback()};a._setStaticPosition(null,!0,!0),Browser$1.haveTransitionEnd&&a._node.addEventListener(Browser$1.TransitionEnd,s),setTimeout(s,r._duration)};n||o()},proto$Y._end=function(e,t){var r=this;if(e===0)var a=r._toSceneRenderObject;else a=r._fromSceneRenderObject;for(;a._classNameList.indexOf(r.TRANSITION_CLASS_NAME)>-1;)a._classNameList.splice(a._classNameList.indexOf(r.TRANSITION_CLASS_NAME),1);var n=a._classNameList.indexOf(r.ENTER_CLASS_NAME);n>=0&&a._classNameList.splice(n,1),r._finish&&r._finish(e,a),a.getNode().style.cssText+=Browser$1.prefix.css+"transform-origin: inherit;",a._setStaticPosition(null,!0,!0),t()},mod.namespace("SceneSwitcher.EffectCssTransition",EffectCssTransition);var EffectLadder$1=function(){EffectLadder$1.__super__.constructor.apply(this,arguments)};EffectLadder$1._name="centerRotate",TransitionEffects._registerEffect(EffectLadder$1._name,EffectLadder$1),mod.extend(EffectLadder$1,EffectCssTransition);var proto$X=EffectLadder$1.prototype;proto$X._setTransitionStart=function(e,t){var r=this,a=r._switcher.constructor,n=r._stage,o=r._direction,s=new Transform,l=s._matrix;if(l._create3DMatrix(!0,!0),e===0){if(o===a._Direction._VERTICAL){var _=n._stageWidth*2,c="perspective("+_+"px) rotateX(180deg)";s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: 0 "+n._fullScreenRect._height/2+"px 0;",s._setAdditionCss(c)}else _=n._stageHeight*2,c="perspective("+_+"px) rotateY(180deg)",s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: "+n._fullScreenRect._width/2+"px 0 0;",s._setAdditionCss(c);var d=s._colorTransform;d._alphaMultiplier=0}else o===a._Direction._VERTICAL?(_=n._stageWidth*2,c="perspective("+_+"px) rotateX(0deg)",s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: 0 "+n._fullScreenRect._height/2+" 0;",s._setAdditionCss(c)):(_=n._stageHeight*2,c="perspective("+_+"px) rotateY(0deg)",s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: "+n._fullScreenRect._width/2+"px 0 0;",s._setAdditionCss(c));t._displayObject._transform=s},proto$X._setTransitionEnd=function(e,t){var r=this,a=r._switcher.constructor,n=r._stage,o=r._direction,s=new Transform,l=s._matrix;if(l._create3DMatrix(!0,!0),e===0)if(o===a._Direction._VERTICAL){var _=n._stageWidth*2,c="perspective("+_+"px) rotateX(0deg)";s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: 0 "+n._fullScreenRect._height/2+"px 0;",s._setAdditionCss(c)}else _=n._stageHeight*2,c="perspective("+_+"px) rotateY(0deg)",s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: "+n._fullScreenRect._width/2+"px 0 0;",s._setAdditionCss(c);else if(o===a._Direction._VERTICAL)_=n._stageWidth*2,c="perspective("+_+"px) rotateX(180deg)",s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: 0 "+n._fullScreenRect._height/2+"px 0;",s._setAdditionCss(c);else{_=n._stageHeight*2,c="perspective("+_+"px) rotateY(180deg)",s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: "+n._fullScreenRect._width/2+"px 0 0;",s._setAdditionCss(c);var d=s._colorTransform;d._alphaMultiplier=0}t._displayObject._transform=s},proto$X._finish=function(e,t){t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(null)},mod.namespace("SceneSwitcher.EffectLadder",EffectLadder$1);var EffectAppear=function(){EffectAppear.__super__.constructor.apply(this,arguments)};EffectAppear._name="appear",TransitionEffects._registerEffect(EffectAppear._name,EffectAppear),mod.extend(EffectAppear,EffectCssTransition);var proto$W=EffectAppear.prototype;proto$W._setTransitionStart=function(e,t){var r=new Transform;this._duration=10,t._displayObject._transform=r},proto$W._setTransitionEnd=function(e,t){var r=new Transform;t._displayObject._transform=r},mod.namespace("SceneSwitcher.EffectAppear",EffectAppear);var EffectBox=function(){EffectBox.__super__.constructor.apply(this,arguments),this._initClassName()};EffectBox._name="box",TransitionEffects._registerEffect(EffectBox._name,EffectBox),mod.extend(EffectBox,EffectCssTransition);var proto$V=EffectBox.prototype;proto$V._initClassName=function(){this.TRANSITION_BOX_CLASS_NAME="mugine_class_transition_box_"+this._switcher._counter,this.PRESERVE_3D_CLASS_NAME="mugine_class_preserve_3d_"+this._switcher._counter},proto$V._globalInit=function(){var e=this;EffectBox.__super__._globalInit.apply(e,arguments),this._initClassName();var t=Browser$1.prefix.css+"transition-timing-function: linear;";StyleSheetManager.updateCss(this.TRANSITION_BOX_CLASS_NAME,t),t=Browser$1.prefix.css+"transform-style: preserve-3d;";var r=Browser$1.prefix.css+"backface-visibility: hidden;";StyleSheetManager.updateCss(e.PRESERVE_3D_CLASS_NAME,t),StyleSheetManager.updateCss(e.PRESERVE_3D_CLASS_NAME+' > [data-type="scene"]',r)},proto$V._setTransitionStart=function(e,t){var r=this,a=r._stage,n=r._switcher.constructor,o=r._direction,s=a._fullScreenRect._width/2,l=a._fullScreenRect._height/2;if(t._classNameList.push(r.TRANSITION_BOX_CLASS_NAME),t._parent._classNameList.push(r.PRESERVE_3D_CLASS_NAME),t._parent.setClassName(),o===n._Direction._VERTICAL)var _=Math.min(a._stageHeight,a._fullScreenRect._height)/2,c="X";else _=Math.min(a._stageWidth,a._fullScreenRect._width)/2,c="Y";var d=new Transform;if(e===0){if(o===n._Direction._VERTICAL)if(r._fromPrevious)var u=90;else u=-90;else r._fromPrevious?u=-90:u=90;var f="perspective("+_*2+"px) translateZ("+-_+"px) rotate"+c+"("+u+"deg)";d._beforeTranform=f,f=Browser$1.prefix.css+"transform-origin: "+s+"px "+l+"px "+-_+"px;",d._setAdditionCss(f)}else f="perspective("+_*2+"px) translateZ("+-_+"px) rotate"+c+"(0deg)",d._beforeTranform=f,d._setAdditionCss(Browser$1.prefix.css+"transform-origin: "+s+"px "+l+"px "+-_+"px;");t._displayObject._transform=d},proto$V._setTransitionEnd=function(e,t){var r=this,a=r._stage,n=r._switcher.constructor,o=r._direction,s=a._fullScreenRect._width/2,l=a._fullScreenRect._height/2;if(o===n._Direction._VERTICAL)var _=Math.min(a._stageHeight,a._fullScreenRect._height)/2,c="X";else _=Math.min(a._stageWidth,a._fullScreenRect._width)/2,c="Y";var d=new Transform;if(e===0){var u="perspective("+_*2+"px) translateZ("+-_+"px) rotate"+c+"(0deg)";d._beforeTranform=u,u=Browser$1.prefix.css+"transform-origin: "+s+"px "+l+"px "+-_+"px;",d._setAdditionCss(u)}else{if(o===n._Direction._VERTICAL)if(r._fromPrevious)f=-90;else var f=90;else r._fromPrevious?f=90:f=-90;var u="perspective("+_*2+"px) translateZ("+-_+"px) rotate"+c+"("+f+"deg)";d._beforeTranform=u,u=Browser$1.prefix.css+"transform-origin: "+s+"px "+l+"px "+-_+"px;",d._setAdditionCss(u)}t._displayObject._transform=d},proto$V._finish=function(e,t){var r=this,a=t._classNameList.indexOf(r.TRANSITION_BOX_CLASS_NAME);a>=0&&t._classNameList.splice(a,1),a=t._parent._classNameList.indexOf(r.PRESERVE_3D_CLASS_NAME),a>=0&&(t._parent._classNameList.splice(a,1),t._parent.setClassName()),t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(null)},mod.namespace("SceneSwitcher.EffectBox",EffectBox);var EffectCover=function(){EffectCover.__super__.constructor.apply(this,arguments)};EffectCover._name="cover",TransitionEffects._registerEffect(EffectCover._name,EffectCover),mod.extend(EffectCover,EffectCssTransition);var proto$U=EffectCover.prototype;proto$U._setTransitionStart=function(e,t){var r=this,a=r._switcher.constructor;if(e===0){var n=0,o=0,s=1,l=r._direction,_=r._stage,c=r._fromPrevious;l===a._Direction._VERTICAL?c?n=-_._fullScreenRect._height:n=_._fullScreenRect._height:c?o=-_._fullScreenRect._width:o=_._fullScreenRect._width;var d=new Transform,u=d._matrix;u._translate(o,n),d._colorTransform._alphaMultiplier=s}else d=new Transform;t._displayObject._transform=d},proto$U._setTransitionEnd=function(e,t){var r=new Transform;t._displayObject._transform=r},mod.namespace("SceneSwitcher.EffectCover",EffectCover);var EffectFadeIn=function(){EffectFadeIn.__super__.constructor.apply(this,arguments)};EffectFadeIn._name="fadein",TransitionEffects._registerEffect(EffectFadeIn._name,EffectFadeIn),mod.extend(EffectFadeIn,EffectCssTransition);var proto$T=EffectFadeIn.prototype;proto$T._setTransitionStart=function(e,t){var r=new Transform;e===0&&(r._colorTransform._alphaMultiplier=0),t._displayObject._transform=r},proto$T._setTransitionEnd=function(e,t){var r=new Transform;e===0||(r._colorTransform._alphaMultiplier=1),t._displayObject._transform=r},mod.namespace("SceneSwitcher.EffectFadeIn",EffectFadeIn);var EffectFlip=function(){EffectFlip.__super__.constructor.apply(this,arguments),this._enterUp=!1};EffectFlip._name="flip",TransitionEffects._registerEffect(EffectFlip._name,EffectFlip),mod.extend(EffectFlip,EffectCssTransition);var proto$S=EffectFlip.prototype;proto$S._globalInit=function(){},proto$S._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,l=r._direction,_=r._fromPrevious;n._create3DMatrix(!0,!0),a._beforeTranform="perspective("+o._stageWidth*2+"px) ",l===s._Direction._VERTICAL?(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px 0px 0px;"+Browser$1.prefix.css+"transition-timing-function:ease"),_?e===0?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(-90deg)"):a._colorTransform._alphaMultiplier=1:e===1?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(90deg)")):(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;"+Browser$1.prefix.css+"transition-timing-function:ease"),_?e===0?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(-90deg)"):a._colorTransform._alphaMultiplier=1:e===1?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(90deg)")),t._displayObject._transform=a},proto$S._setTransitionEnd=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,l=r._direction,_=r._fromPrevious;n._create3DMatrix(!0,!0),a._colorTransform._alphaMultiplier=1,a._beforeTranform="perspective("+o._stageWidth*2+"px) ",l===s._Direction._VERTICAL?(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px 0px 0px;"),_?e===0?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(90deg)"):e===1?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(-90deg)"):a._colorTransform._alphaMultiplier=1):(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;"),_?e===0?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(90deg)"):e===1?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(-90deg)"):a._colorTransform._alphaMultiplier=1),t._displayObject._transform=a},proto$S._finish=function(e,t){var r=this,a=t._parent._classNameList.indexOf(r.PRESERVE_3D_CLASS_NAME);a>=0&&(t._parent._classNameList.splice(a,1),t._parent.setClassName()),t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(null),t._displayObject._transform._colorTransform._alphaMultiplier=1},mod.namespace("SceneSwitcher.EffectFlip",EffectFlip);var EffectLadder=function(){EffectLadder.__super__.constructor.apply(this,arguments)};EffectLadder._name="ladder",TransitionEffects._registerEffect(EffectLadder._name,EffectLadder),mod.extend(EffectLadder,EffectCssTransition);var proto$R=EffectLadder.prototype;proto$R._setTransitionStart=function(e,t){var r=this,a=r._switcher.constructor;if(e===0){var n=0,o=0,s=1,l=r._direction,_=r._stage,c=r._fromPrevious;l===a._Direction._VERTICAL?c?n=-_._fullScreenRect._height:n=_._fullScreenRect._height:c?o=-_._fullScreenRect._width:o=_._fullScreenRect._width;var d=new Transform,u=d._matrix;u._translate(o,n),d._colorTransform._alphaMultiplier=s}else d=new Transform;t._displayObject._transform=d},proto$R._setTransitionEnd=function(e,t){var r=this;if(e===0)var a=new Transform;else{var n=0,o=0,s=r._direction,l=!r._fromPrevious,_=r._stage,c=r._switcher.constructor;s===c._Direction._VERTICAL?l?n=-_._fullScreenRect._height:n=_._fullScreenRect._height:l?o=-_._fullScreenRect._width:o=_._fullScreenRect._width,a=new Transform;var d=a._matrix;d._translate(o,n)}t._displayObject._transform=a},proto$R._finish=function(e,t){var r=new Transform;t._displayObject._transform=r},mod.namespace("SceneSwitcher.EffectLadder",EffectLadder);var EffectPaging=function(){EffectPaging.__super__.constructor.apply(this,arguments)};EffectPaging._name="paging",TransitionEffects._registerEffect(EffectPaging._name,EffectPaging),mod.extend(EffectPaging,EffectCssTransition);var proto$Q=EffectPaging.prototype;proto$Q._getSmallTrans=function(){var e=this,t=e._stage,r=new Transform,a=t._fullScreenRect._width/2,n=t._fullScreenRect._height/2,o=r._matrix;return o._translate(-a,-n),o._scale(.01,.01),o._translate(a,n),r},proto$Q._setTransitionStart=function(e,t){var r=this;if(e===0)var a=r._getSmallTrans();else a=new Transform;t._displayObject._transform=a},proto$Q._setTransitionEnd=function(e,t){var r=this;if(e===1)var a=r._getSmallTrans();else a=new Transform;t._displayObject._transform=a},mod.namespace("SceneSwitcher.EffectPaging",EffectPaging);var Counter=0,CanvasRender=function(){var e=this;e._id=Counter++,e._renderObjectContainer=null,e._renderObjectList=[],e._canvas=null,e._ctx=null,e._dirty=!1,e._node=null,e._canvasNode=null,e._bindedDomEventCapture={},e._bindedDomEventBubble={},e._thisDispatchInputEvent=e._dispatchInputEvent.bind(e)},availableCanvasList=[],maxCacheCanvasLen=3;CanvasRender._getCanvas=function(e,t,r){if(availableCanvasList.length&&!r)a=availableCanvasList.pop();else var a=document.createElement("canvas");return a.width=e,a.height=t,document.body.appendChild(a),a.style.cssText+="position:absolute;left:-100000px;",a},CanvasRender._returnCanvas=function(e){e.remove(),availableCanvasList.length<maxCacheCanvasLen&&availableCanvasList.push(e)},CanvasRender._initRenderObjectCanvas=function(e){var t=e._displayObject;if(t){var r=t._maskByList;if(r)if(r.length===0)n=t._getRenderObject(),o=new CanvasRender,o._stage=t._getRoot(),o._renderObjectContainer=n._parent,traversal$1(n,function(s){s._canvasRender=o,s._displayObject._haveDom=!1,s._prepareCanvasRender()});else{var a=r[0],n=a._getRenderObject(),o=n._canvasRender;o==null&&(o=new CanvasRender,o._stage=a._getRoot(),o._renderObjectContainer=e._parent,a._maskToList.forEach(function(s){var l=s._getRenderObject();o._renderObjectList.push(l),traversal$1(l,function(_){_._canvasRender=o,_._displayObject._haveDom=!1,_._prepareCanvasRender()})}),r.forEach(function(s){var l=s._getRenderObject();traversal$1(l,function(_){_._canvasRender=o,_._displayObject._haveDom=!1,_._prepareCanvasRender()}),o._renderObjectList.push(l)}))}}},CanvasRender._getCaptureCanvas=function(e,t,r){var a=this;a._canvasRender==null&&(a._canvasRender=new CanvasRender,a._stage=e._getRoot());var n=a._stage._transform._matrix,o=t===a._stage?n:Matrix._multiplication(n,t._getTotalMatrix()),s=o._getScaleX()*Math.max(2,Browser$1.devicePixelRatio),l=o._getScaleY()*Math.max(2,Browser$1.devicePixelRatio),_=t._rawWidth*s,c=t._rawHeight*l,d=Math.sqrt(1080*1920/_/c);d<1&&(s*=d,l*=d,_=t._rawWidth*s,c=t._rawHeight*l);var u=CanvasRender._getCanvas(_,c,!0),f=u.getContext("2d");if(a._canvasRender._canvasNode=u,e!==t)var p=e._transform._matrix._inverse(),v=t._transform._matrix._inverse(),h=Matrix._multiplication(v,p);else var h=t._transform._matrix._inverse();h._scale(s,l);var g=function(){a._canvasRender.drawItem(e,f,h,1,null,null,!0),r(u,function(){CanvasRender._returnCanvas(u)})},w=e._getRenderObject(),y=0,x=function(m){m._displayObject._getRealVisible()!==!1&&(m._prepareCapture&&(m._prepareCapture(function(){--y===0&&g()}),y++),m._children.forEach(x))};x(w),y===0&&g()};var proto$P=CanvasRender.prototype;proto$P._setDisplayInitState=function(){var e=this;e._html==null?Browser$1.os.ios?e._html='<canvas style="border: 1px solid transparent; margin: -1px 0 0 -1px;" data-type="canvas" class="mugeda_render_object" data-mid="C'+e._id+'" width="0" height="0"></canvas>':e._html='<canvas data-type="canvas" class="mugeda_render_object" data-mid="C'+e._id+'" width="0" height="0"></canvas>':e._html=""},proto$P._getNode=function(){var e=this;if(e._node==null){var t=document.querySelector('[data-mid="C'+e._id+'"]'),r=t;e._node=t,e._node._canvasMatrix=new Matrix,e._canvasNode=r,e._ctx=r.getContext("2d"),e._renderObjectList.forEach(function(n){traversal$1(n,function(o){o._initActionAndEvent()})});var a=e._renderObjectContainer;a&&(a._displayObject._type==="scene"&&(a=a._parent),a&&a._displayObject._addEventListener("rendered",function(){if(e._renderObjectList.length){var n=e._renderObjectList[0]._displayObject;n._dispatchEvent(n._changedEvent)}}))}return e._node};var traversal$1=function(e,t){var r={stopFlag:!1};t(e,r);for(var a=e._children,n=a.length,o=0;o<n;o++){var s=a[o];traversal$1(s,t)}};proto$P._redraw=function(e){var t=this;t._getNode();var r=t._ctx,a=t._renderObjectList,n=a.map(function($){return $._displayObject}),o=new Matrix(1,0,0,1);n[0]&&n[0]._parent&&n[0]._parent._offsetMatrix&&(o=Matrix._multiplication(o,n[0]._parent._offsetMatrix));var s=t.redrawGroup(null,n,o,null,!0,1,e),l=s[0],_=s[1],c=1,d=1;if(n[0]&&n[0]._parent){var u=n[0]._parent._getTotalMatrix();c=u._a,d=u._d}if(n[0])var f=n[0]._getRoot();if(f){var p=Math.max(d,c),v=p*Math.max(f._scaleX,f._scaleY),h=v*Browser$1.devicePixelRatio;if(Browser$1.os.tablet||Browser$1.os.phone){var g=Math.sqrt(166400/(_._x-l._x)/(_._y-l._y));h>g&&(h=g)}var w=s[1],y=s[2],x=s[3];y._x*=h,y._y*=h,x._x*=h,x._y*=h,w._x*=h,w._y*=h;var m=new Point(Math.floor(y._x),Math.floor(y._y)),A=new Point(y._x-m._x,y._y-m._y),T=new Point;if(x._x<=y._x)T._x=m._x;else{var b=x._x-y._x+A._x;T._x=x._x-(b-Math.floor(b))}x._y<=y._y?T._y=m._y:(b=x._y-y._y+A._y,T._y=x._y-(b-Math.floor(b)));var C=new Matrix(h,0,0,h,-T._x,-T._y);if(n[0]&&n[0]._parent&&n[0]._parent._offsetMatrix)var M=Matrix._multiplication(C,n[0]._parent._offsetMatrix);else M=C;var E=Math.ceil(w._x-T._x),O=Math.ceil(w._y-T._y);if(t._canvasNode.width=E,t._canvasNode.height=O,Browser$1.os.ios)var S=function($){t._iAm3d=$;for(var R=t._renderObjectContainer._children,I=R.indexOf(t._renderObjectList[t._renderObjectList.length-1]),P=I+1;P<R.length;P++){var F=R[P],N=F._3dBrotherCounter;$?F._3dBrotherCounter++:F._3dBrotherCounter--,!!N!=!!F._3dBrotherCounter&&F._displayObject._dispatchEvent(F._displayObject._changed3dEvent)}var j=t._renderObjectContainer,U=j._displayObject;U&&U._type==="scene"&&(j=j._parent),U&&U._id>1&&RenderObject._set3dCounter($,j,!0)};if(E===0&&O===0)t._node.style.cssText+="display:none;",Browser$1.os.ios&&S(!1);else{r.setTransform(1,0,0,1,0,0),r.globalAlpha=1,r.clearRect(0,0,E,O),E>0&&O>0&&t.redrawGroup(r,n,M,null,null,h/p,e);var L="",D=Browser$1.os.android&&Browser$1.isWeChat();D&&(L=" translateZ(0)"),Browser$1.os.ios&&(S(!0),L=" translateZ(0)"),t._node._canvasMatrix=C._inverse(),t._node.style.cssText+=Browser$1.prefix.css+"transform: "+t._node._canvasMatrix._toCssText()+L+";display:block;"}}},proto$P.redrawGroup=function(e,t,r,a,n,o,s){var l=this;if(n)var _=[],c=[];r==null&&(r=new Matrix(Browser$1.devicePixelRatio,null,null,Browser$1.devicePixelRatio),t[0]&&t[0]._parent&&t[0]._parent._offsetMatrix&&(r=Matrix._multiplication(r,t[0]._parent._offsetMatrix))),a=a??1;for(var d=t.length,u=0;u<d;u++){var f=t[u],p=f._maskByList,v=p&&p.length?p[0]._maskToList:null;if(p&&v){if(e){var h=l._canvasNode.width,g=l._canvasNode.height,w=CanvasRender._getCanvas(h,g,s),y=w.getContext("2d");y.setTransform(1,0,0,1,0,0),y.globalAlpha=1,y.clearRect(0,0,h,g),y.globalCompositeOperation="source-over"}if(p.forEach(function(R){l.drawItem(R,y,r,a,_,o,s)}),e){var x=CanvasRender._getCanvas(h,g,s),m=x.getContext("2d");m.setTransform(1,0,0,1,0,0),m.globalAlpha=1,m.clearRect(0,0,h,g),m.globalCompositeOperation="source-over"}v.forEach(function(R){l.drawItem(R,m,r,a,c,o,s)}),e&&(y.globalCompositeOperation="source-in",y.setTransform(1,0,0,1,0,0),y.drawImage(x,0,0),CanvasRender._returnCanvas(x),e.setTransform(1,0,0,1,0,0),e.drawImage(w,0,0),CanvasRender._returnCanvas(w));do var A=t[++u];while(A!=null&&(A._maskByList||A._maskToList));u--}else l.drawItem(f,e,r,a,_,o,s)}if(n){var T=1/0,b=1/0,C=-1/0,M=-1/0;if(c.forEach(function(R){R._nodes.forEach(function(I){I._x<T&&(T=I._x),I._x>C&&(C=I._x),I._y<b&&(b=I._y),I._y>M&&(M=I._y)})}),c.length==0)E=new Point(-1/0,-1/0),O=new Point(1/0,1/0);else var E=new Point(T,b),O=new Point(C,M);if(T=1/0,b=1/0,C=-1/0,M=-1/0,_.forEach(function(R){R._nodes.forEach(function(I){I._x<T&&(T=I._x),I._x>C&&(C=I._x),I._y<b&&(b=I._y),I._y>M&&(M=I._y)})}),_.length==0)S=new Point(0,0),L=new Point(0,0);else var S=new Point(T,b),L=new Point(C,M);if(E._x>L._x||O._x<S._x||E._y>L._y||O._y<S._y)var D=new Point(0,0),$=new Point(0,0);else D=new Point(Math.max(S._x,E._x),Math.max(S._y,E._y)),$=new Point(Math.min(L._x,O._x),Math.min(L._y,O._y));return[D,$,E,S]}},proto$P.drawItem=function(e,t,r,a,n,o,s){if(e._visible){t&&(t.filter="none");var l=e._transform,_=l._matrix,c=l._colorTransform._alphaMultiplier;e._offsetMatrix&&(_=Matrix._multiplication(_,e._offsetMatrix));var d=Matrix._multiplication(r,_);if(e._flipMatrix&&(d=Matrix._multiplication(d,e._flipMatrix)),Math.abs(d._tx-Math.round(d._tx))<1e-4&&(d._tx=Math.round(d._tx)),Math.abs(d._ty-Math.round(d._ty))<1e-4&&(d._ty=Math.round(d._ty)),c=c*a,e.children&&e.children.length){var u=this.redrawGroup(t,e.children,d,c,n,o,s);if(n){var f=new Boundary,p=u[0],v=u[1];f._addPoint(p),f._addPoint(new Point(v._x,p._y)),f._addPoint(v),f._addPoint(new Point(p._x,v._y)),n.push(f)}}else{var h=d._a,g=d._b,w=d._c,y=d._d,x=new Matrix(Math.sqrt(h*h+g*g),0,0,Math.sqrt(w*w+y*y)),m=Matrix._multiplication(d,x._inverse());if(n)n.push(e._getBoundary(d,o));else{t.setTransform(m._a,m._b,m._c,m._d,m._tx,m._ty),t.globalAlpha=c;var A=e._getRenderObject();t.filter=l._colorTransform._generateFilterString(),A._redraw&&A._redraw(t,x,o,s)}}}},proto$P._getBoundaryOfDisplayObjectList=function(e){var t=new Point,r=new Point,a=new Point,n=new Point,o=new Point(-1/0,-1/0),s=new Point(1/0,1/0);e.forEach(function(l){var _=l._x,c=l._y,d=l._rawWidth,u=l._rawHeight,f=l._transform._matrix;t._x=_,t._y=c,r._x=_,r._y=c+u,a._x=_+d,a._y=c,n._x=_+d,n._y=c+u,f._transform(t,!0),f._transform(r,!0),f._transform(a,!0),f._transform(n,!0),o._x=Math.min(t._x,r._x,a._x,n._x),o._y=Math.min(t._y,r._y,a._y,n._y),s._x=Math.max(t._x,r._x,a._x,n._x),s._y=Math.max(t._y,r._y,a._y,n._y)})},proto$P._dispatchInputEvent=function(e){var t=this,r=e.type;e.target;var a=new InputEvent(r,e);a._stage=t._stage;var n=a._getInputX(),o=a._getInputY(),s=t._renderObjectContainer._displayObject;s._type=="scene"&&(s=t._renderObjectContainer._parent._displayObject);var l=new Point(n,o),_=s._getTotalMatrix();s._offsetMatrix&&(_=Matrix._multiplication(s._offsetMatrix,_));var c=_,d=RenderObject._findClickDisplayObject(t._renderObjectList.map(function(h){return h._displayObject}),l,c);if(d){for(var u=d,f=[u];u._parent!=s;)u=u._parent,f.push(u);a._eventPhase=e.eventPhase,a._target=d;var p=f.length;if(a._eventPhase==EventPhase.CAPTURING_PHASE)for(var v=p-1;v>=0;v--)f[v]._dispatchEvent(a);else d._dispatchEvent(a)}},CanvasRender.getFillPattern=function(e,t,r,a,n){if(t instanceof GraphicsSolidFill)return CanvasRender.getSolidFill(e,t,r,a);if(t instanceof GraphicsImageFill)return CanvasRender.getBitmapFill(e,t,r,a,n);if(t instanceof GraphicsGradientFill)return CanvasRender.getGradientFill(e,t,r,a)},CanvasRender.getSolidFill=function(e,t,r,a){return t._getFill()},CanvasRender.getGradientFill=function(e,t,r,a){if(t.type==GradientType.LINEAR){var n=e.createLinearGradient(t.fillStartPos._x*r,t.fillStartPos._y*a,t.fillEndPos._x*r,t.fillEndPos._y*a),o=t.ratios;t.colors.forEach(function(c,d){var u=Math.abs(o[d])<.001?0:o[d];n.addColorStop(u,c._getCssText())})}else{var s=Math.abs(t.fillEndPos._x-t.fillStartPos._x)*r,l=Math.abs(t.fillEndPos._y-t.fillStartPos._y)*a,_=Math.sqrt(s*s+l*l);n=e.createRadialGradient(t.fillStartPos._x*r,t.fillStartPos._y*a,0,t.fillStartPos._x*r,t.fillStartPos._y*a,_),o=t.ratios,t.colors.forEach(function(c,d){var u=Math.abs(o[d])<.001?0:o[d];n.addColorStop(u,c._getCssText())})}return n},CanvasRender.getBitmapFill=function(e,t,r,a,n){var o=t._imageSize,s=t._imagePosition,l=getImageSizePosition(t._bitmapData._image,n._getWidth(),n._getHeight(),o,s,t._horOffset,t._verOffset),_=document.createElement("canvas"),c=_.getContext("2d");_.width=l.desWidth*r,_.height=l.desHeight*a;var d=t._bitmapData._image;return c.drawImage(d,l.srcLeft,l.srcTop,l.srcWidth,l.srcHeight,l.desLeft*r,l.desTop*a,l.desWidth*r/(n.scaleX||1),l.desHeight*a/(n.scaleY||1)),e.createPattern(_,t._imageSize=="tile"?"repeat":"no-repeat")};var getImageSizePosition=function(e,t,r,a,n,o,s){var l=e.width,_=e.height,c=l/_,d=t/r,u={};return a=="cover"?(u.desHeight=r,u.desWidth=t,c<d?(u.srcWidth=l,u.srcHeight=l/d):(u.srcHeight=_,u.srcWidth=_*d)):a=="contain"?(u.srcWidth=l,u.srcHeight=_,c>d?(u.desWidth=t,u.desHeight=t/c):(u.desHeight=r,u.desWidth=r*c)):a=="width"?(u.desWidth=t,u.desHeight=r,u.srcWidth=l,u.srcHeight=l/d):a=="height"?(u.desWidth=t,u.desHeight=r,u.srcWidth=_*d,u.srcHeight=_):a=="fill"?(u.desHeight=r,u.desWidth=t,u.srcWidth=l,u.srcHeight=_):a=="tile"?(u.desWidth=l,u.desHeight=_,u.srcWidth=l,u.srcHeight=_):(u.desHeight=r,u.desWidth=t,u.srcWidth=t,u.srcHeight=r),a=="tile"?(u.srcLeft=0,u.desLeft=0):n=="center"||n=="top"||n=="bottom"?(u.srcLeft=(l-u.srcWidth)/2-o,u.desLeft=(t-u.desWidth)/2):n.indexOf("left")>=0?(u.srcLeft=-o,u.desLeft=0):n.indexOf("right")>=0&&(u.srcLeft=l-u.srcWidth+o,u.desLeft=t-u.desWidth),a=="tile"?(u.srcTop=0,u.desTop=0):n=="center"||n=="left"||n=="right"?(u.srcTop=(_-u.srcHeight)/2-s,u.desTop=(r-u.desHeight)/2):n.indexOf("top")>=0?(u.srcTop=-s,u.desTop=0):n.indexOf("bottom")>=0&&(u.srcTop=_-u.srcHeight+s,u.desTop=r-u.desHeight),u};CanvasRender.createFillPattern=function(e,t,l,_){var n="#93C9FF",o,s,l=l||1,_=_||1;if(t._fillType!==FillType.IMAGE)if(t._fillType===FillType.COLOR)n=t._fillVal._getCssText();else if(t._fillType===FillType.LINEAR)for(n=e.createLinearGradient(t._fillVal._p0.x*l,t._fillVal._p0.y*_,t._fillVal._p1.x*l,t._fillVal._p1.y*_),o=0;o<t._fillVal._colors.length;o++)s=t._fillVal._colors[o],f=t._fillVal._ratios[o],n.addColorStop(f,s._getCssText());else if(t._fillType===FillType.RADIAL){var c=Math.abs(t._fillVal._p1.x-t._fillVal._p0.x)*l,d=Math.abs(t._fillVal._p1.y-t._fillVal._p0.y)*_,u=Math.sqrt(c*c+d*d);for(n=e.createRadialGradient(t._fillVal._p0.x*l,t._fillVal._p0.y*_,0,t._fillVal._p0.x*l,t._fillVal._p0.y*_,u),o=0;o<t._fillVal._colors.length;o++){s=t._fillVal._colors[o];var f=t._fillVal._ratios[o];n.addColorStop(f,s._getCssText())}}else n="rgba(255,255,255,0)";return n},mod.namespace("Render.CanvasRender",CanvasRender);var EffectCanvasTransition=function(){EffectCanvasTransition.__super__.constructor.apply(this,arguments)};mod.extend(EffectCanvasTransition,TransitionEffect);var proto$O=EffectCanvasTransition.prototype;proto$O._start=function(e,t){var r=this;e===0?CanvasRender._getCaptureCanvas(r._stage,r._stage,function(a,n){r._toSceneRenderObject._displayObject._setVisible(!0);var o=document.createElement("canvas");o.width=a.width,o.height=a.height,o.style.cssText="position:absolute;width:100%;height:100%;left:0;top:0;z-index:1",r._fromSceneRenderObject.getNode(!0).appendChild(o),r._fromSceneRenderObject._displayObject._setVisible(!1),r._fromSceneRenderObject._setStaticPosition(null,!0,!0),r._toSceneRenderObject._displayObject._setVisible(!1),r._toSceneRenderObject._setStaticPosition(null,!0,!0),r._draw(r.fromCanvas,a,o,function(){r.fromCanvasDone(),r._toSceneRenderObject._displayObject._setVisible(!0),r._toSceneRenderObject._setStaticPosition(null,!0,!0),n(),o.parentNode.removeChild(o),t()})}):e===1&&CanvasRender._getCaptureCanvas(r._stage,r._stage,function(a,n){r.fromCanvas=a,r.fromCanvasDone=n,t()}),CanvasRender._getCaptureCanvas(r._stage,r._stage,function(a,n){})},proto$O._end=function(e,t){t()},mod.namespace("SceneSwitcher.EffectCanvasTransition",EffectCanvasTransition);var EffectDrawBox=function(){EffectDrawBox.__super__.constructor.apply(this,arguments)};EffectDrawBox._name="drawBox",TransitionEffects._registerEffect(EffectDrawBox._name,EffectDrawBox),mod.extend(EffectDrawBox,EffectCanvasTransition);var proto$N=EffectDrawBox.prototype;proto$N._draw=function(e,t,r,a){var n=this,o=n._stage._renderManager.constructor.requestAnimationFrame,s=n._duration,l=null,_=r.width,c=r.height,d=e.width,u=e.height,f=10,p=Math.round(f/_*c),v=_/f,h=c/p,g=d/f,w=u/p,y=r.getContext("2d");console.log("draw");function x(m){l||(l=m);var A=m-l,T=Math.min(1,A/s);y.drawImage(e,0,0,_,c);for(var b=v*T,C=h*T,M=0;M<f;M++)for(var E=0;E<p;E++)y.drawImage(t,g*M,w*E,g,w,v*(M+.5)-b/2,h*(E+.5)-C/2,b,C);A<s?window.requestAnimationFrame(x):(console.log("end"),a())}o(x)},mod.namespace("SceneSwitcher.EffectDrawBox",EffectDrawBox);var EffectBackWard=function(){EffectBackWard.__super__.constructor.apply(this,arguments),this._enterUp=!1};EffectBackWard._name="backward",TransitionEffects._registerEffect(EffectBackWard._name,EffectBackWard),mod.extend(EffectBackWard,EffectCssTransition);var proto$M=EffectBackWard.prototype;proto$M._globalInit=function(){},proto$M._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,l=r._direction,_=r._fromPrevious;n._create3DMatrix(!0,!0),a._beforeTranform="perspective("+o._stageHeight*2+"px) ",l===s._Direction._VERTICAL?(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;"+Browser$1.prefix.css+"transition-timing-function:ease"),_?e===0?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(90deg)"):a._colorTransform._alphaMultiplier=1:e===1?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(0)")):(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;"+Browser$1.prefix.css+"transition-timing-function:ease"),_?e===0?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(90deg)"):a._colorTransform._alphaMultiplier=1:e===1?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(0)")),t._displayObject._transform=a},proto$M._setTransitionEnd=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,l=r._direction,_=r._fromPrevious;n._create3DMatrix(!0,!0),a._colorTransform._alphaMultiplier=1,a._beforeTranform="perspective("+o._stageHeight*2+"px) ",l===s._Direction._VERTICAL?(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;"),_?e===0?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(0)"):e===1?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(90deg)"):a._colorTransform._alphaMultiplier=1):(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;"),_?e===0?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(0)"):e===1?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(90deg)"):a._colorTransform._alphaMultiplier=1),t._displayObject._transform=a},proto$M._finish=function(e,t){var r=this,a=t._parent._classNameList.indexOf(r.PRESERVE_3D_CLASS_NAME);a>=0&&(t._parent._classNameList.splice(a,1),t._parent.setClassName()),t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(null)},mod.namespace("SceneSwitcher.EffectBackWard",EffectBackWard);var EffectFallWard=function(){EffectFallWard.__super__.constructor.apply(this,arguments)};EffectFallWard._name="fallward",TransitionEffects._registerEffect(EffectFallWard._name,EffectFallWard),mod.extend(EffectFallWard,EffectCssTransition);var proto$L=EffectFallWard.prototype;proto$L._globalInit=function(){},proto$L._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,l=r._direction,_=r._fromPrevious;n._create3DMatrix(!0,!0),a._beforeTranform="perspective("+o._stageHeight*2+"px) ",l===s._Direction._VERTICAL?(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;"+Browser$1.prefix.css+"transition-timing-function:ease"),_?e===0?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(-90deg)"):a._colorTransform._alphaMultiplier=1:e===1?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(0)")):(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;"+Browser$1.prefix.css+"transition-timing-function:ease"),_?e===0?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(-90deg)"):a._colorTransform._alphaMultiplier=1:e===1?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(0)")),t._displayObject._transform=a},proto$L._setTransitionEnd=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,l=r._direction,_=r._fromPrevious;n._create3DMatrix(!0,!0),a._colorTransform._alphaMultiplier=1,a._beforeTranform="perspective("+o._stageHeight*2+"px) ",l===s._Direction._VERTICAL?(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;"),_?e===0?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(0)"):e===1?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(-90deg)"):a._colorTransform._alphaMultiplier=1):(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;"),_?e===0?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(0)"):e===1?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(-90deg)"):a._colorTransform._alphaMultiplier=1),t._displayObject._transform=a},proto$L._finish=function(e,t){var r=this,a=t._parent._classNameList.indexOf(r.PRESERVE_3D_CLASS_NAME);a>=0&&(t._parent._classNameList.splice(a,1),t._parent.setClassName()),t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(null)},mod.namespace("SceneSwitcher.EffectFallWard",EffectFallWard);var EffectCut=function(){EffectCut.__super__.constructor.apply(this,arguments)};EffectCut._name="cut",TransitionEffects._registerEffect(EffectCut._name,EffectCut),mod.extend(EffectCut,EffectCssTransition);var proto$K=EffectCut.prototype;proto$K._globalInit=function(){var e=document.createElement("style"),t=Mugeda.scene._stage;e.type="text/css",e.innerHTML="        @keyframes CUT_X_AGO_OBJ_ONE{            0% {                left : 0;                z-index:10;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(1, 1, 1);                transform-origin : "+t._stageWidth+"px "+t._stageHeight/2+"px 0;            }            50% {                z-index:5;                left : "+t._stageWidth/2.5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-25deg) scale3d(.75, .75, 1);                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }            90% {                z-index:-1;            }            100% {                z-index:-1;                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(.5, .5, 1);                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }        }        @keyframes CUT_X_AGO_OBJ_TWO{            0% {                z-index:-1;                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(.5, .5, 1);                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }            50% {                z-index:5;                left : "+-(t._stageWidth/2.5)+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(25deg) scale3d(.75, .75, 1);                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }            90% {                z-index:10;            }            100% {                z-index:10;                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(1, 1, 1);                transform-origin : "+t._stageWidth+"px "+t._stageHeight/2+"px 0;            }        }        @keyframes CUT_X_BACK_OBJ_ONE{             0% {                left : 0;                z-index:-1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(.5, .5, 1);                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }            50% {                z-index:5;                left : "+t._stageWidth/2.5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-25deg scale3d(.75, .75, 1));                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }            90% {                z-index:10;            }            100% {                z-index:10;                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(1, 1, 1);                transform-origin : "+t._stageWidth+"px "+t._stageHeight/2+"px 0;            }        }        @keyframes CUT_X_BACK_OBJ_TWO{            0% {                z-index:10;                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(1, 1, 1);                transform-origin : "+t._stageWidth+"px "+t._stageHeight/2+"px 0;            }            50% {                z-index:5;                left : "+-(t._stageWidth/2.5)+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(25deg) scale3d(.75, .75, 1);                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }            90% {                z-index:-1;            }            100% {                z-index:-1;                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(.5, .5, 1);                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }        }        @keyframes CUT_Y_AGO_OBJ_ONE{            0% {                top : 0;                z-index:10;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(1, 1, 1);            }            50% {                z-index:5;                top : "+t._stageHeight/2.5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-45deg) scale3d(.75, .75, 1);            }            90% {                z-index:-1;            }            100% {                z-index:-1;                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(.5, .5, 1);            }        }        @keyframes CUT_Y_AGO_OBJ_TWO{            0% {                z-index:-1;                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(.5, .5, 1);            }            50% {                z-index:5;                top : "+-(t._stageHeight/2.5)+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(45deg) scale3d(.75, .75, 1);            }            90% {                z-index:10;            }            100% {                z-index:10;                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(1, 1, 1);            }        }        @keyframes CUT_Y_BACK_OBJ_ONE{             0% {                top : 0;                z-index:-1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(.5, .5, 1);            }            50% {                z-index:5;                top : "+t._stageHeight/2.5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-45deg) scale3d(.75, .75, 1);            }            90% {                z-index:10;            }            100% {                z-index:10;                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(1, 1, 1);            }        }        @keyframes CUT_Y_BACK_OBJ_TWO{            0% {                z-index:10;                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(1, 1, 1);            }            50% {                z-index:5;                top : "+-(t._stageHeight/2.5)+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(45deg) scale3d(.75, .75, 1);            }            90% {                z-index:-1;            }            100% {                z-index:-1;                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(.5, .5, 1);            }        }    ",document.getElementsByTagName("HEAD").item(0).appendChild(e)},proto$K._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,l=r._direction,_=r._fromPrevious;n._create3DMatrix(!0,!0);var c="";if(n._create3DMatrix(!0,!0),l===s._Direction._VERTICAL){Math.min(o._stageHeight,o._fullScreenRect._height)/2;var d="X"}else{Math.min(o._stageWidth,o._fullScreenRect._width)/2;var d="Y"}d=="Y"?_?e==0?c+=Browser$1.prefix.css+"animation:CUT_X_BACK_OBJ_ONE "+this._duration/1e3+"s linear;":c+=Browser$1.prefix.css+"animation:CUT_X_BACK_OBJ_TWO "+this._duration/1e3+"s linear;":e==1?c+=Browser$1.prefix.css+"animation:CUT_X_AGO_OBJ_ONE "+this._duration/1e3+"s linear;":c+=Browser$1.prefix.css+"animation:CUT_X_AGO_OBJ_TWO "+this._duration/1e3+"s linear;":_?e==0?(c+=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;",c+=Browser$1.prefix.css+"animation:CUT_Y_BACK_OBJ_ONE "+this._duration/1e3+"s linear;"):(c+=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px "+o._stageHeight/2+"px;",c+=Browser$1.prefix.css+"animation:CUT_Y_BACK_OBJ_TWO "+this._duration/1e3+"s linear;"):e==1?(c+=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px "+o._stageHeight/2+"px;",c+=Browser$1.prefix.css+"animation:CUT_Y_AGO_OBJ_ONE "+this._duration/1e3+"s linear;"):(c+=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;",c+=Browser$1.prefix.css+"animation:CUT_Y_AGO_OBJ_TWO "+this._duration/1e3+"s linear;"),a._setAdditionCss(c),t._displayObject._transform=a},proto$K._setTransitionEnd=function(e,t){},proto$K._finish=function(e,t){t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(" "),t._node.style[Browser$1.prefix.css+"transform-origin"]="",t._node.style[Browser$1.prefix.css+"animation"]=""},mod.namespace("SceneSwitcher.EffectCut",EffectCut);var EffectTurn=function(){EffectTurn.__super__.constructor.apply(this,arguments)};EffectTurn._name="turn",TransitionEffects._registerEffect(EffectTurn._name,EffectTurn),mod.extend(EffectTurn,EffectCssTransition);var proto$J=EffectTurn.prototype;proto$J._globalInit=function(){var e=document.createElement("style"),t=Mugeda.scene._stage;e.type="text/css",e.innerHTML="        @keyframes TURN_X_AGO_OBJ_ONE{            0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(180deg);            }        }        @keyframes TURN_X_AGO_OBJ_TWO{            0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-180deg);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0);            }        }        @keyframes TURN_X_BACK_OBJ_ONE{             0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-180deg);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-360deg);            }        }        @keyframes TURN_X_BACK_OBJ_TWO{            0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(360deg);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(180deg);            }        }        @keyframes TURN_Y_AGO_OBJ_ONE{            0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(180deg);            }        }        @keyframes TURN_Y_AGO_OBJ_TWO{            0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-180deg);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0);            }        }        @keyframes TURN_Y_BACK_OBJ_ONE{             0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-180deg);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-360deg);            }        }        @keyframes TURN_Y_BACK_OBJ_TWO{            0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(360deg);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(180deg);            }        }    ",document.getElementsByTagName("HEAD").item(0).appendChild(e)},proto$J._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix;r._stage,r._switcher.constructor,r._direction,r._fromPrevious,n._create3DMatrix(!0,!0),t._displayObject._transform=a},proto$J._setTransitionEnd=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,l=r._direction,_=r._fromPrevious;if(n._create3DMatrix(!0,!0),l===s._Direction._VERTICAL){Math.min(o._stageHeight,o._fullScreenRect._height)/2;var c="X"}else{Math.min(o._stageWidth,o._fullScreenRect._width)/2;var c="Y"}var d=r._stage._fullScreenRect,u=d._width/2,f=d._height/2;if(c=="Y")if(_)if(e==0){var p=Browser$1.prefix.css+"transform-origin: "+u+"px "+f+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_X_BACK_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var p=Browser$1.prefix.css+"transform-origin: "+u+"px "+f+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_X_BACK_OBJ_TWO "+this._duration/1e3+"s linear;"}else if(e==1){var p=Browser$1.prefix.css+"transform-origin: "+u+"px "+f+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_X_AGO_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var p=Browser$1.prefix.css+"transform-origin: "+u+"px "+f+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_X_AGO_OBJ_TWO "+this._duration/1e3+"s linear;"}else if(_)if(e==0){var p=Browser$1.prefix.css+"transform-origin: "+u+"px "+f+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_Y_BACK_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var p=Browser$1.prefix.css+"transform-origin: "+u+"px "+f+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_Y_BACK_OBJ_TWO "+this._duration/1e3+"s linear;"}else if(e==1){var p=Browser$1.prefix.css+"transform-origin: "+u+"px "+f+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_Y_AGO_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var p=Browser$1.prefix.css+"transform-origin: "+u+"px "+f+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_Y_AGO_OBJ_TWO "+this._duration/1e3+"s linear;"}a._setAdditionCss(p),t._displayObject._transform=a},proto$J._finish=function(e,t){t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(" "),t._node.style[Browser$1.prefix.css+"transform-origin"]="",t._node.style[Browser$1.prefix.css+"animation"]=""},mod.namespace("SceneSwitcher.EffectTurn",EffectTurn);var EffectBank=function(){EffectBank.__super__.constructor.apply(this,arguments)};EffectBank._name="bank",TransitionEffects._registerEffect(EffectBank._name,EffectBank),mod.extend(EffectBank,EffectCssTransition);var proto$I=EffectBank.prototype;proto$I._globalInit=function(){var e=document.createElement("style"),t=Mugeda.scene._stage;e.type="text/css",e.innerHTML="        @keyframes BANK_X_AGO_OBJ_ONE{            0% {                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            33% {                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-20deg) scale(1);            }            66%{                left : -"+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-20deg) scale(0.79);            }            100% {                left : -"+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }        }        @keyframes BANK_X_AGO_OBJ_TWO{            0% {                left : "+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            33% {                left : "+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-20deg) scale(1.21);            }            66% {                left : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-20deg) scale(1);            }            100% {                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }        }        @keyframes BANK_X_BACK_OBJ_ONE{            0% {                left : -"+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            33% {                left : -"+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(20deg) scale(1.21);            }            66%{                left : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(20deg) scale(1);            }            100% {                left : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0);            }        }        @keyframes BANK_X_BACK_OBJ_TWO{          0% {                left : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            33% {                left : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(20deg) scale(1);            }            66% {                left : "+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(20deg) scale(0.79);            }            100% {                left : "+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }        }        @keyframes BANK_Y_AGO_OBJ_ONE{            0% {                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }            33% {                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(25deg) scale(1);            }            66%{                top : -"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(25deg) scale(0.79);            }            100% {                top : -"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }        @keyframes BANK_Y_AGO_OBJ_TWO{            0% {                top : "+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(25deg) scale(1);            }            33% {                top : "+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(25deg) scale(1.21);            }            66% {                top : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(25deg) scale(1);            }            100% {                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }        @keyframes BANK_Y_BACK_OBJ_ONE{             0% {                top : -"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }            33% {                top : -"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-25deg) scale(1.21);            }            66%{                top : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-25deg) scale(1);            }            100% {                top : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }        @keyframes BANK_Y_BACK_OBJ_TWO{            0%{                top : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }            33% {                top : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-25deg) scale(1);            }            66% {                top : "+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-25deg) scale(0.79);            }            100% {                top : "+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }    ",document.getElementsByTagName("HEAD").item(0).appendChild(e)},proto$I._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix;r._stage,r._switcher.constructor,r._direction,r._fromPrevious,n._create3DMatrix(!0,!0),e==0?a._setAdditionCss("z-index:-1"):a._setAdditionCss("z-index:10"),t._displayObject._transform=a},proto$I._setTransitionEnd=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,l=r._direction,_=r._fromPrevious;if(n._create3DMatrix(!0,!0),l===s._Direction._VERTICAL){Math.min(o._stageHeight,o._fullScreenRect._height)/2;var c="X"}else{Math.min(o._stageWidth,o._fullScreenRect._width)/2;var c="Y"}if(c=="Y")if(_)if(e==0){var d=Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:BANK_X_BACK_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:BANK_X_BACK_OBJ_TWO "+this._duration/1e3+"s ease;"}else if(e==1){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:BANK_X_AGO_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:BANK_X_AGO_OBJ_TWO "+this._duration/1e3+"s ease;"}else if(_)if(e==0){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px 0px 0px;";d+=Browser$1.prefix.css+"animation:BANK_Y_BACK_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px 0px 0px;";d+=Browser$1.prefix.css+"animation:BANK_Y_BACK_OBJ_TWO "+this._duration/1e3+"s ease;"}else if(e==1){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;";d+=Browser$1.prefix.css+"animation:BANK_Y_AGO_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;";d+=Browser$1.prefix.css+"animation:BANK_Y_AGO_OBJ_TWO "+this._duration/1e3+"s ease;"}a._setAdditionCss(d),t._displayObject._transform=a},proto$I._finish=function(e,t){t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(" "),t._node.style[Browser$1.prefix.css+"transform-origin"]="",t._node.style[Browser$1.prefix.css+"animation"]=""},mod.namespace("SceneSwitcher.EffectBank",EffectBank);var EffectZoom=function(){EffectZoom.__super__.constructor.apply(this,arguments)};EffectZoom._name="zoom",TransitionEffects._registerEffect(EffectZoom._name,EffectZoom),mod.extend(EffectZoom,EffectCssTransition);var proto$H=EffectZoom.prototype;proto$H._globalInit=function(){var e=document.createElement("style"),t=Mugeda.scene._stage;e.type="text/css",e.innerHTML="        @keyframes ZOOM_X_AGO_OBJ_ONE{            0% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }            100% {                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }        }        @keyframes ZOOM_X_AGO_OBJ_TWO{            0% {                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(0.5, 0.5);            }            100% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(1, 1);            }        }        @keyframes ZOOM_X_BACK_OBJ_ONE{            0%{                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }            100% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }        }        @keyframes ZOOM_X_BACK_OBJ_TWO{            0% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(1, 1);            }            100% {                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(0.5, 0.5);            }        }        @keyframes ZOOM_Y_AGO_OBJ_ONE{            0% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }            100% {                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }        }        @keyframes ZOOM_Y_AGO_OBJ_TWO{            0% {                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(0.5, 0.5);            }            100% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(1, 1);            }        }        @keyframes ZOOM_Y_BACK_OBJ_ONE{            0%{                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }            100% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }        }        @keyframes ZOOM_Y_BACK_OBJ_TWO{            0% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(1, 1);            }            100% {                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(0.5, 0.5);            }        }    ",document.getElementsByTagName("HEAD").item(0).appendChild(e)},proto$H._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix;r._stage,r._switcher.constructor,r._direction,r._fromPrevious,n._create3DMatrix(!0,!0),e==0?a._setAdditionCss("z-index:-1"):a._setAdditionCss("z-index:10"),t._displayObject._transform=a},proto$H._setTransitionEnd=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,l=r._direction,_=r._fromPrevious;if(n._create3DMatrix(!0,!0),l===s._Direction._VERTICAL){Math.min(o._stageHeight,o._fullScreenRect._height)/2;var c="X"}else{Math.min(o._stageWidth,o._fullScreenRect._width)/2;var c="Y"}if(c=="Y")if(_)if(e==0){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_X_BACK_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_X_BACK_OBJ_TWO "+this._duration/1e3+"s ease;"}else if(e==1){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_X_AGO_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_X_AGO_OBJ_TWO "+this._duration/1e3+"s ease;"}else if(_)if(e==0){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_Y_BACK_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_Y_BACK_OBJ_TWO "+this._duration/1e3+"s ease;"}else if(e==1){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_Y_AGO_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_Y_AGO_OBJ_TWO "+this._duration/1e3+"s ease;"}a._setAdditionCss(d),t._displayObject._transform=a},proto$H._finish=function(e,t){t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(" "),t._node.style[Browser$1.prefix.css+"transform-origin"]="",t._node.style[Browser$1.prefix.css+"animation"]=""},mod.namespace("SceneSwitcher.EffectZoom",EffectZoom);var EffectFrame=function(){EffectFrame.__super__.constructor.apply(this,arguments)};EffectFrame._name="frame",TransitionEffects._registerEffect(EffectFrame._name,EffectFrame),mod.extend(EffectFrame,EffectCssTransition);var proto$G=EffectFrame.prototype;proto$G._globalInit=function(){var e=document.createElement("style"),t=Mugeda.scene._stage;e.type="text/css",e.innerHTML="        @keyframes EFFECTFRAME_X_AGO_OBJ_ONE{            0% {                left:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            50%{                left:-"+t._stageWidth/5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(20deg) scale(.8);            }            100% {                left:-"+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(20deg) scale(1.2);            }        }        @keyframes EFFECTFRAME_X_AGO_OBJ_TWO{             0% {                left:"+t._stageWidth*1.05+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            50%{                left:"+t._stageWidth/5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-20deg) scale(.8);            }            100% {                left:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }        }        @keyframes EFFECTFRAME_X_BACK_OBJ_ONE{            0% {                left:-"+t._stageWidth*1.05+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            50% {                left:-"+t._stageWidth/5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(20deg) scale(.8);            }            100%{                left:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }        }        @keyframes EFFECTFRAME_X_BACK_OBJ_TWO{            0%{                left:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            50%{                left:"+t._stageWidth/5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-20deg) scale(.8);            }            100% {                left:"+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-20deg) scale(1.2);            }        }        @keyframes EFFECTFRAME_Y_AGO_OBJ_ONE{            0% {                top:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }            50%{                top:0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-40deg) scale(.8);            }            100% {                top:-"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }        @keyframes EFFECTFRAME_Y_AGO_OBJ_TWO{             0% {                top:"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }            50%{                top:0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(40deg) scale(.8);            }            100% {                top:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }        @keyframes EFFECTFRAME_Y_BACK_OBJ_ONE{            0% {                top:-"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }            50%{                top:0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-40deg) scale(.8);            }            100% {                top:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }        @keyframes EFFECTFRAME_Y_BACK_OBJ_TWO{            0% {                top:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }            50%{                top:0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(40deg) scale(.8);            }            100% {                top:"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }    ",document.getElementsByTagName("HEAD").item(0).appendChild(e)},proto$G._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix;r._stage,r._switcher.constructor,r._direction,r._fromPrevious,n._create3DMatrix(!0,!0),e==0?a._setAdditionCss("z-index:-1"):a._setAdditionCss("z-index:10"),t._displayObject._transform=a},proto$G._setTransitionEnd=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,l=r._direction,_=r._fromPrevious;if(n._create3DMatrix(!0,!0),l===s._Direction._VERTICAL){Math.min(o._stageHeight,o._fullScreenRect._height)/2;var c="X"}else{Math.min(o._stageWidth,o._fullScreenRect._width)/2;var c="Y"}if(c=="Y")if(_)if(e==0){var d=Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_X_BACK_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_X_BACK_OBJ_TWO "+this._duration/1e3+"s linear;"}else if(e==1){var d=Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_X_AGO_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_X_AGO_OBJ_TWO "+this._duration/1e3+"s linear;"}else if(_)if(e==0){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px 0px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_Y_BACK_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_Y_BACK_OBJ_TWO "+this._duration/1e3+"s linear;"}else if(e==1){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px 0px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_Y_AGO_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_Y_AGO_OBJ_TWO "+this._duration/1e3+"s linear;"}a._setAdditionCss(d),t._displayObject._transform=a},proto$G._finish=function(e,t){t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(" "),t._node.style[Browser$1.prefix.css+"transform-origin"]="",t._node.style[Browser$1.prefix.css+"animation"]=""},mod.namespace("SceneSwitcher.EffectFrame",EffectFrame);var EffectShutters=function(){EffectShutters.__super__.constructor.apply(this,arguments)};EffectShutters._name="shutters",TransitionEffects._registerEffect(EffectShutters._name,EffectShutters),mod.extend(EffectShutters,EffectCanvasTransition);var proto$F=EffectShutters.prototype;proto$F._draw=function(e,t,r,a){var n=this,o=n._stage._renderManager.constructor.requestAnimationFrame,s=n._duration,l=null,_=Mugeda.scene.dom,c=Mugeda.scene.width/e.width,d=n._stage._fullScreenRect,u=n._fromPrevious,f=8,p=e.width,v=e.height,h=function(x,m,A){if(!document.getElementById("shuttersAnimation_shutters")){var T=document.createElement("style");Mugeda.scene._stage,T.id="shuttersAnimation_shutters",T.innerHTML="            @keyframes SHUTTERS_ANIMATION_ITEM{                0%{                }                100%{                }            }            @keyframes SHUTTERS_ANIMATION_OUT{                0%{                }                100%{                }            }            @keyframes SHUTTERS_ANIMATION_ON{                0%{                }                100%{                }            }            @keyframes SHUTTERS_BOX_ANIMATION{                0%{                }                100%{                }            }        ",T.type="text/css",document.getElementsByTagName("HEAD").item(0).appendChild(T)}},g=function(x,m){var A={};A.items=[];var T=p/x,b=v,C=document.createElement("div");C.style.position="fixed",C.style.left=-d._left+"px",C.style.top=-d._top+"px",C.style.width=p*c+"px",C.style.height=v*c+"px",C.style.zIndex=9999,_.appendChild(C);for(var M=0;M<x;M++){var T=p/x,E=T*M,b=v,O=document.createElement("div");O.style.position="absolute",O.style.left=Math.floor(E*c)+"px",O.style.top="0px",O.style.width=Math.floor(T*c)+"px",O.style.height=Math.floor(b*c)+"px",O.style.perspective=v*c/2+"px",C.appendChild(O);var S=document.createElement("div");S.style.position="absolute",S.style.left=0,S.style.top="0px",S.style.width=Math.floor(T*c)+"px",S.style.height=Math.floor(b*c)+"px",S.style.transformOrigin="50% 50% 0px",S.style.transformStyle="preserve-3d",S.style.transform="rotateY(0)",O.appendChild(S),(function(){var $=document.createElement("canvas");$.style.position="absolute",$.style.top="0px",$.style.left=0,$.width=Math.floor(T*c),$.height=Math.floor(b*c),S.appendChild($);var R=$.getContext("2d");R.drawImage(e,E,0,T,b,0,0,T*c,b*c)})(),(function(){var $=document.createElement("canvas");$.style.position="absolute",$.style.top="0px",$.style.left=0,$.width=Math.floor(T*c),$.height=Math.floor(b*c),$.style.transformOrigin="right",u?$.style.transform="rotateY(-90deg) translateZ("+Math.floor(T*c)+"px) translateX(0px)":$.style.transform="rotateY(90deg) translateZ(0px) translateX("+Math.floor(T*c)+"px)",S.appendChild($);var R=$.getContext("2d");R.drawImage(t,E,0,T,b,0,0,T*c,b*c)})(),A.items.push(S)}return A.container=C,A};h();var w=g(f);r.getContext("2d"),console.log("draw");function y(x){if(!window.stopLoop){l||(l=x);var m=x-l;if(m<s){var A=m/s,T=90*A;w.items.forEach(function(b){var C=p/f*c/2*A,M=0-p/f*c/2*A;u?b.style.transform="rotateY("+T+"deg) translateZ("+C+"px) translateX("+-M+"px)":b.style.transform="rotateY(-"+T+"deg) translateZ("+C+"px) translateX("+M+"px)"}),window.requestAnimationFrame(y)}else console.log("end"),_.removeChild(w.container),a()}}o(y)},mod.namespace("SceneSwitcher.EffectShutters",EffectShutters);var EffectShuttersAcross=function(){EffectShuttersAcross.__super__.constructor.apply(this,arguments)};EffectShuttersAcross._name="shuttersAcross",TransitionEffects._registerEffect(EffectShuttersAcross._name,EffectShuttersAcross),mod.extend(EffectShuttersAcross,EffectCanvasTransition);var proto$E=EffectShuttersAcross.prototype;proto$E._draw=function(e,t,r,a){var n=this,o=n._stage._renderManager.constructor.requestAnimationFrame,s=n._duration,l=null,_=Mugeda.scene.dom,c=Mugeda.scene.width/e.width,d=n._stage._fullScreenRect,u=e.width,f=e.height,p=n._fromPrevious,v=function(y,x,m){if(!document.getElementById("shuttersAnimation_across")){var A=document.createElement("style");Mugeda.scene._stage,A.id="shuttersAnimation_across",console.log(x),A.innerHTML="            @keyframes SHUTTERS_ANIMATION_ITEM{                0%{                }                100%{                }            }            @keyframes SHUTTERS_ANIMATION_OUT{                0%{                }                100%{                }            }            @keyframes SHUTTERS_ANIMATION_ON{                0%{                }                100%{                }            }            @keyframes SHUTTERS_BOX_ANIMATION{                0%{                }                100%{                }            }        ",A.type="text/css",document.getElementsByTagName("HEAD").item(0).appendChild(A)}},h=function(y,x){var m={};m.items=[];var A=u,T=f/y,b=document.createElement("div");b.style.position="fixed",b.style.left=-d._left+"px",b.style.top=-d._top+"px",b.style.width=u*c+"px",b.style.height=f*c+"px",b.style.zIndex=9999,_.appendChild(b);for(var C=0;C<y;C++){var A=u,T=f/y,M=0,E=T*C,O=document.createElement("div");O.style.position="absolute",O.style.left=M+"px",O.style.top=Math.floor(E*c)+"px",O.style.width=Math.floor(A*c)+"px",O.style.height=Math.floor(T*c)+"px",O.style.perspective="200px",b.appendChild(O);var S=document.createElement("div");S.style.position="absolute",S.style.left=0,S.style.top="0px",S.style.width=Math.floor(A*c)+"px",S.style.height=Math.floor(T*c)+"px",S.style.transformOrigin="50% 50% 0",S.style.transformStyle="preserve-3d",S.style.transform="rotateX(0)",O.appendChild(S),(function(){var $=document.createElement("canvas");$.style.position="absolute",$.style.top="0px",$.style.left=0,$.width=Math.floor(A*c),$.height=Math.floor(T*c),S.appendChild($);var R=$.getContext("2d");R.drawImage(e,0,E,A,T,0,0,A*c,T*c)})(),(function(){var $=document.createElement("canvas");$.style.position="absolute",$.style.left=0,$.width=Math.floor(A*c),$.height=Math.floor(T*c),$.style.transformOrigin="center top 0",p?($.style.top=0,$.style.transform="rotateX(90deg) translateZ(0) translateY(-"+T*c+"px)"):($.style.top=Math.floor(T*c)+"px",$.style.transform="rotateX(-90deg)"),S.appendChild($);var R=$.getContext("2d");R.drawImage(t,0,E,A,T,0,0,A*c,T*c)})(),m.items.push(S)}return m.container=b,m};v(u/8*c,f*c);var g=h(8);r.getContext("2d"),console.log("draw");function w(y){if(!window.stopLoop){l||(l=y);var x=y-l;if(x<s){var m=x/s,A=90*m;g.items.forEach(function(T){var b=T.offsetHeight/2*m,C=0-T.offsetHeight/2*m;p?T.style.transform="rotateX(-"+A+"deg) translateZ("+b+"px) translateY("+Math.abs(C)+"px)":T.style.transform="rotateX("+A+"deg) translateZ("+b+"px) translateY("+C+"px)"}),window.requestAnimationFrame(w)}else console.log("end"),_.removeChild(g.container),a()}}o(w)},mod.namespace("SceneSwitcher.EffectShuttersAcross",EffectShuttersAcross);var EffectDoor=function(){EffectDoor.__super__.constructor.apply(this,arguments)};EffectDoor._name="door",TransitionEffects._registerEffect(EffectDoor._name,EffectDoor),mod.extend(EffectDoor,EffectCanvasTransition);var proto$D=EffectDoor.prototype;proto$D._draw=function(e,t,r,a){var n=this,o=n._stage._renderManager.constructor.requestAnimationFrame,s=n._duration,l=null,_=Mugeda.scene.dom,c=Mugeda.scene.width/e.width,d=n._stage._fullScreenRect,u=e.width,f=e.height,p=n._fromPrevious,v=function(y,x,m){if(!document.getElementById("shuttersAnimation_door")){var A=document.createElement("style");Mugeda.scene._stage,A.id="shuttersAnimation_door",A.innerHTML="            @keyframes DOOR_ANIMATION_BACKGROUND_ENTER{                0%{                    transform-origin:center center 0;                    transform : scale(.5);                }                100%{                    transform-origin: center center 0;                     transform: scale(1);                }            }            @keyframes DOOR_ANIMATION_BACKGROUND_LEAVE{                0%{                    transform-origin:center center 0;                    transform : scale(1);                }                100%{                    transform-origin: center center 0;                     transform: scale(.5);                }            }            @keyframes DOOR_ANIMATION_ONE_ENTER{                0%{                    transform: rotateY(0) translateX(0px) translateZ(0px);                    transform-origin: right center 0;                    opacity : 1;                    left : 0;                }                100%{                    transform: rotateY(25deg) translateX(-"+y+"px) translateZ(40px);                    transform-origin: right center 0;                    opacity : .3;                }            }            @keyframes DOOR_ANIMATION_ONE_LEAVE{                0%{                    transform: rotateY(25deg) translateX(-"+y+"px) translateZ(40px);                    transform-origin: right center 0;                    opacity : .3;                }                100%{                    transform: rotateY(0) translateX(0px) translateZ(0px);                    transform-origin: right center 0;                    opacity : 1;                    left : 0;                }            }            @keyframes DOOR_ANIMATION_TWO_ENTER{                0%{                    transform: rotateY(0) translateX(0) translateZ(0px);                    transform-origin: left center 0;                    opacity : 1;                    left : "+y+"px;                }                100%{                    transform: rotateY(-25deg) translateX("+y+"px) translateZ(40px);                    transform-origin: left center 0;                    opacity : .3;                }            }            @keyframes DOOR_ANIMATION_TWO_LEAVE{                0%{                    transform: rotateY(-25deg) translateX("+y+"px) translateZ(40px);                    transform-origin: left center 0;                    opacity : .3;                }                100%{                    transform: rotateY(0) translateX(0) translateZ(0px);                    transform-origin: left center 0;                    opacity : 1;                    left : "+y+"px;                }            }        ",A.type="text/css",document.getElementsByTagName("HEAD").item(0).appendChild(A)}},h=function(y,x){var m={};m.items=[];var A=document.createElement("div");return A.style.position="fixed",A.style.left=Math.abs(d._left)+"px",A.style.top=Math.abs(d._top)+"px",A.style.width=u*c+"px",A.style.height=f*c+"px",A.style.perspective="200px",A.style.transformStyle="preserve-3d",A.style.zIndex=9999,_.append(A),(function(){var T=document.createElement("canvas");T.style.position="absolute",T.style.top="0px",T.style.left=0,T.width=u*c,T.height=f*c,A.append(T);var b=T.getContext("2d");p?(b.drawImage(e,0,0,t.width,t.height,0,0,u*c,f*c),T.style.animation="DOOR_ANIMATION_BACKGROUND_LEAVE "+x/1e3+"s ease-in"):(b.drawImage(t,0,0,t.width,t.height,0,0,u*c,f*c),T.style.animation="DOOR_ANIMATION_BACKGROUND_ENTER "+x/1e3+"s ease-in")})(),(function(){var T=document.createElement("div");T.style.position="absolute",T.style.top="0px",T.style.left=0,T.style.width=u*c/2+"px",T.style.height=f*c+"px",T.style.overflow="hidden",A.append(T);var b=document.createElement("canvas");b.style.position="absolute",b.style.top="0px",b.style.left=0,b.width=u*c/2,b.height=f*c,T.append(b);var C=b.getContext("2d");p?(C.drawImage(t,0,0,u/2,f,0,0,u*c/2,f*c),T.style.animation="DOOR_ANIMATION_ONE_LEAVE "+x/1e3+"s ease-in"):(C.drawImage(e,0,0,u/2,f,0,0,u*c/2,f*c),T.style.animation="DOOR_ANIMATION_ONE_ENTER "+x/1e3+"s ease-in")})(),(function(){var T=document.createElement("div");T.style.position="absolute",T.style.top="0px",T.style.left=u*c/2+"px",T.style.width=u*c/2+"px",T.style.height=f*c+"px",T.style.overflow="hidden",A.append(T);var b=document.createElement("canvas");b.style.position="absolute",b.style.top="0px",b.style.left="0px",b.width=u*c/2,b.height=f*c,T.append(b);var C=b.getContext("2d");p?(C.drawImage(t,u/2,0,u/2,f,0,0,u*c/2,f*c),T.style.animation="DOOR_ANIMATION_TWO_LEAVE "+x/1e3+"s ease-in"):(C.drawImage(e,u/2,0,u/2,f,0,0,u*c/2,f*c),T.style.animation="DOOR_ANIMATION_TWO_ENTER "+x/1e3+"s ease-in")})(),m.container=A,m};v(u/2*c);var g=h(2,s);r.getContext("2d"),console.log("draw");function w(y){if(!window.stopLoop){l||(l=y);var x=y-l;x<s?window.requestAnimationFrame(w):(console.log("end"),_.removeChild(g.container),a())}}o(w)},mod.namespace("SceneSwitcher.EffectDoor",EffectDoor);var EffectTease=function(){EffectTease.__super__.constructor.apply(this,arguments)};EffectTease._name="tease",TransitionEffects._registerEffect(EffectTease._name,EffectTease),mod.extend(EffectTease,EffectCanvasTransition);var proto$C=EffectTease.prototype;proto$C._draw=function(e,t,r,a){var n=this,o=n._stage._renderManager.constructor.requestAnimationFrame,s=n._duration,l=null,_=Mugeda.scene.dom,c=Mugeda.scene.width/e.width,d=n._stage._fullScreenRect,u=e.width,f=e.height,p=n._fromPrevious,v=10,h=function(x,m,A){if(!document.getElementById("shuttersAnimation_tease")){var T=document.createElement("style");Mugeda.scene._stage,T.id="shuttersAnimation_tease",T.innerHTML="            @keyframes TEASE_ANIMATION_RIGHT_ENTER{                0%{                    left : 0;                }                100%{                    left : "+x+"px;                }            }            @keyframes TEASE_ANIMATION_LEFT_ENTER{                0%{                    left : 0;                }                100%{                    left : -"+x+"px;                }            }            @keyframes TEASE_ANIMATION_RIGHT_LEAVE{                0%{                    left : "+x+"px;                }                100%{                    left : 0;                }            }            @keyframes TEASE_ANIMATION_LEFT_LEAVE{                0%{                    left : -"+x+"px;                }                100%{                    left : 0;                }            }        ",T.type="text/css",document.getElementsByTagName("HEAD").item(0).appendChild(T)}},g=function(x,m){var A={};A.items=[];var T=u*c,b=f*c,C=u,M=f/x,E=C*c,O=M*c,S=document.createElement("div");return S.style.position="fixed",S.style.left=Math.abs(d._left)+"px",S.style.top=Math.abs(d._top)+"px",S.style.width=T+"px",S.style.height=b+"px",S.style.zIndex=9999,_.append(S),(function(){var L=document.createElement("canvas");L.style.position="absolute",L.style.top=0,L.style.left=0,L.width=T,L.height=b,L.style.zIndex=-1,S.append(L);var D=L.getContext("2d");p?D.drawImage(e,0,0,t.width,t.height,0,0,T,b):D.drawImage(t,0,0,t.width,t.height,0,0,T,b)})(),(function(){for(var L="RIGHT",D=0;D<x;D++){var $=document.createElement("canvas");$.style.position="absolute",$.style.top=D*O+"px",$.style.left=0,$.width=E,$.height=O,$.style.zIndex=10,S.append($);var R=$.getContext("2d");p?(R.drawImage(t,0,D*M,C,M,0,0,E,O),$.style.animation="TEASE_ANIMATION_"+L+"_LEAVE "+m/1e3+"s ease forwards"):(R.drawImage(e,0,D*M,C,M,0,0,E,O),$.style.animation="TEASE_ANIMATION_"+L+"_ENTER "+m/1e3+"s ease forwards"),L=="RIGHT"?L="LEFT":L="RIGHT"}})(),A.container=S,A};h(Math.floor(Math.floor(u)*c));var w=g(v,s);console.log("draw");function y(x){if(!window.stopLoop){l||(l=x);var m=x-l;m<s?window.requestAnimationFrame(y):(console.log("end"),_.removeChild(w.container),a())}}o(y)},mod.namespace("SceneSwitcher.EffectTease",EffectTease);var RenderObjectSceneSwitcher=function(e,t){var r=this;r._counter=RenderObjectSceneSwitcher.counter++,r._movieClip=e,r._movieClipRenderObject=t;var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANAAAACLCAYAAAAQ7RdAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE1MjY4NkY5Mjg0OTExRTk4MTcxRDVDQzAyOTIxQUFEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE1MjY4NkZBMjg0OTExRTk4MTcxRDVDQzAyOTIxQUFEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTUyNjg2RjcyODQ5MTFFOTgxNzFENUNDMDI5MjFBQUQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTUyNjg2RjgyODQ5MTFFOTgxNzFENUNDMDI5MjFBQUQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7fISmaAAAWoklEQVR42uydC3BUVZqAb3eaJMgjRsPgrlo6q7NLweLWsMuMLutULWuNo1MzaqkjyEN5GAMpEywLYSm1oEpWtqRgqEKoYg1aIoWb6DpZWZjZCrUCGsAgSQgBzISHCHl1Xp2k8+rXnp+ck/w5ud333u5OP07/f9VfSQXSuefc853/cc75jy0QCGgkCSG3MP0l079jOp1rDlMP0yamjUxvMP2K6WnqrsQQB3VBXAUgWcH0Uab/aOF9tDItZVrC9E/UjfETG1mguMhtTDcwzWeaGeFnnWS6imkVdSsBlAryItOdTCdF+XP3Mi1g6qYuJoBUlIl8kC8Yx79xiemvmX5H3U0AqSQzmf6B6U9i8Ld6mD7H9BB1+/iLnbpg3OVnTE/FCB6QyUz/h+lK6nqyQMkuf830Wz6o4yHPMz1Ar4EAStaYp5Lp38TxGSCh8A9ML9LrGCeAZs6cGdEH1NbWUi+OFciwHWH68wR4lhamv6DEgr7MmjWLYiCCJ6T8iOnxOFtCSiKQmJKpTI8lEDxCphFEBFAywPN/TOck6PMBROVM/5ZeFQFE8IQnsIXoKEFEACWSZGtDO6TnJMnz3saf96f06gigRIAHZvTZSfbcWdxiEkQEEMETAUSQ8PgZvUoCKNaSwwPy2UneDtghcYQgIoBiDQ+khGco0h6CiACKmcAJ0hMKwYMhgphoHr1iAmg84YHs1f2Ktg9qMvwvQUQAETyRQVTG9J/plRNA0ZI7taG6A/enSHuhRsMhgogAihY8YHnuTbF2A0R/1IaqBZEQQGHJPdzy3Jui7U9n+t8EEQEULjxgee5K8X4giAgggicKEB1k+hvqCgLISO7jbhvBM1qgYup/EUQEkBE8YHnuoK4ICtHnTJ+mriCAZIGTmicIHkNJY/qfBBEBJMMDe9umUVcQRAQQwRMriIq1obpzBFCKChxrLid4Iho7+1IdInsKwwOH4W4jDiIePx8zXUYAETwk4YmNaVGqQpRqAEENgK8InnGBCK5uySOA1IYHDo1l0XgfN9mdahClCkBwXPkYwUMQEUDhwQNn/ifT2I4pRIUEEMFDEr78PhUgUhmgeTzmIXjiC9E6Aig54YECGbfQGI67bFEZIhUBgrP8ZQRPwkG0iQBKDnigIEYmjdmEk7eYvkMAETwk4ct6ptsJoMQTOLP/R4InKWSNShDZFYEHCl+k09hMKoh2EUDxFzijf5DgSUpZpQJE9iSHBwpdOFQdYXV1dV0ej8dPEBFABI9Fqaqqan/qqafOvPbaa2dTAKIiAih2AmfxP1cZnoqKitalS5fWwPdHjhzpfOWVV6oHBwd9CkO0PFkhsichPFDQIk1leFasWFHr8/kC4mfHjx93FRQUnGUQ+RWHCE632ggggicsKS8vd8rwSBBV9/f3q2yJFmlDdRZsBFB0BQpXFKsOT15e3nk9eDBE+fn5BBEBZBmefZrCO8ePHj3anJubWxsKHiEnT57sShGIipPhnSf6Ay7jfrHS8DAgLgQCAdO/AxC9/PLLlQwir8IQPcNddjsBFD48RckWVFqRsrKyxtWrV1uCR8jp06d7mMtX3dfXpzpEnyey624neOIHT2Fh4XeRfEZFRUX3ihUrKt1ut0dhiH6rDa35pRFA5gQKUuxVGZ5Dhw41RAqPkOrqavdLL71UxSDyKg4RbNmaQAAZw7Nb4YFwE561a9fWmfzvAbMQ5ebmqm6JfqUNbRqeQADpyxrV4SktLb1uAE+AKyyY+pD60b/pSlVVlfuFF16o7O7uJohSECCo3rJddXg2bNhQbwIeAAYgGGDaz3WA/8wXCqILFy70Llu2LBUggrNfGQTQCDy/Vxme4uLiaybh8XJg3Ey7mXZx7WHaZxaipUuXnnG5XIMKd+l8bej0cUaqA/SvqsNTUlJybdOmTZdNwCOsDsDSybSVaTNTJ9N2DlIv00EjiOrq6vpefPHFys7OTtUhinvxmHgCBEUm/k1lePbt23d148aNVuABq9PBwbnB9DrTH5g2cqBc3BKZggjcOcUh+iemh5lOTDWAoDrLJpXhKSoqurxly5arFi0Phuca0++5hg0RuHPt7e0DCnf1L7ShGoATUwUggGe9yvDs3r27ftu2bdcswtPO4WlEluc6UoCqibt0piG6dOlSP4OoUnGIwBJBFdpJqgOUEvDs3LnzugE8fsltA3haODwN/GsT12bp5yIu6jQbE125cqX/+eefP+N0OvsV7vqfa0N10KeoCtB21eHZsWNHnUl4vDoxTyMCRyQOOvnXVgmkJuTOmYLohx9+GFiyZEllCkAElmiqagABPGtUh2fPnj0NJuHpR5anmQOhB0YfV5GZa5FAI4jGyt/HEqJYALRLZXhgJ/W77757MUx4sNsGILVpQ+lqEd94dJIMzkgt0cKFC880Nzf3KQzRHG3oKs/sZAcI4FmlMjxbt269+OGHHzZFCI8AQcBzc8G0trYWL7ACRG4Okfy7lmKixsbGwUWLFlUqDtFsbegy6exkBahIcXgCmzdvvhABPA06lqdXgkcLAlEnskQ3EICd/N9NQbRgwYIzDQ0NvQRR4gEE8CxXHJ6LBw4caI7A8jTquG1eDI8QCaJ+CSK9+MkURC0tLR6wRCkAUTnTnGQB6D9Uhsfv9wc2btx43gI8fTqWRyQBDOHRgcjHIcIxUZOOOydDFEhhiGYwPT4eEEUTIDgAB/ULVqoMz6ZNm85/+umnTgvw4EVSDE+7WXiCQIRjIj1LJEOkhYLoueeeO3Pt2jW34hCdYDo9EQECeKByziJVex8q5rzxxhvnLMLTza1Ms+S2tQdJGBiKAURyiruTAzxgBFF7e7sXLJHiEN2vDWXnpicaQMWqw/Pmm2+eKy0tbQvDbcMLoCLmcSF4/GbhsQCRsHROFBOZgmjBggWVV65c6SaIYgAQe5Hw+1B66BmF4fGvW7euxiQ8Hg5Gl2R5Gnj8I2Ke/nDhseDO4V0NGCJvKIhcLhdYouoUgOgk07viBhCC53eKw3Pu8OHD7Sbh6eeAhEpVRwxPCIh6g7hzGKJBguim3Mv0GOvDO2MOEPujUGLoc5UtD1wp8uqrr54NAx5heW5o+qnqqMCjA5E3CEQN4ULE3Lmq+vr6LoUh+jFYItaH98QMIA4P1On6rcrwwL08cLWIBbfNheBpkBIG3SjbFjV4JIg0TX+xNVSKOyREPT09PrBEikMEbtxX4UJkt/iioBrKQZXhgXt44D4eE/D4pJinXSfb1jbe8ASBaFDT37HQGA5ECxcurLp48aJLcYjAEt03bgBxeKCk0K9Uhgfu4YFbEEzA45XgaZKybfCznljAYxKiYJbIMLHQ29vrX7JkSbXiEN3BLdF94wIQwRMUnjYJnpZYuG0WIXJJEAlL1MFjJgFRgCCyBpHd5EvZpzI8cFXIqlWrqk3C4+GDrkuKeWR4+mMNjwWIGiWI8DpRSIggJmKf36E4RCdYG38SFYDYB8FZnsUqwwP37cCVIRZiHgCkVUoYJAQ8BokFGSI9dy4kRKy//HB/q+IQTWN6mLVxSkQAsQ+AiifvqtpLcDUI3LNjEZ4uBM8NBE9HosCjA5FPB6JGHXfONESLFy8+CzeJKwwRuHF/CBsg1vlQ4QS26DhUhScvL68K7tkJEx4RkCeU5TEBES7cGLY7x2LGwLJly2oUh2g+678t4VogKHw4XcVegVsM4F6dCOGR13kSDh4MEX8mnzY6O9eqjc3OEUSjZR3rux9bAoj9wl9pitYxAHjgPh24EsRCwsClja6MI7ttA4kKj441kiFyBoGoh08KhhBBTFRRUdGqMERvWrVA/840XbVegFsL4AoQi/DgVDXe29aO4PEkOjwhIHIFsUQisSAsa1CIYLc6s+i1CkO0JJgVCgbQMyrCA7Wi4faCMOGRLU8PgieQDPCYhEhvx8KAWYjKy8udCgIEeYBCUwCxzv0X1VoPV31AjWiT8AxKbhu2PEkPj4E7h9srJgtLEOXl5Z1XFKLFZi3QL1WDB676gELrJuEJtjHUqeO2JSU8QSDqDQERnjRSFaLbWX/NNwPQg6q0GAqqL1q06EwY8Oi5M+0qWB4TEOH2N0runGmIcnNza48ePdqsGES/MwNQjirwwK0EUFg9DHj01nlGDR4V4LEIUYsViKDoZH5+/gXFIJpjBqBbk72VUPsZbiMIE54mCZ4OleExcOeckbhzANHq1asvlJWVNSrSTbeaASg72eGBAupQA9oiPE4tdLZNWXiCQBSsX5xWIAIpLCz8ThGIso0AgvJUE5O1dVDrGQqnW4AHz7TNqQyPAUQRJRYUgijHjAVqSVZ4oK4Z1Hy2AE+wwdGZivCYgMgwNjSC6NChQw1J3DW93MgMi0OyPmnMb3XZbLYfJVOroCwtwAMVNsOEJ2S2KZXgwRDNmjVL9Jfcj1oIUBxoPI2RtWvX1sHXxx9//C+TrU8YG528XYGgAPl8vk6Hw6E6PNARbToJgzGLhqkIjwmIQgFkCiIo3PLEE0/clYQA2bGltaOGwvcTent765KlQVCGFmo6W4DH0op7KsNj4M6ZWmQOBdmGDRvqS0tLrydTX3i93jY+Odj0YiAoV5VRX19fnizwgOWBcrQW4DG954vgCQqR0TYnZSFiY+0YGBnOjQ0DlMb/IXPHjh3nEr0hUDETajiHgCcQxPIEq04jtu4TPMYQWd5oawRRSUnJtWTog7179/5JGzqlkIYt0LD7xnTi6dOn4bqLPycyPFDYAipnhoBH08wfHsO3FxA8kUEkjnpYgmjjxo2XDxw4cDXBrc/F/fv3w1jKRFZo2AIJgOAfJ33wwQeHE7ERUCETys2ahMfy8WWCJ2qWqNlqTPT2229fLSoqupyo7f7666/hbqHJ2tA66QRuhWzCAqVx03QToI8++uhGTU3N5USDBywPVMo0gEevCo1hAQ2CJyKIzJzYvXnoMBRE27Ztu5aIELEJ27V+/fpvgQ09C2RHMVAGJ2wiM6unkhQey3XQCJ6IIQpVM2LMsXcjiHbv3l2fSG395JNPBDwCoHSejbOnTZs2zc5/COYJNsvBImpOa2vrLZmZmRPmzJkT10VVqIQJ8Ljdbr8FeILFPOIqeIInCpKfn6/t2rVLuGZ+rj4EiQ3F2GlowrYhHSPffPNNl91u986dO/e2eLeRceAuLCz8yufz9fKQoBuNIY9dxwoJdbDZ4Gp5eXlzPOGBcrJQETNK8FCqOjaWSF4n0i39FcoS7dy58/qOHTviuibp9Xr9r7/++reDg4MObnUysPXBMZANgeTAs0RBQcHF77//vicOL6YDLI9JeOQrPQxvIyB4Yu7O6RafDAXRnj17GuIJ0ebNmy+cOnWqGxmXdJRAGAZIkyDCMNn6+vr8eXl5NbG8fJY9tBNKJUEFzBDwBLtUyvA+HIInZtk5U+WPExGiL7744npxcXGL5IKmSe6oTW839hi/lMEz8OSTT3577NixcXXn4Bp55lPXL1++vNYEPKEu2A16IxvBExOIvEHcuYZwIXrrrbdqwaUa7zbAIcCPP/746vr16+sl44INzLDYdQanHw3S4UYNDAz4V61adWH79u03NwJG+8HhCHZubm7le++9F2prhx48nZrJi3UJnrhD1BiuJfrss8+cK1eurITyZOP17FDuec2aNdXvvPPOVZ1QQdN7PjuCxid91W3Q+++/3/Doo4+ePHjw4A0oHhHpQzMwffv377/62GOPfXPixIkui/B08JdheLU7wZMQEBneoxQKooqKiu5nn332NJO2aD/z+fPnO59++umKsrIyvVsn/JIOGxjbzJkzISiCaxzgtB1sL4eq9FCFEc5rQBrxFg3t/cFy9913ZxQUFNzz8MMPT5syZcoEKw8MM8nx48dbtm7derW5udloVjF7pXurFPMQPHGUWbNmiUV6SEzB+uJUPqag5vpfcJ3OfyZW+R16rpIsc+fOncLcrPtnzJiRFckzwkFM5lXVs5inLQg4Ir4G6K8wrecJKhh7XQAQPDAsEN3O9E4Oz338+9t5wwwPCD344INTH3nkkdsfeOCBrJycnIzs7Ox0JjfBY/GMl7log06nc+Ds2bOdR44caYfZxKxbKiUMgm0MbZPhIXASBqLhvZbRhAhk/vz5tzKPaNq8efNy2JjLMOuqMSvW/uWXX7aWlJQ4Q3hSXj6e2vg4u8z1Bp+sewCgNP7Q2bwx93KAwBpN4w1ON9MYWbKyshws8Au43W5fuDGdSXhapYQBwZO4EMGifZYE0R0IoilWIRIye/bsSQ899FDW9OnTM9gkng4TOcDR0dEx2NraelPPnTvXY3ATIR57Hu5iOjk0l7gVauTuZ68DxT0eHtD1aiNFxUX2ynJjQEJs+owUnkbJ8rgktw1OUtLITRwRcbZHJyAPaPrHxC1DVFNT4waN4jOLBXrBhdiBMDzOHMjXEwDBA/Twr308BpqgWbuQOBoPL8PTEcLy9OJG0XhNGohkgGS48MZNW5yeVawzYiY8MkD4yG4PH5Qubk4ncRdOLCDZYgxPj2R5GgkeJS0Rfvfye4w1RPLk3cMzidgzuxmWOKRG9XOfr5PP+BigNG10DYVYwtOik20jeJIfokAQl04PrlhBhLO9skHBJ5f92ALJKWIXD5ImcxcOb6BzjBNEevB0SJanWaQPCR4lIBLrRJpJkMYbIr3b2IUxcWljLxwblZ6Wi0ZM5PDA1wwEkDYOEOEOlRdJmyR4XLxxBI96EAVMvE/HOIUS8vN08zHYzlWetEeBIO9sFrN/JodngvTQgXAzcyGo93G6ccwjEgbNyG0jeFLHEskxUUAbKT0dTYiwWyl2TnTwMdeqhdhFDgfqtCAmVENWZtQObW3swahwrBE+iDUoUd8iuW1tBE/KwCRvmdEbg3Zp8rZF8Dc1HbdN7N1rQjF3lzay5Wh47OkBFIr+UA9stjH4ofFxBLFfqgUlC0RxCoIndSGSQZJPtIY7iWPrh0MXPAabdRJWfjMAyRZCPqorbzg147viTaselOUQgRouStGELE83wZPSEOGxFizJoJkESfyOvHkAF93Elkev9NmYgCxYTKJJwZ28WwE0SxvZvyRiJYeOe4c3g3q1sQtUola18DnFvjaRNvQQPCkXE/Vro4/X+JC1EJPvVJ7oypTGnrzcgsGRJ3E3ivlbufVp0UY2Jo+qGyiPQYdBYD+oY+oEQGAZsnkjJvGG6EEkdwyGUOTYcbajUxtZtBJneQie1IQIT7547PTx8QE6BUGULmXp9CZwH4KwF3lA7WgCF2GDWzM4r+QwkR3DJg+nmbv4HxZWaJJkicTCa0CyYAOoA7rQ57gQOMJlMzwjQqI0RB6d8dOPXH8XGn8yRNgS+aUJXF4k7UDaqY1U3jEcgw4TDfFpY2tNY79xMmrARNQIcYZck1y3Pq5i02o3MqMCHE8wk0mSUhBpKOuFvSAcO0/VRnbM6IUSegagTxu9RcfFP69bG7tdJ+QYdFiYDWSKsRXJ5A+fjlReNxK/J8ynmEn60QN7EPEawUMQSRDJXkwXmryFBcoMAdAgAhBP4m7+PT6B4DMzBh0WG+KTHqZfGyn3k44ePE0HIB/qAA+CyYMe2EfgkBiMPbxjRcTRGcjzwXGQ7MJ5dCbxAW2k9LBHC1HOIBKANCkYk7Mi/QgauQKlbMV8kvrJ4pCEMfY8yJo40OQ9QRqDcvbNi7whL9KwxqEjSrOCV9Nf5NJzBTWJcIKGJFKQcHXdNDQWseitYfojHYuOKDVIBoSEJNaunZBQ+zP1dtdEJP8vwADMYETgUmzUWQAAAABJRU5ErkJggg==",n=e._sceneSwitchOpts;a=n.arrowImg||a,e&&e._aniData&&e._aniData.pageInfo&&e._aniData.pageInfo.turnIcon&&(a=""),r._options={transition:n.transition||RenderObjectSceneSwitcher._TransitionType._LADDER,direction:n.direction||RenderObjectSceneSwitcher._Direction._VERTICAL,realtime:n.realtime||"follow",showArrowIcon:n.showArrowIcon==null?!0:n.showArrowIcon,showAudioIcon:n.showAudioIcon==null?!0:n.showAudioIcon,exit:n.exit||"",loop:n.loop==1,arrowImg:a,duration:n.duration||600,onpage:n.onpage||null,beforePageChange:n.beforePageChange||null,behind:n.behind||null},r._options.duration*1===0&&(r._options.duration=1),r._additionOption=null,r._busy1=!1,r._busy2=!1,r._uiIninted=!1,r._nodes=[],r._cancelWaitResource=null,r._taskList=[],r._pagingStatus=null,e._addEventListener("scenechange",r._updateArrowStatus.bind(r)),e._parent.addEventListener("stageRotateChange",r._updateArrowStatus.bind(r))};RenderObjectSceneSwitcher.counter=0,RenderObjectSceneSwitcher._TransitionType={_LADDER:"ladder",_COVER:"cover",_APPEAR:"appear",_FADEIN:"fadein",_BOX:"box",_FLIP:"flip",_PAGING:"paging",_CENTERROTATE:"centerRotate"},RenderObjectSceneSwitcher._Direction={_VERTICAL:"vertical",_HORIZONTAL:"horizontal"},RenderObjectSceneSwitcher._PagingStatus={_NEXT:"next",_PREVIOUS:"previous"},RenderObjectSceneSwitcher._DIR={_ENTER:0,_LEAVE:1},RenderObjectSceneSwitcher._ACTION={_START:0,_END:1};var proto$B=RenderObjectSceneSwitcher.prototype;proto$B._getPrevSceneIndex=function(e){var t=this,r=t._movieClip;if(e==null&&(e=r._scenes.indexOf(r._currentScene)),!(e===0&&r._haveLoadingPage))return e-=1,e<=(r._haveLoadingPage?0:-1)?t._options.loop?r._scenes.length-1:null:e},proto$B._getNextSceneIndex=function(e){var t=this,r=t._movieClip;if(e==null&&(e=r._scenes.indexOf(r._currentScene)),!(e===0&&r._haveLoadingPage))return e+=1,e>=r._scenes.length?t._options.loop?r._haveLoadingPage?1:0:null:e},proto$B._isBusy=function(){return this._busy1||this._busy2},proto$B._initUI=function(){var e=this;if(!e._uiIninted){e._uiIninted=!0;var t=e._movieClipRenderObject,r=t._parent,a=r.getNode(),n=a.parentNode,o=r._displayObject,s="0% { opacity: 0; "+Browser$1.prefix.css+"transform: rotate(180deg) translateY(0);}  50% { opacity: 0.75;} 100% { opacity: 0; "+Browser$1.prefix.css+"transform:rotate(180deg) translateY(-16px);}",l="0% { opacity: 0; "+Browser$1.prefix.css+"transform: rotate(270deg) translateY(0);}  50% { opacity: 0.75;} 100% { opacity: 0; "+Browser$1.prefix.css+"transform:rotate(270deg) translateY(-16px);}",_="0% { opacity: 0; "+Browser$1.prefix.css+"transform: rotate(0deg) translateY(0);}  50% { opacity: 0.75;} 100% { opacity: 0; "+Browser$1.prefix.css+"transform:rotate(0deg) translateY(-16px);}",c="0% { opacity: 0; "+Browser$1.prefix.css+"transform: rotate(90deg) translateY(0);}  50% { opacity: 0.75;} 100% { opacity: 0; "+Browser$1.prefix.css+"transform:rotate(90deg) translateY(-16px);}",d=StyleSheetManager.insertKeyframes(s),u=StyleSheetManager.insertKeyframes(l),f=StyleSheetManager.insertKeyframes(_),p=StyleSheetManager.insertKeyframes(c),v="0% {"+Browser$1.prefix.css+"transform: rotate(0);} 100% {"+Browser$1.prefix.css+"transform: rotate(360deg);}",h=StyleSheetManager.insertKeyframes(v),g="z-index: 20; position: absolute; width: 37px; left: 0; right: 0; margin: 0 auto; ",w="z-index: 20; position: absolute; width: 37px; top:50%;margin-top:-12px;",y=e._options,x=y.arrowImg,m=x==="";try{x=m?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=":Mugeda.currentAni._resource.dir.getFullPath(y.arrowImg)}catch{}var A='<img src="'+x+'" style= "'+(m?"visibility: hidden;":"")+" display:none;"+g+Browser$1.prefix.css+"animation: "+d+" 2s infinite; top: 10px; "+Browser$1.prefix.css+'transform: rotate(180deg);" /><img src="'+x+'" style= "'+(m?"visibility: hidden;":"")+" display:none;"+w+Browser$1.prefix.css+"animation: "+u+" 2s infinite; right: 10px; "+Browser$1.prefix.css+'transform: rotate(270deg);" /><img src="'+x+'" style= "'+(m?"visibility: hidden;":"")+" display:none;"+g+Browser$1.prefix.css+"animation: "+f+" 2s infinite; bottom: 10px; "+Browser$1.prefix.css+'transform: rotate(0deg);" /><img src="'+x+'" style= "'+(m?"visibility: hidden;":"")+" display:none;"+w+Browser$1.prefix.css+"animation: "+p+" 2s infinite; left: 10px; "+Browser$1.prefix.css+'transform: rotate(90deg);" /><div style="'+g+"display:none;"+Browser$1.prefix.css+"animation: "+h+' 1s infinite linear; border-radius: 100%; border:2px solid #fff; border-top-color: rgba(255,70,0,0.6);border-left-color: rgba(255,70,0,0.6); width: 16px; height: 16px;"/>',T=document.createElement("div");T.innerHTML=A;var b=[function(R){e.prevPage()},function(R){e.nextPage()},function(R){e.nextPage()},function(R){e.prevPage()}],C=Array.prototype.slice.call(T.childNodes,0);C.forEach(function(R,I){e._nodes.push(R),n.appendChild(R),R.addEventListener(Browser$1.InputStart,b[I])});var M=!1,E=!1,O=null,S=null,L=0,D=0,$=void 0;o._addEventListener("switchcannel",function(){M=!1,E=!1}),o._addEventListener(Browser$1.InputStart,function(R){var I=e._movieClipRenderObject._currentScene;I.scrollInertia&&$.endInertia(),M=!0,O=R._getInputX(),S=R._getInputY(),L=new Date().getTime()},!1,-50),o._addEventListener(Browser$1.InputMove,function(R){if(M||E)var I=R._getInputY();if(M){var P=t._currentScene,F=I-S;F<0&&o._fullScreenRect._height-P._scrollTop>o._stageHeight-1||F>0&&P._scrollTop>-1||o._scaleMode==="width2"&&(M=!1,E=!0,o._renderManager._forceCheckHash.push(P),D=P._scrollTop,$=new Inertia,$.start(new Point(0,S)))}if(E){$.add(new Point(0,I));var N=R._getInputY()-S;P=t._currentScene,P._scrollTop=D+N}},!1,-50),o._addEventListener(Browser$1.InputEnd,function(R){for(var I=R[R.type+"MugedaHookSource"],P=(R._originEvent||{}).target;P&&P!=document.body&&P.classList&&!P.classList.contains("vr_panorama");)P=P.parentElement;if(!(I==="vr"||P&&P.classList.contains("vr_panorama"))){if(E){E=!1,$._startIterate();var F=e._movieClipRenderObject._currentScene;F.scrollInertia=$}if(M){M=!1;var N=new Date().getTime()-L;if(N>2500)return;var j,U;j=R._getInputX()-O,U=R._getInputY()-S,e._options.direction===RenderObjectSceneSwitcher._Direction._VERTICAL?U>32&&Math.abs(U)>Math.abs(j)?(M=!1,e._options._scrollDisabledForward||e.prevPage(),R.stopImmediatePropagation()):U<-32&&Math.abs(U)>Math.abs(j)&&(M=!1,e._options._scrollDisabledAfter||e.nextPage(),R.stopImmediatePropagation()):j>32&&Math.abs(j)>Math.abs(U)?(M=!1,e._options._scrollDisabledForward||e.prevPage(),R.stopImmediatePropagation()):j<-32&&Math.abs(j)>Math.abs(U)&&(M=!1,e._options._scrollDisabledAfter||e.nextPage(),R.stopImmediatePropagation())}}},!1,-50)}};var checkResource=proto$B._checkResource=function(e,t,r,a,n){var o=this,s=t._startFrame,l=s+t._numFrames-1;if(e.checkFrameResourceLoaded(s,l))o._cancelWaitResource=null,a();else{var _=o._nodes[4],c=o._options.direction==RenderObjectSceneSwitcher._Direction._VERTICAL?0:3,d=o._options.direction==RenderObjectSceneSwitcher._Direction._VERTICAL?2:1,u=o._nodes[r?d:c];_.style.top=r?"":"10px",_.style.bottom=r?"10px":"",_.style.display="block",u.style.display="none";var f=function(){e.checkFrameResourceLoaded(s,l)&&(e._removeEventListener("framesLoadedChange",f),_.style.display="none",u.style.display="block",o._cancelWaitResource=null,a())};e.addEventListener("framesLoadedChange",f),o._cancelWaitResource=function(){e._removeEventListener("framesLoadedChange",f),_.style.display="none",u.style.display="block",o._cancelWaitResource=null}}};proto$B.nextPage=function(){var e=this,t=this._movieClipRenderObject;if(!e._isBusy()){e._cancelWaitResource&&e._cancelWaitResource();var r=t._displayObject,a=r._currentScene,n=r._scenes.indexOf(a),o=e._getNextSceneIndex(n),s=r._scenes[o];s&&checkResource.bind(e)(r,s,!0,function(){e._pagingStatus=RenderObjectSceneSwitcher._PagingStatus._NEXT,r.gotoAndPlay(s._startFrame,null,20),r._manual=!0},t)}},proto$B.prevPage=function(){var e=this,t=e._movieClipRenderObject;if(e._cancelWaitResource&&e._cancelWaitResource(),!e._isBusy()){var r=t._displayObject,a=r._currentScene,n=r._scenes.indexOf(a),o=e._getPrevSceneIndex(n),s=r._scenes[o];s&&checkResource.bind(e)(r,s,!1,function(){e._pagingStatus=RenderObjectSceneSwitcher._PagingStatus._PREVIOUS,r.gotoAndPlay(s._startFrame,null,20),r._manual=!0},t)}},proto$B._updateArrowStatus=function(){var e=this,t=e._movieClipRenderObject,r=t._displayObject,a=r._parent,n=r._currentScene,o=r._scenes,s=o.indexOf(n),l=e._nodes,_=e._options._scrollDisabledForward||e._options._scrollDisabledAfter||e._movieClip._haveLoadingPage&&s==-1,c=e._options.direction==RenderObjectSceneSwitcher._Direction._VERTICAL;_=_||r._getRoot()._renderManager._loadingPage.type=="firstpage"&&r._currentScene==r._scenes[0];var d=15,u=_?0:d,f=c?4:2;u&=f,e._getPrevSceneIndex(s)==null&&(u&=-2,u&=-9),e._getNextSceneIndex(s)==null&&(u&=-3,u&=-5),Math.abs(a._stageRotate-Math.PI/2)<.1?u=u<<1|(u&8)>>>3:Math.abs(a._stageRotate+Math.PI/2)<.1&&(u=u>>>1|(u&1)<<3),l.length&&(l[0].style.display=u&1?"block":"none",l[1].style.display=u&2?"block":"none",l[2].style.display=u&4?"block":"none",l[3].style.display=u&8?"block":"none")},proto$B._setAdditionOption=function(e){this._additionOption=e},proto$B._getDuration=function(){var e=this,t=(e._additionOption||{}).duration||e._options.duration;return t},proto$B._getDirection=function(){var e=this,t=(e._additionOption||{}).direction||e._options.direction;return t},proto$B._getTransitionType=function(e,t){var r=this,a=(r._additionOption||{}).transition||r._options.transition;return t===0&&e._haveLoadingPage&&(a=RenderObjectSceneSwitcher._TransitionType._APPEAR),a},proto$B._animateTransform=function(e,t,r,a,n,o,s){var l=this,_=(t||r)._parent,c=_._displayObject;if(e===RenderObjectSceneSwitcher._DIR._ENTER)var d=r;else e===RenderObjectSceneSwitcher._DIR._LEAVE&&(d=t);var u=n<a;l._pagingStatus===RenderObjectSceneSwitcher._PagingStatus._NEXT?u=!1:l._pagingStatus===RenderObjectSceneSwitcher._PagingStatus._PREVIOUS&&(u=!0);var f=this._transitionEffect;f._fromSceneRenderObject=t,f._toSceneRenderObject=r,f._duration=(l._additionOption||{}).duration||l._options.duration,f._direction=l._getDirection(),f._stage=c._getStage(),f._fromPrevious=u,f._start(e,function(){e===RenderObjectSceneSwitcher._DIR._ENTER?l._busy2=!1:e===RenderObjectSceneSwitcher._DIR._LEAVE&&(l._busy1=!1),o&&o(),l._taskList.push(function(){f._end(e,function(){s&&s(),d._parent._displayObject._dispatchEvent(d._parent._displayObject._renderedEvent)})}),l._isBusy()||(l._taskList.forEach(function(p){p()}),delete l._transitionEffect,l._pagingStatus=null,l._taskList=[])})},proto$B._enter=function(e,t,r,a,n,o){return this._animateTransform(0,e,t,r,a,n,o)},proto$B._leave=function(e,t,r,a,n,o){Mugeda.DataStats&&Mugeda.DataStats.entry({type:"updatePageTime",fromId:e._sceneInfo._guid,toId:t._sceneInfo._guid,toName:t._sceneInfo._name||"第"+(a+1)+"页",event:"leavePage"});var s=(e||t)._parent,l=s._displayObject,_=this._getTransitionType(l,r);return this._transitionEffect=TransitionEffects._getInstance(_,this),this._busy1=!0,this._busy2=!0,this._animateTransform(1,e,t,r,a,n,o)},mod.namespace("Render.RenderObjectSceneSwitcher",RenderObjectSceneSwitcher);var renderObjectMovieClip=function(){renderObjectMovieClip.__super__.constructor.apply(this,arguments);var e=this;e._scenes=[],e._currentScene=null,e._animtionClassName=null,e._aniamtionKeyframeName=null,e._prevScene=null,e._renderObjectSceneSwitcher=null,e._movieClipRenderObjectList=[]};mod.extend(renderObjectMovieClip,RenderObject);var proto$A=renderObjectMovieClip.prototype;proto$A._addChild=function(){var e=this,t=renderObjectMovieClip.__super__._addChild.apply(e,arguments);t._parentMovieClipRenderObject=e,t._parentMovieClipRenderObjectChild=t},proto$A._setDisplayInitState=function(){var e=this;renderObjectMovieClip.__super__._setDisplayInitState.apply(e,arguments);var t=e._displayObject;e._html='<div  ondragstart="return false;" data-type="movie-clip" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}">{{childNode}}</div>',t._sceneSwitchOpts&&(e._renderObjectSceneSwitcher=new RenderObjectSceneSwitcher(t,e))},proto$A._buildFun=function(){var e=this;renderObjectMovieClip.__super__._buildFun.apply(e,arguments),e._node&&e._scenes.length>0&&e._parent._displayObject instanceof Stage&&e._renderObjectSceneSwitcher&&e._renderObjectSceneSwitcher._initUI()},proto$A._switchToCurrentSceneLeave=function(e,t,r){var a=this,n=a._displayObject,o=n._scenes.indexOf(e),s=n._scenes.indexOf(t),l=a._scenes[o],_=a._scenes[s];a._renderObjectSceneSwitcher._setAdditionOption(n._sceneSwitchOpts.customPagingOptions),a._renderObjectSceneSwitcher._leave(l,_,o,s,r)},proto$A._switchToCurrentScene=function(e){var t=this,r=t._displayObject,a=r._currentScene,n=t._prevScene;if(n!=a)if(t._prevScene=a,n==null)r._scenes.forEach(function(c,d){var u=t._scenes[d];u!=null&&(u._node==null&&u.getNode(),a==c?(t._currentScene=u,u._displayObject._setVisible(!0),u.render()):(n==c||n==null)&&(u._displayObject._setVisible(!1),u.render()))});else{var o=r._scenes.indexOf(n),s=r._scenes.indexOf(a),l=t._scenes[o],_=t._scenes[s];return l._displayObject._setVisible(!0),t._renderObjectSceneSwitcher._enter(l,_,o,s,void 0,function(){l._displayObject._setVisible(!1),e(),t._renderObjectSceneSwitcher._setAdditionOption(r._sceneSwitchOpts.customPagingOptions=null)}),t._currentScene=_,l}},proto$A._executeAppearAction=function(){var e=this,t=e._displayObject,r=t._actionAppearList;r.forEach(function(a){var n=a._displayObject,o=e._node;if(n._getRealVisible()){var s=a._behavior.type,l=a._behavior.param;if(s=="video"){var _=n._aniData.param||{};l.video_id=n._id,l.video_controls=_.hidePlayControls==1?0:1,l.video_continue_audio=_.continueAudio,l.auto=_.videoAutoPlay,l.clickStatus=_.clickStatus,l.hidePlayIcon=_.hidePlayIcon,l.video_name=_.name,l.video_mode="object",l.dom=o}if(s=="gotoPage"||s=="nextPage"||s=="prevPage"){var c=a._stage._displayObject._renderManager;c._listPendingActions=c._listPendingActions||[],c._listPendingActions.push(a)}a.doAction()}})};var RenderObjectShape=function(){RenderObjectShape.__super__.constructor.apply(this,arguments);var e=this;e._prevBitmapDataSrc=null,e._prevGraphicsHash=null,e._prevProgressRatio=null,e._prevHTML=null,e._updateMode="overwrite"};mod.extend(RenderObjectShape,RenderObject);var proto$z=RenderObjectShape.prototype;proto$z._refreshImage=function(e){var t=this,r=t._displayObject,a=r._resourceList;if(a!=null){var n=a[0];if(!(n==null||n._image==null)){var o=n._image.src;if(o!==r._prevImageSrc){r._prevImageSrc=o;var s=t.getNode();e&&(n._image=e),t._setDisplayInitState(),s&&(s.innerHTML=t._getHTML())}}}},proto$z.render=function(){RenderObjectShape.__super__.render.apply(this,arguments);var e=this,t=e._displayObject,r=!1,a=!1,n=t._getBitmapData(),o=t._graphics._hash,s=t._progressRatio;if(n&&e._prevBitmapDataSrc!=n._image.src&&(r=!0,e._prevBitmapDataSrc=n._image.src),e._prevGraphicsHash!=o&&(r=!0,e._prevGraphicsHash=o),e._prevProgressRatio!=s&&(a=!0,e._prevProgressRatio=s),r){var l=e._generateSvgStr(),_=l.match(/id\=\"(.*?)\"/);if(_&&_.length>1)var c=l.replace(new RegExp(_[1],"g"),"");else c=l;if(c!=e._prevHTML){e._prevHTML=c;var d=e.getNode();if(Browser$1.isTestEnvir)d.innerHTML=l;else{var u=d.querySelector("svg");u&&(u.outerHTML=l);var f=d.querySelector("div");f&&f.getAttribute("data-ios")&&(f.outerHTML=l)}d.style.display!="none"&&(d.style.display="none",d.trick=d.offsetHeight,d.style.display="block"),s!=1&&(a=!0)}}if(a){var p=e.getNode().querySelector(".path_"+t._id),v=parseFloat(p.style.strokeDashoffset);t._progressRatio<0&&(t._progressRatio=0);var h=p.style.strokeDasharray;h===""&&(h=t._aniData.param.arcLength||1e4,p.style.strokeDasharray=h);var g=parseFloat(h)*(1-t._progressRatio);v!=g&&(p.style.strokeDashoffset=g),t._progressRatio==0?p.setAttribute("stroke-linecap","none"):p.setAttribute("stroke-linecap",e._displayObject._aniData.param.lineCap||"round")}};var linearInter=function(e,t,r){return e+r*(t-e)};proto$z._redraw=function(e,t,r){r=r||1;var a=this;if(a._beforeRedraw(e,t)){var n=a._displayObject,o=n._graphics,s=o._actions;s.forEach(function(l){if(l instanceof GraphicsSolidFill&&(n._hasProgress?e.fillStyle="rgba(255,255,255,0)":e.fillStyle=CanvasRender.getFillPattern(e,l)),l instanceof GraphicsImageFill)n._hasProgress?e.fillStyle="rgba(255,255,255,0)":e.fillStyle=CanvasRender.getFillPattern(e,l,t._a,t._d,n);else if(l instanceof GraphicsGradientFill)n._hasProgress?e.fillStyle="rgba(255,255,255,0)":e.fillStyle=CanvasRender.getFillPattern(e,l,t._a,t._d);else if(l instanceof GraphicsStroke)e.strokeStyle=l._fill._color._getCssText(),e.lineWidth=l._thickness*r,e.lineCap=l._caps,e.lineJoin=l._joints;else if(l instanceof GraphicsPath){var _=l._commands,c=l._data,d=n._progressRatio,u=_.length*d,f=Math.floor(u),p=u-f,v=0;e.beginPath(),_.forEach(function(h,g){if(!(g>f)){if(h===GraphicsPathCommand.MOVE_TO){var w=c[v++],y=c[v++],x=t._transform(w,y);e.moveTo(x._x,x._y)}else if(h===GraphicsPathCommand.CUBIC_CURVE_TO){w=c[v++],y=c[v++];var m=c[v++],A=c[v++],T=c[v++],b=c[v++];if(g==f&&p>0){if(_[g-1]===GraphicsPathCommand.MOVE_TO)var C=c[v-8],M=c[v-7];else _[g-1]===GraphicsPathCommand.CUBIC_CURVE_TO&&(C=c[v-12],M=c[v-11]);var E=p,O=linearInter(C,m,E),S=linearInter(M,A,E),L=linearInter(T,w,E),D=linearInter(b,y,E),$=linearInter(m,T,E),R=linearInter(A,b,E);T=linearInter(O,$,E),b=linearInter(S,R,E);var I=linearInter($,L,E),P=linearInter(R,D,E);w=linearInter(T,I,E),y=linearInter(b,P,E)}var F=t._transform(m,A),N=t._transform(T,b);x=t._transform(w,y),e.bezierCurveTo(F._x,F._y,N._x,N._y,x._x,x._y)}}}),e.fill(),e.stroke()}})}},proto$z._dispatchInputEvent=function(e){var t=this,r=e.type,a=e.target,n=t._displayObject,o=n._aniData.type,s=shapeTypes.includes(o),l=!s||a.nodeName.toLowerCase()=="path"||a.dataset&&a.dataset.mark&&a.dataset.mark=="path";if(l)RenderObjectShape.__super__._dispatchInputEvent.apply(t,arguments);else{for(var _=arguments,c=n._getRoot()._getRenderObject(),d=function(f){if(f._currentFrame!==void 0)var p=(f._getDisplayInfoByFrame(f._currentFrame)||{})._displayObjectList;else p=f.children;p=p.filter(function(b){return b._id!=n._id});var v=new InputEvent(r,e);v._stage=c._displayObject;var h=v._getInputX(),g=v._getInputY(),w=f;w._type=="scene"&&(w=t._renderObjectContainer._parent._displayObject);var y=new Point(h,g),x=w._getTotalMatrix();w._offsetMatrix&&(x=Matrix._multiplication(w._offsetMatrix,x));var m=x,A=RenderObject._findClickDisplayObject(p,y,m);if(A)if(A._type=="MovieClip"||A._type=="Sprite")d(A);else{var T=A._renderObject;T._eventProxyDom=T._node,RenderObjectShape.__super__._dispatchInputEvent.apply(T,_)}},u=n._parent;u._id!=1;)u=u._parent;d(u);return}},proto$z._applyActions=function(e){var t=this,r="",a=null,n=null,o=t._displayObject._hasShapeAnimation&&t._displayObject._resourceList&&t._displayObject._resourceList[0],s=!1;return e.forEach(function(l){if(l instanceof GraphicsSolidFill&&(a=l),l instanceof GraphicsImageFill)a=l,s=!0;else if(l instanceof GraphicsGradientFill)a=l;else if(l instanceof GraphicsStroke)n=l;else if(l instanceof GraphicsPath){var _=l._commands,c=l._data,d=0,u="";_.forEach(function(D){if(D===GraphicsPathCommand.MOVE_TO){var $=o&&s?Math.round(c[d++]):c[d++],R=o&&s?Math.round(c[d++]):c[d++];u+=" M"+$+" "+R}else if(D===GraphicsPathCommand.CUBIC_CURVE_TO){if(o&&s){$=Math.round(c[d++]),R=Math.round(c[d++]);var I=Math.round(c[d++]),P=Math.round(c[d++]),F=Math.round(c[d++]),N=Math.round(c[d++])}else{$=c[d++],R=c[d++];var I=c[d++],P=c[d++],F=c[d++],N=c[d++]}u+=" C"+I+" "+P+","+F+","+N+","+$+" "+R}});var f=!1;if(t.getNode()){var p=t._node.querySelector("pattern"),v=t._node.querySelector("image");p&&v&&(f=a._updateDefs(p,v))}f||(r+=a._getDefs(t._displayObject));var h=t._displayObject._aniData.param,g="";if(h.lineType&&h.lineType!="solid"){var w=h.lineGap||4,y={dotted:[2,w],dashed:[12+h.lineWidth,w],dasheddotted:[12+h.lineWidth,w,2,w]},p=y[h.lineType];p&&(g='style="stroke-dasharray: '+p.join(",")+';"')}else t._displayObject._hasProgress&&(g='style="stroke-dasharray: '+(h.arcLength||1e4)+';"');var x=h.fillInfo,m=!!(x&&(x.horOffset||x.verOffset)&&(x.horOffset!="0"||x.verOffset!="0")),A=navigator.userAgent,T=!!A.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(!m&&T&&t._displayObject._bitmapData&&t._displayObject._aniData.type&&(t._displayObject._aniData.type==2004||t._displayObject._aniData.type==2003)){var b=t._displayObject._rawWidth,C=t._displayObject._rawHeight;b=Math.round(b),C=Math.round(C);var M=t._displayObject._aniData.type==2004?"50%":"0%",E=h.lineWidth?h.lineWidth:0,O=E+"px "+(h.lineType?h.lineType:"solid")+" "+(h.strokeColor?h.strokeColor:"#000"),S=b-E,L=C-E;r+='<div data-mark="path" class="path_'+t._displayObject._id+'" style="position:absolute;top:0;left:0;width:'+S+"px;height:"+L+"px;border-radius:"+M+";border:"+O+';"></div>'}else n._fill._color&&(r+='<path class= "path_'+t._displayObject._id+'" d="'+u+'" stroke="'+n._fill._color._getCssText()+'" stroke-width="'+n._thickness+'" fill="'+a._getFill()+'" stroke-width="'+n._thickness+'" stroke-linecap="'+n._caps+'" stroke-linejoin="'+n._joints+'"  '+g+'style="'+(t._displayObject._haveClickAction?"cursor: pointer;":"")+'"/>')}}),r},proto$z.subDivision=function(e,t,r){var a=t,n=r,o=n+1;o==e.length&&(o=0),e[n].forwardX=a.forward.x,e[n].forwardY=a.forward.y,e[o].backwardX=a.backward.x,e[o].backwardY=a.backward.y,a=a.point,a=new this.Point(a.nodeX,a.nodeY,a.forwardX,a.forwardY,a.backwardX,a.backwardY),e.splice(n+1,0,a)},proto$z._generateSvgStr=function(){var e=this,t=e._displayObject,r=t._graphics,a=r._actions,n=r._thickness/2,o=t._aniData.param,s=o.fillInfo,l=navigator.userAgent,_=!!l.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),c=!!(s&&(s.horOffset||s.verOffset)&&(s.horOffset!="0"||s.verOffset!="0")),d=t._rawWidth,u=t._rawHeight,f=a.some(function(h){if(h instanceof GraphicsImageFill)return!0});if(t._hasShapeAnimation&&f&&(d=Math.round(d),u=Math.round(u)),!c&&_&&t._bitmapData&&t._aniData.type&&(t._aniData.type==2004||t._aniData.type==2003)){var p='<div class="curve_render" data-ios="true" style="position:relative;width:'+d+"px;height:"+u+"px;display:block;overflow:visible;margin:-"+n+"px;padding:"+n+'px;">';p+=e._applyActions(a),p+="</div>"}else{var v=t._aniData.type==2048?"none":"block",p='<svg class="curve_render"  width="'+d+'" height="'+u+'" style="display:'+v+";overflow:visible;margin:-"+n+"px;padding:"+n+'px;">';p+=e._applyActions(a),p+="</svg>"}return p},proto$z._setDisplayInitState=function(){var e=this,t=e._displayObject,r=e._prevHTML=e._generateSvgStr();e._html='<div ondragstart="return false;" data-type="shape" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}">'+r+"</div>";var a=StyleSheetManager.insertCss("overflow: visible;");e._classNameList.push(a),e._staticClassName=a,e._prevBitmapDataSrc=t._getBitmapData()&&t._getBitmapData()._image.src,e._prevGraphicsHash=t._graphics._hash,e._prevProgressRatio=t._progressRatio},mod.namespace("Render.RenderObjectShape",RenderObjectShape);var RenderObjectScene=function(){var e=this;RenderObjectScene.__super__.constructor.apply(e,arguments),e._sceneInfo=null,e._sceneEnded=!1,e._clipWidth=null,e._clipHeight=null,e._prevClipWidth=null,e._prevClipHeight=null,e._clipLeft=null,e._clipTop=null,e._prevClipTop=null,e._zValue=null,e._clipNode=null,e._scrollTop=0,e._prevScrollTop=0};mod.extend(RenderObjectScene,RenderObject);var proto$y=RenderObjectScene.prototype;proto$y._addChild=function(){var e=this,t=RenderObjectScene.__super__._addChild.apply(e,arguments);t._parentSceneRenderObject=e,t._parentMovieClipRenderObjectChild=t},proto$y._setDisplayInitState=function(){var e=this,t=e._displayObject,r="top: 0;"+Browser$1.prefix.css+"transition: "+Browser$1.prefix.css+"transform, opacity 0ms ease-in-out;",a=StyleSheetManager.insertCss(r);e._classNameList.push(a),e._staticClassName=a;var n=e._parent._displayObject._parent;if(n instanceof Stage)var o=StyleSheetManager.insertCss("position: absolute;overflow: hidden;width: "+n._stageWidth+"px;height: "+n._stageHeight+"px;");var s=t._guid||e._sceneInfo._guid;e._html='<div data-type="scene" data-name="'+e._sceneInfo._name+'" data-mid="'+t._id+'"'+(s?' data-guid="'+s+'"':"")+' class="{{className}}">'+(o?'<div class="mugine_scene_clip '+o+'">{{childNode}}</div>':"{{childNode}}")+"</div>",e._clipClassName=o},proto$y.getNode=function(e){var t=this;if(e){var r=t._getClipNode();if(r)return r}return RenderObjectScene.__super__.getNode.apply(t,arguments)},proto$y._getClipNode=function(){var e=this;if(e._clipNode)return e._clipNode;var t=e.getNode().children[0];return t.className.indexOf("mugine_scene_clip")>-1&&(e._clipNode=t),e._clipNode},proto$y.renderScene=function(){var e=this,t=e._parent._displayObject._parent,r=e.scrollInertia;if(r){var a=r.endInertia=function(){e.scrollInertia=null,e._parent._displayObject.parent._renderManager._forceCheckHash.splice(e._parent._displayObject.parent._renderManager._forceCheckHash.indexOf(e),1),e.scrollInertia=void 0},n=r._iterate();e._scrollTop+=n._y,r._speed&&r._speed._x===0&&r._speed._y===0&&a()}if(t instanceof Stage){if(e._clipClassName&&(e._prevClipTop!==e._clipTop||e._prevClipLeft!==e._clipLeft||e._prevClipWidth!==e._clipWidth||e._prevClipHeight!==e._clipHeight)){e._prevClipTop=e._clipTop,e._prevClipLeft=e._clipLeft,e._prevClipWidth=e._clipWidth,e._prevClipHeight=e._clipHeight;var o=e._getClipNode(),s=o.className;StyleSheetManager.deleteCss(e._clipClassName),StyleSheetManager.deleteCss(e._clipClassName+" > [data-type]");var l=new RegExp(" *"+e._clipClassName,"g");s=s.replace(l,"");var _=StyleSheetManager.insertCss("position: absolute;overflow: hidden;width: "+Math.min(t._stageWidth,e._clipWidth)+"px;height: "+(t._scaleMode==="width2"?t._stageHeight+"px;":Math.min(t._stageHeight+0,e._clipHeight+0)+"px;")+"top:"+Math.max(0,e._clipTop)+"px;left:"+Math.max(0,e._clipLeft)+"px;");e._clipClassName=_,s+=" "+_,o.className=s,StyleSheetManager.insertCss(e._clipClassName+" > [data-type]","top:"+Math.round(Math.min(0,e._clipTop))+"px; left:"+Math.round(Math.min(0,e._clipLeft))+"px")}e._prevScrollTop!==e._scrollTop&&(e._scrollTop>0?(e._scrollTop=0,a&&a()):t._fullScreenRect._height-e._scrollTop>t._stageHeight&&(e._scrollTop=-t._stageHeight+t._fullScreenRect._height,a&&a()),e._clipNode.style.cssText+=Browser$1.prefix.css+"transform:translateY("+e._scrollTop+"px);",e._prevScrollTop=e._scrollTop)}},proto$y.render=function(){var e=this,t=RenderObjectScene.__super__.render.apply(e,arguments);return e.renderScene(),t},proto$y._buildFun=function(){var e=this;e.constructor.__super__._buildFun.apply(e,arguments),e._node.addEventListener(Browser$1.prefix.lowercase+"AnimationEnd",e._handleAnimationEnd.bind(e))},StyleSheetManager.animationPrefix=Browser$1.prefix.css,proto$y._setKeyframeAnimation=function(e){var t=this,r=e._displayObject,a=e._parentMovieClipRenderObject._displayObject,n=a._objectFrames,o=n[r._id],s=1/a._getRoot()._frameRate;if(o){var l=t._sceneInfo,_=l._numFrames,c=l._startFrame,d=_,u=o._min-c,f=o._max-c,p="",v="0.01";u>0&&(p+="0% { "+Browser$1.prefix.css+"transform: scale("+v+"); }",p+=u/d*100-1e-4+"% { "+Browser$1.prefix.css+"transform: scale("+v+"); }");for(var h=u;h<=f+1;h++){var g=h+c,w=o.getKeyframe(g);if(w!=null){var y=w._matrix,x=r._parent&&r._parent._offsetMatrix,m="";x&&(m+=x._toCssText()),m+=" "+y._toCssText(!0),r._flipMatrix&&(m+=" "+r._flipMatrix._toCssText());var A=w._colorTransform,T=Browser$1.prefix.css+"transform:"+m+"; opacity: "+A._getAlpha()+";";if(h<=f){var b=Math.min(100,(h-0)/d*100);p+=b+"% { "+T+"}"}}}f<d-1?(p+=(f+1)/d*100-1e-4+"% { "+T+"}",p+=(f+1)/d*100+"% { "+Browser$1.prefix.css+"transform: scale("+v+"); }",p+="100% { "+Browser$1.prefix.css+"transform:scale("+v+"); }"):p+="100% { "+T+"}";var C=0;if(window.DEBUG_CS3_MODE){var M=e._parentMovieClipRenderObject&&e._parentMovieClipRenderObject._parentMovieClipRenderObject;M&&(C=M._displayObject._objectFrames[e._parentMovieClipRenderObject._parentMovieClipRenderObjectChild._displayObject._id]._min*s)}var E=a._loop?"infinite":1,O=StyleSheetManager.insertKeyframes(p),S=Browser$1.prefix.css+"animation: "+O+" "+d*s+"s linear "+C+"s "+E+" forwards;",L=StyleSheetManager.insertCss(S);e._animtionClassName&&e._classNameList.splice(e._classNameList.indexOf(e._animtionClassName),1);var D=document.querySelectorAll("."+e._staticClassName);D[0]&&e.setClassName(D[0]),e._aniamtionKeyframeName&&StyleSheetManager.deleteAnimationCss(e._aniamtionKeyframeName),e._animtionClassName&&StyleSheetManager.deleteCss(e._animtionClassName),e._animtionClassName=L,e._aniamtionKeyframeName=O}},proto$y._handleAnimationEnd=function(e){var t=this;if(t._parent._displayObject._currentScene!=t._sceneInfo&&(t._sceneEnded=!0),!t._sceneEnded){var r=e.target.parentNode;if(r===t._node){t._sceneEnded=!0;var a=t._parent,n=a._displayObject,o=t._sceneInfo,s=o._startFrame,l=o._numFrames,_=s+l-1;n._currentFrame=_,n._currentFrameDecimal=_+.99999}}};var RenderObjectStage=function(){var e=this;RenderObjectStage.__super__.constructor.apply(e,arguments),e._clipWidth=null,e._clipHeight=null,e._clipStyleClass=null,e._prevClipWidth=null,e._prevClipHeight=null,e._prevWndWidth=null,e._prevWndHeight=null,e._needResize=!1};mod.extend(RenderObjectStage,RenderObject);var proto$x=RenderObjectStage.prototype;proto$x._setDisplayInitState=function(){var e=this,t=e._displayObject,r=t._aniData.image,a=t._aniData.metadata||{};a.adaptMode;var n="100% 100%",o="";r&&r.length?(r=t._getRoot()._renderManager._resourceLoader._dir.getFullPath(r),o="background-image: url("+r+"); background-repeat: no-repeat;background-size:"+n+";background-position:center;"):o="background:"+t._color._getCssText()+";";var s=StyleSheetManager.insertCss("overflow: hidden;"+o+"left: 0;top: 0;"+(t._haveClickAction?"cursor: pointer;":""));e._classNameList.push(s),e._staticClassName=s,e._html='<div data-type="stage" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}">{{childNode}}</div>'},proto$x._buildFun=function(){var e=this;RenderObjectStage.__super__._buildFun.apply(e,arguments),window.addEventListener("orientationchange",function(){var r=document.activeElement;r&&r.blur()});var t=function(){window.WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:"2"}),window.WeixinJSBridge.on("menu:setfont",function(){window.WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:"2"})})};typeof window.WeixinJSBridge>"u"?document.addEventListener("WeixinJSBridgeReady",t,!1):t()},proto$x._getStageRotate=function(e){if(!Browser$1.os.tablet&&!Browser$1.os.phone&&!Browser$1.os.android)return 0;var t=this,r=t._displayObject;e=e||t._getStageSize();var a=e.width,n=e.height,o=r._stageWidth,s=r._stageHeight,l=0,_=(r._aniData.metadata||{}).rotateMode;if(_=="auto"){var c=n/a,d=s/o;if(c>1&&d<1||c<1&&d>1)switch(window.orientation||0){case 0:l=90;break;case 90:l=-90;break;case-90:l=90;break;default:l=-90}}else if(_=="landscape")switch(window.orientation||0){case 0:l=90;break;case 90:l=0;break;case-90:l=0;break;default:l=-90}else if(_=="portrait")switch(window.orientation||0){case 0:l=0;break;case 90:l=-90;break;case-90:l=90;break;default:l=0}return l},proto$x._getStageSize=function(){var e=this,t=e._displayObject,r=e._displayObject._renderManager._stageDom.parentNode;if((t._mrmcp||{}).render_mode=="embedded"&&r!=document.body)a={width:r.offsetWidth,height:r.offsetHeight};else var a=mod.getWndSize();return a},proto$x._adaptStage=function(e){var t=this;t._needResize=!1;var r=t._displayObject,a=r._scaleMode,n=t._getStageSize(),o=n.width,s=n.height,l=r._stageWidth,_=r._stageHeight,c=document.activeElement;if(["INPUT","TEXTAREA"].indexOf(c.tagName)==-1&&!c.getAttribute("contenteditable")&&(c=null),c==null||c._relateRenderObject==null)var d=!0;(r._aniData.metadata||{}).rotateMode;var u=0;if(d?u=t._getStageRotate():u=0,s<t._prevWndHeight&&!d&&u==0){var f=s;o=t._prevWndWidth,s=t._prevWndHeight}u/180*Math.PI!=r._stageRotate&&(r._stageRotate=u/180*Math.PI,r._dispatchEvent(new MuEvents("stageRotateChange")));var p=new Point(o/2,s/2),v=new Point(-o/2,s/2),h=new Matrix;h._rotate(-r._stageRotate),h._transform(p,!0),h._transform(v,!0);var g,w,y;{a==StageScaleMode.ADAPT_NONE&&(Browser$1.os.phone?a=StageScaleMode.ADAPT_WIDTH:a=StageScaleMode.ADAPT_CONTAIN);var x=Math.max(Math.abs(p._x),Math.abs(v._x))*2,m=Math.max(Math.abs(p._y),Math.abs(v._y))*2;if(a==StageScaleMode.ADAPT_WIDTH)w=g=x/l,y=new Rectangle(0,(_-m/w)/2,l,m/w);else if(a==StageScaleMode.ADAPT_WIDTH2)w=g=x/l,y=new Rectangle(0,(_-m/w)/2,l,m/w);else if(a==StageScaleMode.ADAPT_HEIGHT)w=g=m/_,y=new Rectangle((l-x/g)/2,0,x/g,_);else if(a==StageScaleMode.ADAPT_CONTAIN){var A=p._y*v._x,T=p._x*v._y,b=_*p._x,C=l*p._y,M=_*v._x,E=l*v._y,O=-l*(-A+T)/(-b+C+M-E),S=l*(-A+T)/(-b+C-M+E),L=-l*(-A+T)/(b+C-M-E),D=-l*(-A+T)/(b+C+M+E);w=g=Math.min(Math.abs(O),Math.abs(S),Math.abs(L),Math.abs(D))*2/l,y=new Rectangle((l-x/g)/2,(_-m/w)/2,x/g,m/w)}else a==StageScaleMode.ADAPT_COVER?(w=g=Math.max(x/l,m/_),y=new Rectangle((l-x/g)/2,(_-m/w)/2,x/g,m/w)):a==StageScaleMode.ADAPT_FILL?(g=x/l,w=m/_,y=new Rectangle((l-x/g)/2,(_-m/w)/2,x/g,m/w)):a==StageScaleMode.ADAPT_NOSCALE&&(g=1,w=1,y=new Rectangle((l-x/g)/2,(_-m/w)/2,x/g,m/w));f!=null&&y._setHeight(y._getHeight()-(s-f)/w)}Browser$1.os.ios&&a==StageScaleMode.ADAPT_FILL&&(g-=1e-4,w-=1e-4),r._fullScreenRect=y,r._scaleX=g,r._scaleY=w,r._setTransform(new Transform);var $=r._transform._matrix;d&&(t._prevWndWidth=o,t._prevWndHeight=s);var R=0;if(c){var I=c._relateRenderObject;if(I){var P=I._displayObject,F=P,N=new Point(0,0),j=new Point(P._rawWidth,P._rawHeight);do N=F._transform._matrix._transform(N,!0),j=F._transform._matrix._transform(j,!0),F._offsetMatrix&&(N=F._offsetMatrix._transform(N,!0),j=F._offsetMatrix._transform(j,!0)),F=F._parent;while(F._parent&&F._parent._id!=0);var U=y._getBottom(),J=y._getRight(),B=y._getLeft(),W=y._getTop();if(N._y<W||j._y<W||N._y>U||j._y>U||N._x<B||j._x<B||N._x>J||j._x>J){var G=(N._x+j._x)/2,q=(N._y+j._y)/2;G-y._getWidth()/2-y._getLeft();var X=q-y._getHeight()/2-y._getTop();X>0?X=Math.min(X,_-U):X=Math.max(X,-W),R=X}}}if(y._setTop(y._getTop()+R),Browser$1.os.android){var Y=Math.min(Browser$1._getMaxTextureSize()/(DisplayObject._maxWidth*Browser$1.devicePixelRatio),Browser$1._getMaxTextureSize()/(DisplayObject._maxHeight*Browser$1.devicePixelRatio));Y>1&&(Y=1)}else Y=1;r._commonScale=Y;var K=-r._fullScreenRect._left,ne=-r._fullScreenRect._top;if($._translate(-K,-ne),$._translate(-r._stageWidth/2,-r._stageHeight/2),$._scale(g,w),$._rotate(r._stageRotate),$._translate(o/2,s/2),$._translate(0,-R*w),Y!==1){var Z=new Matrix;Z._translate(0,R*w),Z._translate(-o/2,-s/2),Z._rotate(-r._stageRotate),Z._scale(1/g,1/w);const V=g/Y,re=w/Y;Z._scale(V,re),Z._rotate(r._stageRotate),Z._translate(o/2/Y,s/2/Y),Z._translate(0,-R*w),r.transform._beforeTranform=Z._toCssText()}else r.transform._beforeTranform="";if(y._setHeight(Math.ceil(y._getHeight())),t._clipWidth=y._width,t._clipHeight=y._height,traversalChildScene.bind(t)(function(V){V._clipWidth=y._width,V._clipHeight=y._height,a==StageScaleMode.ADAPT_WIDTH2?(V._clipLeft=0,V._clipTop=0):(V._clipLeft=K,V._clipTop=ne)}),r._dispatchEvent(r._changedEvent),c&&Browser$1.os.ios&&(Browser$1.os.version||"").split(".")[0]*1<11&&setTimeout(function(){c.scrollIntoViewIfNeeded()},500),!fullScreenBind){var k=mod.debounce(t._adaptStage.bind(t),50,!1);r._addEventListener("resize",k,50),window.addEventListener("orientationchange",k,50),r._addEventListener("blur",function(){t._needResize=!0,setTimeout(function(){if(t._needResize&&(k(),Browser$1._weChat&&Browser$1.os.ios)){var V=document.documentElement.scrollTop||document.body.scrollTop||0;window.scrollTo(0,Math.max(V-1,0))}},1e3)},!0),r._addEventListener("focus",k,!0),fullScreenBind=!0,t.render(!0)}};var fullScreenBind=!1;Browser$1._globalObject.Mugeda&&(Browser$1._globalObject.Mugeda.getWindowSize=mod.getWndSize);var traversalChildScene=function(e){var t=this._children.filter(function(r){return r instanceof renderObjectMovieClip});t.forEach(function(r){r._children.filter(function(a){return a instanceof RenderObjectScene}).forEach(e)})};proto$x.render=function(){var e=this,t=e.getNode();e._displayObject._commonScale?t.style.zoom=e._displayObject._commonScale:t.style.zoom=null;var r=RenderObjectStage.__super__.render.call(e,!0),a=!1;if(e._prevClipWidth!==e._clipWidth||e._prevClipHeight!==e._clipHeight){a=!0,e._prevClipWidth=e._clipWidth,e._prevClipHeight=e._clipHeight,e._clipStyleClass&&(StyleSheetManager.deleteCss(e._clipStyleClass),e._classNameList.splice(e._classNameList.indexOf(e._clipStyleClass),1));var n=StyleSheetManager.insertCss("width:"+e._clipWidth+"px;height:"+(e._clipHeight+0)+"px;");e._classNameList.push(n),e._clipStyleClass=n,traversalChildScene.bind(e)(function(o){o.renderScene()})}return(a||r)&&e.setClassName(),r};var TextFormatAlign=function(){};TextFormatAlign.LEFT="left",TextFormatAlign.CENTER="center",TextFormatAlign.RIGHT="right",TextFormatAlign.JUSTIFY="justify",TextFormatAlign.TOP="top",TextFormatAlign.BOTTOM="bottom",mod.exportName(TextFormatAlign,["LEFT",TextFormatAlign.LEFT,"CENTER",TextFormatAlign.CENTER,"RIGHT",TextFormatAlign.RIGHT,"JUSTIFY",TextFormatAlign.JUSTIFY,"TOP",TextFormatAlign.TOP,"BOTTOM",TextFormatAlign.BOTTOM]);var renderObjectTextField=function(){renderObjectTextField.__super__.constructor.apply(this,arguments);var e=this;e._prevText=null,e._prevTextTransform=null,e.cachedVisible=!1,e.scrollDisabled=!1,e._waitFontTimeout=null,e._aimFontData=null,e.changingMark=0};mod.extend(renderObjectTextField,RenderObject);var proto$w=renderObjectTextField.prototype;proto$w._getTextWidth=function(e,t,r){var a=document.createElement("div");a.id="text_measure_"+new Date().getTime(),a.style.padding=0,a.style.margin=0,a.style.display="block",a.style.fontSize=t+"px",a.style.opacity=0,a.style.position="absolute",a.style.left=0,a.style.top=0,r.toLowerCase()=="simhei"&&(r='"Microsoft YaHei", "微软雅黑", SimHei, sans-serif'),a.style.fontFamily=r,a.textContent=e,document.body.appendChild(a);var n=a.clientWidth;return document.body.removeChild(a),n},proto$w._getHtmlAndCss=function(){var A,T;var e=this,t=e._displayObject,r=t._defaultTextFormat,a="",n=t._keyframes||[],o=n.filter(function(b){var C=b.transform._paramTransform._fillType;return C===FillType.LINEAR||C===FillType.RADIAL}),s=n.length===0&&(t._transform._paramTransform._fillType===FillType.LINEAR||t._transform._paramTransform._fillType===FillType.RADIAL)||o.length>0;s&&(a="background:"+getCssBackgroundColor(t._transform)+";"+Browser$1.prefix.css+"text-fill-color: transparent;"+Browser$1.prefix.css+"background-clip: text;");var l=r._color,_=Browser$1.prefix.css!=="-moz-";if(_){e._displayVal="display: "+Browser$1.prefix.css+"box;display: "+Browser$1.prefix.css+"flex;",t._textVAlign,TextFormatAlign.CENTER,t._textVAlign===TextFormatAlign.CENTER&&(a+="margin:auto 0;");var c=t._textVAlign===TextFormatAlign.BOTTOM?"column-reverse":"column",d=t._textVAlign===TextFormatAlign.CENTER?"center":t._textVAlign===TextFormatAlign.BOTTOM?"end":"start",u="display: "+Browser$1.prefix.css+"box;display: "+Browser$1.prefix.css+"flex;"+Browser$1.prefix.css+"box-orient: vertical;"+Browser$1.prefix.css+"flex-direction: "+c+";"+Browser$1.prefix.css+"box-pack: "+d+";"+Browser$1.prefix.css+"justify-content: flex-start;",f='<div class="text_holder" style="'+a+'">'+t._getHtmlText()+"</div>"}else{e._displayVal="display: table;";var p=t._textVAlign===TextFormatAlign.CENTER?"middle":t._textVAlign===TextFormatAlign.BOTTOM?"bottom":"top";u="display: table;",f='<div style="display: table-cell; vertical-align: '+p+";"+a+'">'+t._getHtmlText()+"</div>"}var v='<div ondragstart="return false;" data-type="text-field" data-name="'+t._name+'" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}">'+f+"</div>";if(t._fontData)var h=t._fontData._getFontFamily();else h=r._font;var g=t._transform._paramTransform;if(g._strokeColor&&g._strokeColor._a>0||(((T=(A=t._aniData)==null?void 0:A.param)==null?void 0:T.ownParam)??[]).includes("strokeColor")){var w=g._strokeWidth,y=g._strokeColor._getCssText();u+=Browser$1.prefix.css+"text-stroke:"+w/1+"px "+y+";"}var x="position: absolute; overflow-wrap: break-word;word-break: break-word;width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+Browser$1.prefix.css+"transform-origin: left top;"+u+"font-family: "+h+";text-align: "+r._align+";text-align-last: auto;color: "+l._getCssText()+";font-size: "+g._fontSize+"px;line-height: "+(g._lineHeight/100||1)+";letter-spacing: "+g._letterSpace+"px;"+(r._bold?"font-weight: bold;":"")+(r._underline?"text-decoration: underline;":"")+(r._italic?"font-style: italic;":"")+(t._haveClickAction?"cursor: pointer;":""),m={html:v,css:x,styles:["p","margin-block-start: 0; margin-block-end: 0;","> *:first-child",a]};return mod.exportName(m,["html",m.html,"css",m.css,"styles",m.styles]),m},proto$w._initLoadFontData=function(){var e=this,t=e._displayObject;if(t._fontData){var r=t._fontData._loader;if(r._contentLoaderInfo._state==LoaderInfo.STATE.LOADED)e._currentFontText=t._text,t._fontData._addToDocument();else{var a=function(){e._cancelCurrentLoadFont=null,e._loadingFontText=null,e._currentFontText=t._text,t._fontData._addToDocument()};e._loadingFontText=t._text,r._contentLoaderInfo._addEventListenerOnce("complete",a),r._contentLoaderInfo._addEventListenerOnce("ioError",a),e._cancelCurrentLoadFont=function(){r._contentLoaderInfo._removeEventListener("complete",a),r._contentLoaderInfo._removeEventListener("ioError",a)}}}},proto$w._setDisplayInitState=function(){var e=this,t=e._getHtmlAndCss();e._html=t.html;var r=t.css,a=t.styles||[],n=e._displayObject;e._initLoadFontData();var o=Mugeda.options?!!Mugeda.options.loopScrollingText:!1,s=n._textOverflow||"visible",l=s==="scroll"||s==="scrollNoBar"||s==="manualScroll"||s==="manualScrollNoBar",_=s==="scrollNoBar"||s==="manualScrollNoBar";s!="visible"&&(r+="overflow: "+(o?"hidden":l?"auto":s)+";",l&&(r+="-webkit-overflow-scrolling: touch;"),e._classNameList.push("mugeda_overflow"),_&&e._classNameList.push("nobar"));var c=StyleSheetManager.insertCss(r);e._classNameList.push(c),e._staticClassName=c;for(var d=0;d<a.length;d+=2){var u=a[d],f=a[d+1];StyleSheetManager.insertCss(`${c} ${u}`,f)}},!Browser$1.mobile&&Browser$1.prefix.css=="-webkit-"&&(StyleSheetManager.insertCss("mugeda_overflow::"+Browser$1.prefix.css+"scrollbar","width: 4px;height:0px;"),StyleSheetManager.insertCss("mugeda_overflow::"+Browser$1.prefix.css+"scrollbar-thumb","background-color:rgba(255,255,255,0.5);"),StyleSheetManager.insertCss("mugeda_overflow::"+Browser$1.prefix.css+"scrollbar-track",Browser$1.prefix.css+"box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.5);background-color: inset 0 0 4px rgba(0, 0, 0, 0.5);"),StyleSheetManager.insertCss("nobar::"+Browser$1.prefix.css+"scrollbar","background-color:rgba(255,255,255,0);"),StyleSheetManager.insertCss("nobar::"+Browser$1.prefix.css+"scrollbar-thumb","background-color:rgba(255,255,255,0);"),StyleSheetManager.insertCss("nobar::"+Browser$1.prefix.css+"scrollbar-track",Browser$1.prefix.css+"box-shadow: inset 0 0 4px rgba(0, 0, 0, 0);background-color: inset 0 0 4px rgba(0, 0, 0, 0);")),StyleSheetManager.insertCss("mugeda_richtext a","text-decoration:none;color:inherit;"),StyleSheetManager.insertCss("mugeda_richtext a:visited","text-decoration:none;color:inherit;"),StyleSheetManager.insertCss("mugeda_richtext img","width:100%;"),proto$w._buildFun=function(){var e=this,t=e._displayObject;t._prevText&&t._updatePreset(),renderObjectTextField.__super__._buildFun.apply(this,arguments)},proto$w._prepareCapture=function(e){var t=this,r=t._displayObject,a=1,n=function(){--a===0&&t._triggerNewSvg(e)},o=t._getHTML().match(/<img.*?>/g)||[],s=o.map(function(c){return c.match(/\ssrc=['"](.*?)['"]/)[1]});if(t._imageCache=t._imageCache||{},s.forEach(function(c){if(t._imageCache[c])return n();a++;var d=t._imageCache[c]=new BitmapData;d._src=c,d._image=BitmapData.blankImage,d._loader._contentLoaderInfo._addEventListener("complete",function(){return n()}),d._loader._contentLoaderInfo._addEventListener("ioError",function(){return n()}),d._load()}),r._fontData){a++;var l=FontData._getFontData(r._fontData._fontName,null,r._text,null,r._getRoot()._resource),_=l._loader;_._contentLoaderInfo._state==LoaderInfo.STATE.LOADED?n():(_._contentLoaderInfo._addEventListenerOnce("complete",n),_._contentLoaderInfo._addEventListenerOnce("ioError",n),t._cancelCurrentLoadFont=function(){_._contentLoaderInfo._removeEventListener("complete",n),_._contentLoaderInfo._removeEventListener("ioError",n)},l._load(_))}n()},proto$w._triggerNewSvg=function(e){var t=this,r=t._displayObject,a="";if(r._fontData){var n=r._fontData._getFontFamily(r);a+="<defs><style>@font-face {font-family: "+n+";src:url("+r._fontData._base64+")}</style></defs>"}var o=r._rawWidth,s=r._rawHeight;r._textOverflow==="visible"&&(s=Math.max(s,r._textHeight));var l=t._getHtmlAndCss(),_=l.html,c=l.css,d=l.styles||[],u="<style>",f="__root";u+=`.${f}{${c}}`;for(var p=0;p<d.length;p+=2){var v=d[p],h=d[p+1];u+=`.${f} ${v}{${h}}`}if(u+="</style>",_=_.replace('class="{{className}}"','class="'+f+'"'),_=_.replace(/(<img[^>]+?)\/?\s*>/g,"$1></img>"),_=_.replace(/(<br[^>]+?)\/?\s*>/g,"$1></br>"),_=_.replace(/&nbsp;/g,"&#160;"),_=_.replace(/<img.*?>/g,function(A){return A.replace(/\ssrc=['"](.*?)['"]/,function(T,b){var C=t._imageCache[b];if(!C)return T;var M=document.createElement("canvas");M.width=C._image.width,M.height=C._image.height;var E=M.getContext("2d");E.drawImage(C._image,0,0);var O=M.toDataURL("image/png");return' src="'+O+'" style="max-width: 100%;"'})}),r._textVAlign===TextFormatAlign.BOTTOM){var g=document.createElement("div");document.body.appendChild(g),g.innerHTML=u+_;var w=g.querySelector(".text_holder"),y=w.offsetTop;document.body.removeChild(g),y=y>0?0:y,y<0&&(u=u.replace("</style>",`.${f} .text_holder{position: relative; top:${-y}px;}</style>`))}else y=0;var x='<?xml version="1.0"?><svg xmlns="http://www.w3.org/2000/svg" width="'+o+'" height="'+s+'">'+a+'<foreignObject x="0" y="0" width="'+o+'" height="'+s+'"><div xmlns="http://www.w3.org/1999/xhtml">'+u+_+"</div></foreignObject></svg>",m=new Image;m.src="data:image/svg+xml,"+encodeURIComponent(x),m.onload=m.onerror=function(){t._svgImage=m,t._svgImageOffset=[0,y],setTimeout(function(){e()},Browser$1.os.ios&&r._fontData?100:0)}},proto$w._updateSvgImage=function(e){var t=this,r=t._displayObject,a=r._getHtmlText();if(!(a==t._prevSvgText&&r._transform._paramTransform._compareTo(t._prevTextTransform)))if(t._prevSvgText=a,r._fontData)if(r._text==t._currentFontTextSvg){t._cancelCurrentLoadFontSvg&&t._cancelCurrentLoadFontSvg();var n=function(){t._cancelCurrentLoadFontSvg=null,t._currentFontTextSvg=r._text,t._loadingFontTextSvg=null,t._triggerNewSvg(e)};r._fontData._loader._contentLoaderInfo._state==LoaderInfo.STATE.LOADED?n():(t._loadingFontTextSvg=r._text,r._fontData._loader._contentLoaderInfo._addEventListenerOnce("complete",n),r._fontData._loader._contentLoaderInfo._addEventListenerOnce("ioError",n),t._cancelCurrentLoadFontSvg=function(){r._fontData._loader._contentLoaderInfo._removeEventListener("complete",n),r._fontData._loader._contentLoaderInfo._removeEventListener("ioError",n)})}else{if(r._text==t._loadingFontTextSvg)return;t._cancelCurrentLoadFontSvg&&t._cancelCurrentLoadFontSvg(),t._loadingFontTextSvg=r._text;var o=function(){t._cancelCurrentLoadFontSvg=null,t._loadingFontTextSvg=null,t._currentFontTextSvg=r._text,r._fontData=s,t._triggerNewSvg(e)},s=FontData._getFontData(r._fontData._fontName,null,r._text,null,r._getRoot()._resource),l=s._loader;l._contentLoaderInfo._state==LoaderInfo.STATE.LOADED&&o(),t._waitFontTimeoutSvg=setTimeout(function(){l._contentLoaderInfo._state==LoaderInfo.STATE.LOADED?o():(l._contentLoaderInfo._addEventListenerOnce("complete",o),l._contentLoaderInfo._addEventListenerOnce("ioError",o),t._cancelCurrentLoadFont=function(){l._contentLoaderInfo._removeEventListener("complete",o),l._contentLoaderInfo._removeEventListener("ioError",o)},s._load(l))},100),t._cancelCurrentLoadFontSvg=function(){clearTimeout(t._waitFontTimeoutSvg)}}else t._triggerNewSvg(e)},proto$w._prepareCanvasRender=function(){var e=this,t=e._displayObject;t._fontData,t._addEventListener("changed",function(){e.changingMark++||e._updateSvgImage(function(){e.changingMark--,e.changingMark===0?(e.changingMark=1,t._dispatchEvent(t._changedEvent),e.changingMark=0):(e.changingMark=0,t._dispatchEvent(t._changedEvent))})}),e._updateSvgImage(function(){})},proto$w._redraw=function(e,t,r,a){var n=this;if(n._beforeRedraw(e,t)){var o=n._displayObject;if(n._svgImage){var s=Math.max(t._a,t._d);s=1;var l=o._rawWidth*s,_=o._rawHeight*s;o._textOverflow==="visible"&&(_=Math.max(_,o._textHeight)*s),e.transform(t._a,t._b,t._c,t._d,t._tx,t._ty);var c=o._textOverflow||"visible";c!="visible"&&(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(l,0),e.lineTo(l,_),e.lineTo(0,_),e.closePath(),e.clip()),e.drawImage(n._svgImage,n._svgImageOffset[0],n._svgImageOffset[1],l,_),c!="visible"&&e.restore()}}},proto$w.render=function(e,t,r){var a=this,n=a._displayObject;renderObjectTextField.__super__.render.apply(a,arguments);var o=n._getHtmlText(),s=n._getRealVisible();if(o!=a._prevText){if(n._fontData){if(n._text==a._currentFontText)a._cancelCurrentLoadFont&&a._cancelCurrentLoadFont();else if(n._text!=a._loadingFontText){a._cancelCurrentLoadFont&&a._cancelCurrentLoadFont(),a._loadingFontText=n._text;var l=function(){a._cancelCurrentLoadFont=null,a._loadingFontText=null,a._currentFontText=n._text,n._fontData=_,_._addToDocument(),a._node.style.cssText+="font-family:"+_._getFontFamily()+";"},_=FontData._getFontData(n._fontData._fontName,null,n._text,null,n._getRoot()._resource),c=_._loader;c._contentLoaderInfo._state==LoaderInfo.STATE.LOADED?l():(a._waitFontTimeout=setTimeout(function(){c._contentLoaderInfo._state==LoaderInfo.STATE.LOADED?l():(c._contentLoaderInfo._addEventListenerOnce("complete",l),c._contentLoaderInfo._addEventListenerOnce("ioError",l),a._cancelCurrentLoadFont=function(){c._contentLoaderInfo._removeEventListener("complete",l),c._contentLoaderInfo._removeEventListener("ioError",l)},_._load(c))},100),a._cancelCurrentLoadFont=function(){clearTimeout(a._waitFontTimeout)})}}a._prevText=o;var d="",u=/^((?!chrome|android).)*(safari|iphone|ipad|ipod)/i.test(navigator.userAgent);u&&(d='<img style="width:1px;height:1px;" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">'),a._node&&a._node.children.length&&(a._node.children[0].innerHTML=n._getHtmlText()+d)}var f=a.getNode();if(f){if(n._textOverflow=="scroll"||n._textOverflow=="scrollNoBar"){var p=n._getStage(),r=p._totolFrame*1e3/p._frameRate,v=Mugeda.options?!!Mugeda.options.loopScrollingText:!1;if(s&&!a.cachedVisible&&(a.startTime=r||1,a.scrollDisabled=!1),f.scrollHooked||(f.scrollHooked=!0,f.addEventListener(Browser$1.InputStart,function(E){a.scrollDisabled=!0,E.stopPropagation()}),f.addEventListener(Browser$1.InputEnd,function(E){a.scrollDisabled=!1,a.startTime+=r+1e3,E.stopPropagation()})),a.cachedVisible=s,a.startTime){var h=n._scrollSpeed,g=r-a.startTime,w=h*g*.001;v&&f.scrollTop>=f.scrollHeight*.5&&(w=0),w>1&&!a.scrollDisabled&&(Browser$1.isIOS?f.scrollTo({top:f.scrollTop+Math.floor(w)}):f.scrollTo({top:f.scrollTop+Math.floor(w),behavior:"smooth"}),a.startTime=r)}}else if(n._textOverflow!=="visible"&&n._textOverflow!=="hidden"&&f.scrollHeight&&f.clientHeight&&f.scrollHeight>f.clientHeight){var y=!1;f.addEventListener(Browser$1.InputStart,function(M){y=!1},{passive:!0}),f.addEventListener(Browser$1.InputMove,function(M){y=!0},{passive:!0}),f.addEventListener(Browser$1.InputEnd,function(M){!n._dragCaptured&&y&&M.stopPropagation()},{passive:!0})}var x=n._transform._paramTransform,m=x._compareDetail(a._prevTextTransform),A=!1,T="";if(m._fillType!==void 0){A=!0;var b=getCssBackgroundColor(n._transform),C=f.querySelector(".text_holder");b&&C&&(m._fillType!==FillType.COLOR?(C.style.background=b,C.style[Browser$1.prefix.css+"background-clip"]="text",C.style[Browser$1.prefix.css+"text-fill-color"]="transparent"):(C.style.color=b,C.style.background=null,C.style[Browser$1.prefix.css+"background-clip"]=null,C.style[Browser$1.prefix.css+"text-fill-color"]=null))}(m._strokeColor!==void 0||m._strokeWidth!==void 0)&&(A=!0,T+=Browser$1.prefix.css+"text-stroke: "+x._strokeWidth+"px "+x._strokeColor._getCssText()+";"),m._letterSpace!==void 0&&(A=!0,T+="letter-spacing:"+m._letterSpace+"px;"),m._lineHeight!==void 0&&(A=!0,T+="line-height:"+(m._lineHeight/100||1)+";"),m._fontSize!==void 0&&(A=!0,T+="font-size:"+m._fontSize+"px;"),A&&(a._prevTextTransform=x),T&&(f.style.cssText+=T)}};var getCssBackgroundColor=function(e){var t=e._paramTransform,r=t._fillType;if(r===FillType.COLOR)return t._fillVal._getCssText();if(r===FillType.LINEAR||r===FillType.RADIAL){var a=t._fillVal._p0.x,n=t._fillVal._p0.y,o=t._fillVal._p1.x,s=t._fillVal._p1.y,l=e._matrix._rawWidth,_=e._matrix._rawHeight,c=Math.atan2(s-n,o-a),d=function(R,I,P){return{x:R*Math.cos(P)-I*Math.sin(P),y:R*Math.sin(P)+I*Math.cos(P)}},u=0,f=d(0,_,-c).x,p=d(l,_,-c).x,v=d(l,0,-c).x,h=d(a,n,-c).x,g=d(o,s,-c).x,w=Math.max(u,f,p,v),y=Math.min(u,f,p,v),x=function(R,I,P,F,N){return(F-P)/(I-R)*(N-R)+parseFloat(P)},m=function(R){return x(y,w,0,100,R)},A=function(R,I,P,F,N){var j=new R.constructor;return j._r=x(F,N,R._r,I._r,P),j._g=x(F,N,R._g,I._g,P),j._b=x(F,N,R._b,I._b,P),j._a=x(F,N,R._a,I._a,P),j},T=function(R,I){return"rgba("+Math.round(R._r)+","+Math.round(R._g)+","+Math.round(R._b)+","+R._a+") "+(I??R.pm)+"%"},b=t._fillVal._colors,C=t._fillVal._ratios;if(r===FillType.LINEAR){var M=[];b.forEach(function(R,I){M.push(m(h+(g-h)*C[I]))});var E=!1,O="";for($=0;$<b.length;$++){var S=b[$],L=M[$];if(E)if(L<100){if(O+=", "+T(S,L),$===b.length-1){O+=", "+T(S,100);break}}else{O+=", "+T(A(S,b[$-1],100,L,M[$-1]),100);break}else{if(L<0)if($<b.length-1){if(M[$+1]<0)continue;O+=", "+T(A(S,b[$+1],0,L,M[$+1]),L)}else O+=", "+T(S,0),O+=", "+T(S,100);else O+=", "+T(S,0),O+=", "+T(S,L);E=!0}}O="linear-gradient("+(Browser$1.browser.ie?c*180/Math.PI+90:-c*180/Math.PI)+"deg"+O+")"}else if(r===FillType.RADIAL){var D=Math.sqrt(Math.pow(a-o,2)+Math.pow(n-s,2));O="";for(var $=0;$<b.length;$++)O+=", "+T(b[$],C[$]*100);O="radial-gradient("+a/l*100+"% "+n/_*100+"%, "+D+"px "+D+"px"+O+")"}return Browser$1.prefix.css+O}else return"transparent"};proto$w._getSvgImage=function(){return this._svgImage},proto$w._getSvgImageOffset=function(){return this._svgImageOffset||[0,0]},mod.definePropertyReadOnly(proto$w,["svgImage",proto$w._getSvgImage,"svgImageOffset",proto$w._getSvgImageOffset]),mod.exportName(proto$w,["getHtmlAndCss",proto$w._getHtmlAndCss,"prepareCapture",proto$w._prepareCapture]),mod.namespace("Render.RenderObjectTextField",renderObjectTextField);var RenderObjectSprite=function(){RenderObjectSprite.__super__.constructor.apply(this,arguments),this._currentInertia=null};mod.extend(RenderObjectSprite,RenderObject);var proto$v=RenderObjectSprite.prototype;proto$v._setDisplayInitState=function(){var e=this,t=e._displayObject,r=t._aniData.param,a=r.scroll,n=r.scroll_setting,o=(a==="ver"||a==="hor")&&(n==="scrollNoBar"||n==="manualScrollNoBar"),s=(a==="ver"||a==="hor")&&(n=="scroll"||n=="scrollNoBar"),l=StyleSheetManager.insertCss("width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+(t._haveClickAction?"cursor: pointer;":""));e._classNameList.push(l),e._classNameList.push("mugeda_overflow"),o&&e._classNameList.push("nobar"),s&&(t._scrollSpeed=16),e._staticClassName=l,e._html='<div  ondragstart="return false;" outouchstart="" data-type="sprite" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}">{{childNode}}</div>'},proto$v._buildFun=function(){var e=this;RenderObjectSprite.__super__._buildFun.apply(e,arguments);var t=e._displayObject,r=t._aniData.param,a=r.scroll;if(r.render==="trim")if(a&&a!=="no")if(Browser$1.os.ios){e.getNode().style.overflow="hidden";var n={};t._addEventListener(Browser$1.InputStart,function(s){var l=new Inertia;e._innerWidth===void 0&&(e._innerWidth=e.getNode().scrollWidth-Math.min(0,t._aniData.param.horOffset||0),e._innerHeight=e.getNode().scrollHeight-Math.min(0,t._aniData.param.verOffset||0)),t._haveSelfFunction=null,e._currentInertia=l;var _=s._stage;l.start(s._getRealPos()),n=new Point(s._getInputX(),s._getInputY());var c,d=function(f){clearTimeout(c),l.add(new Point(f._getInputX(),f._getInputY()));var p=l._getMovingOffset();a==="ver"?p._x=0:a==="hor"&&(p._y=0),e._setOffset(p._x,p._y),c=setTimeout(function(){_._removeEventListener(Browser$1.InputMove,d),_._removeEventListener(Browser$1.InputEnd,u)},100)},u=function(f){_._removeEventListener(Browser$1.InputMove,d),_._removeEventListener(Browser$1.InputEnd,u),t._haveSelfFunction=e._inertiaAnimation.bind(e),d(f),l._startIterate();var p=new Point(f._getInputX(),f._getInputY()),v=Math.abs(p.x-n.x),h=Math.abs(p.y-n.y),g=v>2||h>2;g&&f.stopImmediatePropagation()};_._addEventListener(Browser$1.InputMove,d),_._addEventListener(Browser$1.InputEnd,u),s.stopPropagation()})}else{var o=e.getNode().style;a==="ver"?(o.overflowX="hidden",o.overflowY="auto"):a==="hor"?(o.overflowX="auto",o.overflowY="hidden"):a==="free"&&(o.overflow="auto"),t._addEventListener(Browser$1.InputStart,function(s){var l=s._stage,_=!1,c=function(u){_=!0},d=function(u){l._removeEventListener(Browser$1.InputMove,c),l._removeEventListener(Browser$1.InputEnd,d),_&&u.stopImmediatePropagation()};l._addEventListener(Browser$1.InputMove,c),l._addEventListener(Browser$1.InputEnd,d),s.stopPropagation()})}else e.getNode().style.overflow="hidden"},proto$v._setOffset=function(e,t){var r=this,a=r._displayObject;r.getNode(),a._aniData.param;var n=r._innerWidth,o=r._innerHeight,s=a._offsetMatrix;s._translate(e,t),r._aimPoint||(r._aimPoint=new Point);var l=r._aimPoint;if(l._x=0,l._y=0,s._transform(l,!0),l._x>0)s._translate(-l._x,0);else{var _=l._x-(a._rawWidth-n);_<0&&s._translate(-_,0)}if(l._y>0)s._translate(0,-l._y);else{var c=l._y-(a._rawHeight-o);c<0&&s._translate(0,-c)}a.children.forEach(function(d){d._dispatchEvent(d._changedEvent)})},proto$v._inertiaAnimation=function(){var e=this,t=e._currentInertia,r=t._iterate(),a=e._displayObject,n=a._aniData.param,o=n.scroll;o==="ver"?r._x=0:o==="hor"&&(r._y=0),e._setOffset(r._x,r._y),t._speed&&t._speed._x===0&&t._speed._y===0&&(e._displayObject._haveSelfFunction=null,e._currentInertia=null)},proto$v.render=function(){var e=this,t=e._displayObject,r=t._aniData.param,a=r.scroll,n=r.scroll_setting,o=t._getRealVisible(),s=e.getNode();if((a==="ver"||a==="hor")&&(n=="scroll"||n=="scrollNoBar")&&s){var l=t._getStage(),_=l._totolFrame*1e3/l._frameRate;if(o&&!e.cachedVisible&&(e.startTime=_||1,e.scrollDisabled=!1),s.scrollHooked||(s.scrollHooked=!0,s.addEventListener(Browser$1.InputStart,function(f){e.scrollDisabled=!0,f.stopPropagation()}),s.addEventListener(Browser$1.InputEnd,function(f){e.scrollDisabled=!1,e.startTime+=_+1e3})),e.cachedVisible=o,e.startTime){var c=t._scrollSpeed,d=_-e.startTime,u=c*d*.001;if(u>1&&!e.scrollDisabled){switch(a){case"ver":s.scrollTo({top:s.scrollTop+Math.floor(u),behavior:"smooth"});break;case"hor":s.scrollTo({left:s.scrollLeft+Math.floor(u),behavior:"smooth"});break}e.startTime=_}}}RenderObjectSprite.__super__.render.apply(e,arguments)};var renderObjectForm=function(){renderObjectForm.__super__.constructor.apply(this,arguments)};mod.extend(renderObjectForm,RenderObject);var proto$u=renderObjectForm.prototype;proto$u._setDisplayInitState=function(){var e=this,t=e._displayObject,r="width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+Browser$1.prefix.css+"user-select: none;"+(t._haveClickAction?"cursor: pointer;":""),a=StyleSheetManager.insertCss(r);e._classNameList.push(a),e._staticClassName=a,e._html='<div  ondragstart="return false;" data-type="form" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}" ></div>'},proto$u._buildFun=function(){var e=this;renderObjectForm.__super__._buildFun.apply(this,arguments);for(var t=JSON.parse(e._displayObject._aniData.param.Form),r=e._parentMovieClipRenderObject,a=r;a&&a._displayObject._id!=1;)a=a._parent;var n,o=t.targetValue,s=o?JSON.parse(unescape(o)):null;if(s)var l={event:"click",id:"form",mode:2,name:"",param:s,type:t.openTarget=="frame"?"gotoAndPlay":"gotoPage"},_={renderObjectSceneSwitcher:a._renderObjectSceneSwitcher,parentMovieClip:r._displayObject,stage:e._displayObject._getRoot()._getRenderObject(),parentParentMovieClip:a._displayObject,displayObj:e._displayObject},n=ActionManager._getAction(l,_);n&&(t.callback=n.doAction.bind(n)),Browser$1._globalObject.MugedaBehavior.popupForm(t,!0);var c=t.iframeDiv;c&&(c.style.padding=0,e.getNode().appendChild(c))};const interactionCallbacks=[],userFirstInteractionEvent={status:!1,addCallback:e=>{interactionCallbacks.push(e)}};{const e=()=>{document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e),userFirstInteractionEvent.status||(userFirstInteractionEvent.status=!0,interactionCallbacks.forEach(t=>t()))};typeof document<"u"&&(document.addEventListener("mouseup",e),document.addEventListener("touchend",e))}var RenderObjectVideo=function(){var e=this;e._ctrls=null,e._arrowNode=null,e._playWaiting=!1,e._pauseWating=!1,e._canTriggerVideoStart=!1,e._canTriggerVideoAt=!1,e._currentVideoDom=null,e._rafId=null,RenderObjectVideo.__super__.constructor.apply(e,arguments)};mod.extend(RenderObjectVideo,renderObjectBitmap);var proto$t=RenderObjectVideo.prototype;proto$t._setDisplayInitState=function(){var e=this,t=e._displayObject;t._play=e._playVideo.bind(this),t._pause=e._pauseVideo.bind(this),t._stop=e._removeVideo.bind(this),t._jumpAndPlay=e._jumpAndPlayVideo.bind(this),t._jumpAndPause=e._jumpAndPauseVideo.bind(this),t._getText=proto$t._getCurrentTime.bind(this);var r=t._aniData.param||{},a=r.hidePlayIcon,n="width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+Browser$1.prefix.css+"user-select: none;cursor: pointer;",o="position: absolute; width: 100%; height: 100%;background:no-repeat center;background-size:cover;",s=StyleSheetManager.insertCss(n);e._classNameList.push(s),e._staticClassName=s;var l=t._getStage()._stageWidth,_=l/320,c=Math.floor(32*_),d=Math.floor(10*_),u=StyleSheetManager.insertCss("visibility: "+(a?"hidden":"visible")+";width: 73px;height: 48px;position: absolute;left: 0;top: 0;right: 0;bottom: 0;margin: auto;text-align: center;line-height: 84px;opacity: 0.6;");StyleSheetManager.insertCss("video_control_item","display: inline-block;float: left;height: "+c+"px;background-size: "+c/2+"px;background-repeat: no-repeat;background-position: center;"),StyleSheetManager.insertCss('mugeda_video_control [data-theme="gray"]',"filter: grayscale(100%);"),StyleSheetManager.insertCss("video_control_pause","background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGcgc3R5bGU9ImZpbGw6IzQyQTFGRiI+PGcgaWQ9InBhdXNlIj48Zz48cmVjdCB4PSI0IiB3aWR0aD0iOCIgaGVpZ2h0PSIzMiIgLz48cmVjdCB4PSIyMCIgd2lkdGg9IjgiIGhlaWdodD0iMzIiIC8+PC9nPjwvZz48L2c+PC9zdmc+);"),StyleSheetManager.insertCss("video_control_play","background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIGlkPSJpY29uLXBsYXkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTIwIDEyMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PGcgc3R5bGU9ImZpbGw6ICM0MkExRkY7IiA+PHBvbHlnb24gcG9pbnRzPSIxNy41LDEyMCAxNy41LDAgMTA3LjUsNjAiLz48L2c+PC9zdmc+);"),StyleSheetManager.insertCss("video_control_audio_on","background-image: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4IiB2aWV3Qm94PSIwIDAgNjExLjk2NCA2MTEuOTY0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA2MTEuOTY0IDYxMS45NjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjg0LjU1NCw2NC4wMTljLTguMjYxLTMuMzkxLTE3Ljg1Ni0xLjQ3OS0yNC4yNiw0LjkyNEwxMjUuODgxLDIwNC4yNzZIMjIuMjRDOS45MzgsMjA0LjI3NiwwLDIxNC4yMzIsMCwyMjYuNTM0djE2MC41ODQgICAgYzAsMTIuMzAyLDkuOTM4LDIyLjI0LDIyLjI0LDIyLjI0aDEwMy4wMWwxMzUuMTM0LDEzNS4yOTdjNC4yNTYsNC4yOTIsOS45Miw2LjU2NSwxNS43MjgsNi41NjVjMi44NjgsMCw1LjczNi0wLjU2LDguNTMyLTEuNzE0ICAgIGM4LjI5Ny0zLjQwOSwxMy43MjYtMTEuNTYyLDEzLjcyNi0yMC41NDRsLTAuMDM2LTQ0NC4zNDVDMjk4LjMzNCw3NS41ODEsMjkyLjg4Nyw2Ny41LDI4NC41NTQsNjQuMDE5eiBNMTUwLjI4NiwzNzEuMzkgICAgYy00LjE2Ny00LjE2Ny05Ljg2Ny02LjUxMi0xNS43NjUtNi41MTJINDQuNDk4VjI0OC43OTJoOTAuNjE5YzUuOTUyLDAsMTEuNjE2LTIuMzQ1LDE1Ljc4My02LjU2NmwxMDIuOTM4LTEwMy42NDFsMC4wMzYsMzM2LjYyNyAgICBMMTUwLjI4NiwzNzEuMzl6IiBmaWxsPSIjNDJhMWZmIi8+CgkJPHBhdGggZD0iTTUxNi4xNSwzMDYuMjIyYzAtODMuMzg2LTQ5LjU4NC0xNTguNTEtMTI2LjM2OC0xOTEuMzU2Yy0xMS4xNjUtNC44Ny0yNC4zMzIsMC4zNDMtMjkuMTg0LDExLjY1MiAgICBjLTQuODE2LDExLjI5MSwwLjQzMywyNC4zNjgsMTEuNzI0LDI5LjIwMmM2MC4zMTYsMjUuOTAxLDk5LjMzMSw4NC45MzcsOTkuMzMxLDE1MC41MmMwLDY1LjIyMi0zOC43OTgsMTI0LjA5Ni05OC44MjYsMTQ5Ljk5NiAgICBjLTExLjI5MSw0Ljg3LTE2LjUwNCwxNy45ODMtMTEuNjUxLDI5LjIzOGMzLjY0NCw4LjQyNCwxMS44MTQsMTMuNDIsMjAuNDE4LDEzLjQyYzIuOTU4LDAsNS45MTYtMC41NTksOC43ODQtMS44NCAgICBDNDY2Ljc4Myw0NjQuMTcyLDUxNi4xNSwzODkuMjEsNTE2LjE1LDMwNi4yMjJ6IiBmaWxsPSIjNDJhMWZmIi8+CgkJPHBhdGggZD0iTTQxNy42MzIsMzA2LjEzMWMwLTQ0LjA2NS0yNi4xODktODMuNjAyLTY2LjY4NC0xMDAuODFjLTExLjI5MS00LjY4OS0yNC4zNSwwLjQ4Ny0yOS4yMDIsMTEuODE0ICAgIGMtNC43NzksMTEuMjkxLDAuNTIzLDI0LjMzMiwxMS44MTQsMjkuMTY2YzI0LjA4LDEwLjIwOSwzOS41NzMsMzMuNjc1LDM5LjU3Myw1OS44MjljMCwyNS44NDctMTUuMzg2LDQ5LjI3Ny0zOS4xOTQsNTkuNjEyICAgIGMtMTEuMjU1LDQuODctMTYuNDY4LDE4LjAwMS0xMS41MDgsMjkuMjM4YzMuNjQ0LDguMzg4LDExLjgxNCwxMy4zODQsMjAuNDE4LDEzLjM4NGMyLjk1OCwwLDUuOTE2LTAuNTYsOC44Mi0xLjg1NyAgICBDMzkxLjc0OCwzODkuMTIxLDQxNy42MzIsMzQ5LjcwOSw0MTcuNjMyLDMwNi4xMzF6IiBmaWxsPSIjNDJhMWZmIi8+CgkJPHBhdGggZD0iTTQyNy42NDMsMjYuNzljLTExLjI1NS00LjkwNi0yNC4zNjgsMC4zOTctMjkuMjM4LDExLjY4OGMtNC44MTYsMTEuMjkyLDAuNDE1LDI0LjMzMywxMS42NywyOS4yMDIgICAgYzk1LjY1MSw0MS4wMTcsMTU3LjQxLDEzNC42NDcsMTU3LjQxLDIzOC41NDJjMCwxMDMuNTg3LTYxLjU5NywxOTcuMDAxLTE1Ni44NTEsMjM4LjEwOCAgICBjLTExLjI5Miw0Ljg4OS0xNi41MDQsMTcuOTY1LTExLjY1MiwyOS4yMDJjMy42NDQsOC40NDEsMTEuODE0LDEzLjQ3NCwyMC40MzcsMTMuNDc0YzIuOTM5LDAsNS44OTctMC42MTMsOC43NjYtMS44MjEgICAgYzExMS42NjgtNDguMTU5LDE4My43OC0xNTcuNjQ1LDE4My43OC0yNzguOTYyQzYxMiwxODQuNTA3LDUzOS42MTcsNzQuODA1LDQyNy42NDMsMjYuNzl6IiBmaWxsPSIjNDJhMWZmIi8+Cgk8L2c+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==);"),StyleSheetManager.insertCss("video_control_audio_off","background-image: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4IiB2aWV3Qm94PSIwIDAgNjExLjk4IDYxMS45OCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNjExLjk4IDYxMS45ODsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxnPgoJCTxwYXRoIGQ9Ik05MS4yMjYsNDE0LjgzM2gzMS4wMjVsNTAuNDIxLTUwLjQyaC01Ni4yMjZWMjMyLjg1MmgxMDIuNjgxYzYuNzA0LDAsMTMuMTAxLTIuNjk4LDE3Ljg4NC03LjQzOWwxMTYuNjQxLTExNy40Mzh2NzUuNDc4ICAgIGw1MC40MjEtNTAuNDIxVjQ2Ljg0NGMwLTEwLjE5OS02LjIxNC0xOS40NTctMTUuNjc3LTIzLjNjLTkuMzYtMy45MjQtMjAuMTcyLTEuNzU3LTI3LjQ2OSw1LjUxOUwyMDguNTgyLDE4Mi40MzFIOTEuMjI2ICAgIGMtMTQsMC0yNS4yLDExLjI4Mi0yNS4yLDI1LjJ2MTgxLjk4MUM2Ni4wMjUsNDAzLjU1Miw3Ny4yNDYsNDE0LjgzMyw5MS4yMjYsNDE0LjgzM3oiIGZpbGw9IiM0MmExZmYiLz4KCQk8cGF0aCBkPSJNMzUzLjY1Miw0ODkuNDExbC03OC4wOTUtNzguMTc2bC0zNS42NDQsMzUuNjQ1TDM2MC45ODksNTY4LjJjNC44MjMsNC44MjQsMTEuMjgyLDcuMzc5LDE3Ljg4NCw3LjM3OSAgICBjMy4yMjksMCw2LjQ3OS0wLjU5Miw5LjYwNS0xLjkyMmM5LjQwMS0zLjg4MywxNS42MTUtMTMuMSwxNS42MTUtMjMuMjk5VjI4Mi43NDFsLTUwLjQyMSw1MC40MjJ2MTU2LjI0OEgzNTMuNjUyeiIgZmlsbD0iIzQyYTFmZiIvPgoJCTxwYXRoIGQ9Ik02MDMuODU1LDguMDkzYy01LjM5Ni01LjQxNi0xMi41MDgtOC4wNzMtMTkuNi04LjA3M3MtMTQuMTY0LDIuNjU3LTE5LjYwMSw4LjA3M0w0MDQuMDczLDE2OC42OTZsLTUwLjQyMSw1MC40MjEgICAgTDIwOC4zMTYsMzY0LjQxM2wtNTAuNDIxLDUwLjQyTDguMTI0LDU2NC42NDZjLTEwLjgzMiwxMC44MzItMTAuODMyLDI4LjM2NywwLDM5LjE5OWM1LjQxNiw1LjQxNiwxMi40ODgsOC4xMTUsMTkuNTgsOC4xMTUgICAgYzcuMTEyLDAsMTQuMTg0LTIuNzE5LDE5LjYtOC4xMTVsMTc0Ljc4Ny0xNzQuNzg3bDM1LjcwNS0zNS42ODZsOTUuODU2LTk1Ljg3NWw1MC40MjEtNTAuNDIxTDYwMy44NTUsNDcuMjczICAgIEM2MTQuNjg4LDM2LjUwMiw2MTQuNjg4LDE4LjkyNiw2MDMuODU1LDguMDkzeiIgZmlsbD0iIzQyYTFmZiIvPgoJPC9nPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=);"),StyleSheetManager.insertCss('mugeda_render_object[data-mid="'+t._id+'"] video::-webkit-media-controls',"align-items: flex-start;"),StyleSheetManager.insertCss('mugeda_render_object[data-mid="'+t._id+'"] video::-webkit-media-controls-enclosure',"width: "+t._rawWidth+"px;position: relative;"),a&&StyleSheetManager.insertCss('mugeda_render_object[data-mid="'+t._id+'"] video::-webkit-media-controls-overlay-play-button',"display:none;"),e._html='<div  ondragstart="return false;" data-type="video" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}"><div style="'+o+'" ></div>',e._html+='<svg version="1.0" class="'+u+'" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="73px" height="48px" viewBox="0 0 73 48" enable-background="new 0 0 73 48" xml:space="preserve">   <g opacity="0.8">   <path d="M73,43c0,2.8-2.3,5-5,5H5c-2.8,0-5-2.3-5-5V5c0-2.8,2.3-5,5-5h63c2.8,0,5,2.3,5,5V43z"/>   </g>   <polygon fill="#FFFFFF" points="28,12.5 28,35.5 48.4,24 "/></svg>';var f=(Mugeda.options||{}).videoProgressColor||"#ee7700",p=t._width-c*3-c*3/2-4,v=Math.floor(15*_),h=Math.floor(16*_);e._html+='<div class="mugeda_video_control" style="display:none; width:100%;height:'+c+'px;background-color:rgba(0,0,0,0.75);color:white;position:absolute;bottom:0;transform: translateZ(0)" data-cid="3">    <div class="video_control_item video_control_pause" data-theme="gray" data-control="play" style="width:'+c+'px; cursor:pointer;" ></div>    <div class="video_control_item video_control_length" data-theme="gray" style="width:'+Math.floor(48*_)+"px; font-size:"+d+"px; line-height:"+c+'px;font-family: Arial; color:#aaa;" >0:00 / 0:00</div>    <div  class="video_control_item video_control_progress" style="width:'+p+'px; position:relative;" ><div class="video_control_bar" style="position: absolute; left: '+v+"px; top: "+v+"px; right: "+v+"px; bottom: "+v+"px;  background: #bbb; border-radius: "+Math.floor(_)+'px;"><div class="video_control_loaded" style="position: absolute; left: 0; top: 0; width:0%; bottom: 0; background: '+f+'; border-radius: 1px;"></div><div class="video_control_slider" data-theme="gray" style="width: '+h+"px; height: "+h+"px; position: absolute; left: 0; top: "+Math.floor(-7*_)+'px; background-color: #42a1ff; border-radius: 50%; cursor:pointer;" ><div class="video_control_target" style="position: absolute;top: -'+Math.floor(36*_)+"px;width: "+c+"px;background: rgba(0,0,0,0.75);left: -"+Math.floor(12*_)+"px;padding: "+Math.floor(4*_)+"px;border-radius: "+Math.floor(4*_)+"px;font-size: "+d+'px;font-family: Arial;text-align: center;">0:00</div></div></div></div>    <div class="video_control_item video_control_audio_on" data-theme="gray" data-control="audio" style="width:'+c+'px;"></div>    <div class="video_control_item video_control_full" data-theme="gray" style="width:'+c+'px; transform: translateZ(1px); -webkit-transform: translateZ(1px); background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjU2cHgiIGhlaWdodD0iMjU2cHgiIHZpZXdCb3g9IjAgMCAzNTcgMzU3IiB4bWw6c3BhY2U9InByZXNlcnZlIj48Zz48ZyBpZD0iZnVsbHNjcmVlbiIgc3R5bGU9ImZpbGw6ICM0MmExZmY7IiA+PHBhdGggZD0iTTUxLDIyOS41SDBWMzU3aDEyNy41di01MUg1MVYyMjkuNXogTTAsMTI3LjVoNTFWNTFoNzYuNVYwSDBWMTI3LjV6IE0zMDYsMzA2aC03Ni41djUxSDM1N1YyMjkuNWgtNTFWMzA2eiBNMjI5LjUsMHY1MSAgICBIMzA2djc2LjVoNTFWMEgyMjkuNXoiIC8+PC9nPjwvZz48L3N2Zz4=);"></div></div>',e._html+="</div>",t._addEventListener("visibilityChanged",e._visibilityChanged.bind(e))},proto$t._visibilityChanged=function(){var e=this,t=e._displayObject,r=t._getRealVisible();r||window.MugedaMraid&&window.MugedaMraid.stopVideo()},proto$t._delayedHide=function(e){var t=this;t._ctrls&&(t._hideTimer&&(clearTimeout(t._hideTimer),t._hideTimer=null),e&&(t._hideTimer=setTimeout(function(){(t._ctrls.style.display="block")&&(t._ctrls.style.display="none")},3e3)))},proto$t.getNode=function(e){var t=this,r=RenderObjectVideo.__super__.getNode.apply(t,arguments);return e&&r?r.firstChild:(t._arrowNode==null&&r&&(t._arrowNode=r.children[1]),r)},proto$t.render=function(){var e=this;RenderObjectVideo.__super__.render.apply(e,arguments);var t=e._displayObject,r=e._arrowNode.style,a=t._getTotalMatrix(),n=t._getStage()._transform._matrix;a=Matrix._multiplication(n,a).inverse(),r[Browser$1.prefix.js+"Transform"]="scaleX("+a._getScaleX()+") scaleY("+a._getScaleY()+")";var o=t._getWidth(),s=t._getHeight(),l=t._rawWidth,_=t._rawHeight,c=o/l,d=s/_;d>c?(c=d/c,d=1):(d=c/d,c=1);var u=e.getNode(!0);u.style[Browser$1.prefix.js+"Transform"]="scaleX("+c+") scaleY("+d+")"},proto$t._setOutsideVideoPosition=function(e){var t=this,r=t.getNode(),a=r.getBoundingClientRect();e.style.cssText+="left:"+a.left+"px;top:"+a.top+"px;width:"+a.width+"px;height:"+a.height+"px;"},proto$t._removeVideo=function(){var e=this,t=e._findVideoDom();t&&(e._pauseVideo(),t.canvas&&t.canvas.parentNode.removeChild(t.canvas),t.iframe&&t.iframe.parentNode.removeChild(t.iframe),t.parentNode.removeChild(t),e._ctrls&&(e._ctrls.style.display="none"),e._displayObject._dispatchEvent(new MuEvents("videoend")),e._currentVideoDom=null,e._displayObject._removeEventListener("rendered",e._bindSetOutsideVideoPosition),e._displayObject._removeEventListener("rendered",e._bindSetEmbedVideoPosition),cancelAnimationFrame(e._rafId),e._displayObject._getRoot()._renderManager._unregisterMediaDom(e._displayObject._guid,t,e._displayObject._name))},proto$t._createAndPlayVideo=function(){var e=this,t=e._displayObject,r=document.createElement("video");r._relativeRenderObject=e;var a=null,n=null,o=e._displayObject._getRoot()._transform._getMatrix(),s=t._getTotalMatrix(),l=Matrix._multiplication(o,s),_=l._getRotation()/Math.PI*180;if(Math.abs(90-_)<.1&&(r.style.cssText+="transform-origin: 0% 0%; transform: rotate(0.01deg);"),r.addEventListener("touchstart",function(B){a=Date.now()}),r.addEventListener("touchend",function(B){Date.now()-a<200&&setTimeout(function(){Date.now()-n>100&&r.parentNode.dispatchEvent(new Event("click"))},50)}),r.addEventListener("click",function(B){n=Date.now(),B.preventDefault()}),t._embedVideoTempDisabled&&(t._embedVideo=!0,delete t._embedVideoTempDisabled),t._embedVideo&&Browser$1.os.android&&Browser$1._weChat){var c=t._getBoundary(t._getTotalMatrix()),d=c._nodes[0],u=c._nodes[1],f=c._nodes[2],p=c._nodes[3],v=!0,h=t._getRoot();[d,u,f,p].forEach(function(B){B._x<1||B._x>h._stageWidth-1||B._y<1||B._y>h._stageHeight-1||(v=!1,console.log("ok h5 video"))}),v||(t._embedVideo=!1,t._embedVideoTempDisabled=!0)}t._showControls&&!t._embedVideo&&r.setAttribute("controls",""),t._nodownload&&r.setAttribute("controlsList","nodownload"),e._displayObject._loop&&r.setAttribute("loop",""),e._displayObject._muted&&(r.muted=!0),t._autoPlay&&(r.setAttribute("autoplay",""),!userFirstInteractionEvent.status&&!t._muted&&(r.muted=!0,userFirstInteractionEvent.addCallback(()=>r.muted=!1))),r.setAttribute("data-vid",t._guid),r.setAttribute("data-vname",t._name||""),r.setAttribute("src",t._video._meidaSourceUrl||t._video._src),r.setAttribute("playsinline",""),r.setAttribute("x-webkit-airplay",""),r.setAttribute("webkit-playsinline",""),r.setAttribute("preload","auto"),r.style.cssText+="width:100%;height:100%;position:absolute;",t._embedVideo?(r.setAttribute("x5-video-player-type","h5"),r.setAttribute("x5-video-player-fullscreen","true"),r.style.cssText+="object-fit: cover;",t._dispatchEvent(t._changedEvent),Browser$1._isWeChat()&&Browser$1.os.android&&(r.mugedaEnterFullScreen=function(){if(!r.isMugedaFullScreen){r.isMugedaFullScreen=!0,r.style.cssText+="z-index: 1000000000000; visibility: visible;background: black;";var B=!r.paused;document.body.appendChild(r),B&&r.play(),r.videoWidth/r.videoHeight>1&&window.screen.width/window.screen.height<1?(r.setAttribute("x5-video-orientation","landscape"),setTimeout(function(){r.style.cssText+="width:"+window.screen.width+"px; height: "+window.screen.height+"px;"},500)):setTimeout(function(){r.style.cssText+="width:"+window.screen.width+"px; height: "+window.screen.height+"px;"},500)}},r.mugedaExitFullScreen=function(){if(r.isMugedaFullScreen){r.isMugedaFullScreen=!1,r.style.cssText+="z-index: -10; visibility: hidden;background: transparent;";var B=!r.paused,W=t._getRoot()._getRenderObject();W.getNode().appendChild(r),B&&r.play(),r.removeAttribute("x5-video-orientation"),r.style.cssText+="width: 100%; height: 100%;"}},r.addEventListener("x5videoexitfullscreen",function(){r.mugedaExitFullScreen()}))):t._outsideVideo||r.setAttribute("x5-playsinline",""),r.addEventListener("pause",function(){e._playWaiting=!1,e._lastStateChangeTime=new Date().getTime(),!r.ended&&r.currentTime!==0&&t._dispatchEvent(new MuEvents("videopause"));var B=window.backgroundMusic;t._needStopAudio&&B&&B.prevPlayStatus==1&&(B.play(),B.playStatus=1,delete B.prevPlayStatus),r.addEventListener("timeupdate",w),!t._needStopAudio&&B&&Browser$1.os.ios&&g.binded&&(B.removeEventListener("pause",g),g.binded=!1)});var g=function(){var B=window.backgroundMusic;B.playStatus===1&&B.paused&&B.play()};r.addEventListener("play",function(){e._lastStateChangeTime=new Date().getTime();var B=window.backgroundMusic;!t._needStopAudio&&B&&Browser$1.os.ios&&(g.binded||(B.addEventListener("pause",g),g.binded=!0,g()))}),r.addEventListener("ended",function(){var B=!1;do{var W=e._displayObject,G=W._name;if(!G){B=!1;break}var q=W.actions&&W.actions.filter(function(Y){return Y._event===ActionEvent.VIDEOEND});if(!q){B=!1;break}var X=q.filter(function(Y){return Y._behavior.type==="controlVideo"&&Y._behavior.param.video_target===G});X.length?B=!0:B=!1}while(!1);B?e._displayObject._dispatchEvent(new MuEvents("videoend")):(window.webkitMediaStream&&(this.srcObject=null),e._removeVideo())});var w=function(){if(r.currentTime>0){r.removeEventListener("timeupdate",w);var B=window.backgroundMusic;t._needStopAudio&&B&&(B.prevPlayStatus=B.playStatus===void 0?1:B.playStatus,B.pause(),B.playStatus=0),e._canTriggerVideoStart&&(t._dispatchEvent(new MuEvents("videostart")),e._canTriggerVideoStart=!1,r.canvas&&(r.canvas.style.display="block"))}},y=function(){if(e._canTriggerVideoAt){var B=new MuEvents("videoat");B._media=r,t._dispatchEvent(B),r.canvas&&(r.canvas.style.display="block")}};r.addEventListener("timeupdate",w);var x=function(){y(),e._rafId=requestAnimationFrame(x)};if(r.onplay=function(){x()},r.onpause=function(){cancelAnimationFrame(e._rafId)},r.onended=function(){cancelAnimationFrame(e._rafId)},t._embedVideo){window.h5Videos===void 0&&Object.defineProperty(window,"h5Videos",{set:function(B){console.log(B)},get:function(){return[]}});var m=t._getRoot()._getRenderObject(),A=m.getNode(),T=e.getNode();T.appendChild(r),t._aniData.param.imageSrc&&(r.style.opacity=0),T.style.overflow="hidden";var b=e._ctrls=e.getNode().querySelector(".mugeda_video_control");if(b){var C=b.querySelector('[data-control="play"]'),M=b.querySelector(".video_control_full"),E=b.querySelector('[data-control="audio"]'),O=b.querySelector(".video_control_slider"),S=b.querySelector(".video_control_loaded"),L=b.querySelector(".video_control_length"),D=b.querySelector(".video_control_target"),$=b.querySelector(".video_control_bar");e.getNode().insertBefore(r,b),e.getNode().querySelector("svg").style.display="none",b.style.display=t._showControls?"block":"none",D.style.display="none",e._delayedHide(!0)}else e.getNode().appendChild(r),e.getNode().querySelector("svg").style.display="none";r.addEventListener("pause",function(){C&&(C.className="video_control_item video_control_play")}),r.addEventListener("play",function(){C&&(C.className="video_control_item video_control_pause"),E&&(E.className="video_control_item video_control_audio_"+(r.muted?"off":"on"))}),r.addEventListener("volumechange",function(B){E&&(E.className="video_control_item video_control_audio_"+(r.muted?"off":"on"))});var R=function(){var B=r.buffered;if(!B||!B.length)return;function W(q,X){for(var Y=q.length,K=-1,ne=0,Z=0,k=0;k<Y;k++)if(X>=(ne=q.start(k))&&X<=(Z=q.end(k))){K=k;break}return[K,ne,Z]}B=W(B,r.currentTime);var G=Math.floor(B[2]/r.duration*100);r.loadedPercent!=G&&(S&&(S.style.width=G+"%"),r.loadedPercent=G)};r.addEventListener("progress",R);var I=function(B){var W=document.webkitFullscreenElement!==null;r.style.visibility=W?"visible":"hidden"},P=function(B){var W=Math.floor(B/60),G=Math.floor(B-W*60);return W+":"+(G<10?"0":"")+G};r.addEventListener("fullscreenchange",I),r.addEventListener("webkitfullscreenchange",I),C&&(C.onclick=function(B){r[r.paused?"play":"pause"](),e._delayedHide(!0),B.stopPropagation()}),E&&(E.onclick=function(B){r.muted?(r.muted=!1,r.cachedVolume!==void 0&&(r.volume=r.cachedVolume,delete r.cachedVolume)):(r.muted=!0,r.cachedVolume=r.volume),e._delayedHide(!0),B.stopPropagation()}),M&&(M.onclick=function(B){Browser$1.os.android?r.mugedaEnterFullScreen&&r.mugedaEnterFullScreen():r.enterFullscreen?r.enterFullscreen():r.webkitEnterFullscreen?r.webkitEnterFullscreen():r.requestFullScreen?r.requestFullScreen():r.webkitRequestFullScreen&&r.webkitRequestFullScreen(),e._delayedHide(!0),B.stopPropagation()});var F=!1,N=0,j={};h=t._getRoot(),O&&O.addEventListener(Browser$1.InputStart,function(B){F=!0;var W=InputEvent._getRealPos(h,B);j.x=W._x,j.y=W._y,j.startPercent=parseInt(O.style.left);var G=P(r.duration*j.startPercent*.01);D.innerHTML=G,D.style.display="block",e._delayedHide(!1),B.stopPropagation()}),A.addEventListener(Browser$1.InputMove,function(B){if(F){var W=InputEvent._getRealPos(h,B),G=W._x;W._y;var q=G-j.x;G-j.y;var X=$.clientWidth,Y=100*q/X;N=Math.min(100,Math.max(0,j.startPercent+Y));var K=P(r.duration*N*.01);O.style.left=Math.floor(N*.01*X-O.clientWidth*.5)+"px",D.innerHTML=K}}),A.addEventListener(Browser$1.InputEnd,function(B){F&&(F=!1,r.currentTime=r.duration*N*.01,D.style.display="none",e._delayedHide(!0))});var U=!1;r.addEventListener("timeupdate",function(B){U||(r.currentTime>0&&!r.paused&&(U=!0),e._setEmbedVideoPosition(r));var W=100*r.currentTime/r.duration;!F&&O&&(O.style.left=W+"%"),L&&(L.innerHTML=P(r.currentTime)+" / "+P(r.duration)),R()}),e._bindSetEmbedVideoPosition=function(){e._setEmbedVideoPosition(r)},t._addEventListener("rendered",e._bindSetEmbedVideoPosition),e._bindSetEmbedVideoPosition()}else if(t._outsideVideo)document.body.appendChild(r),e._setOutsideVideoPosition(r),e._bindSetOutsideVideoPosition=function(){e._setOutsideVideoPosition(r)},t._addEventListener("rendered",e._bindSetOutsideVideoPosition);else if(e.getNode().appendChild(r),t._bitmapData&&t._bitmapData._src.indexOf("data:image/gif")!==0&&Browser$1.os.android&&Browser$1._weChat){r.style.display="none";var J=function(){r.currentTime>.1&&(r.style.display=null,r.removeEventListener("timeupdate",J))};r.addEventListener("timeupdate",J)}return e._canTriggerVideoStart=!0,e._canTriggerVideoAt=!0,e._currentVideoDom=r,e._playVideo(),e._displayObject._getRoot()._renderManager._registerMediaDom(e._displayObject._guid,r,e._displayObject._name),r},proto$t._setEmbedVideoPosition=function(e){var t=this,r=t._displayObject,a=r._getStage(),n=a._fullScreenRect,o=n._getTopLeft(),s=n._getTopRight(),l=n._getBottomRight(),_=n._getBottomLeft(),c=r._getTotalMatrix(),d=c._inverse();d._transform(o,!0),d._transform(s,!0),d._transform(l,!0),d._transform(_,!0);var u=Math.min(o._x,s._x,l._x,_._x),f=Math.min(o._y,s._y,l._y,_._y),p=Math.max(o._x,s._x,l._x,_._x),v=Math.max(o._y,s._y,l._y,_._y),h=p-u,g=v-f,w=r._rawWidth/2,y=r._rawHeight/2,x=Math.min(h/e.videoWidth,g/e.videoHeight);if(!isNaN(x)){var m=e.videoWidth*x,A=e.videoHeight*x,T=w-m/2,b=y-A/2,C=T-u,M=b-f;Math.abs(C)<.01&&(C=0),Math.abs(M)<.01&&(M=0),e.style.cssText+="left:"+u+"px; top:"+f+"px; width:"+(p-u)+"px; height:"+(v-f)+"px; object-position: "+C+"px "+M+"px; object-fit: contain",e.readyState>0&&e.currentTime>0&&!e.paused&&(e.style.cssText+="background: black; opacity:1;")}},proto$t._findVideoDom=function(){return this._currentVideoDom},proto$t._playVideo=function(){var e=this,t=e._displayObject;e._pauseWating=!1;var r=e._findVideoDom();if(r){if(r.play(),Browser$1._weChat){if(e._playWaiting)return;e._playWaiting=!0,Browser$1._getWechatJSBridge(function(a){a.invoke("getNetworkType",{},function(){e._playWaiting&&(r.play(),e._playWaiting=!1)})})}}else r=e._createAndPlayVideo();Mugeda.DataStats&&Mugeda.DataStats.entry({type:"playVideo",id:t._guid,target:r})},proto$t._pauseVideo=function(){var e=this,t=e._displayObject,r=e._findVideoDom();r&&(r.paused||Mugeda.DataStats&&Mugeda.DataStats.entry({type:"stopVideo",id:t._guid,target:r}),r.readyState>0?(e._playWaiting=!1,r.pause()):(e._pauseWating=!0,r.addEventListener("loadedmetadata",function(){e._pauseWating&&r.pause()})))},proto$t._jumpAndPlayVideo=function(e){var t=this,r=t._findVideoDom();if(r)r.currentTime=e,t._playVideo();else{r=t._createAndPlayVideo();var a=function(){r.removeEventListener("play",a),setTimeout(function(){r.currentTime=e,t._playVideo()},500)};r.addEventListener("play",a)}},proto$t._getCurrentTime=function(){var e=this,t=e._findVideoDom();return t?t.currentTime:0},proto$t._jumpAndPauseVideo=function(e){var t=this,r=t._findVideoDom();if(r)r.currentTime=e,t._pauseVideo();else{r=t._createAndPlayVideo();var a=function(){setTimeout(function(){r.currentTime=e,t._pauseVideo(),r.removeEventListener("canplay",a)},500)};r.addEventListener("canplay",a)}},proto$t._buildFun=function(){var e=this,t=e._displayObject;t._addEventListener("click",function(r){r.preventDefault();var a=e._findVideoDom();if(a){if(new Date().getTime()-e._lastStateChangeTime<150)return;if(!t._aniData.param.hidePlayControls){var n=r._getInputY(),o=new Point(t._getRawWidth(),t._getRawHeight()-50),s=t._getTotalMatrix()._transform(o);if(n>s._y){console.log("skip");return}}t._clickCanPause?a.paused||a.readyState===0?e._playVideo():e._pauseVideo():e._playVideo(),e._ctrls&&t._showControls&&(e._ctrls.style.display=e._ctrls.style.display=="none"?"block":"none",e._delayedHide(!0))}else e._createAndPlayVideo()}),t._autoPlay&&t._getRealVisible()&&e._createAndPlayVideo(),t._addEventListener("visibilityChanged",function(){var r=t._getRealVisible(),a=e._findVideoDom();r&&t._autoPlay?e._playVideo():!r&&a&&e._removeVideo()}),RenderObjectVideo.__super__._buildFun.apply(e,arguments)};var renderObjectAudioControl=function(){var e=this;e._controlSourceIsAppear=!0,e._audioObjectInstance=null,e.playingCheckTimer=null,e._status=null,e._actionPausedMark=!0,renderObjectAudioControl.__super__.constructor.apply(e,arguments)};mod.extend(renderObjectAudioControl,renderObjectBitmap);var proto$s=renderObjectAudioControl.prototype;proto$s._setDisplayInitState=function(){var e=this,t=e._displayObject,r=e._audioObjectInstance=t._audioObject;t._loop&&r._setLoop(!0);var a=r._audio;t._addEventListener("click",e._clickHandler.bind(e)),t._addEventListener("visibilityChanged",e._visibilityChanged.bind(e)),a.addEventListener("pause",e._audioPauseEventHandler.bind(e)),a.addEventListener("playing",e._audioPlayingEventHandler.bind(e)),a.addEventListener("timeupdate",e._audioTimeUpdateEventHandler.bind(e)),t._jumpAndPlay=e._jumpAndPlayAudio.bind(e),t._jumpAndPause=e._jumpAndPlayAudio.bind(e),t._autoPlay&&t._getRealVisible()?t._getStage()._addEventListener("renderready",function(){e._audioObjectInstance._audio.play(),e._setIcoState("off")}):e._setIcoState("off"),renderObjectAudioControl.__super__._setDisplayInitState.apply(e,arguments)},proto$s._audioTimeUpdateEventHandler=function(){var e=this,t=e._displayObject,r=e._audioObjectInstance=t._audioObject;t._triggerBehavior(ActionEvent.AUDIOAT,r._audio)},proto$s._clickHandler=function(){var e=this;renderObjectAudioControl.__super__.render.apply(e,arguments);var t=e._audioObjectInstance._audio,r=e._status;r=="on"?t.pause():t.play()},proto$s._visibilityChanged=function(){var e=this,t=e._displayObject,r=t._getRealVisible(),a=e._audioObjectInstance._audio;r?(a.readyState>0,t._autoPlay&&a.play()):a.readyState>0&&(a.pause(),a.currentTime=0)},proto$s._audioPauseEventHandler=function(){var e=this;e._setIcoState("off"),e._resetTimer();var t=e._audioObjectInstance._audio;if(e._actionPausedMark=!0,t.ended||t.currentTime===0)e._displayObject._triggerBehavior(ActionEvent.AUDIOSTOP);else{var r=t.currentTime;setTimeout(function(){var a=t.currentTime;r===0||a===0&&r!==0?e._displayObject._triggerBehavior(ActionEvent.AUDIOSTOP):e._displayObject._triggerBehavior(ActionEvent.AUDIOPAUSE)})}},proto$s._resetTimer=function(){this.playingCheckTimer&&clearTimeout(this.playingCheckTimer)},proto$s._audioPlayingEventHandler=function(){var e=this;e._resetTimer();var t=e._audioObjectInstance._audio,r=t.currentTime,a=function(){e.playingCheckTimer=null,t.currentTime!=r?(n(),e._actionPausedMark=!1):e.playingCheckTimer=setTimeout(a,100)};e.playingCheckTimer=setTimeout(a,10);var n=function(){e._setIcoState("on"),e._actionPausedMark&&e._displayObject._triggerBehavior(ActionEvent.AUDIOSTART)}},proto$s._setIcoState=function(e){var t=this,r=t._displayObject;if(e=="off")var a=r._audioOffBitmap;else e=="on"&&(a=r._audioOnBitmap);r._setBitmapData(a),t._status=e},proto$s._jumpAndPlayAudio=function(e){var t=this,r=t._audioObjectInstance._audio;r.currentTime=e,setTimeout(function(){r.play()},100)},proto$s._jumpAndPauseAudio=function(e){var t=this,r=t._audioObjectInstance._audio;r.currentTime=e,setTimeout(function(){r.pause()},100)};var renderObjectSlides=function(){renderObjectSlides.__super__.constructor.apply(this,arguments);var e=this;e._inputStartInfo={},e._autoTimer=null,e._transitionCounter=0,e._transitionTime=800};mod.extend(renderObjectSlides,RenderObject);var proto$r=renderObjectSlides.prototype;proto$r._setDisplayInitState=function(){var e=this,t=e._displayObject,r=t._aniData.param,a=r.imgs||[],n=r.sizeMode||"contain",o=r.dir||"horizontal",s=r.show===void 0?1:r.show,l="position: absolute; overflow: hidden; outline: none; padding: 0; background: transparent; border-radius: 0; border: none; width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+Browser$1.prefix.css+"transform-origin: left top;"+Browser$1.prefix.css+"appearance:none;"+Browser$1.prefix.css+"user-select: initial;",_=StyleSheetManager.insertCss(l);e._classNameList.push(_),e._staticClassName=_,e._html='<div ondragstart="return false;" data-type="slides" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}" >';var c=e._transitionTime;e._html+='<div id="slide_holder_'+t._id+'" class="slide_holder" style="'+Browser$1.prefix.css+"transition: left "+c+"ms ease-in-out, top "+c+'ms ease-in-out;overflow:visible;display:block;width:100%;height:100%;position:absolute;left:0;top:0;">';for(var d=o=="vertical"?0:-t._rawWidth,u=o=="vertical"?-t._rawHeight:0,f=0;f<=a.length+1;f++){var p=f==0?a.length-1:f==a.length+1?0:f-1;a[p]&&(e._html+='<div class="slide_image" style="display:block;width:100%;height:100%;position:absolute;left: '+d+"px;top:"+u+"px;background-image: url("+a[p].img+");background-position:center;background-repeat:no-repeat;background-size:"+(n=="fill"?"100% 100%":n)+';"></div>'),o=="vertical"?u+=t._rawHeight:d+=t._rawWidth}e._html+="</div>";var v=(t._rawHeight-a.length*16)/2;e._html+='<div id="dots_holder_'+t._id+'" align="center" class="dots_holder" style="display:'+(s==0?"none":"block")+";width:"+(o=="vertical"?"16px":"100%")+";height:"+(o=="vertical"?"100%":"16px")+";position:absolute;"+(o=="vertical"?"top:0;right:8px":"left:0;bottom:8px;")+"; padding-top:"+(o=="vertical"?v+"px":"0")+'">';for(var f=0;f<a.length;f++)e._html+='<div id="slide_dot_'+(t._id+"_"+f)+'" class="slide_dot dot_active" style="display:inline-block;width:8px;height:8px;background-color:white;border:none; opacity:'+(f==e._displayObject._activeIndex?"0.9":"0.3")+';margin:4px;border-radius:50%;"></div>';e._html+="</div>",e._html+="</div>"},proto$r._buildFun=function(){var e=this;renderObjectSlides.__super__._buildFun.apply(e,arguments),e._displayObject._addEventListener(Browser$1.InputStart,e._inputDown.bind(e)),e._displayObject._addEventListener(Browser$1.InputEnd,e._inputUp.bind(e))},proto$r._prepareCapture=function(e){var t=this,r=t._displayObject,a=r._aniData.param,n=a.imgs||[],o=document.querySelector("#dots_holder_"+r._id+" .dot_active"),s=0;try{s=parseInt(o.id.split("_").pop())}catch{}if(n[s]&&n[s].img){var l=new Image;l.src=n[s].img,l.onload=l.onerror=function(){t.slideImage=l,e()}}else e()},proto$r._redraw=function(e,t){var r=this,a=r._displayObject;e.transform(t._a,t._b,t._c,t._d,t._tx,t._ty);try{e.drawImage(r.slideImage,2,2,a._rawWidth,a._rawHeight)}catch(n){console.error(n),window.location.href.indexOf("m_dbg=1")>0&&Mugeda.log("渲染图片出错!")}},proto$r._update=function(e){var t=this;if(!t._transitionCounter){var r=t._displayObject,a=r._aniData.param,n=a.dir||"horizontal",o=a.imgs||[],s=o.length;if(e=e||(n=="vertical"?"down":"right"),e){var l=document.querySelector("#slide_holder_"+r._id),_=document.querySelector("#dots_holder_"+r._id+" .dot_active"),c=_?_.id:"",d=c.split("slide_dot_"+r._id+"_");if(d.length==2){_.className="slide_dot",_.style.opacity="0.3";var u=parseInt(d[1]),f=e=="up"||e=="left";u+=f?-1:1,setTimeout(function(){var v=u==-1?s-1:u==s?0:u,h=u==-1||u==s;_=document.querySelector("#slide_dot_"+(r._id+"_")+v),t._displayObject._activeIndex=v,n=="vertical"?l.style.top=-u*r._rawHeight+"px":n=="horizontal"&&(l.style.left=-u*r._rawWidth+"px"),t._transitionCounter++,setTimeout(function(){t._transitionCounter--;try{var g=Mugeda.options.sliderCallback,w=t._displayObject._aniData.param.imgs[u];w&&g&&g(u,w)}catch{}},t._transitionTime*9/8),_&&(_.style.opacity="0.9"),_&&(_.className="slide_dot dot_active"),h&&(t._transitionCounter++,setTimeout(function(){t._transitionCounter--;var g=0;l.style[Browser$1.prefix.lowercase+"Transition"]="left "+g+"ms ease-in-out, top "+g+"ms ease-in-out",n=="vertical"?l.style.top=-v*r._rawHeight+"px":n=="horizontal"&&(l.style.left=-v*r._rawWidth+"px"),t._transitionCounter++,setTimeout(function(){t._transitionCounter--,g=t._transitionTime,l.style[Browser$1.prefix.lowercase+"Transition"]="left "+g+"ms ease-in-out, top "+g+"ms ease-in-out"},t._transitionTime/16)},t._transitionTime*17/16))},1)}}if(t._autoTimer&&(clearTimeout(t._autoTimer),t._autoTimer=null),a.autoShow){var p=parseFloat(a.playTime)||3;p*=1e3,p=Math.max(500,p),t._autoTimer=setTimeout(function(){t._update()},p)}}},proto$r._inputDown=function(e){var t=this;t._inputStartInfo.x=e._getInputX(),t._inputStartInfo.y=e._getInputY(),t._inputStartInfo.time=new Date().getTime(),t._displayObject},proto$r._inputUp=function(e){var t=this,r=t._displayObject,a=e._getInputX(),n=e._getInputY(),o=new Date().getTime(),s=r._aniData.param,l=s.dir||"horizontal";s.imgs;var _=null;if(o-t._inputStartInfo.time<1e3){var c=a-t._inputStartInfo.x,d=n-t._inputStartInfo.y;l=="vertical"&&Math.abs(d)>Math.abs(c)&&Math.abs(d)>16?_=d>0?"up":"down":l!="vertical"&&Math.abs(d)<Math.abs(c)&&Math.abs(c)>16&&(_=c>0?"left":"right")}t._update(_)},proto$r.render=function(e,t,r){var a=this,n=a._displayObject;renderObjectSlides.__super__.render.apply(a,arguments);var o=n._aniData.param;if(o.autoShow){var s=parseFloat(o.playTime)||3;s*=1e3,s=Math.max(500,s),a._transitionTime>s&&(a._transitionTime=s*.8),a._autoTimer&&(clearTimeout(a._autoTimer),a._autoTimer=null),a._autoTimer=setTimeout(function(){a._update()},s)}};var renderObjectIFrame=function(){renderObjectIFrame.__super__.constructor.apply(this,arguments);var e=this;e._iframe=null,e._prevUrl=null};mod.extend(renderObjectIFrame,RenderObject);var proto$q=renderObjectIFrame.prototype;proto$q._setDisplayInitState=function(){var e=this,t=e._displayObject,r=t._aniData.param,a="position: absolute; overflow: hidden; outline: none; padding: 0; background: transparent; border-radius: 0; width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+Browser$1.prefix.css+"transform-origin: left top;"+Browser$1.prefix.css+"appearance:none;"+Browser$1.prefix.css+"user-select: initial;";r.lineWidth&&(a+="border: "+r.lineWidth+"px solid "+r.strokeColor+";");var n=StyleSheetManager.insertCss(a);e._classNameList.push(n),e._staticClassName=n,e._html='<div ondragstart="return false;" style="overflow:auto;-webkit-overflow-scrolling:touch;!important;" data-type="iframe" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}" >',e._html+='<iframe allowfullscreen id="iframe_'+t._id+'" style="'+Browser$1.prefix.css+'overflow:auto;border:none;display:block;width:100%;height:100%;position:absolute;left:0;top:0;" src=""></iframe>',e._html+="</div>"},proto$q._buildFun=function(){var e=this;renderObjectIFrame.__super__._buildFun.apply(e,arguments);var t=e._displayObject;t._addEventListener("visibilityChanged",e._updateIFrameSource.bind(e))},proto$q._updateIFrameSource=function(){var e=this,t=e._displayObject,r="about:blank",a=t._url||r,n=t._getRealVisible(),o=e.getNode(),s=o.firstChild;if(a!=e._prevUrl&&n){var o=e.getNode(),s=o.firstChild;Browser$1._isPreview()&&a!=r&&(a=Browser$1._getRedirectUrl(a)),s.src=a,e._prevUrl=a}n||(s.src="javascript: '<html><body>&nbsp;</body></html>'",setTimeout(function(){s.src=r,e._prevUrl=r},1))},proto$q.render=function(e,t,r){var a=this;renderObjectIFrame.__super__.render.apply(a,arguments),a._updateIFrameSource()};var RenderObjectVideoIFrame=function(){var e=this;RenderObjectVideoIFrame.__super__.constructor.apply(e,arguments),e._iframe=null,e._prevUrl=null,e._cachedVisibilty=null};mod.extend(RenderObjectVideoIFrame,RenderObject);var proto$p=RenderObjectVideoIFrame.prototype;proto$p._setDisplayInitState=function(){var e=this,t=e._displayObject,r="width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+Browser$1.prefix.css+"user-select: none;"+(t._haveClickAction?"cursor: pointer;":""),a=StyleSheetManager.insertCss(r);e._classNameList.push(a),e._staticClassName=a,e._html='<div ondragstart="return false;" data-type="video" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}">   <iframe width="100%" height="100%" allowfullscreen frameborder="0" src="" style="position: absolute;"/></iframe></div>'},proto$p.getNode=function(e){var t=this;return e?t._iframe:RenderObjectVideoIFrame.__super__.getNode.apply(t,arguments)},proto$p._buildFun=function(){var e=this;RenderObjectVideoIFrame.__super__._buildFun.apply(e,arguments);var t=e._displayObject;e._iframe=e.getNode().children[0],t._addEventListener("visibilityChanged",e._visibleChangedHandler.bind(e)),t._addEventListener("rendered",e._renderedHandler.bind(e)),t._getRoot()._addEventListener("resize",function(){setTimeout(function(){e._renderedHandler.bind(e)()},500)}),e._cachedVisibilty=t._getRealVisible()},proto$p._visibleChangedHandler=function(e){var t=this,r=t._displayObject;if(e)var a=t._cachedVisibilty=r._getRealVisible();else a=t._cachedVisibilty;var n="about:blank";if(a)var o=r._url||n;else o=n;o!=t._prevUrl&&t._updateIFrameSource(o)},proto$p._updateIFrameSource=function(e){var t=this,r=t._iframe;r.src=t._prevUrl=e},proto$p._updateIFramePosition=function(){var e=this,t=e._iframe,r=e._displayObject._getRoot();if(e._cachedVisibilty){var a=e.getNode(),n=a.getBoundingClientRect(),o=r._getRotation(),s=new Matrix;s._translate(-n.left-n.width/2,-n.top-n.height/2),s._rotate(o),s._translate(n.left+n.width/2,n.top+n.height/2),s=s._inverse();var l=[new Point(n.left,n.top),new Point(n.left,n.bottom),new Point(n.right,n.top),new Point(n.right,n.bottom)];l.forEach(c=>s._transform(c,!0));var _=new Boundary;l.forEach(c=>_._addPoint(c)),n=_._getRoundRect(),t.style.cssText+="width: "+n.width+"px; height:"+n.height+"px; top:"+n.top+"px; left:"+n.left+"px; transform: rotate("+o+"rad)",t.parentNode!==document.body&&document.body.appendChild(t)}else t.style.width=null,t.style.height=null,t.style.left=null,t.style.top=null,e.getNode().appendChild(t)},proto$p.render=function(e,t,r){var a=this;RenderObjectVideoIFrame.__super__.render.apply(a,arguments),a._visibleChangedHandler()},proto$p._renderedHandler=function(){var e=this;e._updateIFramePosition()};var TextFormat=function(){var e=this;e._align=TextFormatAlign.LEFT,e._bold=!1,e._color=new Color(0,0,0,1),e._font="Arial",e._italic=!1,e._size=12,e._underline=!1,e._letterSpacing=0};mod.namespace("Text.TextFormat",TextFormat);var TextTrans=function(){var e=this;e._fillType=FillType.COLOR,e._fillVal=new Color,e._strokeColor=new Color,e._strokeWidth=1,e._letterSpace=0,e._lineHeight=0,e._fontSize=0};mod.extend(TextTrans,DisplayObjectTrans);var proto$o=TextTrans.prototype;proto$o._parseParam=function(e,t){var r=this,a=e.customValue;delete e.customValue,ShapeTrans.prototype._parseFillAndStroke.call(r,e,t),a&&(e.customValue=a),r._letterSpace=e.letterSpace*1||0,r._lineHeight=e.textLineHeight||e.lineHeight||(e.inputLineheight?e.inputLineheight/e.fontSize*100:"120"),r._fontSize=e.fontSize},proto$o._compareTo=function(e){var t=this;return!(e==null||ShapeTrans.prototype._compareFillAndStockTo.call(t,e)===!1||t._letterSpace!==e._letterSpace||t._lineHeight!==e._lineHeight||t._fontSize!==e._fontSize)},proto$o._compareDetail=function(e){var t=this;if(e==null)return t;var r=ShapeTrans.prototype._compareDetailFillAndStock.call(t,e);return r._letterSpace=t._letterSpace===e._letterSpace?void 0:t._letterSpace,r._lineHeight=t._lineHeight===e._lineHeight?void 0:t._lineHeight,r._fontSize=t._fontSize===e._fontSize?void 0:t._fontSize,r},TextTrans._tween=function(e,t,r,a,n){n=a._default(n),ShapeTrans._tweenFillAndStroke(e,t,r,a,n),e._letterSpace=t._letterSpace*1+n*(r._letterSpace-t._letterSpace),e._lineHeight=t._lineHeight*1+n*(r._lineHeight-t._lineHeight),e._fontSize=t._fontSize*1+n*(r._fontSize-t._fontSize)},proto$o._clone=function(){var e=this,t=new TextTrans,r=t._fillType=e._fillType;return r===FillType.IMAGE?t._fillVal=JSON.parse(JSON.stringify(e._fillVal)):r===FillType.COLOR?t._fillVal=e._fillVal.clone():t._fillVal={_colors:e._fillVal._colors.map(function(a){return a.clone()}),_ratios:e._fillVal._ratios.slice(0),_p0:e._fillVal._p0.clone(),_p1:e._fillVal._p1.clone()},t._strokeColor=e._strokeColor.clone(),t._strokeWidth=e._strokeWidth,t._letterSpace=e._letterSpace,t._lineHeight=e._lineHeight,t._fontSize=e._fontSize,t};const TextField=function(){TextField.__super__.constructor.apply(this,arguments);var e=this;e._text="",e._htmlText="",e._textHeight=0,e._textVAlign=TextFormatAlign.TOP,e._textColor=null,e._strokeColor=null,e._strokeWidth=null,e._defaultTextFormat=new TextFormat,e._textOverflow=null,e._initialText=null,e._presetText=null,e._fontText=null,e._scrollSpeed=16,e._textTransform=null,e._textLineHeight=0,e._keyframes=[]};extend(TextField,InteractiveObject);var proto$n=TextField.prototype;proto$n._type="Text",proto$n._bindUserAPI=function(e){var t=this;TextField.__super__._bindUserAPI.call(t,e),definePropertyGetSet(e,["scrollSpeed",function(){return t._getScrollSpeed()},function(r){t._setScrollSpeed(r)}]),definePropertyGetSet(e,["fillColor",function(){var r=t._getFillStyle();return r?r._getCssText():null},function(r){t._setFillStyle(Color.parse(r))}])},proto$n._getScrollSpeed=function(){return this._scrollSpeed},proto$n._setScrollSpeed=function(e){this._scrollSpeed=isNaN(e)?this._scrollSpeed:e},proto$n._getText=function(e){return this._text};var escapeRegex=/[&"'<>\n]/g,escapeMap={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","\n":"<br />"},lookupEscape=function(e){return escapeMap[e]};TextField._escape=function(e){return e.replace(escapeRegex,lookupEscape)},proto$n._setText=function(e,t){try{var r=this;e=e.toString(),(e!=r._text||t)&&(r._text=e,r._isRich||(e=TextField._escape(e).replace(/  /g," &#160;")),r._htmlText=e+'<span style="width:1px;height:1px;overflow:hidden;display:inline-block;"> </span>',r._dispatchEvent(r._changedEvent))}catch{}},proto$n._getHtmlText=function(){return this._htmlText},proto$n._updateSelf=function(){this._updatePreset()},proto$n._updatePreset=function(){var e=this,t=e._presetText,r=Macro._parseMacroText(t,null,!1,!0,this);this._setText(r)},proto$n.parseParamToDisplayObject=function(e,t,r){var a=this;t.type===2010&&(delete e.rawWidth,delete e.rawHeight,delete e.fillInfo.fillImage);var n=e.customValue==null?unescape(e.textContent):e.customValue,o={top:TextFormatAlign.TOP,middle:TextFormatAlign.CENTER,bottom:TextFormatAlign.BOTTOM}[e.textVAlign],s=e.fontFamily;s.toLowerCase()==="simhei"&&(s='"Microsoft YaHei", "微软雅黑", SimHei, sans-serif');var l=e.fontFace,_={left:TextFormatAlign.LEFT,center:TextFormatAlign.CENTER,right:TextFormatAlign.RIGHT,justify:TextFormatAlign.JUSTIFY}[e.textAlign],c=e.fillInfo.fillColors[0];textLikeTypes.includes(t.type)&&a._setText(n),a._fontText=n,a._textVAlign=o,a._textHeight=e.totalHeight*1||0,e.presetText*1&&!(r!=null&&r.noPresetAnimation)&&(a._presetText=n,Macro._chkNeedFresh(a._presetText)&&(a._haveSelfFunction=a._updateSelf),a._updateSelf()),l&&(a._fontData=FontData._getFontDataIncrease(s+"-"+t.guid,l,n,this._resource),a._resourceList=[a._fontData]);var d=a._defaultTextFormat;d._font=s,d._align=_,d._bold=e.fontWeight==="normal"?"":e.fontWeight,d._underline=e.textDecoration==="none"?"":e.textDecoration,d._italic=e.fontStyle==="normal"?"":e.fontStyle,d._color=new Color(c.r,c.g,c.b,c.a),d._type=t.type,TextField.__super__.parseParamToDisplayObject.apply(this,arguments),this._initialText=this._getText()},TextField._createChildClassFactory=function(e,t){return function(r,a){var n=function(o,s){var l=this;n.__super__.constructor.apply(this,arguments),s!=null&&(l._visible=s),o&&o.addChild(l),e.call(l,r,a),l._resource=a};return extend(n,t),n}},TextField._createChildClass=TextField._createChildClassFactory(function(e,t){this._resource=t},TextField),proto$n.tweenParam=function(e,t,r,a){e=TextField.__super__.tweenParam.apply(this,arguments);var n=typeof a=="object"?a:{},o=n.default==null?a:n.default;if(t.letterSpace!==void 0||r.letterSpace!==void 0){var s=t.letterSpace||0,l=r.letterSpace||0;e.letterSpace=s+o*(l-s)}return t.fontSize&&r.fontSize&&(e.fontSize=t.fontSize+o*(r.fontSize-t.fontSize)),(t.textLineHeight!==void 0||r.textLineHeight!==void 0)&&(s=t.textLineHeight||100,l=r.textLineHeight||100,e.textLineHeight=s+o*(l-s)),e},proto$n._setFillStyle=function(e){var t=this,r=t._transform._clone(),a=r._paramTransform;a._fillType=FillType.COLOR,a._fillVal=e,t._transform=r,t._dispatchEvent(t._changedEvent)},proto$n._getFillStyle=function(){var e=this,t=e._transform,r=t._paramTransform;if(r._fillType===FillType.COLOR)return r._fillVal},proto$n._bindTrans=function(e){e._paramTransform=new TextTrans},proto$n._initProcessAnimation=function(){this._initialText=this._getText()},proto$n._getProcessAnimationLength=function(){return this._initialText.length},proto$n._setProcessAnimationRatio=function(e){var t=this._initialText||this._getText();if(e<=0)this._setText("");else if(e>=1)this._setText(t);else{var r=Math.round(t.length*e);this._setText(t.substr(0,r))}},mod.exportName(proto$n,["setText",proto$n._setText,"getText",proto$n._getText]),namespace("Text.TextField",TextField);var RenderObjectUtils=function(){};RenderObjectUtils.createInstance=function(e){var t=Plugin._getRenderObjectClassByDisplayObject(e);if(t)return new t(e);if(e instanceof Shape)return new RenderObjectShape(e);if(e instanceof VideoIFrame)return new RenderObjectVideoIFrame(e);if(e instanceof Video)return new RenderObjectVideo(e);if(e instanceof AudioControl)return new renderObjectAudioControl(e);if(e instanceof Bitmap)return new renderObjectBitmap(e);if(e instanceof Slides)return new renderObjectSlides(e);if(e instanceof IFrame)return new renderObjectIFrame(e);if(e instanceof TextField)return new renderObjectTextField(e);if(e instanceof Stage)return new RenderObjectStage(e);if(e instanceof MovieClip)return new renderObjectMovieClip(e);if(e instanceof Sprite)return new RenderObjectSprite(e);if(e instanceof Form)return new renderObjectForm(e)},mod.namespace("Render.RenderObjectUtils",RenderObjectUtils);var LoadingPage=function(){var e=this;e._type="default",e._node=null,e._percentNode=null},proto$m=LoadingPage.prototype;proto$m.init=function(e,t){var r=this,a=r._image,n='<div style="position: absolute;background: black;'+t[0]+Browser$1.prefix.css+'transition: opacity 500ms; opacity: 1;z-index:20">   <div style="position: absolute;height: 20px; width: 100%;top:20%;color:white;text-align: center;font-size: 12px;">       <!--<div><img width="134" src="'+a+'"/></div>-->       <div style="padding: 5px;">加载中...<span class="mugeda_percent"></span></div>   </div></div>',o=document.createElement("div");o.innerHTML=n;var s=r._node=o.children[0];r._percentNode=s.querySelectorAll(".mugeda_percent")[0],e.appendChild(s)},proto$m.update=function(e,t){var r=this,a=Math.min(Math.floor(e/t*100),100);r._percentNode.innerHTML=a+"%"},proto$m.remove=function(){var e=this,t=e._node;t!=null&&(t.style.opacity=0,setTimeout(function(){t.style.display="none"},500))},mod.exportName(proto$m,["init",proto$m.init,"update",proto$m.update,"remove",proto$m.remove]),mod.namespace("Render.LoadingPage",LoadingPage);var AudioIndicator=function(){var e=this;e._state=void 0,e._visible=void 0,e.audio=null,e._dom=null,e.loadInterval=null,e.loadIntervalNum=0,e._prevMode=null,e._movieClip=null,mod.definePropertyReadOnly(e,["dom",proto$l._getDom])},proto$l=AudioIndicator.prototype;proto$l._getDom=function(){return this._dom},proto$l._setMode=function(e){var t=this._dom;if(typeof e!="string"){e=this._prevMode||"righttop";var r=!0}else this._prevMode=e;var a=this._movieClip._parent;Math.abs(a._stageRotate-Math.PI/2)<.1?(e={lefttop:"righttop",righttop:"rightbottom",rightbottom:"leftbottom",leftbottom:"lefttop"}[e],t.style.cssText+=Browser$1.prefix.css+"transform: rotate(90deg);"):Math.abs(a._stageRotate+Math.PI/2)<.1?(e={lefttop:"leftbottom",leftbottom:"rightbottom",rightbottom:"righttop",righttop:"lefttop"}[e],t.style.cssText+=Browser$1.prefix.css+"transform: rotate(-90deg);"):t.style.cssText+=Browser$1.prefix.css+"transform: rotate(0);",e=="lefttop"?(t.style.left="18px",t.style.top="18px",t.style.right="",t.style.bottom=""):e=="leftbottom"?(t.style.left="18px",t.style.bottom="18px",t.style.right="",t.style.top=""):e=="righttop"?(t.style.right="18px",t.style.top="18px",t.style.left="",t.style.bottom=""):e=="rightbottom"&&(t.style.right="18px",t.style.bottom="18px",t.style.left="",t.style.top=""),r||this._setVisible(e!="hide")},proto$l._setStatus=function(e){var t=this;e=="play"?t.audio&&t.audio.play():e=="pause"&&t.audio&&(t.audio.pause(),t.audio.forcePaused=!0)},proto$l._setAudio=function(e){if(e){for(var t=this._movieClip._getRoot(),r=t._aniData,a,n=r.symbols||r.sm||[],o=0;o<n.length;o++)if(n[o].id==e){a=n[o].url;break}if(a){var s=window.backgroundMusic;if(s||(window.autoPlayMusic(!1,e),s=window.backgroundMusic,window.MugedaCard.showAudioControl(t._renderManager._mugeda._scene,s,!1)),s){try{var l=new URL(a,location.href),_=new URL(s.src,location.href)}catch(c){console.log(c)}l.href!==_.href&&(s.src=a)}}}},proto$l._getVisible=function(){return this._visible},proto$l._setVisible=function(e){var t=this;t._visible=e,t._dom.style.display=e?"block":"none"},proto$l._getState=function(){return this._state},proto$l._setState=function(e){var t=this;t._state=e;var r=t._dom.querySelector(".mugine_audio_on"),a=t._dom.querySelector(".mugine_audio_off");r&&(r.style.display=e=="on"?"":"none"),a.style.display=e=="off"?"":"none",t._visible===void 0&&(t._dom.style.display=e!="none"?"block":"none"),t.loadInterval&&clearInterval(t.loadInterval)},proto$l._init=function(e,t){t=t||{};var r=t.audioOffImage,a=t.audioOnImage,n=t.audioIconSize||"small",o=t.audioIconPosition||null,s={small:24,medium:36,large:48,none:0},l=s[n];if(r=r||a,a=a||r,a){try{r=Mugeda.currentAni._resource.dir.getFullPath(r),a=Mugeda.currentAni._resource.dir.getFullPath(a)}catch{}_='<img width="'+l+'" class="mugine_audio_off" style="" src="'+r+'" />',_+='<img width="'+l+'" class="mugine_audio_on" style="" src="'+a+'" />'}else var _='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="'+l+'px" height="'+l+'px" viewBox="0 0 46 46" enable-background="new 0 0 46 46" xml:space="preserve">   <g>       <circle opacity="0.6" cx="23" cy="23" r="23"/>           <g>               <path fill="#ECECEC" d="M23,2c11.6,0,21,9.4,21,21s-9.4,21-21,21S2,34.6,2,23S11.4,2,23,2 M23,0C10.3,0,0,10.3,0,23s10.3,23,23,23 s23-10.3,23-23S35.7,0,23,0L23,0z"/>           </g>       <path fill="#ECECEC" d="M27.5,7.3c0.6,1.1,0.8,2.4,1.6,3.4c0.9,1.5,2.1,2.8,3,4.3c0.6,1.1,1.3,2.2,1.4,3.4c0.4,1.6-0.1,3.4-0.9,4.8 c-0.8,0.7-1.1-0.4-0.9-1c0.1-0.9,0.2-1.8,0-2.7c-0.2-1.3-0.6-2.6-1.4-3.7c-0.7-0.8-1.5-2.5-2.8-2.1c-0.9,0.4-0.7,1.5-0.8,2.3 c-0.6,5-1.2,10.1-1.9,15.1c-0.3,2.1-2.3,3.3-4.1,4c-1.6,0.7-3.5,1-5.2,0.4c-1.6-0.4-3.2-1.8-3-3.5c0.1-2.1,1.8-3.8,3.8-4.4 c1.9-0.8,4.2-0.8,6.1,0.2c0.9,0.4,1.3-0.4,1.5-1.3c0.9-6.4,1.7-12.8,2.5-19.2C26.3,6.8,27.4,6.7,27.5,7.3L27.5,7.3z"/>   </g>   <polygon class="mugine_audio_off" fill="#ECECEC" points="14,11.2 13.2,12.9 33.3,34.2 34.2,32.5 "/></svg>';var c=document.createElement("div");c.id="mugeda_audio_indicator",c.style.cssText+="z-index:20;position:absolute;",c.innerHTML=_,e.appendChild(c);var d=this;d._dom=c;var u=d._movieClip._aniData.music;if(u){var f=d._movieClip._getRoot(),p=f._aniData.symbols||[];p.some(function(v){return v.id==u&&v.type==2})&&d._setMode(o)}d._movieClip._parent._addEventListener("stageRotateChange",d._setMode.bind(d))},mod.exportName(proto$l,["setState",proto$l._setState,"getState",proto$l._getState,"setVisible",proto$l._setVisible,"getVisible",proto$l._getVisible]);var PreLoader=function(){var e=this;PreLoader.__super__.constructor.apply(e,arguments),e._range=null,e._resourceDataHash={},e.resourceDataList=[],e._additionImageList=[],e._movieClip=null,e._loadedNum=0,e._loadingNum=0,e._loadingPage=null,e._loadingPageShowStartTime=0,e._isFirstPageLoad=!1,e._minWait=0,e._interval=0,e._readyToRender=null,e._loadPercent=0},loadProcessPool=[];mod.extend(PreLoader,IEventDispatcher);var proto$k=PreLoader.prototype;proto$k._setLoadRange=function(e){this._range=e},proto$k._buildBitmapLoadProcess=function(e,t){var r=this;r._movieClip=t;var a=r._resourceDataHash,n=r.resourceDataList;e.forEach(function(o){for(var s=o._displayObject,l=o._parentMovieClipRenderObject,_=l._displayObject,c=o._parentMovieClipRenderObjectChild,d=c._displayObject,u=[_._objectFrames[d._id]],f=[_],p=l;p._parentMovieClipRenderObject;){var v=p._parentMovieClipRenderObject,h=p._parentMovieClipRenderObjectChild,g=v._displayObject,w=h._displayObject,y=g._objectFrames[w._id];u.push(y),f.push(g),p=v}for(var x=u[0]._min,m=u[0]._max,A=x;A<=m;A++)_._frameImageLeftNum[A]=(_._frameImageLeftNum[A]||0)+1;s._resourceList.forEach(function(T){var b=T._id;a[b]?a[b].push({movieClip:f,keyframeInfo:u,resourceData:T,displayObject:s}):(n.push(T),a[b]=[{movieClip:f,keyframeInfo:u,resourceData:T,displayObject:s}])})})},proto$k._loadNextBitmap=function(e){var t=this,r={},a=t._movieClip,n=t.resourceDataList,o=t._resourceDataHash,s=t._entryFrameId==null?a._currentFrame:t._entryFrameId;n.forEach(function(x){var m=x._id;r[m]==null&&(r[m]=[]);var A=o[m];A.forEach(function(T){for(var b=T.movieClip,C=T.keyframeInfo,M=b.length,E=M-1,O=0;E>=0;E--,O++){var S=b[E],L=C[E],D=r[m][O],$=S._id==1?s:S._currentFrame,R=Math.min(L._max,Math.max($,L._min)),I=R-$;(D==null||I>=0&&I<D)&&(r[m][O]=I)}})});var l=[];for(var _ in r)r.hasOwnProperty(_)&&l.push({priority:r[_],resourceData:o[_][0].resourceData,info:o[_]});if(l.sort(function(x,m){for(var A=Math.max(x.priority.length,m.priority.length),T=0;T<A;T++){var b=x.priority[T]||0,C=m.priority[T]||0;if(b!==C)return b-C}return 0}),t._range!=null&&e){var c=l.filter(function(x){return s+x.priority[0]<=t._range}).length+t._additionImageList.length;c||(c=0)}for(var d=0,u=a._getRoot();(u._skipLoad||loadProcessPool.length<16+d)&&(l.length||t._additionImageList.length);){var f=l[0],p=!1;if(t._additionImageList.length)p=!0;else if(t._range!=null&&s+f.priority[0]>t._range)return c;if(t.loadingNum++,p){var v=t._additionImageList.splice(0,1)[0];h=new BitmapData,h._src=v,loadProcessPool.push(h)}else{l.splice(0,1);var h=f.resourceData;loadProcessPool.push(h);var g=n.indexOf(h);n.splice(g,1)}var w=function(x,m,A){return function(){t._loadedNum<t._maxNum&&t._loadedNum++;var T=loadProcessPool.indexOf(x);loadProcessPool.splice(T,1);var b=x._id,C=A[b],M=[];Mugeda.hashImages=Mugeda.hashImages||{},Mugeda.hashImages[x._src]=x._image;var E=new MuEvents("framesLoadedChange",!1,!1);a._dispatchEvent(E),C&&C.forEach(function(O){var S=O.displayObject;S._dispatchEvent(S._changedEvent);for(var L=O.movieClip[0],D=O.keyframeInfo[0],$=D._min,R=D._max,I=L._frameImageLeftNum,P=$;P<=R;P++)I[P]--;M.indexOf(L)===-1&&M.push(L)}),M.forEach(function(O){var S=O._frameImageLeftNum,L=0;for(var D in S)if(S.hasOwnProperty(D)){var $=S[D];$===0&&L++}O._setFrameLoaded(L,!1)}),m.length&&t._loadNextBitmap(null)}},y=h._loader;u._skipLoad||y._contentLoaderInfo._state===y._contentLoaderInfo.constructor.STATE.LOADED?setTimeout((function(x,m){return function(){x(m,n,o)()}})(w,h)):(y._contentLoaderInfo._addEventListenerOnce("complete",w(h,n,o)),y._contentLoaderInfo._addEventListenerOnce("ioError",w(h,n,o)),y._contentLoaderInfo._addEventListenerOnce("merge",function(){d++}),y._contentLoaderInfo._addEventListenerOnce("mergedone",function(){d--}),y._load(h))}return c},proto$k._load=function(){var e=this;e._loadedNum=0,e._loadingNum=0,e._maxNum=e._loadNextBitmap(!0)},proto$k._updateProcess=function(e,t,r,a,n,o,s,l,_,c){var d=this;d._loadingPage=o,d._loadingPageShowStartTime=new Date*1,d._isFirstPageLoad=s,d._readyToRender=c,d._minWait=l,d._stage=a._getRoot();var u=function(){var v=d._maxNum-d._loadedNum+e._scriptLoadCounter;d._updateLoading(v,d._maxNum+f,_)},f=e._scriptLoadCounter;if(f>0?e._scriptLoadProcessChangeCallback=function(){e._scriptLoadCounter==0&&t(),u()}:(t(),u()),d._maxNum-d._loadedNum>0){var p=function(){var v=d._maxNum-d._loadedNum+e._scriptLoadCounter;d._updateLoading(v,d._maxNum+f),u(),d._maxNum-d._loadedNum==0&&a._removeEventListener("framesLoadedChange",p),v==0&&r()};a._addEventListener("framesLoadedChange",p)}else r(),u()},proto$k._updateLoading=function(e,t,r){e==0&&t==0&&(e=0,t=1);var a=this,n=25,o=1e3/n,s=a._minWait,l=s,_=new Date().getTime(),c=t-e;clearInterval(a._interval),a._interval=setInterval(function(){var d=a._loadingPageShowStartTime,u=new Date().getTime()-d;l=s-u;var f=l<0?1:u/s,p=-(new Date().getTime()-_)/1e3,v=(c+1-Math.exp(p))/t,h=Math.min(v,f),g=t*h,w=a._stage._renderManager._mugeda;a._isFirstPageLoad&&(w._autoProgressDisabled||a._movieClip.gotoAndStop(a._movieClip._scenes[0]._numFrames*g/t)),a._loadPercent=g/t*100,r(g,t,{isTotal:!0}),!w._autoProgressDisabled&&e==0&&l<0&&!a.loadOver&&(a.loadOver=!0,a._startAnimation())},o)},proto$k._startAnimation=function(){var e=this;Mugeda.getMsuid&&Mugeda.getMsuid(function(o){Mugeda.DataStats&&Mugeda.DataStats.init({indexPageId:e._movieClip._scenes[0]._guid,indexPageName:e._movieClip._scenes[0]._name,indexPageNum:e._movieClip._scenes.length,totalPages:e._movieClip._scenes.map(function(s){return{id:s._guid,name:s._name}})}),e._stage&&e._stage._runMsuidCallbacks(o)});var t=new Date*1-e._loadingPageShowStartTime;if(t<e._minWait)setTimeout(function(){e._startAnimation()},e._minWait-t);else{if(clearInterval(e._interval),e._isFirstPageLoad){var n=new ReadyEvent("renderready");e._movieClip.gotoAndPlay(e._entryFrameId),e._movieClip._stopApplyAction=!0,e._entryFrameId=null,n._registerCallback(function(){e._movieClip._stopApplyAction=!1}),e._stage._dispatchEvent(n),n._chkOk()}else{var r=e._readyToRender();try{var a=!!window.parent.mugedaEntryPage}catch{a=!1}!r||a?e._movieClip.gotoAndPlay(e._entryFrameId):r&&e._movieClip.gotoAndStop(e._entryFrameId),e._entryFrameId=null}e._setLoadRange(null),e._loadNextBitmap()}};var scrollOnTextOrSectionOverflow=["scroll","scrollNoBar","manualScroll","manualScrollNoBar"],renderManager=function(e){e=e||{};var t=this;renderManager.__super__.constructor.apply(t,arguments),t._loadingPage=e.loadingPage||function(){return new LoadingPage},t._dropObjectList=[],t._renderList=null,t._stageDom=null,t._resourceLoader=null,t._mugeda=null,t.hasScript=e.hasScript,t._toBeRenderedObjectHash={},t._paused=!1,t._toBeControlledObjectPendingHash=[],t._toBeControlledObjectHash=[],t._thisRoundRenderObjectIdList={},t._delayRenderList={},t._thisRoundRenderObjectIdList={},t._globalRenderedObjectList={},t._renderContext="default",t._removeList=[],t._addChildList=[],t._forceCheckHash=[],t._audioIndicator=new AudioIndicator,t._paging=!1,mod.exportName(t,["audioIndicator",t._audioIndicator]),mod.definePropertyGetSet(t,["loadingPage",proto$j._getLoadingPage,proto$j._setLoadingPage]),t._scrollableObjectList=[],t._preLoader=new PreLoader,t._preLoader._additionImageList=t._additionImageList=[],t._displayHash={},t._mediaHash={}};mod.extend(renderManager,IEventDispatcher);var proto$j=renderManager.prototype;proto$j._getLoadingPage=function(){return this._loadingPage},proto$j._setLoadingPage=function(e){e==null?(this._loadingPage&&this._loadingPage().remove(),this._loadingPage=function(){return{init:function(){},update:function(){},remove:function(){}}}):this._loadingPage=e};var requestAnimationFrameHelper=(function(){var e=Browser$1._globalObject;return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(function(){t(new Date*1)},1e3/30)}})(),requestAnimationFrame$1=requestAnimationFrameHelper;renderManager.requestAnimationFrame=requestAnimationFrame$1;var setupTimer=function(e){var t=this;requestAnimationFrame$1(function(r){t.prevTime=t.startTime=r,e(r)})},timeLoop=function(e){var t=this;requestAnimationFrame$1(function(r){var a=0,n=0;t._paused?(t.prevTime=r,a=0,n=0):(a=r-t.startTime,n=r-t.prevTime,t.prevTime=r),e(n,a)})};proto$j.pause=function(){this._paused=!0},proto$j.resume=function(){this._paused=!1},renderManager._insertDisplayObject=function(e){var t=this;if(!e._getRenderObject()&&e.parent instanceof MovieClip){var r=e.parent,a=r._getRenderObject(),n=r.getChildIndex(e);do{n--;var o=r.children[n]}while(o&&(o._dataDisplayObject||!o._getRenderObject()));var s=r._getObjectSceneIndex(e);if(o==null)if(s===1/0)var l=0,_=a,c=a.getNode(!0),d=null;else _=a._scenes[s],l=0,c=_.getNode(!0),d=null;else{var u=r._getObjectSceneIndex(o),f=o._getRenderObject();s===1/0?(l=a._children.length,_=a,c=a.getNode(!0),f._parentSceneRenderObject?d=f._parentSceneRenderObject.getNode(!0):d=f.getNode(!0)):u===s?(_=a._scenes[s],l=_._children.indexOf(f)+1,c=_.getNode(!0),d=f.getNode(!0)):(_=a._scenes[s],l=0,c=_.getNode(!0),d=_.getNode(!0))}var p=buildRenderObjectList.call(t,_,e,[],l);traversal(p,function(x,m){x._c3Accelerate=!1,x instanceof renderObjectMovieClip&&(m.stopFlag=!0)});var v=traversalForSetup.call(t,_,l),h=document.createElement("div");if(h.innerHTML=v,d==null){var g=c.children[0];c.insertBefore(h.children[0],g)}else g=d.nextElementSibling,g?c.insertBefore(h.children[0],g):c.appendChild(h.children[0]);traversal(p,function(x){x.getNode()});var w=r._frames;for(var y in w)w.hasOwnProperty(y)&&w[y]._displayObjectList.push(e)}},proto$j.getReferenceElement=function(e,t,r,a){var n=this,o=n._mugeda;e=e||"";var s=e.split("_");r=s.length>1&&r;var l=e.split("/"),_=r?[]:null;if(s&&s.length>1){var c=s[0],d=s[1],u=a?(o._displayObjectHash[a.id]||{})._currentScene:null;if(u&&u._symbolId==c)_=u.getObjectByName(d,"displayobject");else for(var f in o._scene._objectHash)if(o._scene._objectHash.hasOwnProperty(f)){var p=o._scene._objectHash[f];if(r){var v=p&&p._displayObject&&p._displayObject._aniData?p._displayObject._aniData:{};v.type==2021&&c==v.param.symbolId&&_.push(p._scene.getObjectByName(d,"displayobject"))}else if(p&&p._scene&&p._scene._isSymbol()&&c==p._scene._getParentAObject()._getData().param.symbolId){_=p._scene.getObjectByName(d,"displayobject");break}}}else if(l&&l.length>1){var h=l[0],d=l[1],p=o._scene.getObjectByName(h);p&&p._scene&&(_=p._scene.getObjectByName(d,"displayobject"))}else _=o._scene.getObjectByName(e,"displayobject");var g=null;if(_)if(r){for(var w in _)_[w]=t?o._displayObjectHash[_[w]._id]:_[w];g=_}else g=t?o._displayObjectHash[_._id]:_;return g},proto$j._replaceMacros=function(e,t){var r=this,a=new RegExp("\\{\\{(.*?)\\}\\}","g"),n=e.replace(a,function(o,s){var l=s.split("."),_=s,c="";l&&l.length>1&&(_=l[0],c=l[1]);var d=r.getReferenceElement(_,!0),u=t===void 0?"0":t;return d&&(c?c.match(/\d+/)&&d._getText?u=d._getText(parseInt(c)):u=d[c]:((d._displayObject._type||"").toLowerCase(),d._getText&&(u=d._getText()))),e.match(/\{\{(.*?)\}\}\.toFixed/)&&(u="("+u+")"),u.replace&&(u=u.replace(/[\'\"]/g,function(f){return"\\"+f})),u});return n.toString()},proto$j.mainStart=function(e,t){var r=this;r._stageDom=t,r.hasScript&&(Browser$1._globalObject.DEBUG_CS2_MODE=!0),Browser$1._globalObject.DEBUG_CS2_MODE=!0,location.href.indexOf("?c3")>-1&&(window.DEBUG_CS3_MODE=!0),location.href.indexOf("?c2")>-1&&(window.DEBUG_CS2_MODE=!0);var a=e.root,n=r._renderList=new RenderObject(null),o=[];buildRenderObjectList.call(r,n,a,o);var s=a.children[0],l=s._scenes[0]._numFrames;if(r._loadingPage=r._loadingPage(),r._preLoader._entryFrameId=0,(r._loadingPage.type=="firstpage"||r._loadingPage.type=="smart")&&s._scenes[1]){if(l+=s._scenes[1]._numFrames,r._loadingPage.type=="firstpage")var _=!0;s._haveLoadingPage=!0,r._preLoader._entryFrameId=s._scenes[1]._startFrame}try{var c=window.parent.mugedaEntryPage}catch{}if(c){var d=a._aniData,u=-1;[d].concat(d.pages).forEach(function(T,b){T&&T.guid==c&&(u=b)}),u!=-1&&(r._preLoader._entryFrameId=s._scenes[u]._startFrame)}r._preLoader._setLoadRange(l-1),r._audioIndicator._movieClip=a.children[0],r._audioIndicator._init(t,a._aniData.pageInfo),r._audioIndicator._setState("none"),findCss3AccelerateObject.bind(r)(n),traversal(n,function(T){CanvasRender._initRenderObjectCanvas(T)});var f=traversalForSetup.call(r,n);location.href.indexOf("rateDom")>-1&&(f+='<div id="rate" style="position: absolute; text-shadow: 0 0 5px red;; color: red; font-size: 12px;"></div>');var p=function(T,b){var C=function(F){var N=(Mugeda.scene._aniData||{}).pageInfo||{};(T=="mouse"&&N.clickToPage||T=="keyboard"&&N.keyToPage)&&(F=="down"?Mugeda.scene._scene._nextPage():F=="up"?Mugeda.scene._scene._prevPage():F=="home"?Mugeda.scene._scene._gotoPage(0):F=="end"&&Mugeda.scene._scene._gotoPage(Mugeda.scene._scene._getPages().length-1))},M=null;if(T=="mouse")M="down";else if(T=="keyboard"){var E=[13,32,34,39,40],O=[33,37,38],S=[36],L=[35],D=b.keyCode||0;M=E.indexOf(D)>=0?"down":O.indexOf(D)>=0?"up":S.indexOf(D)>=0?"home":L.indexOf(D)>=0?"end":null}if(M){if(b.target&&b.target.tagName&&b.target.tagName=="INPUT"||b.target&&b.target.tagName&&b.target.tagName=="SELECT")return;if(b.target&&b.target.actions&&b.target.actions.length)return;var $=Mugeda.currentAni._scene._movieClip._currentScene;if($&&$.presetAnimationList&&$.presetAnimationClickCount||$.presetAnimationClickCount==0){var R=$.presetAnimationClickCount,I=$.presetAnimationList[R],P=b._target;I?P&&P._aniData&&P._aniData.param&&P._aniData.param.behavior?console.log("目标元素存在行为, 不播放"):I.displayObj._presetAnimation._setStatus("play"):C(M)}else($&&!$.presetAnimationList||$&&$.presetAnimationList&&!$.presetAnimationClickCount)&&C(M)}};r._mugeda._stage.addEventListener(Browser$1.Click,function(T){p("mouse",T)}),document.addEventListener("keyup",function(T){p("keyboard",T)});var v,h=function(){r._mugeda._buildAPINet(a),r._buildBindAnimation();var T=new ReadyEvent("imageready");T._registerCallback(function(){requestAnimationFrame$1(function(){setupTimer.bind(r)(function(){var b=document.createElement("div");b.innerHTML=f,t.appendChild(b.children[0]),location.href.indexOf("rateDom")>-1&&(t.appendChild(b.children[0]),v=window.rateDom=document.getElementById("rate")),n._children[0]._adaptStage(),traversal(n,function(M){M._displayObject&&M.getNode()});var C=new ReadyEvent("domready");C._registerCallback(function(){if(window.addEventListener("resize",function(){a._dispatchEvent(new MuEvents("resize"))}),_)timeLoop.bind(r)(A);else{var M=new ReadyEvent("renderready");M._registerCallback(function(){timeLoop.bind(r)(A)}),a._dispatchEvent(M),M._chkOk()}var E=window.earliestCustomEvent,O=window.cacelEarliestEvent,S=window.earliestEventhandled;!S&&E&&(console.debug("触发早期自定义事件"),window.earliestEventhandled=!0,document.dispatchEvent(new CustomEvent("mugeda_custom",{detail:{customEventName:E[E.length-1]}}))),O&&O()}),a._dispatchEvent(C),C._chkOk()})})}),a._dispatchEvent(T),T._chkOk()},g=new LoadProgressEvent("loadprogress");setTimeout(function(){Browser$1.makeTest();var T=r._renderList._children[0],b=T._getStageRotate(),C=T._getStageSize();if(b%180==0)var M=0,E=0,O=C.width,S=C.height;else M=.5*(C.height-C.width),E=.5*(C.width-C.height),S=C.width,O=C.height;var L="top:"+M+"px;left:"+E+"px;width:"+O+"px;height:"+S+"px;"+Browser$1.prefix.css+"transform:rotate("+b+"deg);";r._loadingPage.init(t,[L,E,M,O,S,b]),_?(h(),a.children[0].stop()):w()});var w=function(){r._preLoader._buildBitmapLoadProcess(o,a.children[0]),r._preLoader._load(a.children[0]._getCurrentFrame());var T=r._loadingPage.type||r._loadingPage._type;r._preLoader._updateProcess(r._resourceLoader,function(){var b=new ReadyEvent("scriptready");a._dispatchEvent(b),b._chkOk()},function(){},s,l,r._loadingPage,_,T=="default"?1e3:2e3,function(b,C){r._loadingPage.update(b,C,{isTotal:!0}),g._total=C,g._loaded=b,g.totalLoadCount=C,g.loadedCount=b,g.loadedRatio=b/C,a._dispatchEvent(g)},h)},y=!0,x=null,m=0,A=function(){window.stopLoop||timeLoop.bind(r)(function(T,b){var C=Math.min(T/r.frameTime,1);y&&(r._loadingPage.remove(),g._loadedOver=!0,a._dispatchEvent(g),y=!1,_&&setTimeout(function(){w()},0),C=0),r._paging&&(C=0),a._deltaFrame=C,a._totolFrame+=C,Math.floor(b/1e3)==x?m++:(v&&(v.innerHTML=m.toString()),m=0,x=Math.floor(b/1e3)),r._addChildList.forEach(function(S){renderManager._insertDisplayObject.call(r,S)}),r._addChildList=[];var M=n._children[0]._children[0];r._renderGlobalObjects();var E=[];traversalMovieClipRenderObject.call(r,M,C,E),r._loopBindAnimation(),E.forEach(function(S){S._dispatchEvent(S.enterFrameEvent)}),r._renderChangedObject();var O=r._removeList;O.forEach(function(L){var L=L._getRenderObject(r);L._parent._removeChild(L);var D=L.getNode();D&&D.parentNode.removeChild(D)}),r._removeList=[],A()})};bindEvent.bind(r)(a)},proto$j._buildBindAnimation=function(){var e=this;for(var t in e._toBeControlledObjectPendingHash)if(e._toBeControlledObjectPendingHash.hasOwnProperty(t)){var r=e._toBeControlledObjectPendingHash[t];if(r.binds)var a=r.movieClip,n=r.binds;else var a=r,o=a._aniData||{},n=o.binds||{};var s=e._mugeda;for(var l in n)if(n.hasOwnProperty(l)){var _=n[l],c=_.master,d=c=="-1",u=e.getReferenceElement(c),f=u&&["audio","video"].includes(u._type)&&_.trigger=="progress"&&!u.updateHooked;if(d){u=s._scene._movieClip;var p=0;u.addEventListener("beforeenterframe",function(){p!=u._aimFrameDec&&(e._toBeControlledObjectHash.push({master:u,slave:a,property:"progress",stageIsMaster:!0}),p=u._aimFrameDec)})}if(u){if(f){var v=(function(g,w,y){return function(){w._getRealVisible()&&g._dispatchEvent(g._changedEvent)}})(u,a);u._type==="video"?u._addEventListener("videoat",v):u._audioObject._audio.addEventListener("timeupdate",v);var h=(function(g,w,y){return function(){var x=function(){w._getRealVisible()&&g._dispatchEvent(g._changedEvent)};u._type==="video"?u._removeEventListener("timeupdate",v):g._audioObject._audio.removeEventListener("timeupdate",v),s._scene.addEventListener("enterframe",x),x()}})(u,a);u._type==="video"?u.addEventListener("videostart",h):u._audioObject._audio.addEventListener("playing",h)}!d&&u&&u._addEventListener("changed",(function(g,w,y){return function(){(g._dragCaptured||w._type=="audio"||w._type=="video"||y!="progress")&&e._toBeControlledObjectHash.push({master:g,slave:w,property:y})}})(u,a,l))}}}},proto$j._loopBindAnimation=function(){var e=this,t=function(k,V,re){var H=V.concat([]);H.sort(function(oe,se){return oe.input<se.input?-1:oe.input==se.input?0:1});for(var ee=void 0,ae=0;ae<H.length-1;ae++){var Q=H[ae],te=H[ae+1];if(Q.input>te.input){var ie=Q;Q=te,te=ie}if(Q.input<=k&&k<=te.input){ee=Q.output+(te.output-Q.output)*(k-Q.input)/(te.input-Q.input);break}}return H.length&&ae==H.length&&re&&(H[0].input>k?k=H[0].input:H[H.length-1].input<k&&(k=H[H.length-1].input)),V.length==0&&(ee=k),ee},r=function(k,V,re){if(!k._displayObject._dragCaptured)switch(V){case"left":case"top":case"width":case"height":case"alpha":case"rotate":case"rotateX":case"rotateY":case"text":case"pers":k[V]=re;break}},a={id:-1},n=function(k,V){if(k.id==V)return k;if(k.children!=null){for(var re=null,H=0;re==null&&H<k.children.length;H++)re=n(k.children[H],V);return re}return null},o=function(k){var V=k.master._id,re=k.slave._id,H=n(a,V);H||(H={id:V,parent:a},a.children=a.children||[],a.children.push(H));var ee={id:re,parent:H},ae=!0;if(H)for(var Q={},te=ee;te.id!=-1;)if(!Q[te.id])Q[te.id]=1,te=te.parent;else{ae=!1;break}if(ae){H.children=H.children||[];for(var ie=0;ie<H.children.length&&H.children[ie].id!=re;ie++);ie==H.children.length&&H.children.push(ee)}return ae},s,l=[];for(e._toBeControlledObjectHash.forEach(function(k){l.push(k.master._id)});s=e._toBeControlledObjectHash.shift();){if(s.stageIsMaster){var w=s.master,y=s.slave,x=s.property,_=w._currentScene,c=y._audioObject._audio,E=y._aniData.binds||{},d=E.progress.progress,u=_._startFrame;_._numFrames;var f=u+parseInt(d.start),p=u+parseInt(d.end),v=w._aimFrameDec;if(c.readyState&&d.start&&d.end&&v){if(v>=f&&v<=p){var h=(v-(f-u))/(p-f);h.toFixed(2),h>=0&&h<=100&&c.duration*h<c.duration&&(c.currentTime=c.duration*h,c.play())}else(v<p||v>f)&&(c.paused||c.pause());c.paused&&(c.pausedPosition=c.currentTime),y._dispatchEvent(y._changedEvent)}continue}var g=s.property=="progress"&&s.master._dragCaptured||o(s);if(g){var w=s.master,y=s.slave,x=s.property,m=e._mugeda._displayObjectHash[w._id],A=e._mugeda._displayObjectHash[y._id];if(x=="animation"){for(var T=!0,b=0;b<l.length;b++){var C=e._mugeda._displayObjectHash[l[b]];C._displayObject._visible&&(T=!1)}if(T){y._inBindAnimationMode&&(y.play(),y._inBindAnimationMode=!1);continue}}else if(!m._displayObject._visible&&y._id==1){y.play();continue}var M=y._aniData||{},E=M.binds||{},O=E[x]||{};if(x=="animation"&&y._parent===y._getStage()){var S=y._currentScene,L=S._aniData.binds||{},D=L.animation||{},$=D.master||"",R=e.getReferenceElement($)||"";if(R===s.master)O=D;else continue}var I=O.trigger;if(I=="progress"&&w._type=="audio"){var c=w._audioObject._audio,P=100*c.currentTime/c.duration;Math.abs(P-100)<1e-5&&(P=100)}else if(I=="progress"&&w._type=="video"){var F=e._getRenderObjectByDisplayId(w._id),N=F._currentVideoDom;if(N){var P=100*N.currentTime/N.duration;Math.abs(P-100)<1e-5&&(P=100)}else P=0}else P=m[I];x!="text"&&(P=parseFloat(P),isNaN(P)&&(P=0)),I=="rotate"||I=="rotateX"||I=="rotateY"?P=P*180/Math.PI:I=="alpha"&&(P=P*100);var j=function(k,V){return V=="rotate"||V=="rotateX"||V=="rotateY"?k=k*Math.PI/180:V=="alpha"&&(k=k*.01),Number(Number(k).toFixed(3))};switch(I){case"left":case"top":case"width":case"height":case"alpha":case"rotate":case"rotateX":case"rotateY":case"pers":case"text":case"progress":if(O.map=="key"){var U=O.keys,J=t(P,U,A._slaveActivated);J!==void 0&&(J=j(J,x),r(A,x,J),A._slaveActivated=!0)}else if(O.map=="equation")try{var B=O.equation,W=new RegExp(O.variable,"g"),G="V"+Math.floor(1e4*Math.random())+"V";B=B.replace(W,G),W=new RegExp("参考属性","g"),B=B.replace(W,G),B=e._replaceMacros(B);var q=new Function(G,"return "+B+";"),X=new RegExp("^[0-9]+$");if(X.test(P))var Y=q(Number(P));else var Y=q(P);Y!==""&&isFinite(Y)?(Y=j(Y,x),r(A,x,Y),A._slaveActivated=!0):typeof Y=="string"&&(r(A,x,Y),A._slaveActivated=!0)}catch{}else if(O.map=="animation"){var K=O.animation,h=100*(P-K.start)/(K.end-K.start);if(K.type=="switch"){var T=h>=0&&h<=100;y._inBindAnimationMode=!0,y[T?"play":"stop"]()}else if(K.type=="sync"){h=Math.max(0,Math.min(100,h)),y._updateScene();var _=y._currentScene,ne=Math.min(_._numFrames*h*.01,_._numFrames);y.toggleSmoothMode(!0),_._numFrames==ne&&(ne-=.01);var Z=e._listPendingActions||[];Z.length||(y._inBindAnimationMode=!0,y.gotoAndStop(_._startFrame+ne))}}else if(O.map=="progress"){var K=O.progress,h=(P-K.start)/(K.end-K.start);if(y._type==="video"){var F=e._getRenderObjectByDisplayId(y._id),N=F._currentVideoDom;N&&(N.currentTime=N.duration?N.duration*h:0,y._dispatchEvent(y._changedEvent))}else{var c=y._audioObject._audio;c.readyState&&(c.currentTime=c.duration*h,c.paused&&(c.pausedPosition=c.currentTime),y._dispatchEvent(y._changedEvent))}}break}}}};var traversalMovieClipRenderObject=function(e,t,r){r=r||[];var a=this,n=e._displayObject;if(!n._stopApplyAction){if(n._getRealVisible()===!1)return;r.push(n),e._currentScene;var o=n._currentScene,s=n._currentFrameDecimal;a._thisRoundRenderObjectIdList={};var l=n._addFrameDec(t);l&&n._aimFrameDec!=null&&o!==n._scenes[n._getSceneIndexByFrameNum(n._aimFrameDec)]&&(o==null||(n._loop?n.gotoAndPlay(o._startFrame,null,2):n.gotoAndStop(s,null,2))),n._calculateAimFrame();var _=function(){var d=n._updateTransformByCurrentFrame(!0),u=function(){d&&e._executeAppearAction()};n._updateScene();var f=e._switchToCurrentScene(function(){a._delayRenderList={},a._paging=!1,u()});if(f!=null){a._paging=!0,a._delayRenderList={};var p=a._thisRoundRenderObjectIdList,v=Object.keys(p);v.forEach(function(h){var g=p[h];if(g._visible==!1){var w=g._getRenderObject();w._parentMovieClipRenderObject._displayObject._id==1&&(a._delayRenderList[h]=g)}})}else u();n._pausedBeforeRender=n._paused};if(n._stopApplyAction)_();else{var c=n._scenes[n._getSceneIndexByFrameNum(n._aimFrameDec)];o&&c!==o?(n._stopApplyAction=!0,e._switchToCurrentSceneLeave(o,c,function(){n._stopApplyAction=!1,_()})):_()}}e._movieClipRenderObjectList.forEach(function(d){traversalMovieClipRenderObject.call(a,d,t,r)})},_dispatchEventEvent=function(e){if(!e.redirected&&InputEvent.CaptureDisplayObject){var t=e.type,r=new InputEvent(t,e);r._eventPhase=e.eventPhase,r._target=InputEvent.CaptureDisplayObject,r._stage=InputEvent.CaptureDisplayObject._getStage(),InputEvent.CaptureDisplayObject._dispatchEvent(r),(e.type==="touchend"||e.type==="mouseup")&&(e.preventDefault(),r._releaseCapture())}},bindEvent=function(e){var t=this,r=t._stageDom,a=(e._mrmcp||{}).render_mode;if(r.addEventListener("mousedown",_dispatchEventEvent.bind(t),!0),r.addEventListener("mousemove",_dispatchEventEvent.bind(t),!0),r.addEventListener("mouseup",_dispatchEventEvent.bind(t),!0),a!="embedded"){Browser$1.os.android&&Browser$1._isWeChat()&&r.addEventListener("click",function(o){o.target.tagName==="IMG"&&o.preventDefault()});var n={};r.addEventListener("touchstart",function(o){n.x=o.changedTouches[0].screenX,n.y=o.changedTouches[0].screenY;var s=InputEvent._getRealPos(e,o);n.inputX=s._x,n.inputY=s._y},!0),r.addEventListener("touchmove",function(o){var s=!1;if(t._scrollableObjectList){var l=o.target,_=!1;if(Browser$1.os.ios&&l&&l.nodeName.toLowerCase()=="video"){var c=o.changedTouches[0].screenX,d=o.changedTouches[0].screenY,u=c-n.x,f=d-n.y,p=Math.abs(u)>Math.abs(f),v=l._relativeRenderObject;if(v){var h=v._displayObject,g=InputEvent._getRealPos(e,o);p=Math.abs(g._x-n.inputX)>Math.abs(g._y-n.inputY);var w=new Point(h._getRawWidth(),h._getRawHeight()-50),y=h._getTotalMatrix()._transform(w);_=p&&g._y>y._y}else{var x=l.getBoundingClientRect();document.body.clientWidth/320,_=p&&d>x.top+x.height-48/1}}for(;l&&l!=r;)if(t._scrollableObjectList.indexOf(l)>=0){s=!0;break}else if(l._relateRenderObject){var m=l._relateRenderObject,h=m._displayObject,A=h._type;if(_||A=="Text"&&scrollOnTextOrSectionOverflow.includes(h._textOverflow)||!Browser$1.os.ios&&A=="Sprite"&&h._scroll&&h._scroll!="no"){s=!0;break}l=l.parentNode}else{var T=window.getComputedStyle(l),b=T["overflow-y"];if((b=="auto"||b=="scroll")&&l.clientHeight<l.scrollHeight){l.scrolled=!0,s=!0;break}else l=l.parentNode}}var C=window.Mugeda||{},M=C.options||{},E=M.supportFrameTouch;(E||!s&&top==window)&&o.preventDefault()},!0),r.addEventListener("touchend",function(o){for(var s=o.target;s&&s!=r;)if(s.scrolled){delete s.scrolled,o.stopPropagation();break}else s=s.parentNode},!0)}},findCss3AccelerateObject=function(e){var t=this;window.DEBUG_CS3_MODE||traversal(e,function(r){var a=r._displayObject;a!=null&&(a instanceof Stage&&(r._c3Accelerate=!1),a instanceof MovieClip&&(r._c3AccelerateEnabled=!1),scrollOnTextOrSectionOverflow.includes(a._textOverflow)&&(r._parentSceneRenderObject._c3Accelerate=!1),a instanceof MovieClip&&r._parentMovieClipRenderObject&&(r._parentSceneRenderObject._c3Accelerate=!1,r._parentSceneRenderObject._children.forEach(function(n){n._c3Accelerate=!1}),a._parent._haveAnimation&&(r._c3Accelerate=!1,r._children.forEach(function(n){n._c3Accelerate=!1,n._children.forEach(function(o){o._c3Accelerate=!1})}))),a._behaviors&&r._parentSceneRenderObject&&(r._parentSceneRenderObject._c3Accelerate=!1,r._parentSceneRenderObject._children.forEach(function(n){n._c3Accelerate=!1})),t.frameRate==null&&a instanceof Stage&&(t.frameRate=a._frameRate,t.frameTime=1e3/t.frameRate))})},traversal=function(e,t){var r={stopFlag:!1};if(t(e,r),!r.stopFlag)for(var a=e._children,n=a.length,o=0;o<n;o++){var s=a[o];traversal(s,t)}},traversalForSetup=function(e,t){for(var r=this,a=e._children,n=a.length,o="",s=0;s<n;s++)if(!(t!=null&&t!==s)){var l=a[s],_=l._displayObject;scrollOnTextOrSectionOverflow.includes(_._textOverflow)&&r._forceCheckHash.push(_),_.type==="Sprite"&&(_._aniData.param.scroll==="ver"||_._aniData.param.scroll==="hor")&&(_._aniData.param.scroll_setting=="scroll"||_._aniData.param.scroll_setting=="scrollNoBar")&&r._forceCheckHash.push(_);var c=_._transform;l._init();var d=l._canvasRender;if(d)d._setDisplayInitState(),o+=d._html,traversalForSetup.call(r,a[s]);else if(_._maskByList==null){l._setDisplayInitState(),l._setStaticPosition(c._matrix);var u=l._getHTML(),f=traversalForSetup.call(r,a[s]);u=u.replace("{{childNode}}",f),o+=u}_._addEventListener("changed",(function(){return function(){r._displayObjectChangedHandler(this)}})()),_._addEventListener("remove",function(p){r._removeList.push(p._displayObject)}),_._addEventListener("addchild",(function(){return function(p){r._addChildList.push(p._displayObject)}})()),_._dispatchEvent(_._changedEvent)}return o};proto$j._displayObjectChangedHandler=function(e){var t=this,r=e._id,a=e._maskToList;if(a){var n=e._getRenderObject()._canvasRender;if(!n)return;n._dirty=!0,a.forEach(function(s){s._dispatchEvent(s._changedEvent)})}else{var o=t._toBeRenderedObjectHash;t._thisRoundRenderObjectIdList[r]=e,o[r]=e}},proto$j._renderGlobalObjects=function(){var e=this,t=e._renderContext;e._renderContext="global";for(var r in e._globalRenderedObjectList){var a=e._getRenderObjectByDisplayId(r);a._displayObject&&a._displayObject.update()}e._renderContext=t},proto$j._renderChangedObject=function(){var e=this,t=e._toBeRenderedObjectHash;e._forceCheckHash.forEach(function(o){if(o instanceof DisplayObject){var s=o._id;if(t[s])return;var l=o._getRenderObject();l.render()}else o instanceof RenderObject&&o.render()});for(var r={},a=3;a--;){var n=Object.keys(t);if(Object.keys(e._delayRenderList).length&&(n=n.filter(function(o){return!e._delayRenderList[o]})),n.length===0)break;n.forEach(function(o){var s=e._getRenderObjectByDisplayId(o),l=s._canvasRender;l?r[l._id]||(r[l._id]=l,l._redraw()):(s.getNode(),s.render())}),n.forEach(function(o){delete t[o]})}},proto$j._getRenderObjectByDisplayId=function(e){return this._displayHash[e]};var buildRenderObjectList=function(e,t,r,a){var n=this,o=RenderObjectUtils.createInstance(t);if(e._addChild(o,t,null,a),t._resourceList&&t._resourceList.length&&r.push(o),t instanceof DisplayObjectContainer){var s=t.children;if(o instanceof renderObjectMovieClip&&s.length==0){var l=o._scenes[0]=new RenderObjectScene,_=new DisplayObject;_._type="scene",_._getRenderObject=function(){return l},o._addChild(l,_),l._sceneInfo=t._scenes[0]}s.forEach(function(c){if(!c._dataDisplayObject)if(c._presetAnimation&&c._presetAnimation._list.forEach(function(g){if(g._presetMovieClip){var w=new RenderObject(null);g._presetRootRenderObject=buildRenderObjectList.call(n,w,g._presetMovieClip,r),traversal(g._presetRootRenderObject._children[0],function(y){CanvasRender._initRenderObjectCanvas(y)})}}),o instanceof renderObjectMovieClip){var d=t._getObjectSceneIndex(c),u=o._scenes,f=u[d];if(f==null){for(var p=t._scenes.length,v=0;v<p;v++){f=u[v]=new RenderObjectScene;var h=new DisplayObject;h._type="scene",h._getRenderObject=function(){return f},o._addChild(f,h),f._sceneInfo=t._scenes[v]}f=u[d]}buildRenderObjectList.call(n,f,c,r)}else buildRenderObjectList.call(n,o,c,r)})}return o};proto$j._registerMediaDom=function(e,t,r){this._mediaHash[e]=t,Mugeda.addAudioCache(e,t,r);var a={};this._renderList&&this._renderList._children[0]&&this._renderList._children[0]._displayObject&&(a=this._renderList._children[0]._displayObject._aniData.pageInfo||{}),a.audioIconAim==="all"&&this._audioIndicator._getState()==="off"&&(t.muted=!0)},proto$j._unregisterMediaDom=function(e,t,r){delete this._mediaHash[e],Mugeda.removeAudioCache(e,t,r)},proto$j._mute=function(e){for(var t in this._mediaHash)this._mediaHash.hasOwnProperty(t)&&(this._mediaHash[t].muted=e!==!1);var r=Browser$1._globalObject.backgroundMusic;r&&(r.muted=e!==!1)},mod.namespace("Render.RenderManager",renderManager);var PresetAnimationCustom=function(e,t){var r=this;if(r._data=e[PresetType.Param.DATA],r._maskData=r._data[PresetType.WAY.MASK],r._maskData){var a=t._getRoot(),n=MugineRequire("Utils/DataConverter");if(!a._resource)return;(r._maskData.syms||[]).forEach(function(h){var g=h.id,w=h.type;if(w!=3&&w!=2)var y=n.createMovieClipObject(h,a._resource);y&&(a._resource.symbols[g]=y)});var o=r._maskData.layers,s=o[0].units[0];s.keyframes;var l=s.frameCount;r._maskCount=l;var _=JSON.parse(JSON.stringify(t._aniData));_.param.preset=[];var c=new Stage(t);c._isVirtual=!0,c._scaleX=c._scaleY=1,c._renderManager=new renderManager,o[0].maskMode=0;var d="Preset_"+_.guid;a._resource.symbols[d]=n.createMovieClipObject(r._maskData,a._resource);var u=JSON.parse(JSON.stringify(_.param));u.symbolId=d,u.offsetX=r._maskData.offX,u.offsetY=r._maskData.offY,u.rawWidth=r._maskData.refW,u.rawHeight=r._maskData.refH;var f={cw:r._maskData.cw,ch:r._maskData.ch,layers:[{maskMode:1,type:"layer",units:[{frameStart:0,frameCount:1,objects:[{type:2021,guid:d,param:u}]}]},{maskMode:2,type:"layer",units:[{frameStart:0,frameCount:1,objects:[_]}]}]},p=n.createMovieClipObject(f,a._resource),v=new p(c);r._presetMovieClip=v}PresetAnimationCustom.__super__.constructor.apply(r,arguments)};mod.extend(PresetAnimationCustom,PresetAnimation);var proto$i=PresetAnimationCustom.prototype;proto$i._applyAnimation=function(e,t){var r=this;if(r._maskData){var a=r._presetRootRenderObject,n=t._displayObject,o=n._getRenderObject(),s=a._children[0]._children[0]._canvasRender,l=r._presetMovieClip;if(!s._html){s._setDisplayInitState();var _=document.createElement("div");if(_.innerHTML=s._html,o._canvasRender){var u=document.createElement("div");document.body.appendChild(u),u.appendChild(_.firstChild);var d=s._getNode();r.canvasNode=d,document.body.removeChild(u)}else{var c=o.getNode();c.parentNode.insertBefore(_.firstChild,c);var d=s._getNode();r.canvasNode=d}r._offsetMatrix=l._offsetMatrix,n._parent&&n._parent._offsetMatrix?l._offsetMatrix=n._parent._offsetMatrix._clone():l._offsetMatrix=new r._offsetMatrix.constructor,r._canvasRender=s}if(r._canvasRender){var f=e/r._duration,p=function(h){if(h._type==="MovieClip"){var g=h._frames.length,w=(g-1e-7)*f;h.gotoAndPlay(w),h._updateTransformByCurrentFrame(!0)}h.children&&h.children.forEach(p)},v=l.children[1];p(v),l.children[0]._transform=n._transform,n._progressRatio!==void 0&&(l.children[0]._progressRatio=n._progressRatio),n._graphics!==void 0&&(l.children[0]._graphics=n._graphics),r._canvasRender._redraw(!1),n._dispatchEvent(n._changedEvent),r._type.indexOf("out")!==-1&&(o.getNode().style.visibility="hidden")}}};var easeLine=Ease._parseEase({}),PresetAnimationKeyframe=function(e,t){var r=this;PresetAnimationKeyframe.__super__.constructor.apply(r,arguments);var a=r._duration,n=t._getRoot(),o=a*n._frameRate,s=r._data.count,l=Math.max(1,Math.round(o/s)),_=t._aniData,c=_.param,d=c.width,u=c.height,f=function(m,A,T){var b=m[A];return b===void 0?T:b},p=r._data,v=function(m,A,T){return Math.max(A,Math.min(m,T))},h=void 0,g=void 0,w={keyframes:p.items.map(function(m,A){A===0&&(h=d*f(m,"cx",.5*1e6)/1e6,g=u*f(m,"cy",.5*1e6)/1e6);var T={alpha:v(c.alpha+f(m,"a",0),0,1),width:d+f(m,"w",0),height:u+f(m,"h",0),rotate:c.rotate+f(m,"rz",0),rotateX:(c.rotateX||0)+f(m,"rx",0),rotateY:(c.rotateY||0)+f(m,"ry",0),rotateCenterX:d*f(m,"cx",.5*1e6)/1e6,rotateCenterY:u*f(m,"cy",.5*1e6)/1e6,left:f(m,"x",0)+c.left,top:f(m,"y",0)+c.top,dock:c.dock,pers:v(f(c,"pers",0)+f(m,"pers",25),0,1/0)};if(m.filter){var b=[],C=c.filters||[],M={};C.forEach(function(L){var D=L.name;M[D]=L.config||ColorTransform._getDefaultFilterVal(D)});var E=Object.keys(M),O={};m.filter.forEach(function(L){var D=L.name;O[D]=L.config,E.indexOf(D)===-1&&E.push(D)}),E.forEach(function(L){var D=M[L]||ColorTransform._getUndefinedVal(L),$=O[L]||ColorTransform._getUndefinedVal(L);if(L==="drop-shadow"){var R=new Color(D.color),I=new Color($.color);b.push({name:L,config:{h:D.h+$.h,v:D.v+$.v,itensity:D.itensity+$.itensity,color:new Color(v(R._r+I._r,0,255),v(R._g+I._g,0,255),v(R._b+I._b,0,255),v(R._a+I._a,0,1))._getCssText()}})}else L==="hue-rotate"?b.push({name:L,config:{rotation:D.rotation+$.rotation}}):b.push({name:L,config:{itensity:D.itensity+$.itensity}})}),T.filters=b}var S=JSON.parse(JSON.stringify(c));return Object.keys(T).forEach(function(L){S[L]=T[L]}),{id:m.p*l,param:S,tween:m.tw,ease:m.ea}}),frameStart:0,frameCount:s*l};if(p.pathLeft!==void 0&&(w.pathMode=1,w.pathLeft=f(p,"pathLeft",0)*1+h+c.left,w.pathTop=f(p,"pathTop",0)*1+g+c.top,w.path=p.items.map(function(m){var A=m.phs;return{backwardX:f(A,"bx",0)*1,backwardY:f(A,"by",0)*1,forwardX:f(A,"fx",0)*1,forwardY:f(A,"fy",0)*1,nodeX:f(A,"x",0)*1,nodeY:f(A,"y",0)*1}})),this.constructor===PresetAnimationKeyframe){var y=new KeyframeInfo,x=MugineRequire("Utils/DataConverter");x.parseKeyframes(t,0,w,y),this._frameInfo=y}else return w};mod.extend(PresetAnimationKeyframe,PresetAnimationCustom);var proto$h=PresetAnimationKeyframe.prototype;proto$h._applyAnimation=function(e,t){var r=this;if(this.constructor===PresetAnimationKeyframe){var a=t._staticTransform,n=t._displayObject;a._colorTransform._alphaMultiplier;var o=r._frameInfo,s=e/r._duration,l=(o._max+1)*s,_=Math.floor(l),c=o._keyframes[_],d=o._keyframes[_+1];if(c&&d){var u=l-_,f=new c.constructor;n._bindTrans(f),c.constructor._tween(f,c,d,easeLine,u),f._matrix._calMatrixFormRaw(),n._setTransform(f)}else c?n._setTransform(c):n._setTransform(o._keyframes[o._max])}PresetAnimationKeyframe.__super__._applyAnimation.apply(r,arguments)};var presetAnimationCurveShape=function(e,t){var r=this,a=presetAnimationCurveShape.__super__.constructor.apply(r,arguments),n=r._data,o=a.keyframes,s=t._aniData,l=s.param,_=n.items,c=function(f,p,v){return Math.max(p,Math.min(f,v))};if(_.forEach(function(f,p){var v=f.fillInfo;if(v){var h=o[p].param.fillInfo;Object.keys(v).forEach(function(x){var m=v[x];x==="fillColors"?(m.forEach(function(A,T){h[x][T]===void 0&&(h[x][T]=JSON.parse(JSON.stringify(h[x][h[x].length-1])))}),m.forEach(function(A,T){h[x][T]={p:c(h[x][T].p+A.p,0,255),r:c(h[x][T].r+A.r,0,255),g:c(h[x][T].g+A.g,0,255),b:c(h[x][T].b+A.b,0,255),a:c(h[x][T].a+A.a,0,1)}})):x==="fillStartPos"||x==="fillEndPos"?(h[x]===void 0&&(h[x]={x:0,y:0}),h[x]={x:h[x].x+m.x,y:h[x].y+m.y}):x==="fillStyle"&&(h.fillStyle=m)})}var g=f.strokeColor;if(g){var w=Color.parse(l.strokeColor),y=Color.parse(g);o[p].param.strokeColor=new Color(c(w._r+y._r,0,255),c(w._g+y._g,0,255),c(w._b+y._b,0,255),c(w._a+y._a,0,1))._getCssText()}["lineWidth"].forEach(function(x){var m=f[x],A=o[p].param[x];m!==void 0&&(m+=A,m<1&&(m=1),o[p].param[x]=m)})}),this.constructor===presetAnimationCurveShape){var d=new KeyframeInfo,u=MugineRequire("Utils/DataConverter");u.parseCurveShapeKeyframes(t,0,a,d),this._frameInfo=d}else return a};mod.extend(presetAnimationCurveShape,PresetAnimationKeyframe);var proto$g=presetAnimationCurveShape.prototype;proto$g._applyAnimation=function(e,t){var r=this;if(this.constructor===presetAnimationCurveShape){var a=t._displayObject,n=r._frameInfo,o=e/r._duration,s=(n._max+1)*o,l=n.getNearFrameInfo(s),_=l[0],c=l[1],d=l[2];if(d===void 0)return;var u=t._staticTransform.constructor,f=new u;a._bindTrans(f);var p=n._keyframes[_],v=n._keyframes[c];u._tween(f,p,v,n._eases[_],d),a._updateDisplayObjectFromTransform(f),f._matrix._calMatrixFormRaw(),a._setTransform(f)}presetAnimationCurveShape.__super__.constructor.__super__._applyAnimation.apply(r,arguments)};var presetAnimationFade=function(e){presetAnimationFade.__super__.constructor.apply(this,arguments)};mod.extend(presetAnimationFade,PresetAnimation);var proto$f=presetAnimationFade.prototype;proto$f._applyAnimation=function(e,t){var r=this,a=t._staticTransform,n=t._displayObject,o=a._colorTransform._alphaMultiplier,s=e/r._duration,l=a._clone();l._colorTransform._alphaMultiplier=o*s,n._setTransform(l)};var PresetAnimationFly=function(e){var t=this;t._from=e[PresetType.Param.FROM]||e[PresetType.Param.FROM2]||e[PresetType.Param.TO]||e[PresetType.Param.TO2],t._uniform=e[PresetType.Param.UNIFORM]*1||0,t._clockwise=e[PresetType.Param.CLOCKWISE]*1||0,t._raise=e[PresetType.Param.RAISE]||PresetType.Param.RAISE_UP,t._deg=e[PresetType.Param.DEG]==null?360:e[PresetType.Param.DEG],PresetAnimationFly.__super__.constructor.apply(t,arguments)};mod.extend(PresetAnimationFly,PresetAnimation);var proto$e=PresetAnimationFly.prototype;proto$e._applyAnimation=function(e,t){var r=this,a=t._staticTransform,n=t._staticBoundaryRect,o=a._colorTransform._alphaMultiplier,s=o,l=e/r._duration,_=a._clone(),c=_._matrix,d=0,u=0,f=Browser$1._globalObject.globalScalar||1,p=(n._getLeft()+n._getWidth()/2)*f,v=(n._getTop()+n._getHeight()/2)*f;if(r._type==PresetType.Animation.FADE_IN||r._type==PresetType.Animation.FADE_OUT)return r._type==PresetType.Animation.FADE_OUT&&(l=1-l),s=r._getFrameAnimation(l,[{rate:0,param:0},{rate:1,param:1}]),_._colorTransform._alphaMultiplier=o*s,_;if(r._type==PresetType.Animation.RAISED_IN)return S=r._getFrameAnimation(l,[{rate:0,param:{y:(r._raise==PresetType.Param.RAISE_UP?1:-1)*n._getHeight()*.5,alpha:0}},{rate:1,param:{y:0,alpha:1}}]),c._translate(0,S.y),_._colorTransform._alphaMultiplier=o*S.alpha,_;if(r._type==PresetType.Animation.RAISED_OUT)return S=r._getFrameAnimation(l,[{rate:0,param:{y:0,alpha:1}},{rate:1,param:{y:(r._raise==PresetType.Param.RAISE_UP?-1:1)*n._getHeight()*.5,alpha:0}}]),c._translate(0,S.y),_._colorTransform._alphaMultiplier=o*S.alpha,_;if(r._type==PresetType.Animation.FLIP_IN||r._type==PresetType.Animation.FLIP_OUT){if(r._type==PresetType.Animation.FLIP_IN){var h=r._getFrameAnimation(l,[{rate:0,param:Math.PI/2},{rate:.4,param:-.1111111111111111*Math.PI},{rate:.6,param:.05555555555555555*Math.PI},{rate:.8,param:-.027777777777777776*Math.PI},{rate:1,param:0}],EasingInFun)*(r._clockwise?1:-1);s=r._getFrameAnimation(l,[{rate:0,param:0},{rate:.6,param:1},{rate:1,param:1}],EasingInFun)}else h=r._getFrameAnimation(l,[{rate:0,param:0},{rate:.3,param:-15/180*Math.PI},{rate:1,param:Math.PI/2}])*(r._clockwise?-1:1),s=r._getFrameAnimation(l,[{rate:0,param:1},{rate:.3,param:1},{rate:1,param:0}],EasingInFun);var g=c._is3d;return c._create3DMatrix(),c._translate3D(-p,-v),c._rawRotate3dY=h,c._rotateY3D(h),l!=1&&!g&&(c._perspective(Math.max(t._getBoundWidth(),t._getBoundHeight()),50),c._pers=50),c._translate3D(p,v),_._colorTransform._alphaMultiplier=o*s,_}else if(r._type==PresetType.Animation.POP_IN||r._type==PresetType.Animation.POP_OUT||r._type==PresetType.Animation.CLOSER_IN||r._type==PresetType.Animation.FURTHER_OUT){if(r._type==PresetType.Animation.POP_IN){var w=r._getFrameAnimation(l,[{rate:0,param:.3},{rate:.2,param:1.1},{rate:.4,param:.9},{rate:.6,param:1.03},{rate:.8,param:.97},{rate:1,param:1}],BounceInFun);s=r._getFrameAnimation(l,[{rate:0,param:0},{rate:.6,param:1},{rate:1,param:1}],BounceInFun)}else r._type==PresetType.Animation.POP_OUT?(w=r._getFrameAnimation(l,[{rate:0,param:1},{rate:.2,param:.9},{rate:.5,param:1.1},{rate:.55,param:1.1},{rate:1,param:.3}]),s=r._getFrameAnimation(l,[{rate:0,param:1},{rate:.5,param:1},{rate:1,param:0}])):(r._type==PresetType.Animation.CLOSER_IN||r._type==PresetType.Animation.FURTHER_OUT)&&(r._type==PresetType.Animation.FURTHER_OUT&&(l=1-l),S=r._getFrameAnimation(l,[{rate:0,param:{scale:.3,alpha:0}},{rate:.5,param:{scale:1,alpha:1}},{rate:1,param:{scale:1,alpha:1}}]),w=S.scale,s=S.alpha);return c._translate(-p,-v),c._scale(w,w),c._translate(p,v),_._colorTransform._alphaMultiplier=o*s,_}else if(r._type==PresetType.Animation.SWIRL_IN||r._type==PresetType.Animation.SWIRL_OUT){r._type==PresetType.Animation.SWIRL_OUT&&(l=1-l),s=r._getFrameAnimation(l,[{rate:0,param:0},{rate:1,param:1}]);var y=n._getHeight(),x=n._getWidth(),m=n._getLeft(),A=n._getTop();return S=r._getFrameAnimation(l,[{rate:0,param:{originX:0,scale:0,rotate:Math.PI*2,transY:-y*f}},{rate:1,param:{originX:x*f,scale:1,rotate:0,transY:0}}]),c._translate(-(m*f+S.originX),-(A+y)*f),c._scale(S.scale,S.scale),c._rotate(r._clockwise?S.rotate:-S.rotate),c._translate(m*f+S.originX,(A+y)*f),c._translate(0,u),_._colorTransform._alphaMultiplier=o*s,_}else if(r._type==PresetType.Animation.FURTHER_IN||r._type==PresetType.Animation.CLOSER_OUT){if(r._type==PresetType.Animation.FURTHER_IN?S=r._getFrameAnimation(l,[{rate:0,param:{alpha:0,scale:2,filter:2}},{rate:1,param:{alpha:1,scale:1,filter:0}}]):S=r._getFrameAnimation(l,[{rate:0,param:{alpha:1,scale:1,filter:0}},{rate:1,param:{alpha:0,scale:2,filter:2}}]),c._translate(-p,-v),c._scale(S.scale,S.scale),c._translate(p,v),l!=1){var T=S.filter.toFixed(2);_._setAdditionCss(Browser$1.prefix.css+"filter: blur("+T+"px);")}else _._setAdditionCss(Browser$1.prefix.css+"filter: none;");return _._colorTransform._alphaMultiplier=o*S.alpha,_}else{if(r._type==PresetType.Animation.SHAKE)return x=n._getWidth(),S=r._getFrameAnimation(l,[{rate:0,param:{transX:0,rotate:0}},{rate:.15,param:{transX:-.25*x,rotate:-5}},{rate:.3,param:{transX:.2*x,rotate:3}},{rate:.45,param:{transX:-.15*x,rotate:-3}},{rate:.6,param:{transX:.1*x,rotate:2}},{rate:.75,param:{transX:-.05*x,rotate:-1}},{rate:1,param:{transX:0,rotate:0}}]),c._translate(-p,-v),c._rotate(S.rotate/180*Math.PI,S.rotate/180*Math.PI),c._translate(p,v),c._translate(S.transX,0),_;if(r._type==PresetType.Animation.SQUEEZE)return S=r._getFrameAnimation(l,[{rate:0,param:{scaleX:1,scaleY:1}},{rate:.3,param:{scaleX:1.25,scaleY:.75}},{rate:.4,param:{scaleX:.75,scaleY:1.25}},{rate:.5,param:{scaleX:1.15,scaleY:.85}},{rate:.65,param:{scaleX:.95,scaleY:1.05}},{rate:.75,param:{scaleX:1.05,scaleY:.95}},{rate:1,param:{scaleX:1,scaleY:1}}]),c._translate(-p,-v),c._scale(S.scaleX,S.scaleY),c._translate(p,v),_;if(r._type==PresetType.Animation.ROTATE)return h=r._getFrameAnimation(l,[{rate:0,param:0},{rate:1,param:r._deg/180*Math.PI}],r._uniform?function(D){return D}:EasingInOutFun),c._translate(-p,-v),c._rotate(r._clockwise!=0?h:-h),c._translate(p,v),_;if(r._type==PresetType.Animation.FLIP)return S=r._getFrameAnimation(l,[{rate:0,param:{rotate:-360,transZ:0,scale:1}},{rate:.4,param:{rotate:-190,transZ:150,scale:1},fun:EasingOutFun},{rate:.5,param:{rotate:-170,transZ:150,scale:1},fun:EasingOutFun},{rate:.8,param:{rotate:0,transZ:0,scale:1},fun:EasingInFun},{rate:1,param:{rotate:0,transZ:0,scale:1},fun:EasingInFun}]),c._translate(-p,-v),c._scale(S.scale,S.scale),c._translate(p,v),c._create3DMatrix(),c._translate3D(-p,-v),c._rawRotate3dY=r._clockwise?-S.rotate:S.rotate,c._rotateY3D(c._rawRotate3dY/180*Math.PI),l==1?(c._perspective(Math.max(t._getBoundWidth(),t._getBoundHeight()),0),c._pers=0):(c._perspective(Math.max(t._getBoundWidth(),t._getBoundHeight()),50),c._pers=50),c._translate3D(p,v,S.transZ),_;if(r._type==PresetType.Animation.SWING)return h=r._getFrameAnimation(l,[{rate:0,param:0},{rate:.2,param:15},{rate:.4,param:-10},{rate:.6,param:5},{rate:.8,param:-5},{rate:1,param:0}]),A=n._getTop(),c._translate(-p,-A),c._rotate(h/180*Math.PI),c._translate(p,A),_;if(r._type==PresetType.Animation.SLIDE_UP){var b=r._getFrameAnimation(l,[{rate:0,param:0},{rate:1,param:r._length?-r._length:-n._getHeight()}]);return c._translate(0,b),_}else{if(r._type==PresetType.Animation.QUIVER)return S=r._getFrameAnimation(l,[{rate:0,param:{s:1,r:0}},{rate:.1,param:{s:.9,r:-3}},{rate:.2,param:{s:.9,r:-3}},{rate:.3,param:{s:1.1,r:3}},{rate:.4,param:{s:1.1,r:-3}},{rate:.5,param:{s:1.1,r:3}},{rate:.6,param:{s:1.1,r:-3}},{rate:.7,param:{s:1.1,r:3}},{rate:.8,param:{s:1.1,r:-3}},{rate:.9,param:{s:1.1,r:3}},{rate:1,param:{s:1,r:0}}]),c._translate(-p,-v),c._scale(S.s,S.s),c._rotate(S.r/180*Math.PI),c._translate(p,v),_;if(r._type==PresetType.Animation.tilt)return S=r._getFrameAnimation(l,[{rate:0,param:0},{rate:.111,param:0},{rate:.222,param:-12.5},{rate:.333,param:6.25},{rate:.444,param:-3.125},{rate:.555,param:1.5625},{rate:.666,param:-.78125},{rate:.777,param:.390625},{rate:.888,param:-.1953125},{rate:1,param:0}]),c._translate(-p,-v),c._skew(S/180*Math.PI,S/180*Math.PI),c._translate(p,v),_}}var C=0,M=0,E=0,O=0;switch(r._from){case PresetType.Param.TOP:M=-(n._getBottom()+.1*t._stageBoundaryRect._getHeight()),O=1;break;case PresetType.Param.RIGHT:C=t._stageBoundaryRect._getWidth()-n._getLeft()+.1*t._stageBoundaryRect._getWidth(),E=-1;break;case PresetType.Param.BOTTOM:M=t._stageBoundaryRect._getHeight()-n._getTop()+.1*t._stageBoundaryRect._getHeight(),O=-1;break;case PresetType.Param.LEFT:default:C=-(n._getRight()+.1*t._stageBoundaryRect._getWidth()),E=1;break}if(r._type==PresetType.Animation.BOUNCE_IN){var S=r._getFrameAnimation(l,[{rate:0,param:{transX:C,transY:M,alpha:0}},{rate:.6,param:{transX:25*E,transY:25*O,alpha:1}},{rate:.9,param:{transX:-10*E,transY:-10*O,alpha:1}},{rate:1,param:{transX:0,transY:0,alpha:1}}],jumpEasingFun);c._translate(S.transX,S.transY),_._colorTransform._alphaMultiplier=o*S.alpha}else if(r._type==PresetType.Animation.MOVE)S=r._getFrameAnimation(l,[{rate:0,param:{x:0,y:0}},{rate:1,param:{x:-E*(r._length?r._length:n._getWidth()),y:-O*(r._length?r._length:n._getHeight())}}]),c._translate(S.x,S.y);else if(r._type==PresetType.Animation.BOUNCE_OUT)S=r._getFrameAnimation(l,[{rate:0,param:{transX:0,transY:0}},{rate:.2,param:{transX:-10*E,transY:-10*O}},{rate:.4,param:{transX:20*E,transY:20*O}},{rate:.45,param:{transX:20*E,transY:20*O}},{rate:1,param:{transX:C,transY:M}}]),s=r._getFrameAnimation(l,[{rate:0,param:1},{rate:.45,param:1},{rate:1,param:0}]),c._translate(S.transX,S.transY),_._colorTransform._alphaMultiplier=o*s;else if(r._type==PresetType.Animation.ROLL_IN)S=r._getFrameAnimation(l,[{rate:0,param:{transX:C,rotate:-120/180*Math.PI,alpha:0}},{rate:1,param:{transX:0,rotate:0,alpha:1}}]),c._translate(-p,-v),c._rotate(S.rotate*(r._from===PresetType.Param.LEFT?1:-1)),c._translate(p,v),c._translate(S.transX,0),_._colorTransform._alphaMultiplier=o*S.alpha;else if(r._type==PresetType.Animation.ROLL_OUT)S=r._getFrameAnimation(l,[{rate:0,param:{transX:0,rotate:0,alpha:1}},{rate:1,param:{transX:C,rotate:120/180*Math.PI*(r._from===PresetType.Param.RIGHT?1:-1),alpha:0}}]),c._translate(-p,-v),c._rotate(S.rotate),c._translate(p,v),c._translate(S.transX,0),_._colorTransform._alphaMultiplier=o*S.alpha;else if(r._type==PresetType.Animation.FLY_IN){s=r._getFrameAnimation(l,[{rate:0,param:0},{rate:.6,param:1},{rate:1,param:1}],EasingOutFun);var L=r._getFrameAnimation(l,[{rate:0,param:-30/180*Math.PI},{rate:.6,param:-30/180*Math.PI},{rate:.8,param:20/180*Math.PI},{rate:1,param:0}],EasingOutFun);d=r._getFrameAnimation(l,[{rate:0,param:C},{rate:.8,param:0},{rate:1,param:0}],EasingOutFun),c._translate(-p,-v),r._from==PresetType.Param.RIGHT?c.translate(n._getWidth()/2,-n._getHeight()/2):c._translate(-n._getWidth()/2,-n._getHeight()/2),c._skew(L*(r._from==PresetType.Param.RIGHT?1:-1),0),r._from==PresetType.Param.RIGHT?c.translate(-n._getWidth()/2,n._getHeight()/2):c._translate(n._getWidth()/2,n._getHeight()/2),c._translate(p,v),c._translate(d,0),_._colorTransform._alphaMultiplier=o*s}else r._type==PresetType.Animation.FLY_OUT?(S=r._getFrameAnimation(l,[{rate:0,param:{alpha:1,skewX:0,transX:0}},{rate:1,param:{alpha:0,skewX:-45/180*Math.PI,transX:C}}],EasingInFun),c._translate(-p,-v),c._skew(r._from==PresetType.Param.LEFT?S.skewX:-S.skewX,0),c._translate(p,v),c._translate(S.transX,0),_._colorTransform._alphaMultiplier=o*S.alpha):(r._type==PresetType.Animation.MOVE_IN||r._type==PresetType.Animation.MOVE_OUT)&&(r._type==PresetType.Animation.MOVE_OUT&&(l=1-l),S=r._getFrameAnimation(l,[{rate:0,param:{transX:C,transY:M,alpha:0}},{rate:1,param:{transX:0,transY:0,alpha:1}}]),c._translate(S.transX,S.transY),_._colorTransform._alphaMultiplier=o*S.alpha);return _};var jumpEasingFun=Tween.CubicBezier(1-.355,0,.355,1),BounceInFun=Tween.CubicBezier(.215,.61,.355,1),EasingInFun=Tween.CubicBezier(.42,0,1,1),EasingOutFun=Tween.CubicBezier(0,0,.58,1),EasingInOutFun=Tween.CubicBezier(.42,0,.58,1),PresetAnimationProgress=function(e,t){var r=this;PresetAnimationProgress.__super__.constructor.apply(r,arguments)};mod.extend(PresetAnimationProgress,PresetAnimationCustom);var proto$d=PresetAnimationProgress.prototype;proto$d._applyAnimation=function(e,t){var r=this,a=t._displayObject,n=e/r._duration,o=MugineRequire("Display/MovieClip");a._originProgressTransform=t._staticTransform,o.handleProcessAnimation(n,[a]),PresetAnimationProgress.__super__._applyAnimation.apply(r,arguments)};var PresetAnimationStill=function(e,t){var r=this;PresetAnimationStill.__super__.constructor.apply(r,arguments)};mod.extend(PresetAnimationStill,PresetAnimationCustom),PresetAnimationStill.prototype;var presetAnimationTextShape=function(e,t){var r=this,a=presetAnimationTextShape.__super__.constructor.apply(r,arguments),n=r._data,o=a.keyframes,s=n.items;if(s.forEach(function(c,d){["letterSpace","textLineHeight","fontSize"].forEach(function(u){var f=c[u],p=o[d].param[u];f!==void 0&&(f+=p,u==="fontSize"?f<1&&(f=1):f<0&&(f=0),o[d].param[u]=f)})}),this.constructor===presetAnimationTextShape){var l=new KeyframeInfo,_=MugineRequire("Utils/DataConverter");_.parseTextShapeKeyframes(t,0,a,l),r._frameInfo=l}else return a};mod.extend(presetAnimationTextShape,presetAnimationCurveShape);var proto$c=presetAnimationTextShape.prototype;proto$c._applyAnimation=function(e,t){var r=this,a=t._displayObject,n=r._frameInfo,o=e/r._duration,s=(n._max+1)*o,l=n.getNearFrameInfo(s),_=l[0],c=l[1],d=l[2];if(d!==void 0){var u=t._staticTransform.constructor,f=new u;a._bindTrans(f);var p=n._keyframes[_],v=n._keyframes[c];u._tween(f,p,v,n._eases[_],d),a._updateDisplayObjectFromTransform(f),f._matrix._calMatrixFormRaw(),a._setTransform(f),presetAnimationTextShape.__super__._applyAnimation.apply(r,arguments)}};var PresetAnimationManager=function(){var e=this;e._list=[],e._staticTransform=null,e._displayObject=null,e._initialzed=!1,e._currentFrame=0,e._currentAniIndex=0,e._root=null,e._staticBoundaryRect=null,e._stageBoundaryRect=null,e._playStatus="play",e._loop=!1,e._loopTimes=0,e._actions=[],e._actionTriggered=!1,e._presetData={},e._presetIsFirst=!1,e._isPlay=!1},proto$b=PresetAnimationManager.prototype;proto$b._registerAction=function(e){this._actions.push(e)},proto$b._setStatus=function(e){var t=this;e=="play"&&t._currentAniIndex>=t._list.length&&t._resetStatus(),t._playStatus=e},proto$b._addAnimation=function(e){var t=this,r=0;if(t._list.length){var a=t._list[t._list.length-1];r=a._startTime+a._delay+a._duration}e._startTime=r,t._list.push(e)},proto$b._setStaticTransform=function(e){this._staticTransform=e._clone()},proto$b._setDisplayObjectBoundary=function(e){var t=this;if(e==null){var r=t._displayObject._getBoundary(t._staticTransform._matrix);t._staticBoundaryRect=r._getRoundRect()}else t._staticBoundaryRect=e},proto$b._setStageBoundary=function(e){var t=this;t._stageBoundaryRect=e||new Rectangle(0,0,t._root._stageWidth,t._root._stageHeight)},proto$b._bindDisplayObject=function(e){var t=this;t._displayObject=e,e._addEventListener("visibilityChanged",function(){if(e._getRealVisible()){var r=e._aniData.param;if("presetTrigger"in r){var a=r.presetTrigger;a=="auto"?t._resetStatus():(t._resetStatus(),e._presetAnimation._setStatus("pause"))}else t._resetStatus()}else e._setTransform(t._staticTransform)}),t._root=t._displayObject._getRoot(),t._resetStatus(),t._setDisplayObjectBoundary(),t._setStageBoundary()},proto$b._resetStatus=function(e){var t=this;t._staticTransform=t._displayObject._transform,t._initialzed=!1,t._currentFrame=0,t._currentAniIndex=0,t._actionTriggered=!1,t._isPlay=!1;var r=t._displayObject._aniData.param,a=r.presetAuto===void 0?!0:!!r.presetAuto;t._playStatus=e||a?"play":"pause"},proto$b._updateTransformByFrameNum=function(e){var t=this,r=t._displayObject;if(t._currentAniIndex>=t._list.length){if(t._loop)if(t._loopTimes&&t._loopTimes>1){t._loopTimes=t._loopTimes-1;var a=t._staticTransform;t._resetStatus(t._playStatus=="play"),t._staticTransform=a,t._currentFrame=0}else if(t._loopTimes&&t._loopTimes==1)t._loop=!1;else{var a=t._staticTransform;t._resetStatus(t._playStatus=="play"),t._staticTransform=a,t._currentFrame=0}if(!t._actionTriggered){if(r){var n=t._endAction,o=r._presetAnimation._presetData;if(o._presetTrigger=="click"&&(r.parent._currentScene.presetAnimationClickCount=o.nextClickIndex,console.log(o.nextClickIndex)),n){var s=r.parent.children.filter(function(w){return w._guid===n.guid})[0];s&&n.action=="order"&&s._presetAnimation._setStatus("play")}}t._actions.forEach(function(w,y){w.event=="preset_end"&&w.action.doAction()}),t._actionTriggered=!0}}var l=t._currentAniIndex,_=t._list[l],c=l,d=t._list[c];if(d!=null){var u;if(e==null){var f=t._root,p=f._frameRate;if(t._playStatus=="pause")t._initialzed?u=t._currentFrame:u=0,e=u/p;else{var v=f._deltaFrame;u=t._currentFrame+v,e=u/p}}if(!(t._initialzed&&Math.abs(u-t._currentFrame)<1e-5)){for(;d._startTime+d._delay+d._duration<e&&(d=t._list[++c],d!=null););if(t._currentAniIndex=c,_!==d&&_&&d==null)return _._applyAnimation(_._duration,t);if(d!=null){t._currentFrame=u,t._initialzed=!0;var h=e-d._startTime-d._delay;if(h<=0){if(r){var o=r._presetAnimation._presetData;t._presetIsFirst&&(r.parent._currentScene.presetAnimationClickCount=-1,o._presetTrigger=="auto"&&r._presetAnimation._setStatus("play")),o.isFirstClickObj&&(r.parent._currentScene.presetAnimationClickCount=o.presetIndex,console.log(r.parent._currentScene))}return d._applyAnimation(0,t)}else{if(h>=d._duration&&(h=d._duration),r){var g=t._startAction;if(g&&g.action=="sync"){var s=r.parent.children.filter(function(y){return y._guid===g.guid})[0];s&&!s._presetAnimation._isPlay&&(s._presetAnimation._setStatus("play"),s._presetAnimation._isPlay=!0)}}return d._applyAnimation(h,t)}}}}},proto$b._getBoundWidth=function(){return this._staticBoundaryRect._getWidth()},proto$b._getBoundHeight=function(){return this._staticBoundaryRect._getHeight()},mod.exportName(proto$b,["setStaticTransform",proto$b._setStaticTransform,"updateTransformByTime",proto$b._updateTransformByFrameNum,"setDisplayObjectBoundary",proto$b._setDisplayObjectBoundary,"setStageBoundary",proto$b._setStageBoundary]);var PresetAnimationGenerator=function(){},handleClassDic={};handleClassDic[PresetType.Animation.MOVE_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.BOUNCE_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.FADE_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.FLIP_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.POP_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.CLOSER_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.ROLL_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.FLY_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.SWIRL_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.SWIRL_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.FURTHER_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.SHAKE]=PresetAnimationFly,handleClassDic[PresetType.Animation.SQUEEZE]=PresetAnimationFly,handleClassDic[PresetType.Animation.ROTATE]=PresetAnimationFly,handleClassDic[PresetType.Animation.FLIP]=PresetAnimationFly,handleClassDic[PresetType.Animation.SWING]=PresetAnimationFly,handleClassDic[PresetType.Animation.MOVE]=PresetAnimationFly,handleClassDic[PresetType.Animation.SLIDE_UP]=PresetAnimationFly,handleClassDic[PresetType.Animation.QUIVER]=PresetAnimationFly,handleClassDic[PresetType.Animation.tilt]=PresetAnimationFly,handleClassDic[PresetType.Animation.FADE_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.MOVE_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.BOUNCE_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.FLIP_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.POP_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.FURTHER_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.ROLL_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.FLY_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.CLOSER_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.RAISED_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.RAISED_OUT]=PresetAnimationFly,PresetAnimationGenerator._parseAnimationParam=function(e,t){var r=null;return t.forEach(function(a){if(a){var n=a[PresetType.Param.TYPE];if(a[PresetType.Param.WAY]===PresetType.WAY.KEYFRAME)o=PresetAnimationKeyframe;else if(a[PresetType.Param.WAY]===PresetType.WAY.PROGRESS)o=PresetAnimationProgress;else if(a[PresetType.Param.WAY]===PresetType.WAY.CURVE_SHAPE)o=presetAnimationCurveShape;else if(a[PresetType.Param.WAY]===PresetType.WAY.TEXT_SHAPE)o=presetAnimationTextShape;else if(a[PresetType.Param.WAY]===PresetType.WAY.MASK)o=PresetAnimationStill;else var o=handleClassDic[n];if(!o)return console.log("unknown ani:"+n);var s=new o(a,e);r==null&&(r=new PresetAnimationManager),r._addAnimation(s)}}),r},mod.exportName(PresetAnimationGenerator,["parseAnimationParam",PresetAnimationGenerator._parseAnimationParam]),mod.namespace("PresetAnimation.PresetAnimationGenerator",PresetAnimationGenerator);var EffectPeeling=function(){EffectPeeling.__super__.constructor.apply(this,arguments),this._cleanCallbackList=[],this._ended=!1,this._captureCanvas=null,this._turnPageDom=null,this.constructor._globalInited||(this.constructor._globalInited=!0,StyleSheetManager.updateCss("mugeda-scene-switcher-effect-peeling-turnpage-dom canvas","left: 0!important; top: 0; width: 100%; height: 100%;"))};EffectPeeling._name="peeling",TransitionEffects._registerEffect(EffectPeeling._name,EffectPeeling),mod.extend(EffectPeeling,TransitionEffect);var proto$a=EffectPeeling.prototype;proto$a._start=function(e,t){const r=this,a=r._stage;let n=null;if(e===(r._fromPrevious?0:1)&&(n=new Promise(d=>{CanvasRender._getCaptureCanvas(r._stage,r._stage,function(u,f){r._ended?f():(r._cleanCallbackList.push(f),r._captureCanvas=u,r._turnPageDom&&r._turnPageDom.appendChild(r._captureCanvas)),d()})})),e===0){var o=-Math.min(a._fullScreenRect._left,0),s=-Math.min(a._fullScreenRect._top,0),l=a._fullScreenRect._width-2*o,_=a._fullScreenRect._height-2*s;const d=r._fromPrevious?r._fromSceneRenderObject:r._toSceneRenderObject,u=r._fromPrevious?r._toSceneRenderObject:r._fromSceneRenderObject,f=d.getNode(),p=u.getNode(),v=`position: absolute; top: ${s}px; left: ${o}px; width: ${l}px; height: ${_}px; `,h=document.createElement("div");h.style.cssText=`${v}mix-blend-mode: multiply;`;const g=this._turnPageDom=document.createElement("div");g.style.cssText=`${v}transform-origin: 0 0;`,g.className="mugeda-scene-switcher-effect-peeling-turnpage-dom",r._captureCanvas&&g.appendChild(r._captureCanvas);const w=document.createElement("div");w.style.cssText=`${v}left:0;top:0;mix-blend-mode: multiply;z-index:2; background-blend-mode: multiply;`;var c=Color.parse(a._aniData.color);c._a=.5;const y=()=>{r._toSceneRenderObject._displayObject._setVisible(!0),p.style.zIndex="2",p.style.willChange="clip-path",f.appendChild(h),p.appendChild(g),g.appendChild(w)};let x=null;const m=b=>{x||(x=b,y());const C=b-x;let M=Math.min(C/r._duration,1);const E=r._fromPrevious?M:1-M;if(p.style.clipPath=r._getClipPath(o,s,l,_,E),h.style.background=r._getStillShadow(E),g.style.transform=r._getTurnPageMatrix(0,0,l,_,E)._toCssText(),w.style.background="linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)),"+r._getTurnShadow(E)+","+c._getCssText(),M===1)return A();T(m)},A=()=>{r._fromSceneRenderObject._displayObject._setVisible(!1),p.style.clipPath="",p.style.zIndex="",p.style.willChange="",h.remove(),g.remove(),this._turnPageDom=null,this._captureCanvas=null,t()},T=r._stage._renderManager.constructor.requestAnimationFrame;T(m)}else n?n.then(()=>{t()}):t()},proto$a._end=function(e,t){this._cleanCallbackList.forEach(function(r){r()}),this._cleanCallbackList=[],this._ended=!0,t()},proto$a._getClipPath=function(e,t,r,a,n){var o=r*r+a*a,s=r*r*r/o,l=-r*r*a/o,_=(r*r*r+2*r*a*a)/o,c=r*r*a/o,d=r*a*a/o,u=(2*r*r*a+a*a*a)/o,f=-r*a*a/o,p=a*a*a/o,v=s+(_-s)*n,h=l+(c-l)*n,g=f+(d-f)*n,w=p+(u-p)*n,y=-(e*a*a+t*r*a)/o,x=-(e*a*r+t*r*r)/o;return`polygon(${e+s}px ${t+l}px, ${e+v}px ${t+h}px, ${e+g}px ${t+w}px, ${e+f}px ${t+p}px, ${e+f+y}px ${t+p+x}px, ${e+s+y}px ${t+l+x}px)`},proto$a._getTurnPageMatrix=function(e,t,r,a,n){var o=Math.sqrt(r*r+a*a),s=new Matrix;s._translate(-e-r,-t-a);var l=new Matrix(a/o,-r/o,r/o,a/o);s=Matrix._multiplication(l,s),s._scale(-1,1),l=new Matrix(a/o,r/o,-r/o,a/o),s=Matrix._multiplication(l,s),s._translate(e+r,t+a);var _=s._clone(),c=new Point(0,0);return s._transform(c,!0),_._translate(-c._x*(1-n),-c._y*(1-n)),_},proto$a._getStillShadow=function(e){let t=e*100;return`linear-gradient(to bottom right, rgba(0,0,0,0.6) ${t}%, rgba(0,0,0,0) ${t+6}%) no-repeat`},proto$a._getTurnShadow=function(e){let t=e*100;return`linear-gradient(to bottom right, rgba(0,0,0,0.60) ${t}%, rgba(0,0,0,0.50) ${t+2}%, rgba(70,70,70,0.30) ${t+5}%, rgba(255,255,255,0.10) ${t+10}%, rgba(255,255,255,0.30) ${t+18}%, rgba(255,255,255,0.10) ${t+21}%) no-repeat`},mod.namespace("SceneSwitcher.EffectPeeling",EffectPeeling);var EffectWipe=function(){EffectWipe.__super__.constructor.apply(this,arguments),this._initClassName()};EffectWipe._name="wipe",TransitionEffects._registerEffect(EffectWipe._name,EffectWipe),mod.extend(EffectWipe,EffectCssTransition);var proto$9=EffectWipe.prototype;proto$9._initClassName=function(){this.TRANSITION_FUN_CLASS_NAME="mugeda_class_transition_wipe_"+this._switcher._counter;var e="z-index:2;";StyleSheetManager.updateCss(this.TRANSITION_FUN_CLASS_NAME,e)},proto$9._globalInit=function(){var e=this;EffectWipe.__super__._globalInit.apply(e,arguments)},proto$9._setTransitionStart=function(e,t){var r=this,a=r._stage,n=r._direction;if(t===this._fromSceneRenderObject){var o=t.getNode(),s=o.querySelector(".mugine_scene_clip"),l=-Math.min(a._fullScreenRect._left,0),_=-Math.min(a._fullScreenRect._top,0);a._fullScreenRect._width-2*l,a._fullScreenRect._height-2*_,s.style.transitionProperty="mask-position",s.style.transitionDuration=`${this._duration}ms`,s.style.backgroundColor=a._aniData.color;var c="";RenderObjectSceneSwitcher._Direction._HORIZONTAL===n?c=this._fromPrevious?"left":"right":c=this._fromPrevious?"top":"bottom",s.style.maskImage=`linear-gradient(to ${c}, black 90%, transparent 100%)`,s.style.maskRepeat="no-repeat",s.style.maskPosition="0 0 ",t._classNameList.push(r.TRANSITION_FUN_CLASS_NAME),t.setClassName()}},proto$9._setTransitionEnd=function(e,t){var r=this,a=r._stage,n=r._direction;if(t===this._fromSceneRenderObject){var o=t.getNode(),s=o.querySelector(".mugine_scene_clip"),l=-Math.min(a._fullScreenRect._left,0),_=-Math.min(a._fullScreenRect._top,0),c=a._fullScreenRect._width-2*l,d=a._fullScreenRect._height-2*_;RenderObjectSceneSwitcher._Direction._HORIZONTAL===n?s.style.maskPosition=this._fromPrevious?`${c}px 0`:`-${c}px 0`:s.style.maskPosition=this._fromPrevious?`0 ${d}px`:`0 -${d}px`}},proto$9._finish=function(e,t){var r=this,a=t._classNameList.indexOf(r.TRANSITION_FUN_CLASS_NAME);a>=0&&(t._classNameList.splice(a,1),t.setClassName());var n=t.getNode(),o=n.querySelector(".mugine_scene_clip");o.style.transitionProperty=null,o.style.transitionDuration=null,o.style.maskImage=null,o.style.maskRepeat=null,o.style.maskPosition=null,o.style.backgroundColor=null},mod.namespace("SceneSwitcher.EffectWipe");var ComplexTimer=function(){ComplexTimer.__super__.constructor.apply(this,arguments);var e=this;e.tdirection="down",e.tlength=30,e._renderManager=null,e._startTime=null,e._timerStatus="normal",e._pausedTime=void 0,e._unLockTime=!1,e._hideTextRender=!1};mod.extend(ComplexTimer,TextField),ComplexTimer._createChildClass=TextField._createChildClassFactory(function(e,t){var r=this,a=e.param,n=r._defaultTextFormat;n.ctDirection=a.ctDirection,n.ctAuto=a.ctAuto||"yes",n.ctMethod=a.ctMethod,n.ctDisplay=a.ctDisplay,n.ctCustom=a.ctCustom,n.ctTime=a.ctTime,n.ctUnit=a.ctUnit,n.ctLoop=a.ctLoop,n.ctStart=a.ctStart,n.ctEnd=a.ctEnd},ComplexTimer);var proto$8=ComplexTimer.prototype;proto$8.update=function(e){var t=this;try{var r=window.dayjs,a=window.dayjsPluginDuration}catch(O){console.log(O);return}a&&!r.duration&&r.extend(a.default);var n=t._defaultTextFormat,o=n.ctDirection||"down",s=n.ctAuto||"yes",l=n.ctMethod||"relative",_=n.ctDisplay||"DD天HH时mm分ss秒",c=n.ctCustom||"",d=n.ctTime||"1",u=n.ctUnit||"day",f=n.ctLoop||"noloop",p=n.ctStart||"",v=n.ctEnd||"",h=_==="custom"?c:_,g=r();if(!g||!t._startTime)var w=0;else var w=g-t._startTime;var y=r.duration(0).format(h),x=0;switch(u){case"day":x=d*24*60*60*1e3;break;case"hour":x=d*60*60*1e3;break;case"minute":x=d*60*1e3;break;case"second":x=d*1e3;break}var m=function(){var O="";switch(l){case"absolute":O=y;break;case"relative":o==="up"||!u||!d?O=y:o==="down"&&(O=r.duration(x).format(h));break;case"unlimit":O=y;break}t._setText(O)};if(!t._unLockTime&&s==="no"){m();return}if(!t._renderManager){for(var A=t;A&&!A._renderManager;)A=A.parent;t._renderManager=A._renderManager}var T=t.actions||[],b=function(){t._startTime=r(),t._actionDone=!1;for(var O=0;O<T.length;O++)T[O]._behavior.event=="complex_timer_start"&&T[O].doAction()};if(t._startTime||b(),t._timerStatus=="pause"){t._pausedTime=t._pausedTime||w;return}else if(t._timerStatus=="start")b();else if(t._timerStatus=="continue"&&t._pausedTime!==void 0)t._hideTextRender=!0,t._startTime=r()-t._pausedTime;else if(t._timerStatus=="restart"){b(),m();return}t._timerStatus="normal",delete t._pausedTime;var C="",M=function(){if(!t._actionDone){for(var O=0;O<T.length;O++)T[O]._behavior.event=="complex_timer_up"&&T[O].doAction();f=="noloop"?t._actionDone=!0:b()}};switch(l){case"absolute":o==="up"?r()<=r(p)?(C=y,M()):C=r.duration(r().diff(r(p))).format(h):o==="down"&&(r()>=r(v)?(C=y,M()):C=r.duration(r(v).diff(r())).format(h));break;case"relative":var E=r.duration(x)-w;E>=0?o==="up"?C=r.duration(w).format(h):o==="down"&&(C=r.duration(r.duration(x)-w).format(h)):E<0&&(o==="up"?(M(),C=r.duration(x).format(h)):o==="down"&&(M(),C=r.duration(0).format(h)));break;case"unlimit":C=r.duration(w).format(h);break}t._hideTextRender?t._hideTextRender=!1:t._setText(C)},mod.namespace("Text.ComplexTimer",ComplexTimer);var TextFieldType=function(){};TextFieldType.DYNAMIC="dynamic",TextFieldType.INPUT="input",mod.exportName(TextFieldType,["DYNAMIC",TextFieldType.DYNAMIC,"INPUT",TextFieldType.INPUT]);var TextGyro=function(){TextGyro.__super__.constructor.apply(this,arguments);function e(t){window.gyroInfo=window.gyroInfo||{},window.gyroInfo.alpha=t.alpha,window.gyroInfo.beta=t.beta,window.gyroInfo.gamma=t.gamma}Browser$1._globalObject.mugedaGyroInit||(Browser$1._globalObject.addEventListener("deviceorientation",e,!1),Browser$1._globalObject.mugedaGyroInit=!0)};mod.extend(TextGyro,TextField),TextGyro._createChildClass=TextField._createChildClassFactory(function(e,t){var r=this,a=e.param,n=r._defaultTextFormat;n._gyroType=a.gyroType},TextGyro);var proto$7=TextGyro.prototype;proto$7.update=function(e){var t=this,r=t._defaultTextFormat,a=r._gyroType||"alpha";window.gyroInfo==null&&(window.gyroInfo={});var n=window.gyroInfo[a]||"0.000",o=Math.abs(n),s=Math.floor(o),l=Math.round(1e3*(o-s));l<10?l="00"+l.toString():l<100&&(l="0"+l.toString()),n=(n<0?"-":"")+s+"."+l,t._setText(n)},mod.namespace("Text.TextGyro",TextGyro);var TextRandom=function(){TextRandom.__super__.constructor.apply(this,arguments)};mod.extend(TextRandom,TextField),TextRandom._createChildClass=TextField._createChildClassFactory(function(e,t){var r=this,a=e.param,n=r._defaultTextFormat;n._rmin=a.rmin,n._rmax=a.rmax,n._rinterval=a.rinterval},TextRandom);var proto$6=TextRandom.prototype;proto$6.update=function(e){e=e||{};var t=this;(!t._startTime||e.appear)&&(t._startTime=new Date().getTime());var r=t._defaultTextFormat,a=new Date().getTime(),n=a-t._startTime,o=parseFloat(r._rmin)||0,s=parseFloat(r._rmax)||10,l=parseFloat(r._rinterval)||10,_=l-.001*n;if(_<=0||e.appear){var c=Math.floor(o+(s+1-o)*Math.random());t._setText(c),t._startTime=new Date().getTime()}},mod.namespace("Text.TextRandom",TextRandom);var TextTimer=function(){TextTimer.__super__.constructor.apply(this,arguments);var e=this;e.tdirection="down",e.tlength=30,e._renderManager=null,e._timerStatus="normal",e._pausedTime=void 0};mod.extend(TextTimer,TextField),TextTimer._createChildClass=TextField._createChildClassFactory(function(e,t){var r=this,a=e.param,n=r._defaultTextFormat;n._tprecision=a.tprecision,n._tdirection=a.tdirection,n._tlength=a.tlength,n._talwayson=a.talwayson,n._tloop=a.tloop},TextTimer);var proto$5=TextTimer.prototype;proto$5.update=function(e){e=e||{};var t=this,r=t._defaultTextFormat,a=r._tlength||30,n=r._tprecision||"second",o=r._tdirection||"down",s=r._tloop||"noloop",l=r._trandom||0,_=r._talwayson||"no";if(!t._renderManager){for(var c=t;c&&!c._renderManager;)c=c.parent;t._renderManager=c._renderManager}var d=t._getRealVisible();if(!(!t._startTime&&!d||_=="yes"&&t._renderManager._renderContext!="global")){var u=t.actions||[],f=function(){t._startTime=new Date().getTime()+Math.floor(5-10*Math.random()),t._actionDone=!1;for(var m=0;m<u.length;m++)u[m]._behavior.event=="timer_start"&&u[m].doAction();t.tdirection=o,o=="random"&&(t.tdirection=Math.random()<.5?"down":"up"),t.tlength=parseFloat(a)+l*Math.random()};(!t._startTime||e.appear&&_=="no")&&f();var p=new Date().getTime(),v=p-t._startTime;if(v<0&&(v=1),t._timerStatus=="pause"){t._pausedTime=t._pausedTime||v;return}else t._timerStatus=="continue"&&t._pausedTime!==void 0?t._startTime=new Date().getTime()-t._pausedTime:t._timerStatus=="restart"&&f();t._timerStatus="normal",delete t._pausedTime;var v=.001*(p-t._startTime),h=t.tlength-v,g=t.tdirection=="down"?h:v;if(h>0)if(n=="second")g=Math.round(g);else{var w=Math.floor(g),y=Math.floor(1e3*(g-w));y<10?y="00"+y.toString():y<100&&(y="0"+y.toString()),g=w+"."+y}else h<0&&(g=t.tdirection=="down"?0:t.tlength);if(h<=0&&!t._actionDone){for(var x=0;x<u.length;x++)u[x]._behavior.event=="timer"&&u[x].doAction();s=="noloop"?t._actionDone=!0:f()}t._setText(g)}},mod.namespace("Text.TextTimer",TextTimer);var Browser=MugineRequire("Utils/Browser");MugineRequire("Render/RenderObject");var keyBoard=function(e){var t=window.G(e),r=null,a=function(){var _=Mugeda.scene._getRoot()._renderManager._displayHash[0].getNode(),c="	    	<style>	    		#"+e+'_key_board{	    			background: #fff;	    			position: fixed;	    			bottom: 0;	    			width: 100%;	    			height: 40%;	    			display: flex;					flex-wrap: wrap;					transform: translateZ(1px);	    		}	    	</style>			<div id="'+e+'_key_board">				<div data-key="1" style="border-bottom:1px solid #f1f1f1;border-right:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">1</div>				<div data-key="2" style="border-bottom:1px solid #f1f1f1;border-right:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">2</div>				<div data-key="3" style="border-bottom:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">3</div>				<div data-key="4" style="border-bottom:1px solid #f1f1f1;border-right:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">4</div>				<div data-key="5" style="border-bottom:1px solid #f1f1f1;border-right:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">5</div>				<div data-key="6" style="border-bottom:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">6</div>				<div data-key="7" style="border-bottom:1px solid #f1f1f1;border-right:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">7</div>				<div data-key="8" style="border-bottom:1px solid #f1f1f1;border-right:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">8</div>				<div data-key="9" style="border-bottom:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">9</div>				<div data-key="0" style="border-right:1px solid #f1f1f1;display: flex; width: 66.25%; align-items: center;justify-content: center;height: 25%;">0</div>				<div data-key="del" style="display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">←</div>			</div>	    ',d=document.createElement("div");_.appendChild(d),d.innerHTML=c,r=window.G(e+"_key_board"),_.addEventListener(Browser.InputStart,function(u){n(u),s(u)}),_.addEventListener(Browser.InputEnd,function(u){o(u)})},n=function(_){var c=_.target.dataset.key;c&&t&&(_.target.style.background="#f1f1f1",c!="del"?t.value+=c:t.value=t.value.substr(0,t.value.length-1))},o=function(_){_.target.dataset.key&&(_.target.style.background="#fff")},s=function(_){!_.target.dataset.key&&_.target!=t&&(r.style.display="none")},l=function(){var _=window.G(e+"_key_board");_?_.style.display="flex":a()};l()};mod.namespace("Utils.keyBoard",keyBoard);var captchaURL=Browser$1._getWeixinServerHost()+"/server/service_captcha.php",Captcha=function(e){var t=function(){var n=Mugeda.scene._getRoot()._renderManager._displayHash[0].getNode(),o='            <div id="lottery_captcha" style="display:none;position:fixed;width:256px;padding:10px 10px 45px 10px;left:50%;top:35%;transform:translate(-50%,-50%);background:#fff;border-radius:10px;box-shadow:0px 0px 25px 4px #888;">                <p style="margin:0 0 5px 0;font-size:14px;">你是机器人吗?</p>                <p style="margin:0 0 30px 0;font-size:14px;">提交数据前请输入下面的数字:</p>                <div style="overflow:hidden;width: 80%;margin: 0 auto 20px auto;">                    <img id="lottery_captchaImg" style="display:block;float:left;width:75%;height:30px;" src="">                    <img id="lottery_refresh_img" width="30" style="transform:scale(.7);-webkit-transform:scale(.7);display:block;float:right;" src="http://www.iconninja.com/files/794/1010/398/refresh-icon.svg">                </div>                <input readonly="readonly" id="lottery_captcha_value" type="text" style="display: block;width: 80%;margin: 0 auto 30px auto;padding:5px 0;border: 1px solid #a7a7a7;border-radius:3px;">                <div style="overflow: hidden;position: absolute;left: 0;bottom: 0px;width: 100%;border-bottom-left-radius: 10px;border-bottom-right-radius: 10px;">                    <div id="lottery_captcha_submit" style="float:left;width:50%;float:left;padding:10px 0;text-align:center;background:#f36523;color:#fff;">确定</div>                    <div id="lottery_captcha_off" style="float:left;width:50%;float:left;padding:10px 0;text-align:center;background:#8b8b8b;color:#fff;">取消</div>                <div>            </div>        ',s=document.createElement("div");n.appendChild(s),s.innerHTML=o,window.G("lottery_captcha_value").addEventListener("click",function(){new keyBoard("lottery_captcha_value")}),window.G("lottery_captcha_submit").addEventListener("click",function(){var l=window.G("lottery_captcha_value").value,_=captchaURL+"/verfy?captcha="+l;Captcha.xToken&&(_+="&xToken="+Captcha.xToken),window.ajaxHelper({url:_,type:"JSONP",mode:"postMessage",postMessageType:"JSON",success:function(c){c.status===0?(window.G("lottery_captcha").style.display="none",e(l,Captcha.xToken)):(r(),Mugeda.messageBox("验证码错误"),window.G("lottery_captcha_value").value="")}})}),window.G("lottery_captcha_off").addEventListener("click",function(){window.G("lottery_captcha").style.display="none",window.G("lottery_captcha_value").value=""}),window.G("lottery_captchaImg").addEventListener("click",function(){r()}),window.G("lottery_refresh_img").addEventListener("click",function(){r()})},r=function(){var n=captchaURL+"/generate?mode=digit&width=300&height=60&mode=digit&sid="+Math.random();window.ajaxHelper({url:n,type:"jsonp",mode:"postMessage",responseType:"arraybuffer",success:function(o,s){var l=new Uint8Array(o),_=String.fromCharCode.apply(null,l),c=btoa(_);window.G("lottery_captchaImg").src="data:image/jpeg;base64,"+c,s&&s["x-token"]?Captcha.xToken=s["x-token"]:Captcha.xToken=null}}),window.G("lottery_captcha_value").value=""},a=function(){var n=window.G("lottery_captcha");n?(n.style.display="block",r()):(t(),n=window.G("lottery_captcha"),n.style.display="block",r())};a()};Captcha.xToken=null,mod.namespace("Utils.Captcha",Captcha);var dataConverter=function(e,t){};dataConverter._prevContext=null,dataConverter._queryArgs=(function(){var e={},t=Browser$1._isServer?"":window.location.search.substring(1);return(t.match(/([^&=]+)=([^&=]*)/g)||[]).forEach(function(r){r=r.split("=");try{e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}catch{console.info("error decodeURIComponent:"+r[1])}}),e})();var addInitCustomParams=function(){var e=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};Object.keys(dataConverter._queryArgs).forEach(function(t){e.addCustomMugedaParameters(encodeURIComponent(t),encodeURIComponent(dataConverter._queryArgs[t]))})};Browser$1._isServer||(window.MugedaTools&&window.MugedaTools.addCustomMugedaParameters?addInitCustomParams():document.addEventListener("cardCommonReady",addInitCustomParams)),dataConverter.parseAnidata=function(e,t){t.resource&&(t.resource=t.resource);var r=t.resource;r.root&&(r.root=r.root),r.dir&&(r.dir=r.dir),r.dir.getFullPath&&(r.dir.getFullPath=r.dir.getFullPath),r.dir.getSamePath&&(r.dir.getSamePath=r.dir.getSamePath),r.symbols&&(r.symbols=r.symbols),r.videoRes&&(r.videoRes=r.videoRes),r.bitmapRes&&(r.bitmapRes=r.bitmapRes);var a=r.root;this.resource=r,a._aniData||(a._aniData=e),a._color=Color.parse(e.color),a._stageWidth=e.width,a._stageHeight=e.height,a._rawWidth=e.width,a._rawHeight=e.height,DisplayObject._maxWidth=e.width,DisplayObject._maxHeight=e.height,a._frameRate=e.rate,a._name=e.title,a._getBitmapData=function(_,c){return getBitmapData(r,_,c)};var n=e.metadata||{};a._scaleMode=n.adaptMode||StageScaleMode.ADAPT_NONE,a._mrmcp&&a._mrmcp.render_mode=="inline"&&(a._scaleMode=StageScaleMode.ADAPT_NOSCALE),handleAction(e,a,r);var o=e.symbols;o&&o.forEach(function(_){var c=_.id,d=_.type;if(d==3){var u=new VideoData;u._src=r.dir.getFullPath(_.url),r.videoRes[c]=u}else if(d==2)var f=createAudioData(_,r);f&&(r.symbols[c]=f)}),o&&o.forEach(function(_){var c=_.id,d=_.type;if(d!=3&&d!=2)var u=createMovieClipObject(_,r);u&&(r.symbols[c]=u)});var s=createMovieClipObject(e,r,{splitFont:!0});r.movieClipStack=[];var l=new s(a);return l._sceneSwitchOpts=e.pageInfo||{},r};var aniDataObjectToDisplayObjectClass=function(e,t){dataConverter._prevContext=t;var r=Plugin._getUserDisplayObject(e.type);if(r)return r._createChildClass(e,t);if(e.type===2014)return createSpriteClass(e,t);if(shapeTypes.includes(e.type)||e.type===2074)return createShapeClass(e);if(e.type===2005)return createBitmapClass(e,t);if(e.type===2026)return TextTimer._createChildClass(e,t);if(e.type===2085)return ComplexTimer._createChildClass(e,t);if(e.type===2027)return TextRandom._createChildClass(e,t);if(e.type===2029)return TextGyro._createChildClass(e,t);if(e.type===2021)return getSymbolClass(e,t);if(e.type===2024)return createFormClass(e);if(e.type===2022)return createVideoObject(e,t);if(e.type===2020)return createAudioControlObject(e,t);if(e.type===2030)return createSlidesClass(e);if(e.type===2033)return createIframeClass(e)};dataConverter.aniDataObjectToDisplayObjectClass=aniDataObjectToDisplayObjectClass;var getSymbolClass=function(e,t){var r=e.param,a=r.symbolId;return t.symbols[a]},createSpriteClass=function(e,t){var r=function(a,n){var o=this;r.__super__.constructor.apply(this,arguments),n!=null&&(o._visible=n),a&&a.addChild(o);var s=e.items;o._aniData=e,o._scroll=e.param.scroll||"no",o._offsetMatrix=new Matrix(1,0,0,1,e.param.horOffset*1||0,e.param.verOffset*1||0),s.forEach(function(l){for(var _=t.movieClipStack||[],c="",d=0;d<_.length;d++){var u=_[d].param.name;u&&(c+=u+"/")}var f=c+l.param.name,p=f?dataConverter._queryArgs["m_"+f]:null;if(!p){for(var v="",d=0;d<_.length;d++){var h=_[d].guid;h&&(v+=h+"_")}p=dataConverter._queryArgs["m_"+v+l.guid],!p&&v&&(p=dataConverter._queryArgs["m_"+l.guid])}p&&(l.param.customValue=p);var g=aniDataObjectToDisplayObjectClass(l,t);if(g){var w=new g(o);if(w._aniData=l,l.param.talwayson=="yes"){for(var y=w;y&&!y._renderManager;)y=y.parent;y&&(y._renderManager._globalRenderedObjectList[w._id]=w)}setParamToDisplayObject(l,w,t)}})};return mod.extend(r,Sprite),r},getBitmapData=dataConverter.getBitmapData=function(e,t,r){r=r||"default",r!="original"&&r!=="same"&&(t=e.dir.getFullPath(t)),r==="same"&&(t=e.dir.getSamePath(t));var a=e.bitmapRes;if(t.substr(0,5)!=="data:")var n=a[t];return n||(n=new BitmapData,n._src=t,n._image=BitmapData.blankImage),t.substr(0,5)!=="data:"&&(a[t]=n),n},createBitmapClass=function(e,t){var r=e.param.presetImage,a=e.param.customValue||Macro._getValue(r)||e.param.imageSrc;if(a=="")return null;var n=getBitmapData(t,a),o=function(s,l){var _=this;o.__super__.constructor.apply(_,arguments),l!=null&&(_._visible=l),s&&s.addChild(_),_._setBitmapData(n),_._resourceList=[n],_._aniData=e};return mod.extend(o,Bitmap),o},createFormClass=function(e,t){var r=function(a,n){var o=this;r.__super__.constructor.apply(o,arguments),n!=null&&(o._visible=n),a&&a.addChild(o),o._aniData=e};return mod.extend(r,Form),r},createShapeClass=function(e){var t=function(r,a){var n=this;t.__super__.constructor.apply(n,arguments),a!=null&&(n._visible=a),r&&r.addChild(n),n._aniData=e};return mod.extend(t,Shape),t},createSlidesClass=function(e){var t=function(r,a){var n=this;t.__super__.constructor.apply(n,arguments),a!=null&&(n._visible=a),r&&r.addChild(n),n._aniData=e};return mod.extend(t,Slides),t},createIframeClass=function(e){var t=function(r,a){var n=this;t.__super__.constructor.apply(n,arguments),a!=null&&(n._visible=a),r&&r.addChild(n),n._aniData=e;var o=e.param,s=o.iframeUrl||"about:blank";n._setUrl(s)};return mod.extend(t,IFrame),t},setParamToDisplayObject=function(e,t,r,a,n){a=a||{};var o=e.param;e.binds;var s=a.guid||e.guid;if(s&&(t._guid=s),t._aniData=e,t.parseParamToDisplayObject(o,e,a),o.tO&&(t._textOverflow=o.tO||"hidden",Mugeda.options&&Mugeda.options.loopScrollingText&&["scroll","scrollNoBar","manualScroll","manualScrollNoBar"].includes(t._textOverflow)&&(t._text=t._text+t._text,t._htmlText=t._htmlText.replace(/(.*)(\<span.*)/,"$1<br />$1$2"))),t instanceof MovieClip){var l=o.offsetX,_=o.offsetY;l!=null&&_!=null&&t._offsetMatrix._translate(-l,-_)}var c=a.noPresetAnimation?null:o.preset,d=o.presetAuto===void 0?!0:!!o.presetAuto;if(c&&t.parent.constructor!=Sprite){var u=t._presetAnimation=PresetAnimationGenerator._parseAnimationParam(t,c);if(u&&(u._bindDisplayObject(t),t._haveAnimation=!0,t._presetAnimation._setStatus(d?"play":"pause"),t._presetAnimation._loop=!!o.presetLoop,t._presetAnimation._loopTimes=o.presetLoopTimes?parseInt(o.presetLoopTimes):0,o.presetTrigger&&(o.presetIndex||o.presetIndex==0))){var f=o.presetIndex,p=o.presetTrigger,v=t.parent._scenes[t.parent._scenes.length-1];v.presetAnimationList||(v.presetAnimationList={}),v.presetAnimationClickCount=-1,v.presetAnimationList[f]={displayObj:t,presetIndex:f,presetTrigger:p}}}t._parseData(),r&&r.symbols&&handleAction(o,t,r)},handleAction=function(e,t,r){var a=e.action,n=e.behavior;if(a=="link"){t._link=e.url,t._haveClickAction=!0;var o=t._behaviors=t._behaviors||[];o.push({type:"link",event:"click",param:e})}else if(a==="behavior"&&n)o=t._behaviors=JSON.parse(n),o.some(function(s){var l=s.event;return l=="click"||l.indexOf("slide_")>-1||l.indexOf("touch_")>-1})&&(t._haveClickAction=!0),o.forEach(function(s){var l=s.type,_=s.param,c=_.audio_name,d=_.audio_id,u=_.audio_loop=="1",f=_.audio_url;if(l==="audio"&&(d||f)){for(var p=_.audio_preload=="1"||(t._getStage()._mrmcp||{}).preload_audio=="1",v=t._parent;v&&!(v instanceof MovieClip);)v=v._parent;var h=r.symbols[d];if(h===null&&f&&(h=createAudioData({url:f,sameUrl:p})),h==null)return;var g=new h(v,p);g._name=c,g._loop=u,_.audio_url=g._src;var w=_.audioId=g._id;t._getRoot()._renderManager&&t._getRoot()._renderManager._registerMediaDom(w,g._audio,c),p&&t._addResource(g)}else if(l=="video"){var y=r.videoRes[_.video_id];y&&(_.video_url=y._src)}});else if(a==="form"){t._haveClickAction=!0,o=t._behaviors=t._behaviors||[];try{var e=JSON.parse(e.form)}catch{}e&&o.push({type:"form",event:"click",param:e})}e.drag>0&&(t._haveClickAction=!0,o=t._behaviors=t._behaviors||[],o.push({type:"drag",event:"drag",param:{type:e.drag,reset:e.dragReset,inertia:e.inertia}}))};dataConverter.setParamToDisplayObject=setParamToDisplayObject;var createAudioData=function(e,t){t=t||dataConverter.resource;var r=e.param||{},a=t.root._aniData.audioVol,n=function(o,s){var l=this;n.__super__.constructor.apply(l,arguments);var _=e.sameUrl||s,c=r.customValue||(_?t.dir.getSamePath(e.url):t.dir.getFullPath(e.url));if(o&&o.addChild(l),l._name=null,a)for(var d=0;d<a.length;d++)a[d]==e.guid&&(l._isVolumeBehavior=!0);l._setAudioSrc(c,_)};return mod.extend(n,AudioData),n},createAudioControlObject=function(e,t){var r=e.param,a=r.audioOffImage||r.imageSrc,n=getBitmapData(t,a),o=getBitmapData(t,r.audioOnImage||a),s=!!r.loop,l=!!r.autoplay,_=r.audioUrl,c=function(d,u){var f=this;c.__super__.constructor.apply(f,arguments),u!=null&&(f._visible=u),d&&d.addChild(f);var p=f._getStage()._mrmcp||{},v=r.preload||p.preload_audio=="1";f._setBitmapData(o),f._audioOnBitmap=o,f._audioOffBitmap=n,f._audio=createAudioData({guid:e.guid,url:_,param:r,sameUrl:v}),f._audioObject=new f._audio,f._autoPlay=l,f._aniData=e,f._loop=s,d._getRoot()._renderManager&&d._getRoot()._renderManager._registerMediaDom(e.guid,f._audioObject._audio,r.name),f._resourceList=[n,o],v&&f._resourceList.push(f._audioObject)};return mod.extend(c,AudioControl),c.prototype._getObject=function(){return this._audioObject._audio},c},createVideoObject=function(e,t){var r=e.param,a=r.videoUrl,n=!1;if(/^http(s)*:\/\/[a-zA-Z0-9]+\.[sohu\.com|qq\.com|youku\.com|tudou\.com]/g.test(a)&&a.indexOf(".mp4")==-1&&(n=!0),n){var o=function(_,c){r.rawWidth=r.width,r.rawHeight=r.height,r.lineWidth=0;var d=this;o.__super__.constructor.apply(d,arguments),c!=null&&(d._visible=c),_&&_.addChild(d),d._setUrl(a),d._aniData=e};mod.extend(o,VideoIFrame)}else{var s=r.imageSrc;if(s=="")return null;var l=getBitmapData(t,s),o=function(c,d){var u=this;o.__super__.constructor.apply(u,arguments),d!=null&&(u._visible=d),c&&c.addChild(u),u._setBitmapData(l);var f=new VideoData;f._src=t.dir.getFullPath(r.videoUrl),r.preload&&u._addResource(f),u._aniData=e,u._video=f,u._embedVideo=r.embedVideo*1&&u.isSupportSameLayer(),u._outsideVideo=!u._embedVideo&&!r.embedVideo*1&&(Browser$1.os.version||"").substr(0,4)==="11.0",u._showControls=!(r.hidePlayControls*1),u._nodownload=!!(r.nodownload*1),u._showPlayIcon=!(r.hidePlayIcon*1),u._needStopAudio=!(r.continueAudio*1),u._autoPlay=!!(r.videoAutoPlay*1),u._muted=!!(r.videoMuted*1),u._clickCanPause=r.clickStatus!==1,u._loop=r.videoLoop*1};mod.extend(o,Video)}return o},createMovieClipObject=dataConverter.createMovieClipObject=function(e,t,r){var a=function(n,o){var s=this;a.__super__.constructor.apply(s,arguments),o!=null&&(s._visible=o),n&&n.addChild(s),s._aniData=e;var l=e.cw,_=e.ch;l!=null&&_!=null&&(s._offsetMatrix=new Matrix(null,null,null,null,-l/2,-_/2)),e.loop===!1&&(s._loop=!1);var c=[e].concat(e.pages||[]),d=0;c.forEach(function(u,f){(r||{}).splitFont&&FontData._resetIncrease();var p=new Scene;s._scenes.push(p),p._startFrame=d;var v=expressLayers.bind(s)(u.layers,d,t),h=v.totalFrames;if(d+=h,p._numFrames=h,p._name=u.name||"第"+(f+1)+"页",p._guid=u.guid||"",p._aniData=u,p.presetAnimationList){var g=p;if(g.presetAnimationList){for(var w=g.presetAnimationList,y=Object.keys(w).map(N=>N*1).sort((N,j)=>N-j),x={},m=0;m<y.length;m++)x[m]=w[y[m]],x[m].presetIndex=m;g.presetAnimationList=w=x;var A=Object.keys(w).length;w[0],w[A-1];var T=!1;for(var b in w){var C=parseInt(b),M=function(){for(var N=C;N<A;N++)if(w[N+1]&&w[N+1].presetTrigger=="click")return w[N+1]},E=w[C],O=E.displayObj,S=E.presetTrigger,L=E.presetIndex,D=w[C+1],$=M();if(D){var R=D.displayObj,I=D.presetTrigger;D.presetIndex,I=="order"?O._presetAnimation._endAction={guid:R._aniData.guid,action:I}:I=="sync"&&(O._presetAnimation._startAction={guid:R._aniData.guid,action:I})}if(O._presetAnimation._presetData={_presetTrigger:S,event:Browser$1.Click,presetIndex:L},!T&&E.presetTrigger=="click"&&(T=!0,O._presetAnimation._presetData.isFirstClickObj=!0),S=="click"&&$){var P=$.displayObj;$.presetTrigger;var F=$.presetIndex;O._presetAnimation._presetData.nextClickGuid=P._aniData.guid,O._presetAnimation._presetData.nextClickIndex=F}C==0?(S=="auto"?O._presetAnimation._setStatus("play"):(S=="click"||S=="stop"||S=="order"||S=="sync")&&O._presetAnimation._setStatus("pause"),O._presetAnimation._presetIsFirst=!0):S=="auto"?O._presetAnimation._setStatus("play"):(S=="order"||S=="click"||S=="sync"||S=="stop")&&O._presetAnimation._setStatus("pause")}}}}),s._totalFrames=d};return mod.extend(a,MovieClip),a._name=e.name,a._aniData=e,a},parseCurveShapeKeyframes=dataConverter.parseCurveShapeKeyframes=function(e,t,r,a){var n=r.keyframes;n.forEach(function(o,s){var l=o.id+t,_=new Transform;e._bindTrans(_),_._parseParam(e._getFixedParam(o.param),e),a.addKeyframe(l,_,void 0,Ease._parseEase(o)),s===0&&e._setTransform(_)}),a._min=t+r.frameStart,a._max=a._min+r.frameCount-1},parseTextShapeKeyframes=dataConverter.parseTextShapeKeyframes=function(e,t,r,a){var n=r.keyframes;n.forEach(function(o,s){var l=o.id+t,_=new Transform;e._bindTrans(_),o.param.rawWidth=o.param.width,o.param.rawHeight=o.param.height,_._parseParam(e._getFixedParam(o.param),e),a.addKeyframe(l,_,void 0,Ease._parseEase(o))}),a._min=t+r.frameStart,a._max=a._min+r.frameCount-1},parseKeyframes=dataConverter.parseKeyframes=function(e,t,r,a){var n=0,o=r.pathMode>0&&r.path&&r.path.length,s=r.keyframes,l=r.frameStart+t,_=r.frameCount,c=l+_-1;s.forEach(function(d,u){var f=d.id+t,p=d.param;if(s[u+1]){var v=s[u+1].id+t,h=s[u+1].param,g=Ease._parseEase(d),w=g._type;n=0,c===v&&w!=="Step.EaseIn"&&w!=="Step.EaseOut"&&(a._setInterpolateFrame(f),v+=1,n=1);var y=new Transform,x=new Transform;y._parseParam(p),x._parseParam(h);for(var m=f;m<v;m++){var A=(m-f)/(v-f);if(R=new Transform,Transform._tween(R,y,x,g,A),e._transform._paramTransform&&(R._paramTransform=e._transform._paramTransform._clone()),o){var T=r.path,b=u,C=u+1,M=T[b],E=T[C],O=r.pathLeft,S=r.pathTop,L=E?bezierGetPoint(M,E,g._left(A),g._top(A)):M,D=O+L.x-R._matrix._rotateCenterX,$=S+L.y-R._matrix._rotateCenterY;R._matrix._rawLeft=D,R._matrix._rawTop=$}R._matrix._calMatrixFormRaw(),w==="Step.EaseIn"?f===m?a.addKeyframe(m,R,AniDataUtils.getTransformObjFromParam(p,e)):a.addKeyframe(m,R):(w==="Step.EaseOut"&&f===m&&(a._refTrans[v]=AniDataUtils.getTransformObjFromParam(p,e)),a.addKeyframe(m,R))}}else{w=d.tween||"Linear.EaseNone";var R=AniDataUtils.getTransformObjFromParam(p,e);for(e._transform._paramTransform&&(R._paramTransform=e._transform._paramTransform._clone()),m=f+n;m<=c+n;m++)w==="Step.EaseIn"&&f===m?a.addKeyframe(m,R,AniDataUtils.getTransformObjFromParam(p,e)):a.addKeyframe(m,R)}}),n!==0&&(a._max-=n)},expressLayers=function(e,t,r){var a=this,n=e.length,o,s,l,_=[],c=t,d=!1;for(o=n-1;o>=0;o--)if(s=e[o],s.type!="folder"){l=s.maskMode;var u=s.units;u.forEach(function(f){var p=f.frameStart+t,v=f.frameCount,h=p+v-1;c=Math.max(h+1,c);var g=f.objects,w=f.keyframes,y=f.pg||!1,x=a._frames,m=a._objectFrames,A=f.audioId,T=f.audio;if(A||T){var b=a,C=r.symbols[A];if(C===null&&T&&(C=createAudioData({url:T})),C!=null){var M=new C(b);for(M._loop=!0,L=p;L<=h;L++){var E=x[L]=x[L]||new displayListInfo;E.addObjectAndTransition(M)}}}var O="";if(w&&w.length&&w.forEach(function(P){if(O=O||P.param.url,P.name){var F=P.name,N=F.indexOf("_")+1;F=F.substr(N);var j=new FrameLabel;j._name=F,j._frame=P.id,a._scenes[a._scenes.length-1]._labels.push(j)}}),g.length!==0){for(var S=[],L=p;L<=h;L++)x[L]=x[L]||new displayListInfo;g.forEach(function(P){for(var F=r.movieClipStack||[],N="",j=0;j<F.length;j++){var U=F[j].param.name;U&&(N+=U+"/")}var J=N+P.param.name,B=J?dataConverter._queryArgs["m_"+J]:null;if(!B){for(var W="",j=0;j<F.length;j++){var G=F[j].guid;G&&(W+=G+"_")}B=dataConverter._queryArgs["m_"+W+P.guid],!B&&W&&(B=dataConverter._queryArgs["m_"+P.guid])}B&&(P.param.customValue=B);var q=aniDataObjectToDisplayObjectClass(P,r);if(q){P.type==2021&&r.movieClipStack.push(P);try{var X=window.parent.mugedaEntryPage||0}catch{X=0}var Y=!!a._aniData.activePageId,K=a._aniData.guid,ne=p===0&&(!Y||!X||X==K),Z=new q(a,ne);if(Z._visible=ne,P.type==2021&&r.movieClipStack.pop(),Z._aniData=P,P.param.action=="link"&&!P.param.url&&O&&(P.param.url=O),P.param.talwayson=="yes"){for(var k=Z;k&&!k._renderManager;)k=k.parent;k&&(k._renderManager._globalRenderedObjectList[Z._id]=Z)}if(setParamToDisplayObject(P,Z,r,null),S.push(Z),l==MaskType.MaskSource?(_.forEach(function(ee){ee._maskByList.push(Z)}),Z._maskToList=_):l==MaskType.MaskAim&&(Z._maskByList=[]),Z.parent===a)for(var V=p;V<=h;V++){var re=x[V];re.addObjectAndTransition(Z)}if(y){var H=f.id;Z._unitId=H,Z._hasProgress=!!y,a._progressAnimationGroup[H]||(a._progressAnimationGroup[H]=[]),a._progressAnimationGroup[H].push(Z),Z._initProcessAnimation()}}}),l==MaskType.MaskAim?(d&&(_=[],d=!1),_=_.concat(S)):l==MaskType.MaskSource&&(d=!0);var D=S[0];if(D&&w&&w.length>=2){D._haveAnimation=!0;var $=D._aniData.curve.points.length>0&&w[0].param.curve,R=D._aniData.type===2010;if($){D._hasShapeAnimation=!0;var I=m[D._id]=new KeyframeInfo;parseCurveShapeKeyframes(D,t,f,I)}else R?(D._hasShapeAnimation=!0,I=m[D._id]=new KeyframeInfo,parseTextShapeKeyframes(D,t,f,I)):(x=a._frames,m=a._objectFrames,I=m[D._id]=new KeyframeInfo,parseKeyframes(D,t,f,I))}(w&&w.length===1||D&&!D._haveAnimation)&&S.forEach(function(P){var F=P._transform;[p,h].forEach(function(N){m[P._id]=m[P._id]||new KeyframeInfo,m[P._id].addKeyframe(N,F)})})}})}return c==t?{totalFrames:1}:{totalFrames:c-t}},bezierGetPoint=function(e,t,r,a){a=a??r;var n=1-r,o=1-a,s=e.nodeX,l=e.nodeY,_=e.forwardX,c=e.forwardY,d=t.backwardX,u=t.backwardY,f=t.nodeX,p=t.nodeY,v=bezierInterpolate(r,n,s,_,d,f),h=bezierInterpolate(a,o,l,c,u,p);return{x:v,y:h}},bezierInterpolate=function(e,t,r,a,n,o){var s=Math.pow(t,3)*r+3*Math.pow(t,2)*e*a+3*t*Math.pow(e,2)*n+Math.pow(e,3)*o;return s};mod.exportName(dataConverter,["parseAnidata",dataConverter.parseAnidata,"aniDataObjectToDisplayObjectClass",dataConverter.aniDataObjectToDisplayObjectClass,"setParamToDisplayObject",dataConverter.setParamToDisplayObject]),mod.namespace("Utils.DataConverter",dataConverter);var MugedaAPIEvent=function(){var e=this;e.event={}},proto$4=MugedaAPIEvent.prototype,systemMouseEvent=1,myMouseEvent=2,domMouseEvent={mousedown:systemMouseEvent,mouseup:systemMouseEvent,click:systemMouseEvent,dblclick:systemMouseEvent,mouseover:systemMouseEvent,mouseout:systemMouseEvent,mousemove:systemMouseEvent,touchstart:systemMouseEvent,touchmove:systemMouseEvent,touchend:systemMouseEvent,pointerdown:systemMouseEvent,pointermove:systemMouseEvent,pointerup:systemMouseEvent,inputstart:myMouseEvent,inputmove:myMouseEvent,inputend:myMouseEvent};proto$4._addEventListener=function(e,t,r){if(e=e.toLowerCase(),e==="inputstart"?e=Browser$1.InputStart:e==="inputmove"?e=Browser$1.InputMove:e==="inputend"&&(e=Browser$1.InputEnd),domMouseEvent[e]==systemMouseEvent&&(this._displayObject||this._movieClip)){var a=this,n={fun:t,dir:function(o){var s=o._getSystemEvent();s.inputX==null&&(Object.defineProperty(s,"inputX",{get:function(){return o._getInputX()},configurable:!0}),Object.defineProperty(s,"inputY",{get:function(){return o._getInputY()},configurable:!0}),s.stopPropagation=o.stopPropagation.bind(o),s.stopImmediatePropagation=o.stopImmediatePropagation.bind(o),s.preventDefault=o._preventDefault.bind(o)),t.call(a,s)}};this.event[e]?this.event[e].push(n):this.event[e]=[n],(this._displayObject||this._movieClip)._addEventListener(e,n.dir,r||!1)}else this.event[e]?this.event[e].push(t):this.event[e]=[t];return this},proto$4._removeEventListener=function(e,t,r){if(e=e.toLowerCase(),e=="inputstart"?e=Browser$1.InputStart:e=="inputmove"?e=Browser$1.InputMove:e=="inputend"&&(e=Browser$1.InputEnd),domMouseEvent[e]==systemMouseEvent&&this.dom){if(this.event[e]){for(var a=this.event[e].length-1;a>=0;a--)this.event[e][a].fun&&this.event[e][a].fun==t&&(this.dom.removeEventListener(e,this.event[e][a].dir,r||!1),this.event[e].splice(a,1));this.event[e].length==0&&delete this.event[e]}}else if(this.event[e]){for(a=this.event[e].length-1;a>=0;a--)this.event[e][a]==t&&this.event[e].splice(a,1);this.event[e].length==0&&delete this.event[e]}return this},proto$4._callEvent=function(e,t,r,a,n){var o=[];if(this.event[e]){for(var s=[],l=0;l<this.event[e].length;l++)s[l]=this.event[e][l];for(l=0;l<s.length;l++)try{o.push(s[l].call(this,t,r,a,n))}catch(_){console.error("😨Event callback failed: ",_)}}return o},proto$4._setCapture=function(){},proto$4._releaseCapture=function(){},mod.exportName(proto$4,["addEventListener",proto$4._addEventListener,"removeEventListener",proto$4._removeEventListener,"setCapture",proto$4._setCapture,"releaseCapture",proto$4._releaseCapture]);var MugedaAPIAObject=function(e,t){var r=this;if(r._id=null,r._rotateCenterX=null,r._rotateCenterY=null,r._slaveActivated=!1,r._scene=e.scene,r._currentScene=e.currentScene,MugedaAPIAObject.__super__.constructor.apply(r,arguments),e.guid){r._data=e;var a=t||dataConverter._prevContext,n=r._data,o=dataConverter.aniDataObjectToDisplayObjectClass(n,a),s=new o;s._haveAnimation=!0,r._id=s._id,r._displayObject=s,dataConverter.setParamToDisplayObject(n,s,a)}else if(r._mugeda=e.mugeda,r._id=e.id,r._displayObject=e.displayObject,e.currentScene&&e.mugeda&&e.displayObject){var n=r._displayObject._aniData||{},l=n.binds||{},_=e.mugeda;e.currentScene;var c=_.renderManger;Object.keys(l).length&&(c._toBeControlledObjectPendingHash[e.displayObject._id]=e.displayObject)}r._displayObject._eventHandler=r,mod.definePropertyReadOnly(r,["id",proto$3._getId,"data",proto$3._getData,"realDom",proto$3._getRealDom,"name",proto$3._getName,"link",proto$3._getLink,"scene",proto$3._getScene,"currentScene",proto$3._getCurrentScene,"mugeda",proto$3._getMugeda,"getRealVisible",proto$3._getRealVisible,"thisAni",proto$3._getMugeda,"parent",proto$3._getParent,"audio",proto$3._getAudio,"video",proto$3._getVideo,"displayObject",proto$3._getDisplayObject]),mod.definePropertyGetSet(r,["dom",proto$3._getDom,proto$3._setDom,"width",proto$3._getWidth,proto$3._setWidth,"height",proto$3._getHeight,proto$3._setHeight,"rotate",proto$3._getRotate,proto$3._setRotate,"visible",proto$3._getVisible,proto$3._setVisible,"alpha",proto$3._getAlpha,proto$3._setAlpha,"pers",proto$3._getPerspective,proto$3._setPerspective,"x",proto$3._getX,proto$3._setX,"left",proto$3._getLeft,proto$3._setLeft,"top",proto$3._getTop,proto$3._setTop,"rotateCenterX",proto$3._getRotateCenterX,proto$3._setRotateCenterX,"scaleX",proto$3._getScaleX,proto$3._setScaleX,"rotateX",proto$3._getRotateX,proto$3._setRotateX,"y",proto$3._getY,proto$3._setY,"right",proto$3._getRight,proto$3._setRight,"bottom",proto$3._getBottom,proto$3._setBottom,"rotateCenterY",proto$3._getRotateCenterY,proto$3._setRotateCenterY,"scaleY",proto$3._getScaleY,proto$3._setScaleY,"rotateY",proto$3._getRotateY,proto$3._setRotateY,"url",proto$3._getUrl,proto$3._setUrl,"scrollSpeed",proto$3._getScrollSpeed,proto$3._setScrollSpeed,"text",r._getText,r._setText,"background",r._getBackground,r._setBackground,"border",r._getBorderColor,r._setBorderColor]),r._displayObject._bindUserAPI(r),mod.definePropertyGetSet(r,["src",proto$3._getSrc,proto$3._setSrc]),r._fakeImage=null};mod.extend(MugedaAPIAObject,MugedaAPIEvent);var proto$3=MugedaAPIAObject.prototype;proto$3._getMugeda=function(){return this._mugeda},proto$3._getDisplayObject=function(){return this._displayObject},proto$3._getParent=function(){var e=this._displayObject,t=e._getStage(),r=t._renderManager,a=r._mugeda,n=e.parent||{},o=a._displayObjectHash[n._id];return o||(o=a.scene),o},proto$3._getCurrentScene=function(){return this._currentScene||null},proto$3._getScene=function(){return this._scene||null},proto$3._getLink=function(){return this._displayObject._link},proto$3._getAlpha=function(){return this._displayObject._getAlpha()},proto$3._setAlpha=function(e){this._displayObject._setAlpha(e)},proto$3._getRotate=function(){var e=this._displayObject._transform._matrix._rawSita;return e},proto$3._getRotateX=function(){var e=this._displayObject._transform._matrix._rawRotate3dX;return e},proto$3._getRotateY=function(){var e=this._displayObject._transform._matrix._rawRotate3dY;return e},proto$3._getPerspective=function(){var e=this._displayObject._transform._matrix._pers;return e},proto$3._setRotate=function(e){this._recalculateTransform({rawSita:e})},proto$3._setPerspective=function(e){this._recalculateTransform({pers:e})},proto$3._setRotateX=function(e){this._recalculateTransform({rawRotate3dX:e})},proto$3._setRotateY=function(e){this._recalculateTransform({rawRotate3dY:e})},proto$3._recalculateTransform=function(e){e=e||{};for(var t in e)e.hasOwnProperty(t)&&(e[t]=parseFloat(e[t]));var r=this,a=r._displayObject,n=a._transform._clone(),o=n._matrix;o._reset();var s=a._rawWidth,l=a._rawHeight;e.width!==void 0&&(o._rawScaleX=e.width/s),e.height!==void 0&&(o._rawScaleY=e.height/l),e.rawSita!==void 0&&(o._rawSita=e.rawSita),e.rawLeft!==void 0&&(o._rawLeft=e.rawLeft),e.rawTop!==void 0&&(o._rawTop=e.rawTop),e.rotateCenterX!==void 0&&(o._rotateCenterX=e.rotateCenterX),e.rotateCenterY!==void 0&&(o._rotateCenterY=e.rotateCenterY),e.rawRotate3dX!==void 0&&(o._rawRotate3dX=e.rawRotate3dX),e.rawRotate3dY!==void 0&&(o._rawRotate3dY=e.rawRotate3dY),e.pers!==void 0&&(o._pers=e.pers),o._calMatrixFormRaw(),a._setTransform(n)},proto$3._getScaleX=function(){return this._displayObject._getScaleX()},proto$3._setScaleX=function(e){this._displayObject._width=this._displayObject._rawWidth*e,this._recalculateTransform({width:this._displayObject._width})},proto$3._getScaleY=function(){return this._displayObject._getScaleY()},proto$3._setScaleY=function(e){this._displayObject._height=this._displayObject._rawHeight*e,this._recalculateTransform({height:this._displayObject._height})},proto$3._getRotateCenterX=function(){return this._displayObject._transform._matrix._rotateCenterX},proto$3._setRotateCenterX=function(e){this._recalculateTransform({rotateCenterX:e})},proto$3._getRotateCenterY=function(){return this._displayObject._transform._matrix._rotateCenterY},proto$3._setRotateCenterY=function(e){this._recalculateTransform({rotateCenterY:e})},proto$3._getX=function(){var e=this;return e._getLeft()+e._getRotateCenterX()*e._getScaleX()},proto$3._getY=function(){var e=this;return e._getTop()+e._getRotateCenterY()*e._getScaleY()},proto$3._setX=function(e){var t=this,r=e-t._getRotateCenterX()*t._getScaleX();t._setLeft(r)},proto$3._setY=function(e){var t=this,r=e-t._getRotateCenterY()*t._getScaleY();t._setTop(r)},proto$3._getRawWidth=function(){return this._displayObject._rawWidth},proto$3._getRawHeight=function(){return this._displayObject._rawHeight},proto$3._getId=function(){return this._id},proto$3._setDom=function(e){var t=this._displayObject,r=t._getRenderObject();r._setNode(e)},proto$3._getDom=function(){var e=this,t=this._displayObject;{var r=t._getRenderObject();if(r)return r.getNode();if(renderManager._insertDisplayObject.call(e._mugeda._renderManager,t),r=t._getRenderObject(),r)return r.getNode()}},proto$3._getRealVisible=function(){return this._displayObject._getRealVisible()},proto$3._getData=function(){return this._displayObject._aniData},proto$3._getWidth=function(){return this._displayObject._getWidth()},proto$3._setWidth=function(e){this._displayObject._setWidth(e),this._recalculateTransform({})},proto$3._getHeight=function(){return this._displayObject._getHeight()},proto$3._setHeight=function(e){this._displayObject._setHeight(e),this._recalculateTransform({})},proto$3._getLeft=function(){return this._displayObject._transform._matrix._rawLeft},proto$3._setLeft=function(e){this._recalculateTransform({rawLeft:e})},proto$3._getRight=function(){var e=this;return e._getLeft()+e._getWidth()},proto$3._setRight=function(e){var t=this,r=e-t._getWidth();t._setLeft(r)},proto$3._getTop=function(){return this._displayObject._transform._matrix._rawTop},proto$3._setTop=function(e){this._recalculateTransform({rawTop:e})},proto$3._getBottom=function(){var e=this;return e._getTop()+e._getHeight()},proto$3._setBottom=function(e){var t=this,r=e-t._getHeight();t._setTop(r)},proto$3._getSrc=function(){var e=this,t=e._displayObject;if(t._audioObject!==void 0)return this._getAudio();if(t._getBitmapData){var r=t._getBitmapData&&t._getBitmapData();if(r)return r._src}else return this._getText()},proto$3._setSrc=function(e){var t=this,r=t._displayObject;if(e!==void 0&&e!=t._getSrc()){if(r._audioObject){r._audioObject._setAudioSrc(e);return}else if(!r._setBitmapData){this._setText(e);return}if(!e)return r._setBitmapData();var a=function(){r._bitmapData._src===e&&r._setBitmapData(n)},n=t._mugeda._stage._getBitmapData(e),o=n._loader._contentLoaderInfo;o._state===LoaderInfo.STATE.LOADED?r._setBitmapData(n):o._state===LoaderInfo.STATE.LOAD?(r._setBitmapData(n),o._addEventListenerOnce("complete",a),o._addEventListenerOnce("ioError",a)):(n._load(),r._setBitmapData(n),o._addEventListenerOnce("complete",a),o._addEventListenerOnce("ioError",a))}},proto$3._getName=function(){return this._displayObject._getName()},proto$3._setVisible=function(e){this._displayObject._setVisible(e,1)},proto$3._getVisible=function(){return this._displayObject._getVisible()},proto$3._getUrl=function(){return this._displayObject._getUrl()},proto$3._setUrl=function(e){this._displayObject._setUrl(e)},proto$3._getScrollSpeed=function(){return this._displayObject._getScrollSpeed?this._displayObject._getScrollSpeed():null},proto$3._setScrollSpeed=function(e){this._displayObject._setScrollSpeed&&this._displayObject._setScrollSpeed(e)},proto$3._getRealDom=function(){this._displayObject._id;var e=this._displayObject._getRenderObject();return e._node},proto$3._clone=function(){var e=this,t=e._displayObject,r=t._aniData,a=t.constructor,n=new a;n._aniData=JSON.parse(JSON.stringify(r)),n._haveAnimation=!0;var o=Plugin._getUserDisplayObject(t._aniData&&t._aniData.type);if(o&&o._createAObject)var s=o._createAObject(),l=new s({displayObject:n,id:n._guid,mugeda:e._mugeda});else if(a._createAObject)var s=a._createAObject(),l=new s({displayObject:n,id:n._guid,mugeda:e._mugeda});else var l=new MugedaAPIAObject({displayObject:n,id:n._guid,mugeda:e._mugeda});var _=e._mugeda._context;return dataConverter.setParamToDisplayObject(r,n,_,{guid:Mugeda.guidGen()}),l},proto$3._getAudio=function(){var e=this,t=e._displayObject,r=t._getRenderObject();if(r._audioObjectInstance)return r._audioObjectInstance._audio},proto$3._getVideo=function(){var e=this,t=e._displayObject,r=t._getRenderObject();return r._currentVideoDom};var attributeList=["dom","width","height","rotate","visible","text","alpha","x","left","top","rotateCenterX","scaleX","y","right","bottom","rotateCenterY","scaleY"];proto$3._setAttribute=function(e,t){var r=this;if(attributeList[e]){var a="_set"+e.substr(0,1).toUpperCase()+e.substr(1);return r[a](t)}else return r._displayObject._setAttribute(e,t)},proto$3._getAttribute=function(e){var t=this;if(attributeList[e]){var r="_get"+e.substr(0,1).toUpperCase()+e.substr(1);return t[r]()}else return t._displayObject._getAttribute(e)},proto$3._getObject=function(e){var t=this;return t._displayObject._getObject(e)},proto$3._setText=function(e){this._displayObject._setText&&(this._displayObject._setText(e),this._displayObject._initialText=e)},proto$3._getText=function(e){return this._displayObject._getText?this._displayObject._getText(e):""},proto$3._getBackground=function(){var e=this._displayObject._getFillStyle();return e._getCssText()},proto$3._setBackground=function(e){var t=Color.parse(e);this._displayObject._setFillStyle(t)},proto$3._getBorderColor=function(){var e=this._displayObject._getLineStyle();return e._getCssText()},proto$3._setBorderColor=function(e){var t=Color.parse(e);this._displayObject._setLineStyle(t)},mod.exportName(proto$3,["clone",proto$3._clone,"setAttribute",proto$3._setAttribute,"getAttribute",proto$3._getAttribute,"getObject",proto$3._getObject]);var MugedaCss3=Browser$1._globalObject.MugedaCss3=Browser$1._globalObject.MugedaCss3||{};MugedaCss3.aObject=MugedaAPIAObject,mod.namespace("Utils.mugedaAPIAObject",MugedaAPIAObject);var MugedaAPIGroup=function(e){var t=this;MugedaAPIGroup.__super__.constructor.apply(t,arguments)};mod.extend(MugedaAPIGroup,MugedaAPIAObject),MugedaAPIGroup.prototype;var MugedaAPIScene=function(e){var t=this;MugedaAPIScene.__super__.constructor.apply(t,arguments),t._mugeda=e.mugeda;var r=t._movieClip=e.movieClip;t._objectHash={},t._id=e.id,r&&(t._symbolId=(r._aniData.param||{}).symbolId||null),t._parentAObject=e.parentAObject,t.segment={},t.currentSegment=null,t.enterframeCallback=null,t.beforeEnterframeCallback=null,t.frameout=[],mod.definePropertyReadOnly(t,["objectHash",proto$2._getObjectHash,"pages",proto$2._getPages,"data",proto$2._getData,"pageNum",proto$2._getPageNum,"currentId",proto$2._getCurrentId,"currentSceneId",proto$2._getCurrentSceneId,"currentDecimalId",proto$2._getCurrentDecId,"thisAni",proto$2._getThisAni,"currentPageIndex",proto$2._getCurrentPageIndex,"pageDom",proto$2._getPageDom,"dom",proto$2._getDom,"isSymbol",proto$2._isSymbol,"parentScene",proto$2._getParentScene,"id",proto$2._getId,"playing",proto$2._getPlaying,"object",proto$2._getParentAObject]);var a=t._mugeda.renderManger,n=t._mugeda._aniData;n.binds&&Object.keys(n.binds).length&&(a._toBeControlledObjectPendingHash[r._id]=r),n.pages&&n.pages.length&&n.pages.forEach(function(s){s.binds&&Object.keys(s.binds).length&&(a._toBeControlledObjectPendingHash[s.guid]||(a._toBeControlledObjectPendingHash[s.guid]={movieClip:r,binds:s.binds}))});var o="enterframe";r._addEventListener(o,function(s){t._callEvent(o,t)})};mod.extend(MugedaAPIScene,MugedaAPIEvent);var proto$2=MugedaAPIScene.prototype;proto$2._getParentAObject=function(){return this._parentAObject},proto$2._getPlaying=function(){var e=this._movieClip;return!e._paused},proto$2._getId=function(){return this._id},proto$2._getParentScene=function(){var e=this._movieClip._getRenderObject(),t=e._parentMovieClipRenderObject;if(t==null)return null;var r=t._displayObject,a=r._id,n=this._mugeda._displayObjectHash[a];return n},proto$2._isSymbol=function(){return this._movieClip.parent.parent!=null},proto$2._getDom=function(){return this._movieClip._getRenderObject().getNode()},proto$2._getPageDom=function(){return this._getDom().querySelectorAll("[data-type=scene]")},proto$2._getData=function(){return this._movieClip._aniData},proto$2._getThisAni=function(){return this._mugeda},proto$2._getPageNum=function(){return this._movieClip._scenes.length},proto$2._getCurrentId=function(){return this._movieClip._currentFrame},proto$2._getCurrentSceneId=function(){return this._movieClip._currentSceneFrame},proto$2._getCurrentDecId=function(){return this._movieClip._currentFrameDecimal},proto$2._getCurrentPageIndex=function(){return this._movieClip._getSceneIndexByFrameNum(this._movieClip._currentFrame)},proto$2._getPages=function(){var e=this;return e._movieClip._scenes},proto$2._getAllDisplayObjectFromDisplayObjectContainer=function(e,t){var r=this;return t||(t=[]),e.children&&(t=t.concat(e.children),e.children.forEach(function(a){t=r._getAllDisplayObjectFromDisplayObjectContainer(a,t)})),t},proto$2.getObjectByName=function(e,t){var r=this,a=r._movieClip;if(e==null)return null;if(e=e.toString(),t=="prefix"){var n=r._getAllDisplayObjectFromDisplayObjectContainer(a),o=[];if(n)for(var s=0;s<n.length;s++){var l=n[s]._name;if(l&&l.substring(0,e.length)==e){var _=getObjectByName(a,l);o.push(_)}}return o}else if(t=="prefix2"){var n=r._getAllDisplayObjectFromDisplayObjectContainer(a),o=[];if(n){for(var s=0;s<n.length;s++){var l=n[s]._name;if(l&&l.substring(0,e.length)==e&&/\d+/.test(l.substring(e.length))){var _=getObjectByName(a,l);o.push(_)}}o.sort(function(g,w){return g._getName().substring(e.length)*1-w._getName().substring(e.length)*1})}return o}else if(t=="name_name"){for(var c=e.split("_"),d=r,s=0;s<c.length;s++){if(d==null)return null;var _=d.getObjectByName(c[s],s===c.length-1?"displayObject":null);if(_==null)return null;_._getScene?d=_._getScene():d=null}return _}else{var u=getObjectByName(a,e);if(u==null)return null;if(u instanceof DisplayObject){if(t=t||"",t.toLowerCase()=="displayobject")return u;var f=u._id,p=r._mugeda._displayObjectHash[f];return p||u}else return u}},proto$2.getObjectById=function(e,t){var r=this,a=r.getDisplayObjectById(e,t);if(a)var n=r._mugeda._displayObjectHash[a._id];return n},proto$2._getDisplayObjectById=function(e,t){var r=this,a=r._movieClip._getDisplayObjectById(e,t);return a};var getObjectByName=function(e,t){var r=e.getChildByName(t);if(r)return r instanceof AudioData?r._audio:r;var a,n=e.children.length;for(a=0;a<n;a++){var o=e.children[a];if(o instanceof Sprite&&!(o instanceof MovieClip)){var s=getObjectByName(o,t);if(s)return s}}};proto$2._getObjectHash=function(){return this._objectHash},proto$2._setSegment=function(e,t,r,a){var n=this;return n.segment[e]={from:Math.min(t,n._movieClip._totalFrames-1),to:Math.min(r,n._movieClip._totalFrames-1),isLoop:a},this},proto$2._playSegment=function(e){var t=this;return(t.currentSegment=t.segment[e])&&t._movieClip.gotoAndPlay(t.currentSegment.from,null,30),setupBeforeEnterframe.call(t),this};var setupEnterframe=function(){var e=this;e.enterframeCallback==null&&(e.enterframeCallback=function(){for(var t=e;t.frameout.length&&t.frameout[0].time<=0;){var r=t.frameout[0].fun;t.frameout.splice(0,1),r.call(t)}t.frameout.length&&(t.frameout[0].time-=t._mugeda._getDeltaFrame())},e._addEventListener("enterframe",e.enterframeCallback))},setupBeforeEnterframe=function(){var e=this;e.beforeEnterframeCallback==null&&(e.beforeEnterframeCallback=function(){e.currentSegment&&e._movieClip._aimFrameDec<e.currentSegment.from?e.currentSegment.from===e.currentSegment.to?e._movieClip.gotoAndStop(e.currentSegment.from,null,25):e._movieClip.gotoAndPlay(e.currentSegment.from,null,25):e.currentSegment&&e._movieClip._aimFrameDec>=e.currentSegment.to&&(e.currentSegment.isLoop?e._movieClip.gotoAndPlay(e.currentSegment.from,null,25):e._movieClip.gotoAndStop(e.currentSegment.to,null,25))},e._movieClip._addEventListener("beforeenterframe",e.beforeEnterframeCallback))},_getObjectHash=function(e,t,r,a){var n,o=e.children.length,s=this;for(a&&(o=1),n=0;n<o;n++){if(a){var l=a;_=a._displayObject}else var _=e.children[n];_._guid||(_._guid=Mugeda.guidGen());var c=null;if(_ instanceof Sprite&&!(_ instanceof MovieClip)){var d=l||new MugedaAPIGroup({displayObject:_,id:_._guid,mugeda:s._mugeda,currentScene:s});_getObjectHash.bind(s)(_,t,r)}else if(_ instanceof MovieClip){c=new MugedaAPIScene({movieClip:_,id:_._guid,mugeda:s._mugeda});var d=l||new MugedaAPIAObject({displayObject:_,id:_._guid,mugeda:s._mugeda,scene:c,currentScene:s});c._parentAObject=d,c._buildAPINet()}else{var u=Plugin._getUserDisplayObject(_._aniData&&_._aniData.type);if(u&&u._createAObject)var f=u._createAObject(),d=l||new f({displayObject:_,id:_._guid,mugeda:s._mugeda,currentScene:s});else if(_.constructor._createAObject)var f=_.constructor._createAObject(),d=new f({displayObject:_,id:_._guid,mugeda:s._mugeda,currentScene:s});else var d=l||new MugedaAPIAObject({displayObject:_,id:_._guid,mugeda:s._mugeda,currentScene:s})}d._scene=c,d._currentScene=s,t[_._guid]=d,r[_._id]=d}return t};proto$2._buildAPINet=function(e){var t=this,r=t._objectHash,a=t._mugeda._displayObjectHash,n=t._movieClip;_getObjectHash.bind(t)(n,r,a,e)},proto$2._appendChild=function(e,t,r){var a=this;a._mugeda._resource,e._mugeda=a._mugeda;var n=e._displayObject,o=a._movieClip,s=o._objectFrames;if(t){var l=t._displayObject,_=o.getChildIndex(l);if(_==-1)throw"behind object is not belong to scene";o.addChildAt(n,_);var c=o._getObjectSceneIndex(l)}else if(r!=null){r==-1&&(r=1/0);for(var d=o.children,u=d.length,f=0;f<u;f++){var p=d[f],v=o._getObjectSceneIndex(p);if(v>r)var h=f}h==null?o.addChild(n):o.addChildAt(n,h),c=r}else o.addChild(n),c=0;var g=new KeyframeInfo;if(c!=1/0){var w=o._scenes[c];g._min=w._startFrame,g._max=w._startFrame+w._numFrames-1}else g._min=0,g._max=o._totalFrames-1;s[n._id]=g,a._mugeda._displayObjectHash[n._id]=n,n._guid||(n._guid=Mugeda.guidGen()),a._objectHash[n._guid]=e;var y=function(x,m){m(x);var A=x.children;if(A!=null)for(var T=A.length,b=0;b<T;b++){var x=A[b];y(x,m)}};a._buildAPINet(e),y(n,function(x){if(x instanceof Bitmap){var m=a._mugeda._displayObjectHash[x._id];m._setSrc(x._bitmapData._src)}})},proto$2._removeChild=function(e){var t=this,r=e._displayObject;r.parent.removeChild(r),delete t._objectHash[r._guid],delete t._mugeda._displayObjectHash[r._id]},proto$2._play=function(){var e=this;return e.currentSegment=null,e._movieClip.play(30)},proto$2._pause=function(){var e=this;return e.currentSegment=null,e._movieClip.stop(30)};var getPageScene=function(e,t){return e._scenes[t]};proto$2._gotoAndPlay=function(e,t){var r=this;return r.currentSegment=null,r._movieClip.gotoAndPlay(e,getPageScene(r._movieClip,t),30)},proto$2._gotoAndPause=function(e,t){var r=this;return r.currentSegment=null,r._movieClip.gotoAndStop(e,getPageScene(r._movieClip,t),30)},proto$2._gotoPage=function(e,t){return this._movieClip.gotoPage(e,t)},proto$2._nextPage=function(){var e=this;return e._movieClip.gotoPage(e._getCurrentPageIndex()+1)},proto$2._prevPage=function(){var e=this;return e._movieClip.gotoPage(e._getCurrentPageIndex()-1)},proto$2._setFrameout=function(e,t){for(var r=this.frameout.length,a=0,n=0;n<this.frameout.length;n++){var o=this.frameout[n];if(a+o.time>e){r=n;break}a+=o.time}return this.frameout.splice(r,0,{time:e-a,fun:t}),setupEnterframe.call(this),this},proto$2._getFrameIdByName=function(e){return this._movieClip._getFrame(e,null)},mod.exportName(proto$2,["getObjectByName",proto$2.getObjectByName,"getObjectById",proto$2.getObjectById,"getDisplayObjectById",proto$2._getDisplayObjectById,"appendChild",proto$2._appendChild,"removeChild",proto$2._removeChild,"play",proto$2._play,"pause",proto$2._pause,"gotoAndPlay",proto$2._gotoAndPlay,"gotoAndPause",proto$2._gotoAndPause,"gotoPage",proto$2._gotoPage,"nextPage",proto$2._nextPage,"prevPage",proto$2._prevPage,"setSegment",proto$2._setSegment,"playSegment",proto$2._playSegment,"setFrameout",proto$2._setFrameout,"getFrameidByName",proto$2._getFrameIdByName,"getFrameIdByName",proto$2._getFrameIdByName]);var MugedaAPIThisAni=function(e){var t=this;MugedaAPIThisAni.__super__.constructor.apply(t,arguments);var r=t._stage=e.stage;t._aniData=e.aniData,t._scene=null,t._context=null,t._callbacks={},t._renderManager=null,t._displayObjectHash={},t._autoProgressDisabled=!1,mod.definePropertyReadOnly(t,["aniData",proto$1._getAniData,"title",proto$1._getTitle,"width",proto$1._getStageWidth,"height",proto$1._getStageHeight,"rate",proto$1._getStageRate,"dom",proto$1._getStageDom,"scene",proto$1._getScene,"frameTime",proto$1._getFrameTime,"deltaFrame",proto$1._getDeltaFrame,"totalRenderedFrame",proto$1._getTotalFrame,"adaption",proto$1._getAdaption,"renderManager",proto$1._getRenderManager,"root",proto$1._getRoot]),["domready","renderready","scriptready","beforeload","loadprogress","click"].forEach(function(a){r._addEventListener(a,function(n){a==="renderready"&&(t.loadProcess="loaded"),a==="domready"?t._callEvent("imageready",n):t._callEvent(a,n)})})};mod.extend(MugedaAPIThisAni,MugedaAPIEvent);var proto$1=MugedaAPIThisAni.prototype;proto$1._defineCallback=function(e,t){var r=this;r._callbacks[e]=t},proto$1._getCallback=function(e){var t=this;return t._callbacks[e]&&t._callbacks[e]instanceof Function?t._callbacks[e]:null},proto$1._enable3DRendering=function(e){Browser$1.enable3DRendering=e},proto$1._registerScrollableObject=function(e){var t=this;t._renderManager._scrollableObjectList.push(e.dom)},proto$1._disableAutoProgress=function(e){var t=this;t._autoProgressDisabled=e},proto$1._getRoot=function(){return this._stage},proto$1._getRenderManager=function(){return this._renderManager},proto$1._getAdaption=function(){var e=this._stage,t=e._fullScreenRect;return{marginLeft:-t._left,marginRight:t._left+t._width-e._stageWidth,marginTop:-t._top,marginBottom:t._top+t._height-e._stageHeight,width:t._width,height:t._height}},proto$1._getDeltaFrame=function(){var e=this._stage;return e._deltaFrame},proto$1._getTotalFrame=function(){var e=this._stage;return e._totolFrame},proto$1._getScene=function(){return this._scene},proto$1._getStageDom=function(){var e=this._stage;e._id;var t=e._getRenderObject();return t._node},proto$1._getStageWidth=function(){var e=this._stage;return e._stageWidth},proto$1._getStageHeight=function(){var e=this._stage;return e._stageHeight},proto$1._getStageRate=function(){var e=this._stage;return e._frameRate},proto$1._getFrameTime=function(){var e=this._stage;return 1e3/e._frameRate},proto$1._getAniData=function(){return this._aniData},proto$1._getTitle=function(){return this._aniData.title},proto$1._buildAPINet=function(e){var t=this,r=e.children[0],a=t._scene=new MugedaAPIScene({movieClip:r,mugeda:t,id:"_main"});Browser$1._globalObject.Mugeda.scene=t,a._buildAPINet()},proto$1._createInstanceOfSymbol=function(e,t){var r=this,a=r._context,n=a.symbols;for(var o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s._name==e){var l=new s;l._haveAnimation=!0;var _=new MugedaAPIAObject({displayObject:l,id:l._guid,mugeda:r._mugeda}),c=s._aniData,d=99999999,u=-d,f=d,p=-d;c.layers.forEach(function(h,g){h.units.forEach(function(w,y){w.objects.forEach(function(x,m){var A=x.param;d=Math.min(d,A.left),u=Math.max(u,A.right),f=Math.min(f,A.top),p=Math.max(p,A.bottom)})})}),c.bound={left:d,right:u,top:f,bottom:p,width:u-d,height:p-f};var v={param:{name:t||"",guid:Mugeda.guidGen(),rotate:0,left:0,top:0,width:c.bound.width,height:c.bound.height,offsetX:(c.bound.left+c.bound.right-c.cw-c.bound.width)/2,offsetY:(c.bound.top+c.bound.bottom-c.ch-c.bound.height)/2}};return dataConverter.setParamToDisplayObject(v,l,a),_}}},proto$1._loadImage=function(e,t){{var r=t.url;this._renderManager._additionImageList.push(r)}},proto$1._log=function(e,t){Browser$1._globalObject.Mugeda.log(e,t)},proto$1._mute=function(e){e=e!==!1,this._renderManager._mute(e)},mod.exportName(proto$1,["getScene",proto$1._getScene,"createInstanceOfSymbol",proto$1._createInstanceOfSymbol,"enable3DRendering",proto$1._enable3DRendering,"defineCallback",proto$1._defineCallback,"getCallback",proto$1._getCallback,"registerScrollableObject",proto$1._registerScrollableObject,"disableAutoProgress",proto$1._disableAutoProgress,"loadImage",proto$1._loadImage,"log",proto$1._log,"mute",proto$1._mute]);var MugedaAPIAdapt=function(){var e=this;e._stage=null,e._Mugeda=null,e._thisAni=null};MugedaAPIAdapt.createMugedaObject=function(e,t){var r=new MugedaAPIAdapt;e.getMugedaObject=r._getMugedaObject.bind(r);var a=t.root,n=t.aniData;return r._stage=a,r._Mugeda=e,r._thisAni=new MugedaAPIThisAni({aniData:n,stage:a}),r};var proto=MugedaAPIAdapt.prototype;proto._getMugedaObject=function(){return this._thisAni},mod.namespace("Utils.MugedaAPIAdapt",MugedaAPIAdapt);var MugedaCompress={keys:["Ac","action","fM","form","tt","title","wt","width","ht","height","cl","color","sm","symbols","ly","layers","vr","version","sC","scripts","zI","zoomInfo","pd","pid","tp","type","nm","name","un","units","lI","layerId","fS","frameStart","fC","frameCount","ad","animated","vb","visible","ob","objects","pm","param","fI","fillInfo","cv","curve","kf","keyframes","md","mode","tw","tween","hK","hashKey","ix","index","rW","rawWidth","rH","rawHeight","sI","symbolId","oX","offsetX","oY","offsetY","rX","rotateCenterX","rY","rotateCenterY","it","items","nI","nodeId","gP","guidPath","ph","path","gi","guid","sm","smooth","iX","innerX","iY","innerY","uX","outerX","uY","outerY","cX","centerX","cY","centerY","ed","edges","st","section","fZ","fontSize","fT","fontStyle","fW","fontWeight","fF","fontFamily","tA","textAlign","tC","textContent","tL","tlength","tP","tprecision","tN","tDirection","tLp","tloop","tD","textDecoration","rI","rmin","rM","rmax","rT","rinterval","tD","textDecoration","cR","cornerRadius","iS","imageSrc","lC","lineCap","lJ","LineJoin","lT","lineType","lG","lineGap","fR","frameRate","iP","innerPercent","TA","trackAnchors","MT","mugedaTrackAnchors"],unzip:function(e){if(!e)return e;if(e.zip!=1)return window.HaniData.unzip(e);var t=JSON.parse(JSON.stringify(e));if(t=MugedaCompress.unzipKey(t),delete t.zip,t.rate==null&&(t.rate=12),t.width==null&&(t.width=600),t.height==null&&(t.height=400),t.guid==null&&(t.guid=""),t.title==null&&(t.title=""),t.script==null&&(t.script=""),t.loop==null&&(t.loop=!0),t.useCamera==null&&(t.useCamera=!1),t.symbols==null&&(t.symbols=[]),t.symbols.length)for(var r=t.symbols,a=0;a<r.length;a++){var n=r[a];n.runtime=!0,n.dirtyFlag=!1,MugedaCompress.unzipLayers(n.layers)}if(t.pages&&t.pages.length)for(var o=t.pages,a=0;a<o.length;a++){var s=o[a];s.runtime=!0,s.dirtyFlag=!1,MugedaCompress.unzipLayers(s.layers)}return MugedaCompress.unzipZoomInfo(t),MugedaCompress.unzipLayers(t.layers),t},unzipKey:function(data){var reg;data=JSON.stringify(data);for(var i=0;i<MugedaCompress.keys.length;i+=2)reg=eval('/"'+MugedaCompress.keys[i]+'":/g'),data=data.replace(reg,'"'+MugedaCompress.keys[i+1]+'":');return JSON.parse(data)},unzipZoomInfo:function(e){for(var t=[],r=e.zoomInfo.split(",")||[],a=0;a<r.length;a+=4){var n=r[a];if(n.indexOf("i")==0){n=n.substr(1),a++;var o=r[a];o.indexOf("t")==0?(o=o.substr(1),a++):o=null,t[n]={offsetLeft:Number(r[a]),offsetTop:Number(r[a+1]),rotation:Number(r[a+2]),zoomLevel:Number(r[a+3])},o&&(t[n].tween=o)}}e.zoomInfo=t},unzipLayers:function(e){for(var t=0;t<e.length;t++){var r=e[t];r.hide=!1,r.lock=!1;for(var a=r.units,n=0;n<a.length;n++){var o=a[n];o.animated&&MugedaCompress.unzipPath(o);for(var s=o.keyframes||[],l=0;l<s.length;l++){var _=s[l].param;MugedaCompress.unzipParam(_)}o.visible==null&&(o.visible=!0),MugedaCompress.unzipObjects(o.objects)}}},unzipPath:function(e){for(var t=e.path.split(","),r=[],a=t.shift(),n=t.shift(),o=0;o<t.length;o+=7)r.push({id:Number(t[o]),backwardX:Number(t[o+1]),backwardY:Number(t[o+2]),forwardX:Number(t[o+3]),forwardY:Number(t[o+4]),nodeX:Number(t[o+5]),nodeY:Number(t[o+6])});r.length?(e.pathLeft=Number(a),e.pathTop=Number(n),e.path=r):(delete e.path,delete e.pathLeft,delete e.pathTop)},unzipObjects:function(e){for(var t=0;t<e.length;t++){var r=e[t];r.items&&r.items.length?MugedaCompress.unzipObjects(r.items):(r.id=0,r.name="",r.items=[],r.aryAnchors=[]),MugedaCompress.unzipCurve(r),MugedaCompress.unzipParam(r.param)}},unzipCurve:function(e){var t=e.curve;if(typeof t=="string"){e.curve={};var r=t.split(","),a=r.shift()==1;e.curve.closed=a;for(var n=[],o=0;o<r.length;o+=6)n.push({backwardX:Number(r[o]),backwardY:Number(r[o+1]),forwardX:Number(r[o+2]),forwardY:Number(r[o+3]),nodeX:Number(r[o+4]),nodeY:Number(r[o+5])});e.curve.points=n}},unzipParam:function(e){e.strokeType==null&&(e.strokeType=0),e.frameRate==null&&(e.frameRate=12),e.lineCap==null&&(e.lineCap="round"),e.lineJoin==null&&(e.lineJoin="round"),e.lineType==null&&(e.lineJoin="solid");for(var t=e.m.split(";"),r=0;r<t.length;r++){var a=t[r].substr(0,1),n=t[r].substr(1);switch(a){case"L":e.left=Number(n);break;case"R":e.right=Number(n);break;case"T":e.top=Number(n);break;case"B":e.bottom=Number(n);break;case"S":e.startX=Number(n);break;case"P":e.startY=Number(n);break;case"E":e.endX=Number(n);break;case"N":e.endY=Number(n);break;case"X":e.scaleX=Number(n);break;case"Y":e.scaleY=Number(n);break;case"O":e.rotate=Number(n);break;case"W":e.lineWidth=Number(n);break;case"A":e.alpha=Number(n);break;case"C":e.strokeColor=n;break}}e.startX==null&&(e.startX=e.left),e.startY==null&&(e.startY=e.top),e.endX==null&&(e.endX=e.right),e.endY==null&&(e.endY=e.bottom),e.width=e.right-e.left,e.height=e.bottom-e.top,delete e.m,MugedaCompress.unzipFillInfo(e)},unzipFillInfo:function(e){if(e.fillInfo){for(var t=e.fillInfo.split(";"),r=Number(t[0]),a=t[1].split(","),n=t[3],o=t[4],s=t[5],l=t[6],_=t[7],c=t[8],d=[],u=0;u<a.length;u+=5)d.push({p:Number(a[u]),r:Number(a[u+1]),g:Number(a[u+2]),b:Number(a[u+3]),a:Number(a[u+4])});var f={fillStyle:r,fillImage:n,foreground:c,fillColors:d,imagePosition:o,imageSize:s,horOffset:l,verOffset:_},p=t[2].split(",");p.length!=4&&(p=[0,0,0,0]),f.fillStartPos={x:Number(p[0]),y:Number(p[1])},f.fillEndPos={x:Number(p[2]),y:Number(p[3])},e.fillInfo=f}}};mod.namespace("Utils.MugedaCompress",MugedaCompress);var ResourceLoader=function(){var e=this;e._aniDataFirstImageList=null,e._loadingPool=[],e._loadOkList=[],e._dir=null,e._scriptLoadCounter=0,e._scriptLoadProcessChangeCallback=null,e._stage=null};ResourceLoader.prototype._buildFirstPageBitmapLoadProcess=function(e){var t=this,r=goThoughFirstPageAniDataAndFindImage.call(t,e),a=[];for(var n in r)r.hasOwnProperty(n)&&a.push(r[n]);a.forEach(function(_){_.ranges.sort(function(c,d){for(var u=Math.max(c.length,d.length),f=0;f<u;f++){var p=c[f]?c[f][0]:0,v=d[f]?d[f][0]:0;if(p!==v)return p-v}})}),a.sort(function(_,c){return _.ranges[0][0][0]-c.ranges[0][0][0]}),t._aniDataFirstImageList=a.map(function(_){return _.src});var o=e.loadInfo;if(o){var s=o.backgroundImage;s&&t._aniDataFirstImageList.splice(0,0,t._dir.getFullPath(s));var l=o.logoImage;l&&t._aniDataFirstImageList.splice(0,0,t._dir.getFullPath(l))}},ResourceLoader.prototype._firstPageBitmapLoadProcess=function(){var e=this,t=e._loadingPool,r=e._aniDataFirstImageList,a=e._loadOkList;r.forEach(function(n){var o=new Image;o.src=n,t.push(o),o.onload=o.onerror=function(){var s=this,l=t.indexOf(s);t.splice(l,1);var _=s.src;a.push(_)}})},ResourceLoader._getScriptList=function(e,t,r,a){var n={},o=function(v,h){h=h||0,n[h]=n[h]||[],n[h].push(v)},s=(a.script_sub_path||".")+"/",l=e.sL;if(l){if(Mugeda.previewMode)l.cardCommon&&o("/mugeda_client_utils/js/card_common.js");else{l.jquery&&o(t.getFullPath(s+"jquery-3.7.0.min.js")),l.socketio&&(o(t.getFullPath(s+"socket.io.1.9.16.min.js")),o(t.getFullPath(s+"mugeda_connection.js"))),l.box2d&&o(t.getFullPath(s+"Box2D_v2.2.1_min.js")),l.qrcode&&(o(t.getFullPath(s+"qrcode.min.js")),o(t.getFullPath(s+"jquery.qrcode.min.js"),1));var _=a.version?(a.version[0]=="_"?"":"_")+a.version:"";if(l.cardCommon){var c=a.common_path||null;o(t.getFullPath((c?"":s)+"card_common"+_+".js",c))}}var d=l.extra;if(d&&d.length)for(var u=d.length,f=0;f<u;f++){var p=d[f];p.indexOf("://")>-1?o(p):o(t.getFullPath(p))}}return n},ResourceLoader.prototype._loadScript=function(e,t){var r=[],a=0,n=this;for(var o in e)e.hasOwnProperty(o)&&(r.push(o),a+=e[o].length);n._scriptLoadCounter=a,r.sort(function(l,_){return l-_});var s=null;loadScriptOne.bind(n)(r,e,function(){s!=n._scriptLoadCounter&&n._scriptLoadProcessChangeCallback&&(s=n._scriptLoadCounter,n._scriptLoadProcessChangeCallback()),t()})};var loadScriptOne=function(e,t,r){var a=this;if(e.length){var n=e.splice(0,1)[0],o=t[n],s=o.length;s?o.forEach(function(l){var _=new ResourceEvent("beforeload");_._url=l,_._registerCallback(function(){var c=document.createElement("script");c.src=l,c.onload=c.onerror=function(){document.body.removeChild(this),s--,a._scriptLoadCounter--,s==0&&loadScriptOne.bind(a)(e,t,r)},document.body.appendChild(c)}),_._registerFailCallback(function(){s--,a._scriptLoadCounter--,s==0&&loadScriptOne.bind(a)(e,t,r)}),a._stage._dispatchEvent(_),_._chkOk()}):loadScriptOne(e,t,r)}else r()},symHashRaw,goThoughFirstPageAniDataAndFindImage=function(e){var t=this;symHashRaw={},buildAniHash.call(t,e);var r=[];return expandLayers.call(t,e.layers,r),r},buildAniHash=function(e){symHashRaw=(function(t){var r={};return(t.symbols||[]).forEach(function(a){r[a.id]=a}),r})(e)},expandLayers=function(e,t){var r=this;e.forEach(function(a){a.units&&expandUnits.call(r,a.units,t)})},expandUnits=function(e,t){var r=this;e.forEach(function(a){var n=a.frameStart,o=n+a.frameCount,s=[n,o];a.objects&&expandObjects.call(r,a.objects,t,s)})},expandObjects=function(e,t,r){var a=this;e.forEach(function(n){handleObject.call(a,n,t,r)})},handleSymbol=function(e){var t=this,r=symHashRaw[e];if(r&&r.layers){var a={};return expandLayers.call(t,r.layers,a),a}},handleObject=function(e,t,r){if(e.param){var a=this;if(e.type===2005)var n=a._dir.getFullPath(e.param.imageSrc);else e.param.fillInfo&&e.param.fillInfo.fillImage&&(n=a._dir.getFullPath(e.param.fillInfo.fillImage));if(n&&(t[n]?t[n].ranges.push([r]):t[n]={ranges:[[r]],src:n}),e.type==2014&&e.items.forEach(function(_){handleObject.call(a,_,t,r)}),e.type==2021){var o=e.param.symbolId,s=handleSymbol.call(a,o);for(n in s)if(s.hasOwnProperty(n)){var l=s[n];l.ranges.forEach(function(_){_.splice(0,0,r)}),t[n]?l.ranges.forEach(function(_){t[n].ranges.push(_)}):t[n]=l}}}};mod.exportName(ResourceLoader.prototype,["loadScript",ResourceLoader.prototype._loadScript]),mod.namespace("Utils.ResourceLoader",ResourceLoader),Function.prototype.bind||(Function.prototype.bind=function(e){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,a=function(){},n=function(){return r.apply(this&&!this.Hanimation&&this instanceof a&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return a.prototype=this.prototype,n.prototype=new a,n});const staticProcessBehavitors=e=>{const t=getAllBehaviors(e).filter(r=>r.event==="behavior_success");if(t.length){const r=getAllObjects(e).filter(a=>a.param.action==="behavior");t.forEach(a=>{const n=a.preBehaviorId;for(let o=0;o<r.length;o++){const s=r[o];let l=!1,_=[];const c=s.param.behavior;if(c)try{_=JSON.parse(c)}catch{}if(_.forEach(d=>{if(d.id===n){const u=d.postBehaviorIds||[];u.push(a.id),d.postBehaviorIds=u,l=!0}}),l){s.param.behavior=JSON.stringify(_);break}}})}};class test extends Object{}var Mugeda$1=Browser$1._globalObject.Mugeda=Browser$1._globalObject.Mugeda||{};Mugeda$1.test=test,delete Mugeda$1.test,Mugeda$1.script=Mugeda$1.script||[],Mugeda$1.enable3DRendering=function(e){},Mugeda$1.startAnimation=function(e,t,r,a,n,o,s,l){typeof a=="string"&&(a=[a]);var _=function(M,E){for(var O=M.length,S=0,L=0;L<O&&L<6;L++)S+=M.charCodeAt(O-1-L);return S%E};a.getFullPath=function(M,E){if(typeof M!="string"&&(console.warn("error fileName: "+M),M=""),M.indexOf("/")==0||M.indexOf("://")>-1||M.substr(0,5)==="data:")return M;if(E)return Array.isArray(E)&&(E=E[Math.floor(E.length*Math.random())]),E+M;var O=_(M,a.length);if(Browser$1._supportWebP&&c&&c.metadata){var S=Browser$1._globalObject.Mugeda.imageCompression,L=c.metadata.imageCompression,D=!1;if(L&&L.length)for(var $=0;$<L.length;$++){var R=L[$],I=R.src;if(I.indexOf(M)!==-1){if(D=!0,S)for(var P=0;P<S.length;P++){var F=S[P];if(F.src.indexOf(M)!==-1&&F.nowebp){D=!1;break}}break}}D&&(M=M.replace(/\.(jpg|png)/,".webp"))}return a[O]+M},a.getSamePath=function(M){return typeof M!="string"&&(console.warn("error fileName: "+M),M=""),M.indexOf("/")==0||M.indexOf("://")>-1?M:a[0]+M},a.toString=function(){return a[Math.floor(Math.random()*a.length)]};var c=Mugeda$1.data[e];c.zip&&(c=MugedaCompress.unzip(c),c.script&&c.script.length&&(c.script=unescape(c.script))),Object.keys(Plugin._anidataPlugin).forEach(function(M){var E=Plugin._anidataPlugin[M];E&&(c=E(c))}),Browser$1._globalObject._mrmcp=Browser$1._globalObject._mrmcp||{},!Browser$1._globalObject._mrmcp.data_server&&c.weikaServer&&(Browser$1._globalObject._mrmcp.data_server=c.weikaServer),staticProcessBehavitors(c);var d=new Stage;d._rootId=Common._RegRoot(d),d._mrmcp=s||Browser$1._globalObject._mrmcp;var u=MugedaAPIAdapt.createMugedaObject(Mugeda$1,{root:d,aniData:c});d._aniData=c,Browser$1._globalObject.Mugeda.currentAni=u._thisAni,Browser$1._globalObject.Mugeda.animations=Browser$1._globalObject.Mugeda.animations||[],Browser$1._globalObject.Mugeda.animations.push(u._thisAni),Object.keys(Plugin._commonPlugin).forEach(function(M){var E=Plugin._commonPlugin[M];if(E){var O=new E;O._init(d)}});var f=new ResourceLoader;f._dir=a,f._stage=d;var p={root:d,symbols:{},bitmapRes:{},dir:a,videoRes:{}};d._resource=p;var v=!1,h=ResourceLoader._getScriptList(c,a,t,d._mrmcp);if(t){var g=(d._mrmcp.script_sub_path||".")+"/",w=a.getFullPath(g+t);h[0]=h[0]||[],h[0].push(w),v=!0}else{var y=c.script;setTimeout(function(){if(y){var M=new Function("mugeda",y);M.call(u._thisAni,u._thisAni)}[c].concat(c.pages||[]).forEach(function(E,O){var S=E.ps;S&&(M=new Function("mugeda","pageIndex",S),M.call(u._thisAni,u._thisAni,O))})}),v=!0}u._thisAni._context=p;var x=c.loadInfo||{};x.style||(x.style="default");var m=x.style||"default";if(s.loader=="brightbar"&&m=="default")var A={backgroundColor:"white",progressBackground:"#ddd",progressColor:"#555",progressPosition:"20",style:"bar"};else A=x;if(l=l||Mugeda$1.loadProcessHandleInstance,l)T=function(){return l};else if(A.style&&Mugeda$1.loadProcessHandle&&Mugeda$1.loadProcessHandle[A.style])var T=function(){return new Mugeda$1.loadProcessHandle[A.style]({loadInfo:A,thisAni:u._thisAni,stageDom:r})};var b=u._thisAni._renderManager=new renderManager({loadingPage:T,hasScript:v});p.root._renderManager=b;var C=document.createEvent("Events");C.initEvent("mugedaReady",!1,!0),document.dispatchEvent(C),f._loadScript(h,function(){if(Mugeda$1.script.length){var M=Mugeda$1.script.splice(0,1)[0];setTimeout(function(){M.call(u._thisAni,u._thisAni)})}}),f._buildFirstPageBitmapLoadProcess(c),f._firstPageBitmapLoadProcess(),setTimeout(function(){var M=dataConverter.parseAnidata(c,{resourceLoader:f,resource:p});u._thisAni._resource=M,b._resourceLoader=f,b._mugeda=u._thisAni,u._thisAni.renderManger=b,b.mainStart(M,r)})};var creationToBeLoad="creationToBeLoad";if(Mugeda$1.css3PlayerLoaded=2,Mugeda$1[creationToBeLoad]){for(var i=0;i<Mugeda$1[creationToBeLoad].length;i++)Mugeda$1[creationToBeLoad][i].start();Mugeda$1[creationToBeLoad]=[]}var randPlus=0,guidGen=function(){var e=new Date-new Date("2012/1/1")+""+Math.random().toString().substr(2,4);return Number(e).toString(36)+""+randPlus++};Mugeda$1.guidGen=guidGen,Mugeda$1.log=function(e,t){if(typeof t!="object")var r=!!t;return Mugeda$1.logConsole||(Mugeda$1.logConsole=document.createElement("div"),Mugeda$1.logConsole.style.display="block",Mugeda$1.logConsole.style.position="fixed",Mugeda$1.logConsole.style.background="rgba(0,0,0,0.8)",Mugeda$1.logConsole.style.color="#FFF",Mugeda$1.logConsole.style.width="100%",Mugeda$1.logConsole.style.maxHeight="33%",Mugeda$1.logConsole.style.overflow="auto",Mugeda$1.logConsole.style.wordWrap="break-word",document.body.appendChild(Mugeda$1.logConsole)),t=t||{},Mugeda$1.logConsole.style.left=(t.left||0)+"px",Mugeda$1.logConsole.style.top=(t.top||0)+"px",(typeof e=="string"||e)&&(Mugeda$1.logConsole.innerHTML=r&&Mugeda$1.logConsole.innerHTML?Mugeda$1.logConsole.innerHTML+"<br />"+e:e,Mugeda$1.logConsole.scrollTop=Mugeda$1.logConsole.scrollHeight),Mugeda$1.logConsole.innerHTML},Mugeda$1.getAudioCache=function(e,t){return audioCache[t]};var audioCache={};Mugeda$1.addAudioCache=function(e,t,r){audioCache[e]=t,audioCache["name_"+r]=t},Mugeda$1.removeAudioCache=function(e,t,r){delete audioCache[e],delete audioCache["name_"+r]},Mugeda$1.stopAudio=function(e){e=e||{};var t=e.audio_name||"",r=e.stop_mode||"pause",a=audioCache["name_"+t];a&&(r=="stop"&&(a.currentTime=0),a.pause())},Mugeda$1.stopAudioAll=function(){for(var e in audioCache)audioCache.hasOwnProperty(e)&&audioCache[e].readyState>0&&(audioCache[e].pause(),audioCache[e].pausedByGlobalPause=!0);var t=Browser$1._globalObject.backgroundMusic;t&&(t.pause(),t.pausedByGlobalPause=!0)},Mugeda$1.playAudioAll=function(){var e=Browser$1._globalObject.backgroundMusic;e&&e.pausedByGlobalPause&&(e.play(),e.pausedByGlobalPause=!1)},Mugeda$1.mapFrameNameId={},Mugeda$1.enableFlexibleFrameRate=function(e){};var Toast=function(){};Toast._toastQueue=[],Toast._html_encode=function(e){var t="";return e.length==0?"":(t=e.replace(/&/g,"&gt;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/ /g,"&nbsp;"),t=t.replace(/\'/g,"&#39;"),t=t.replace(/\"/g,"&quot;"),t=t.replace(/\n/g,"<br>"),t)};var getDom=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]};Toast._Type={_Toast:"toast",_Info:"info"},mod.exportName(Toast._Type,["toast",Toast._Type._Toast,"info",Toast._Type._Info]);var frameName="MugedaMessageFrame";Toast._info=function(e,t){t=t||{},t.timeout=t.timeout||t.timeout||3e3,t.type=t.type||t.type||Toast._Type._Toast,t.encode=t.encode==null?!0:t.encode;var r=document.body;if(t.type=="info"){var a=document.getElementById(frameName);a==null&&(a=getDom('<div id="'+frameName+'" style="position: fixed; top: 0; width: 100%; left: 0;z-index: 40;"></div>'),r.appendChild(a));var n=getDom('<div class="'+frameName+'_info" style="background: white;overflow: hidden; padding: 14px;'+Browser$1.prefix.css+"border-radius: 1px;"+Browser$1.prefix.css+'box-shadow: 0 0 2px #999; opacity: 0.95;margin: 4px 4px;font-size: 13px;line-height: 1.5em;color: rgba(0,0,0,0.7);">   <span>'+(t.encode?Toast._html_encode(e):e)+'</span>   <span class="MugedaClose" style="float:right;padding: 8px 0 0 8px;">关闭</span></div>');a.insertBefore(n,a.childNodes[0]),a.querySelector(".MugedaClose").addEventListener("click",function(){a.removeChild(n)})}else t.type=="toast"&&(Toast._toastQueue.push([e,t]),Toast._showNextToast())};var showing=!1;Toast._showNextToast=function(){if(!showing){var e=Toast._toastQueue;if(e.length){showing=!0;var t=e.splice(0,1)[0],r=t[1],a=t[0],n="display: "+Browser$1.prefix.css+"box;display: "+Browser$1.prefix.css+"flex;"+Browser$1.prefix.css+"box-orient: vertical;"+Browser$1.prefix.css+"flex-direction: column;"+Browser$1.prefix.css+"box-pack: center;"+Browser$1.prefix.css+"justify-content: center;"+Browser$1.prefix.css+"transition: opacity 200ms;",o=getDom('<div class="'+frameName+'_toast" style="position:fixed;width:80%;bottom:20%;left:10%;opacity:0;'+n+'">   <div style="max-width: 80%;margin:auto;background:black;opacity:0.95;color: white;padding: 4px 8px;font-size: 14px;border-radius: 12px;">'+(r.encode?Toast._html_encode(a):a)+"</div></div>"),s=document.querySelector('[data-type="stage"]');s.appendChild(o),setTimeout(function(){o.style.cssText+="opacity: 1",setTimeout(function(){o.style.cssText+="opacity: 0",setTimeout(function(){showing=!1,s.removeChild(o),Toast._showNextToast()},500)},r.timeout)},200)}}},mod.exportName(Toast,["info",Toast._info,"type",Toast._Type]),mod.namespace("Utils.Toast",Toast);var TextFieldUtils=function(){},escapeText=function(e){var t=function(n){return a[n]},r=/[&"'<>]/g,a={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","\n":"<br />"};return e.replace(r,t)};TextFieldUtils.extractFontsFromHTML=function(e){const t=new Map,a=new DOMParser().parseFromString(e,"text/html");function n(l,_){const c=l.textContent.trim();c.length>0&&(t.has(_)?t.get(_).add(c):t.set(_,new Set(c)))}function o(l){var _;if(l.nodeType===Node.TEXT_NODE){const c=l.parentNode;if((_=c==null?void 0:c.tagName)==null||_.toLowerCase(),c&&c.style&&c.style.fontFamily){const d=c.style.fontFamily;n(l,d)}}else if(l.nodeType===Node.ELEMENT_NODE)for(let c of l.childNodes)o(c)}const s=a.querySelector("head style");if(s){const l=s.sheet.cssRules;for(let _ of l)if(_.type===CSSRule.STYLE_RULE){const c=_.selectorText,d=_.style;if(d.fontFamily)switch(c){case"div":case"p":{const u=a.querySelector("div");n(u,d.fontFamily)}break}}}return o(a.body),Array.from(t,([l,_])=>({font:l,texts:Array.from(_).join("")}))},TextFieldUtils.transAniDataCss=function(e){var a;let t="";if(e){var r=(a=e==null?void 0:e.fillInfo)==null?void 0:a.fillColors[0];const n=r?"rgba("+r.r+","+r.g+","+r.b+","+r.a+")":"rgba(0,0,0,1)";t=`
      font-family: ${e.fontFamily};
      text-align: ${e.textAlign};
      color: ${n};
      font-size: ${e.fontSize}px;
      line-height: ${e.textLineHeight/100||1};
      ${e.fontWeight&&e.fontWeight!=="normal"?"font-weight: bold;":""}
      ${e.textDecoration&&e.textDecoration!=="none"?"text-decoration: underline;":""}
      ${e.fontStyle&&e.fontStyle!=="normal"?"font-style: italic;":""}`;const o=e.tO?e.tO||"hidden":"visible",s=o==="scroll"||o==="scrollNoBar"||o==="manualScroll"||o==="manualScrollNoBar";o!="visible"&&(t+="overflow: "+(s?"auto":o)+";")}return t},TextFieldUtils.initOuterCss=function(e){return`<style>
    div {
      ${this.transAniDataCss(e)}
    }
    p {
      margin-block-start: 0; margin-block-end: 0;
    }
  </style>`.replace(/\s+(?![^;]*;)/g,"")},TextFieldUtils.transText2Slate=function(e,t){const r=e.split(`
`);let a='<p">';for(let n=0;n<r.length;n++)a+="<span>"+escapeText(r[n])+"</span>",n<r.length-1&&(a+="<br />");return a+="</p>",a},TextFieldUtils.transSlate2Text=function(e){var t=new DOMParser,r=t.parseFromString(e,"text/html"),a=r.querySelector("p"),n=a.textContent;return n},mod.namespace("Utils.TextFieldUtils",TextFieldUtils)})();
